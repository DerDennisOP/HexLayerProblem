// Generated by Futhark 0.23.1

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg, const char *param_name, size_t new_value);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *cfg);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg, int n);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg, int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg, int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg, int flag);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_u8_1d;
struct futhark_u8_1d *futhark_new_u8_1d(struct futhark_context *ctx, const uint8_t *data, int64_t dim0);
struct futhark_u8_1d *futhark_new_raw_u8_1d(struct futhark_context *ctx, const unsigned char *data, int64_t offset, int64_t dim0);
int futhark_free_u8_1d(struct futhark_context *ctx, struct futhark_u8_1d *arr);
int futhark_values_u8_1d(struct futhark_context *ctx, struct futhark_u8_1d *arr, uint8_t *data);
unsigned char *futhark_values_raw_u8_1d(struct futhark_context *ctx, struct futhark_u8_1d *arr);
const int64_t *futhark_shape_u8_1d(struct futhark_context *ctx, struct futhark_u8_1d *arr);

// Opaque values



// Entry points
int futhark_entry_main(struct futhark_context *ctx, bool *out0, struct futhark_u8_1d **out1, struct futhark_u8_1d **out2, struct futhark_u8_1d **out3, struct futhark_u8_1d **out4, struct futhark_u8_1d **out5, struct futhark_u8_1d **out6);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
void futhark_context_config_set_cache_file(struct futhark_context_config *cfg, const char *f);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);
static char *strclone(const char *str);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                             const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}


static char *strclone(const char *str) {
  size_t size = strlen(str) + 1;
  char *copy = (char*) malloc(size);
  if (copy == NULL) {
    return NULL;
  }

  memcpy(copy, str, size);
  return copy;
}

// End of util.h.
// Start of cache.h

#define CACHE_HASH_SIZE 8 // In 32-bit words.

struct cache_hash {
  uint32_t hash[CACHE_HASH_SIZE];
};

// Initialise a blank cache.
static void cache_hash_init(struct cache_hash *c);

// Hash some bytes and add them to the accumulated hash.
static void cache_hash(struct cache_hash *out, const char *in, size_t n);

// Try to restore cache contents from a file with the given name.
// Assumes the cache is invalid if it contains the given hash.
// Allocates memory and reads the cache conents, which is returned in
// *buf with size *buflen.  If the cache is successfully loaded, this
// function returns 0.  Otherwise it returns nonzero.  Errno is set if
// the failure to load the cache is due to anything except invalid
// cache conents.  Note that failing to restore the cache is not
// necessarily a problem: it might just be invalid or not created yet.
static int cache_restore(const char *fname, const struct cache_hash *hash,
                         unsigned char **buf, size_t *buflen);

// Store cache contents in the given file, with the given hash.
static int cache_store(const char *fname, const struct cache_hash *hash,
                       const unsigned char *buf, size_t buflen);

// Now for the implementation.

static void cache_hash_init(struct cache_hash *c) {
  memset(c->hash, 0, CACHE_HASH_SIZE * sizeof(uint32_t));
}

static void cache_hash(struct cache_hash *out, const char *in, size_t n) {
  // Adaptation of djb2 for larger output size by storing intermediate
  // states.
  uint32_t hash = 5381;
  for (size_t i = 0; i < n; i++) {
    hash = ((hash << 5) + hash) + in[i];
    out->hash[i % CACHE_HASH_SIZE] ^= hash;
  }
}

#define CACHE_HEADER_SIZE 8
static const char cache_header[CACHE_HEADER_SIZE] = "FUTHARK\0";

static int cache_restore(const char *fname, const struct cache_hash *hash,
                         unsigned char **buf, size_t *buflen) {
  FILE *f = fopen(fname, "rb");

  if (f == NULL) {
    return 1;
  }

  char f_header[CACHE_HEADER_SIZE];

  if (fread(f_header, sizeof(char), CACHE_HEADER_SIZE, f) != CACHE_HEADER_SIZE) {
    goto error;
  }

  if (memcmp(f_header, cache_header, CACHE_HEADER_SIZE) != 0) {
    goto error;
  }

  if (fseek(f, 0, SEEK_END) != 0) {
    goto error;
  }
  int64_t f_size = (int64_t)ftell(f);
  if (fseek(f, CACHE_HEADER_SIZE, SEEK_SET) != 0) {
    goto error;
  }

  int64_t expected_size;

  if (fread(&expected_size, sizeof(int64_t), 1, f) != 1) {
    goto error;
  }

  if (f_size != expected_size) {
    errno = 0;
    goto error;
  }

  int32_t f_hash[CACHE_HASH_SIZE];

  if (fread(f_hash, sizeof(int32_t), CACHE_HASH_SIZE, f) != CACHE_HASH_SIZE) {
    goto error;
  }

  if (memcmp(f_hash, hash->hash, CACHE_HASH_SIZE) != 0) {
    errno = 0;
    goto error;
  }

  *buflen = f_size - CACHE_HEADER_SIZE - sizeof(int64_t) - CACHE_HASH_SIZE*sizeof(int32_t);
  *buf = malloc(*buflen);
  if (fread(*buf, sizeof(char), *buflen, f) != *buflen) {
    free(*buf);
    goto error;
  }

  fclose(f);

  return 0;

 error:
  fclose(f);
  return 1;
}

static int cache_store(const char *fname, const struct cache_hash *hash,
                       const unsigned char *buf, size_t buflen) {
  FILE *f = fopen(fname, "wb");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(cache_header, CACHE_HEADER_SIZE, 1, f) != 1) {
    goto error;
  }

  int64_t size = CACHE_HEADER_SIZE + sizeof(int64_t) + CACHE_HASH_SIZE*sizeof(int32_t) + buflen;

  if (fwrite(&size, sizeof(size), 1, f) != 1) {
    goto error;
  }

  if (fwrite(hash->hash, sizeof(int32_t), CACHE_HASH_SIZE, f) != CACHE_HASH_SIZE) {
    goto error;
  }

  if (fwrite(buf, sizeof(unsigned char), buflen, f) != buflen) {
    goto error;
  }

  fclose(f);

  return 0;

 error:
  fclose(f);
  return 1;
}

// End of cache.h
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

static uint16_t halfbitsnextafter(uint16_t from, uint16_t to) {
  int fabs = from & 0x7FFF, tabs = to & 0x7FFF;
  if(fabs > 0x7C00 || tabs > 0x7C00) {
    return ((from&0x7FFF)>0x7C00) ? (from|0x200) : (to|0x200);
  }
  if(from == to || !(fabs|tabs)) {
    return to;
  }
  if(!fabs) {
    return (to&0x8000)+1;
  }
  unsigned int out =
    from +
    (((from>>15)^(unsigned int)((from^(0x8000|(0x8000-(from>>15))))<(to^(0x8000|(0x8000-(to>>15))))))<<1)
    - 1;
  return out;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.
// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.
// Start of free_list.h.

typedef uintptr_t fl_mem;

// An entry in the free list.  May be invalid, to avoid having to
// deallocate entries as soon as they are removed.  There is also a
// tag, to help with memory reuse.
struct free_list_entry {
  size_t size;
  fl_mem mem;
  const char *tag;
  unsigned char valid;
};

struct free_list {
  struct free_list_entry *entries; // Pointer to entries.
  int capacity;                    // Number of entries.
  int used;                        // Number of valid entries.
  lock_t lock;                     // Thread safety.
};

static void free_list_init(struct free_list *l) {
  l->capacity = 30; // Picked arbitrarily.
  l->used = 0;
  l->entries = (struct free_list_entry*) malloc(sizeof(struct free_list_entry) * l->capacity);
  for (int i = 0; i < l->capacity; i++) {
    l->entries[i].valid = 0;
  }
  create_lock(&l->lock);
}

// Remove invalid entries from the free list.
static void free_list_pack(struct free_list *l) {
  lock_lock(&l->lock);
  int p = 0;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[p] = l->entries[i];
      if (i > p) {
        l->entries[i].valid = 0;
      }
      p++;
    }
  }

  // Now p is the number of used elements.  We don't want it to go
  // less than the default capacity (although in practice it's OK as
  // long as it doesn't become 1).
  if (p < 30) {
    p = 30;
  }
  l->entries = realloc(l->entries, p * sizeof(struct free_list_entry));
  l->capacity = p;
  lock_unlock(&l->lock);
}

static void free_list_destroy(struct free_list *l) {
  assert(l->used == 0);
  free(l->entries);
  free_lock(&l->lock);
}

// Not part of the interface, so no locking.
static int free_list_find_invalid(struct free_list *l) {
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (!l->entries[i].valid) {
      break;
    }
  }
  return i;
}

static void free_list_insert(struct free_list *l, size_t size, fl_mem mem, const char *tag) {
  lock_lock(&l->lock);
  int i = free_list_find_invalid(l);

  if (i == l->capacity) {
    // List is full; so we have to grow it.
    int new_capacity = l->capacity * 2 * sizeof(struct free_list_entry);
    l->entries = realloc(l->entries, new_capacity);
    for (int j = 0; j < l->capacity; j++) {
      l->entries[j+l->capacity].valid = 0;
    }
    l->capacity *= 2;
  }

  // Now 'i' points to the first invalid entry.
  l->entries[i].valid = 1;
  l->entries[i].size = size;
  l->entries[i].mem = mem;
  l->entries[i].tag = tag;

  l->used++;
  lock_unlock(&l->lock);
}

// Determine whether this entry in the free list is acceptable for
// satisfying the request.  Not public, so no locking.
static bool free_list_acceptable(size_t size, const char* tag, struct free_list_entry *entry) {
  // We check not just the hard requirement (is the entry acceptable
  // and big enough?) but also put a cap on how much wasted space
  // (internal fragmentation) we allow.  This is necessarily a
  // heuristic, and a crude one.

  if (!entry->valid) {
    return false;
  }

  if (size > entry->size) {
    return false;
  }

  // We know the block fits.  Now the question is whether it is too
  // big.  Our policy is as follows:
  //
  // 1) We don't care about wasted space below 4096 bytes (to avoid
  // churn in tiny allocations).
  //
  // 2) If the tag matches, we allow _any_ amount of wasted space.
  //
  // 3) Otherwise we allow up to 50% wasted space.

  if (entry->size < 4096) {
    return true;
  }

  if (entry->tag == tag) {
    return true;
  }

  if (entry->size < size * 2) {
    return true;
  }

  return false;
}

// Find and remove a memory block of the indicated tag, or if that
// does not exist, another memory block with exactly the desired size.
// Returns 0 on success.
static int free_list_find(struct free_list *l, size_t size, const char *tag,
                          size_t *size_out, fl_mem *mem_out) {
  lock_lock(&l->lock);
  int size_match = -1;
  int i;
  int ret = 1;
  for (i = 0; i < l->capacity; i++) {
    if (free_list_acceptable(size, tag, &l->entries[i]) &&
        (size_match < 0 || l->entries[i].size < l->entries[size_match].size)) {
      // If this entry is valid, has sufficient size, and is smaller than the
      // best entry found so far, use this entry.
      size_match = i;
    }
  }

  if (size_match >= 0) {
    l->entries[size_match].valid = 0;
    *size_out = l->entries[size_match].size;
    *mem_out = l->entries[size_match].mem;
    l->used--;
    ret = 0;
  }
  lock_unlock(&l->lock);
  return ret;
}

// Remove the first block in the free list.  Returns 0 if a block was
// removed, and nonzero if the free list was already empty.
static int free_list_first(struct free_list *l, fl_mem *mem_out) {
  lock_lock(&l->lock);
  int ret = 1;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[i].valid = 0;
      *mem_out = l->entries[i].mem;
      l->used--;
      ret = 0;
      break;
    }
  }
  lock_unlock(&l->lock);
  return ret;
}

// End of free_list.h.
#include <getopt.h>
#include <ctype.h>
#include <inttypes.h>
#include <unistd.h>
// Start of values.h.

//// Text I/O

typedef int (*writer)(FILE*, const void*);
typedef int (*bin_reader)(void*);
typedef int (*str_reader)(const char *, void*);

struct array_reader {
  char* elems;
  int64_t n_elems_space;
  int64_t elem_size;
  int64_t n_elems_used;
  int64_t *shape;
  str_reader elem_reader;
};

static void skipspaces(FILE *f) {
  int c;
  do {
    c = getc(f);
  } while (isspace(c));

  if (c != EOF) {
    ungetc(c, f);
  }
}

static int constituent(char c) {
  return isalnum(c) || c == '.' || c == '-' || c == '+' || c == '_';
}

// Produces an empty token only on EOF.
static void next_token(FILE *f, char *buf, int bufsize) {
 start:
  skipspaces(f);

  int i = 0;
  while (i < bufsize) {
    int c = getc(f);
    buf[i] = (char)c;

    if (c == EOF) {
      buf[i] = 0;
      return;
    } else if (c == '-' && i == 1 && buf[0] == '-') {
      // Line comment, so skip to end of line and start over.
      for (; c != '\n' && c != EOF; c = getc(f));
      goto start;
    } else if (!constituent((char)c)) {
      if (i == 0) {
        // We permit single-character tokens that are not
        // constituents; this lets things like ']' and ',' be
        // tokens.
        buf[i+1] = 0;
        return;
      } else {
        ungetc(c, f);
        buf[i] = 0;
        return;
      }
    }

    i++;
  }

  buf[bufsize-1] = 0;
}

static int next_token_is(FILE *f, char *buf, int bufsize, const char* expected) {
  next_token(f, buf, bufsize);
  return strcmp(buf, expected) == 0;
}

static void remove_underscores(char *buf) {
  char *w = buf;

  for (char *r = buf; *r; r++) {
    if (*r != '_') {
      *w++ = *r;
    }
  }

  *w++ = 0;
}

static int read_str_elem(char *buf, struct array_reader *reader) {
  int ret;
  if (reader->n_elems_used == reader->n_elems_space) {
    reader->n_elems_space *= 2;
    reader->elems = (char*) realloc(reader->elems,
                                    (size_t)(reader->n_elems_space * reader->elem_size));
  }

  ret = reader->elem_reader(buf, reader->elems + reader->n_elems_used * reader->elem_size);

  if (ret == 0) {
    reader->n_elems_used++;
  }

  return ret;
}

static int read_str_array_elems(FILE *f,
                                char *buf, int bufsize,
                                struct array_reader *reader, int64_t dims) {
  int ret;
  int first = 1;
  char *knows_dimsize = (char*) calloc((size_t)dims, sizeof(char));
  int cur_dim = (int)dims-1;
  int64_t *elems_read_in_dim = (int64_t*) calloc((size_t)dims, sizeof(int64_t));

  while (1) {
    next_token(f, buf, bufsize);

    if (strcmp(buf, "]") == 0) {
      if (knows_dimsize[cur_dim]) {
        if (reader->shape[cur_dim] != elems_read_in_dim[cur_dim]) {
          ret = 1;
          break;
        }
      } else {
        knows_dimsize[cur_dim] = 1;
        reader->shape[cur_dim] = elems_read_in_dim[cur_dim];
      }
      if (cur_dim == 0) {
        ret = 0;
        break;
      } else {
        cur_dim--;
        elems_read_in_dim[cur_dim]++;
      }
    } else if (strcmp(buf, ",") == 0) {
      next_token(f, buf, bufsize);
      if (strcmp(buf, "[") == 0) {
        if (cur_dim == dims - 1) {
          ret = 1;
          break;
        }
        first = 1;
        cur_dim++;
        elems_read_in_dim[cur_dim] = 0;
      } else if (cur_dim == dims - 1) {
        ret = read_str_elem(buf, reader);
        if (ret != 0) {
          break;
        }
        elems_read_in_dim[cur_dim]++;
      } else {
        ret = 1;
        break;
      }
    } else if (strlen(buf) == 0) {
      // EOF
      ret = 1;
      break;
    } else if (first) {
      if (strcmp(buf, "[") == 0) {
        if (cur_dim == dims - 1) {
          ret = 1;
          break;
        }
        cur_dim++;
        elems_read_in_dim[cur_dim] = 0;
      } else {
        ret = read_str_elem(buf, reader);
        if (ret != 0) {
          break;
        }
        elems_read_in_dim[cur_dim]++;
        first = 0;
      }
    } else {
      ret = 1;
      break;
    }
  }

  free(knows_dimsize);
  free(elems_read_in_dim);
  return ret;
}

static int read_str_empty_array(FILE *f, char *buf, int bufsize,
                                const char *type_name, int64_t *shape, int64_t dims) {
  if (strlen(buf) == 0) {
    // EOF
    return 1;
  }

  if (strcmp(buf, "empty") != 0) {
    return 1;
  }

  if (!next_token_is(f, buf, bufsize, "(")) {
    return 1;
  }

  for (int i = 0; i < dims; i++) {
    if (!next_token_is(f, buf, bufsize, "[")) {
      return 1;
    }

    next_token(f, buf, bufsize);

    if (sscanf(buf, "%"SCNu64, (uint64_t*)&shape[i]) != 1) {
      return 1;
    }

    if (!next_token_is(f, buf, bufsize, "]")) {
      return 1;
    }
  }

  if (!next_token_is(f, buf, bufsize, type_name)) {
    return 1;
  }


  if (!next_token_is(f, buf, bufsize, ")")) {
    return 1;
  }

  // Check whether the array really is empty.
  for (int i = 0; i < dims; i++) {
    if (shape[i] == 0) {
      return 0;
    }
  }

  // Not an empty array!
  return 1;
}

static int read_str_array(FILE *f,
                          int64_t elem_size, str_reader elem_reader,
                          const char *type_name,
                          void **data, int64_t *shape, int64_t dims) {
  int ret;
  struct array_reader reader;
  char buf[100];

  int dims_seen;
  for (dims_seen = 0; dims_seen < dims; dims_seen++) {
    if (!next_token_is(f, buf, sizeof(buf), "[")) {
      break;
    }
  }

  if (dims_seen == 0) {
    return read_str_empty_array(f, buf, sizeof(buf), type_name, shape, dims);
  }

  if (dims_seen != dims) {
    return 1;
  }

  reader.shape = shape;
  reader.n_elems_used = 0;
  reader.elem_size = elem_size;
  reader.n_elems_space = 16;
  reader.elems = (char*) realloc(*data, (size_t)(elem_size*reader.n_elems_space));
  reader.elem_reader = elem_reader;

  ret = read_str_array_elems(f, buf, sizeof(buf), &reader, dims);

  *data = reader.elems;

  return ret;
}

#define READ_STR(MACRO, PTR, SUFFIX)                                   \
  remove_underscores(buf);                                              \
  int j;                                                                \
  if (sscanf(buf, "%"MACRO"%n", (PTR*)dest, &j) == 1) {                 \
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, SUFFIX) == 0);     \
  } else {                                                              \
    return 1;                                                           \
  }

static int read_str_i8(char *buf, void* dest) {
  // Some platforms (WINDOWS) does not support scanf %hhd or its
  // cousin, %SCNi8.  Read into int first to avoid corrupting
  // memory.
  //
  // https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63417
  remove_underscores(buf);
  int j, x;
  if (sscanf(buf, "%i%n", &x, &j) == 1) {
    *(int8_t*)dest = (int8_t)x;
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, "i8") == 0);
  } else {
    return 1;
  }
}

static int read_str_u8(char *buf, void* dest) {
  // Some platforms (WINDOWS) does not support scanf %hhd or its
  // cousin, %SCNu8.  Read into int first to avoid corrupting
  // memory.
  //
  // https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63417
  remove_underscores(buf);
  int j, x;
  if (sscanf(buf, "%i%n", &x, &j) == 1) {
    *(uint8_t*)dest = (uint8_t)x;
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, "u8") == 0);
  } else {
    return 1;
  }
}

static int read_str_i16(char *buf, void* dest) {
  READ_STR(SCNi16, int16_t, "i16");
}

static int read_str_u16(char *buf, void* dest) {
  READ_STR(SCNi16, int16_t, "u16");
}

static int read_str_i32(char *buf, void* dest) {
  READ_STR(SCNi32, int32_t, "i32");
}

static int read_str_u32(char *buf, void* dest) {
  READ_STR(SCNi32, int32_t, "u32");
}

static int read_str_i64(char *buf, void* dest) {
  READ_STR(SCNi64, int64_t, "i64");
}

static int read_str_u64(char *buf, void* dest) {
  // FIXME: This is not correct, as SCNu64 only permits decimal
  // literals.  However, SCNi64 does not handle very large numbers
  // correctly (it's really for signed numbers, so that's fair).
  READ_STR(SCNu64, uint64_t, "u64");
}

static int read_str_f16(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f16.nan") == 0) {
    *(uint16_t*)dest = float2halfbits(NAN);
    return 0;
  } else if (strcmp(buf, "f16.inf") == 0) {
    *(uint16_t*)dest = float2halfbits(INFINITY);
    return 0;
  } else if (strcmp(buf, "-f16.inf") == 0) {
    *(uint16_t*)dest = float2halfbits(-INFINITY);
    return 0;
  } else {
    int j;
    float x;
    if (sscanf(buf, "%f%n", &x, &j) == 1) {
      if (strcmp(buf+j, "") == 0 || strcmp(buf+j, "f16") == 0) {
        *(uint16_t*)dest = float2halfbits(x);
        return 0;
      }
    }
    return 1;
  }
}

static int read_str_f32(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f32.nan") == 0) {
    *(float*)dest = (float)NAN;
    return 0;
  } else if (strcmp(buf, "f32.inf") == 0) {
    *(float*)dest = (float)INFINITY;
    return 0;
  } else if (strcmp(buf, "-f32.inf") == 0) {
    *(float*)dest = (float)-INFINITY;
    return 0;
  } else {
    READ_STR("f", float, "f32");
  }
}

static int read_str_f64(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f64.nan") == 0) {
    *(double*)dest = (double)NAN;
    return 0;
  } else if (strcmp(buf, "f64.inf") == 0) {
    *(double*)dest = (double)INFINITY;
    return 0;
  } else if (strcmp(buf, "-f64.inf") == 0) {
    *(double*)dest = (double)-INFINITY;
    return 0;
  } else {
    READ_STR("lf", double, "f64");
  }
}

static int read_str_bool(char *buf, void* dest) {
  if (strcmp(buf, "true") == 0) {
    *(char*)dest = 1;
    return 0;
  } else if (strcmp(buf, "false") == 0) {
    *(char*)dest = 0;
    return 0;
  } else {
    return 1;
  }
}

static int write_str_i8(FILE *out, int8_t *src) {
  return fprintf(out, "%hhdi8", *src);
}

static int write_str_u8(FILE *out, uint8_t *src) {
  return fprintf(out, "%hhuu8", *src);
}

static int write_str_i16(FILE *out, int16_t *src) {
  return fprintf(out, "%hdi16", *src);
}

static int write_str_u16(FILE *out, uint16_t *src) {
  return fprintf(out, "%huu16", *src);
}

static int write_str_i32(FILE *out, int32_t *src) {
  return fprintf(out, "%di32", *src);
}

static int write_str_u32(FILE *out, uint32_t *src) {
  return fprintf(out, "%uu32", *src);
}

static int write_str_i64(FILE *out, int64_t *src) {
  return fprintf(out, "%"PRIi64"i64", *src);
}

static int write_str_u64(FILE *out, uint64_t *src) {
  return fprintf(out, "%"PRIu64"u64", *src);
}

static int write_str_f16(FILE *out, uint16_t *src) {
  float x = halfbits2float(*src);
  if (isnan(x)) {
    return fprintf(out, "f16.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f16.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f16.inf");
  } else {
    return fprintf(out, "%.6ff16", x);
  }
}

static int write_str_f32(FILE *out, float *src) {
  float x = *src;
  if (isnan(x)) {
    return fprintf(out, "f32.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f32.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f32.inf");
  } else {
    return fprintf(out, "%.6ff32", x);
  }
}

static int write_str_f64(FILE *out, double *src) {
  double x = *src;
  if (isnan(x)) {
    return fprintf(out, "f64.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f64.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f64.inf");
  } else {
    return fprintf(out, "%.6ff64", *src);
  }
}

static int write_str_bool(FILE *out, void *src) {
  return fprintf(out, *(char*)src ? "true" : "false");
}

//// Binary I/O

#define BINARY_FORMAT_VERSION 2
#define IS_BIG_ENDIAN (!*(unsigned char *)&(uint16_t){1})

static void flip_bytes(size_t elem_size, unsigned char *elem) {
  for (size_t j=0; j<elem_size/2; j++) {
    unsigned char head = elem[j];
    size_t tail_index = elem_size-1-j;
    elem[j] = elem[tail_index];
    elem[tail_index] = head;
  }
}

// On Windows we need to explicitly set the file mode to not mangle
// newline characters.  On *nix there is no difference.
#ifdef _WIN32
#include <io.h>
#include <fcntl.h>
static void set_binary_mode(FILE *f) {
  setmode(fileno(f), O_BINARY);
}
#else
static void set_binary_mode(FILE *f) {
  (void)f;
}
#endif

static int read_byte(FILE *f, void* dest) {
  size_t num_elems_read = fread(dest, 1, 1, f);
  return num_elems_read == 1 ? 0 : 1;
}

//// Types

struct primtype_info_t {
  const char binname[4]; // Used for parsing binary data.
  const char* type_name; // Same name as in Futhark.
  const int64_t size; // in bytes
  const writer write_str; // Write in text format.
  const str_reader read_str; // Read in text format.
};

static const struct primtype_info_t i8_info =
  {.binname = "  i8", .type_name = "i8",   .size = 1,
   .write_str = (writer)write_str_i8, .read_str = (str_reader)read_str_i8};
static const struct primtype_info_t i16_info =
  {.binname = " i16", .type_name = "i16",  .size = 2,
   .write_str = (writer)write_str_i16, .read_str = (str_reader)read_str_i16};
static const struct primtype_info_t i32_info =
  {.binname = " i32", .type_name = "i32",  .size = 4,
   .write_str = (writer)write_str_i32, .read_str = (str_reader)read_str_i32};
static const struct primtype_info_t i64_info =
  {.binname = " i64", .type_name = "i64",  .size = 8,
   .write_str = (writer)write_str_i64, .read_str = (str_reader)read_str_i64};
static const struct primtype_info_t u8_info =
  {.binname = "  u8", .type_name = "u8",   .size = 1,
   .write_str = (writer)write_str_u8, .read_str = (str_reader)read_str_u8};
static const struct primtype_info_t u16_info =
  {.binname = " u16", .type_name = "u16",  .size = 2,
   .write_str = (writer)write_str_u16, .read_str = (str_reader)read_str_u16};
static const struct primtype_info_t u32_info =
  {.binname = " u32", .type_name = "u32",  .size = 4,
   .write_str = (writer)write_str_u32, .read_str = (str_reader)read_str_u32};
static const struct primtype_info_t u64_info =
  {.binname = " u64", .type_name = "u64",  .size = 8,
   .write_str = (writer)write_str_u64, .read_str = (str_reader)read_str_u64};
static const struct primtype_info_t f16_info =
  {.binname = " f16", .type_name = "f16",  .size = 2,
   .write_str = (writer)write_str_f16, .read_str = (str_reader)read_str_f16};
static const struct primtype_info_t f32_info =
  {.binname = " f32", .type_name = "f32",  .size = 4,
   .write_str = (writer)write_str_f32, .read_str = (str_reader)read_str_f32};
static const struct primtype_info_t f64_info =
  {.binname = " f64", .type_name = "f64",  .size = 8,
   .write_str = (writer)write_str_f64, .read_str = (str_reader)read_str_f64};
static const struct primtype_info_t bool_info =
  {.binname = "bool", .type_name = "bool", .size = 1,
   .write_str = (writer)write_str_bool, .read_str = (str_reader)read_str_bool};

static const struct primtype_info_t* primtypes[] = {
  &i8_info, &i16_info, &i32_info, &i64_info,
  &u8_info, &u16_info, &u32_info, &u64_info,
  &f16_info, &f32_info, &f64_info,
  &bool_info,
  NULL // NULL-terminated
};

// General value interface.  All endian business taken care of at
// lower layers.

static int read_is_binary(FILE *f) {
  skipspaces(f);
  int c = getc(f);
  if (c == 'b') {
    int8_t bin_version;
    int ret = read_byte(f, &bin_version);

    if (ret != 0) { futhark_panic(1, "binary-input: could not read version.\n"); }

    if (bin_version != BINARY_FORMAT_VERSION) {
      futhark_panic(1, "binary-input: File uses version %i, but I only understand version %i.\n",
            bin_version, BINARY_FORMAT_VERSION);
    }

    return 1;
  }
  ungetc(c, f);
  return 0;
}

static const struct primtype_info_t* read_bin_read_type_enum(FILE *f) {
  char read_binname[4];

  int num_matched = fscanf(f, "%4c", read_binname);
  if (num_matched != 1) { futhark_panic(1, "binary-input: Couldn't read element type.\n"); }

  const struct primtype_info_t **type = primtypes;

  for (; *type != NULL; type++) {
    // I compare the 4 characters manually instead of using strncmp because
    // this allows any value to be used, also NULL bytes
    if (memcmp(read_binname, (*type)->binname, 4) == 0) {
      return *type;
    }
  }
  futhark_panic(1, "binary-input: Did not recognize the type '%s'.\n", read_binname);
  return NULL;
}

static void read_bin_ensure_scalar(FILE *f, const struct primtype_info_t *expected_type) {
  int8_t bin_dims;
  int ret = read_byte(f, &bin_dims);
  if (ret != 0) { futhark_panic(1, "binary-input: Couldn't get dims.\n"); }

  if (bin_dims != 0) {
    futhark_panic(1, "binary-input: Expected scalar (0 dimensions), but got array with %i dimensions.\n",
          bin_dims);
  }

  const struct primtype_info_t *bin_type = read_bin_read_type_enum(f);
  if (bin_type != expected_type) {
    futhark_panic(1, "binary-input: Expected scalar of type %s but got scalar of type %s.\n",
          expected_type->type_name,
          bin_type->type_name);
  }
}

//// High-level interface

static int read_bin_array(FILE *f,
                          const struct primtype_info_t *expected_type, void **data, int64_t *shape, int64_t dims) {
  int ret;

  int8_t bin_dims;
  ret = read_byte(f, &bin_dims);
  if (ret != 0) { futhark_panic(1, "binary-input: Couldn't get dims.\n"); }

  if (bin_dims != dims) {
    futhark_panic(1, "binary-input: Expected %i dimensions, but got array with %i dimensions.\n",
          dims, bin_dims);
  }

  const struct primtype_info_t *bin_primtype = read_bin_read_type_enum(f);
  if (expected_type != bin_primtype) {
    futhark_panic(1, "binary-input: Expected %iD-array with element type '%s' but got %iD-array with element type '%s'.\n",
          dims, expected_type->type_name, dims, bin_primtype->type_name);
  }

  int64_t elem_count = 1;
  for (int i=0; i<dims; i++) {
    int64_t bin_shape;
    ret = (int)fread(&bin_shape, sizeof(bin_shape), 1, f);
    if (ret != 1) {
      futhark_panic(1, "binary-input: Couldn't read size for dimension %i of array.\n", i);
    }
    if (IS_BIG_ENDIAN) {
      flip_bytes(sizeof(bin_shape), (unsigned char*) &bin_shape);
    }
    elem_count *= bin_shape;
    shape[i] = bin_shape;
  }

  int64_t elem_size = expected_type->size;
  void* tmp = realloc(*data, (size_t)(elem_count * elem_size));
  if (tmp == NULL) {
    futhark_panic(1, "binary-input: Failed to allocate array of size %i.\n",
          elem_count * elem_size);
  }
  *data = tmp;

  int64_t num_elems_read = (int64_t)fread(*data, (size_t)elem_size, (size_t)elem_count, f);
  if (num_elems_read != elem_count) {
    futhark_panic(1, "binary-input: tried to read %i elements of an array, but only got %i elements.\n",
          elem_count, num_elems_read);
  }

  // If we're on big endian platform we must change all multibyte elements
  // from using little endian to big endian
  if (IS_BIG_ENDIAN && elem_size != 1) {
    flip_bytes((size_t)elem_size, (unsigned char*) *data);
  }

  return 0;
}

static int read_array(FILE *f, const struct primtype_info_t *expected_type, void **data, int64_t *shape, int64_t dims) {
  if (!read_is_binary(f)) {
    return read_str_array(f, expected_type->size, (str_reader)expected_type->read_str, expected_type->type_name, data, shape, dims);
  } else {
    return read_bin_array(f, expected_type, data, shape, dims);
  }
}

static int end_of_input(FILE *f) {
  skipspaces(f);
  char token[2];
  next_token(f, token, sizeof(token));
  if (strcmp(token, "") == 0) {
    return 0;
  } else {
    return 1;
  }
}

static int write_str_array(FILE *out,
                           const struct primtype_info_t *elem_type,
                           const unsigned char *data,
                           const int64_t *shape,
                           int8_t rank) {
  if (rank==0) {
    elem_type->write_str(out, (const void*)data);
  } else {
    int64_t len = (int64_t)shape[0];
    int64_t slice_size = 1;

    int64_t elem_size = elem_type->size;
    for (int8_t i = 1; i < rank; i++) {
      slice_size *= shape[i];
    }

    if (len*slice_size == 0) {
      fprintf(out, "empty(");
      for (int64_t i = 0; i < rank; i++) {
        fprintf(out, "[%"PRIi64"]", shape[i]);
      }
      fprintf(out, "%s", elem_type->type_name);
      fprintf(out, ")");
    } else if (rank==1) {
      fputc('[', out);
      for (int64_t i = 0; i < len; i++) {
        elem_type->write_str(out, (const void*) (data + i * elem_size));
        if (i != len-1) {
          fprintf(out, ", ");
        }
      }
      fputc(']', out);
    } else {
      fputc('[', out);
      for (int64_t i = 0; i < len; i++) {
        write_str_array(out, elem_type, data + i * slice_size * elem_size, shape+1, rank-1);
        if (i != len-1) {
          fprintf(out, ", ");
        }
      }
      fputc(']', out);
    }
  }
  return 0;
}

static int write_bin_array(FILE *out,
                           const struct primtype_info_t *elem_type,
                           const unsigned char *data,
                           const int64_t *shape,
                           int8_t rank) {
  int64_t num_elems = 1;
  for (int64_t i = 0; i < rank; i++) {
    num_elems *= shape[i];
  }

  fputc('b', out);
  fputc((char)BINARY_FORMAT_VERSION, out);
  fwrite(&rank, sizeof(int8_t), 1, out);
  fwrite(elem_type->binname, 4, 1, out);
  if (shape != NULL) {
    fwrite(shape, sizeof(int64_t), (size_t)rank, out);
  }

  if (IS_BIG_ENDIAN) {
    for (int64_t i = 0; i < num_elems; i++) {
      const unsigned char *elem = data+i*elem_type->size;
      for (int64_t j = 0; j < elem_type->size; j++) {
        fwrite(&elem[elem_type->size-j], 1, 1, out);
      }
    }
  } else {
    fwrite(data, (size_t)elem_type->size, (size_t)num_elems, out);
  }

  return 0;
}

static int write_array(FILE *out, int write_binary,
                       const struct primtype_info_t *elem_type,
                       const void *data,
                       const int64_t *shape,
                       const int8_t rank) {
  if (write_binary) {
    return write_bin_array(out, elem_type, data, shape, rank);
  } else {
    return write_str_array(out, elem_type, data, shape, rank);
  }
}

static int read_scalar(FILE *f,
                       const struct primtype_info_t *expected_type, void *dest) {
  if (!read_is_binary(f)) {
    char buf[100];
    next_token(f, buf, sizeof(buf));
    return expected_type->read_str(buf, dest);
  } else {
    read_bin_ensure_scalar(f, expected_type);
    size_t elem_size = (size_t)expected_type->size;
    size_t num_elems_read = fread(dest, elem_size, 1, f);
    if (IS_BIG_ENDIAN) {
      flip_bytes(elem_size, (unsigned char*) dest);
    }
    return num_elems_read == 1 ? 0 : 1;
  }
}

static int write_scalar(FILE *out, int write_binary, const struct primtype_info_t *type, void *src) {
  if (write_binary) {
    return write_bin_array(out, type, src, NULL, 0);
  } else {
    return type->write_str(out, src);
  }
}

// End of values.h.

static int binary_output = 0;
static int print_result = 1;
static int print_report = 0;
static FILE *runtime_file;
static int perform_warmup = 0;
static int num_runs = 1;
static const char *entry_point = "main";
// Start of tuning.h.

static char* load_tuning_file(const char *fname,
                              void *cfg,
                              int (*set_tuning_param)(void*, const char*, size_t)) {
  const int max_line_len = 1024;
  char* line = (char*) malloc(max_line_len);

  FILE *f = fopen(fname, "r");

  if (f == NULL) {
    snprintf(line, max_line_len, "Cannot open file: %s", strerror(errno));
    return line;
  }

  int lineno = 0;
  while (fgets(line, max_line_len, f) != NULL) {
    lineno++;
    char *eql = strstr(line, "=");
    if (eql) {
      *eql = 0;
      int value = atoi(eql+1);
      if (set_tuning_param(cfg, line, (size_t)value) != 0) {
        char* err = (char*) malloc(max_line_len + 50);
        snprintf(err, max_line_len + 50, "Unknown name '%s' on line %d.", line, lineno);
        free(line);
        return err;
      }
    } else {
      snprintf(line, max_line_len, "Invalid line %d (must be of form 'name=int').",
               lineno);
      return line;
    }
  }

  free(line);

  return NULL;
}

// End of tuning.h.

int parse_options(struct futhark_context_config *cfg, int argc, char *const argv[])
{
    int ch;
    static struct option long_options[] = {{"write-runtime-to", required_argument, NULL, 1}, {"runs", required_argument, NULL, 2}, {"debugging", no_argument, NULL, 3}, {"log", no_argument, NULL, 4}, {"entry-point", required_argument, NULL, 5}, {"binary-output", no_argument, NULL, 6}, {"no-print-result", no_argument, NULL, 7}, {"help", no_argument, NULL, 8}, {"print-params", no_argument, NULL, 9}, {"param", required_argument, NULL, 10}, {"tuning", required_argument, NULL, 11}, {"cache-file", required_argument, NULL, 12}, {"profile", no_argument, NULL, 13}, {"num-threads", required_argument, NULL, 14}, {0, 0, 0, 0}};
    static char *option_descriptions = "  -t/--write-runtime-to FILE Print the time taken to execute the program to the indicated file, an integral number of microseconds.\n  -r/--runs INT              Perform NUM runs of the program.\n  -D/--debugging             Perform possibly expensive internal correctness checks and verbose logging.\n  -L/--log                   Print various low-overhead logging information to stderr while running.\n  -e/--entry-point NAME      The entry point to run. Defaults to main.\n  -b/--binary-output         Print the program result in the binary output format.\n  -n/--no-print-result       Do not print the program result.\n  -h/--help                  Print help information and exit.\n  --print-params             Print all tuning parameters that can be set with --param or --tuning.\n  --param ASSIGNMENT         Set a tuning parameter to the given value.\n  --tuning FILE              Read size=value assignments from the given file.\n  --cache-file FILE          Store program cache here.\n  -P/--profile               Gather profiling information.\n  --num-threads INT          Set number of threads used for execution.\n";
    
    while ((ch = getopt_long(argc, argv, ":t:r:DLe:bnhP", long_options, NULL)) != -1) {
        if (ch == 1 || ch == 't') {
            runtime_file = fopen(optarg, "w");
            if (runtime_file == NULL)
                futhark_panic(1, "Cannot open %s: %s\n", optarg, strerror(errno));
        }
        if (ch == 2 || ch == 'r') {
            num_runs = atoi(optarg);
            perform_warmup = 1;
            if (num_runs <= 0)
                futhark_panic(1, "Need a positive number of runs, not %s\n", optarg);
        }
        if (ch == 3 || ch == 'D') {
            futhark_context_config_set_debugging(cfg, 1);
            print_report = 1;
        }
        if (ch == 4 || ch == 'L') {
            futhark_context_config_set_logging(cfg, 1);
            print_report = 1;
        }
        if (ch == 5 || ch == 'e') {
            if (entry_point != NULL)
                entry_point = optarg;
        }
        if (ch == 6 || ch == 'b')
            binary_output = 1;
        if (ch == 7 || ch == 'n')
            print_result = 0;
        if (ch == 8 || ch == 'h') {
            printf("Usage: %s [OPTION]...\nOptions:\n\n%s\nFor more information, consult the Futhark User's Guide or the man pages.\n", fut_progname, option_descriptions);
            exit(0);
        }
        if (ch == 9) {
            int n = futhark_get_tuning_param_count();
            
            for (int i = 0; i < n; i++)
                printf("%s (%s)\n", futhark_get_tuning_param_name(i), futhark_get_tuning_param_class(i));
            exit(0);
        }
        if (ch == 10) {
            char *name = optarg;
            char *equals = strstr(optarg, "=");
            char *value_str = equals != NULL ? equals + 1 : optarg;
            int value = atoi(value_str);
            
            if (equals != NULL) {
                *equals = 0;
                if (futhark_context_config_set_tuning_param(cfg, name, (size_t) value) != 0)
                    futhark_panic(1, "Unknown size: %s\n", name);
            } else
                futhark_panic(1, "Invalid argument for size option: %s\n", optarg);
        }
        if (ch == 11) {
            char *ret = load_tuning_file(optarg, cfg, (int (*)(void *, const char *, size_t)) futhark_context_config_set_tuning_param);
            
            if (ret != NULL)
                futhark_panic(1, "When loading tuning from '%s': %s\n", optarg, ret);
        }
        if (ch == 12)
            futhark_context_config_set_cache_file(cfg, optarg);
        if (ch == 13 || ch == 'P')
            futhark_context_config_set_profiling(cfg, 1);
        if (ch == 14)
            futhark_context_config_set_num_threads(cfg, atoi(optarg));
        if (ch == ':')
            futhark_panic(-1, "Missing argument for option %s\n", argv[optind - 1]);
        if (ch == '?') {
            fprintf(stderr, "Usage: %s [OPTIONS]...\nOptions:\n\n%s\n", fut_progname, "  -t/--write-runtime-to FILE Print the time taken to execute the program to the indicated file, an integral number of microseconds.\n  -r/--runs INT              Perform NUM runs of the program.\n  -D/--debugging             Perform possibly expensive internal correctness checks and verbose logging.\n  -L/--log                   Print various low-overhead logging information to stderr while running.\n  -e/--entry-point NAME      The entry point to run. Defaults to main.\n  -b/--binary-output         Print the program result in the binary output format.\n  -n/--no-print-result       Do not print the program result.\n  -h/--help                  Print help information and exit.\n  --print-params             Print all tuning parameters that can be set with --param or --tuning.\n  --param ASSIGNMENT         Set a tuning parameter to the given value.\n  --tuning FILE              Read size=value assignments from the given file.\n  --cache-file FILE          Store program cache here.\n  -P/--profile               Gather profiling information.\n  --num-threads INT          Set number of threads used for execution.\n");
            futhark_panic(1, "Unknown option: %s\n", argv[optind - 1]);
        }
    }
    return optind;
}
static int futrts_cli_entry_main(struct futhark_context *ctx)
{
    int64_t t_start, t_end;
    int time_runs = 0, profile_run = 0;
    int retval = 0;
    
    // We do not want to profile all the initialisation.
    futhark_context_pause_profiling(ctx);
    // Declare and read input.
    set_binary_mode(stdin);
    if (end_of_input(stdin) != 0)
        futhark_panic(1, "Expected EOF on stdin after reading input for \"%s\".\n", "main");
    
    bool result_0;
    struct futhark_u8_1d * result_1;
    struct futhark_u8_1d * result_2;
    struct futhark_u8_1d * result_3;
    struct futhark_u8_1d * result_4;
    struct futhark_u8_1d * result_5;
    struct futhark_u8_1d * result_6;
    
    if (perform_warmup) {
        int r;
        
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_main(ctx, &result_0, &result_1, &result_2, &result_3, &result_4, &result_5, &result_6);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        ;
        assert(futhark_free_u8_1d(ctx, result_1) == 0);
        assert(futhark_free_u8_1d(ctx, result_2) == 0);
        assert(futhark_free_u8_1d(ctx, result_3) == 0);
        assert(futhark_free_u8_1d(ctx, result_4) == 0);
        assert(futhark_free_u8_1d(ctx, result_5) == 0);
        assert(futhark_free_u8_1d(ctx, result_6) == 0);
    }
    time_runs = 1;
    // Proper run.
    for (int run = 0; run < num_runs; run++) {
        // Only profile last run.
        profile_run = run == num_runs - 1;
        
        int r;
        
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_main(ctx, &result_0, &result_1, &result_2, &result_3, &result_4, &result_5, &result_6);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        if (run < num_runs - 1) {
            ;
            assert(futhark_free_u8_1d(ctx, result_1) == 0);
            assert(futhark_free_u8_1d(ctx, result_2) == 0);
            assert(futhark_free_u8_1d(ctx, result_3) == 0);
            assert(futhark_free_u8_1d(ctx, result_4) == 0);
            assert(futhark_free_u8_1d(ctx, result_5) == 0);
            assert(futhark_free_u8_1d(ctx, result_6) == 0);
        }
    }
    if (print_result) {
        // Print the final result.
        if (binary_output)
            set_binary_mode(stdout);
        write_scalar(stdout, binary_output, &bool_info, &result_0);
        printf("\n");
        {
            uint8_t *arr = calloc(futhark_shape_u8_1d(ctx, result_1)[0], u8_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_u8_1d(ctx, result_1, arr) == 0);
            assert(futhark_context_sync(ctx) == 0);
            write_array(stdout, binary_output, &u8_info, arr, futhark_shape_u8_1d(ctx, result_1), 1);
            free(arr);
        }
        printf("\n");
        {
            uint8_t *arr = calloc(futhark_shape_u8_1d(ctx, result_2)[0], u8_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_u8_1d(ctx, result_2, arr) == 0);
            assert(futhark_context_sync(ctx) == 0);
            write_array(stdout, binary_output, &u8_info, arr, futhark_shape_u8_1d(ctx, result_2), 1);
            free(arr);
        }
        printf("\n");
        {
            uint8_t *arr = calloc(futhark_shape_u8_1d(ctx, result_3)[0], u8_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_u8_1d(ctx, result_3, arr) == 0);
            assert(futhark_context_sync(ctx) == 0);
            write_array(stdout, binary_output, &u8_info, arr, futhark_shape_u8_1d(ctx, result_3), 1);
            free(arr);
        }
        printf("\n");
        {
            uint8_t *arr = calloc(futhark_shape_u8_1d(ctx, result_4)[0], u8_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_u8_1d(ctx, result_4, arr) == 0);
            assert(futhark_context_sync(ctx) == 0);
            write_array(stdout, binary_output, &u8_info, arr, futhark_shape_u8_1d(ctx, result_4), 1);
            free(arr);
        }
        printf("\n");
        {
            uint8_t *arr = calloc(futhark_shape_u8_1d(ctx, result_5)[0], u8_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_u8_1d(ctx, result_5, arr) == 0);
            assert(futhark_context_sync(ctx) == 0);
            write_array(stdout, binary_output, &u8_info, arr, futhark_shape_u8_1d(ctx, result_5), 1);
            free(arr);
        }
        printf("\n");
        {
            uint8_t *arr = calloc(futhark_shape_u8_1d(ctx, result_6)[0], u8_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_u8_1d(ctx, result_6, arr) == 0);
            assert(futhark_context_sync(ctx) == 0);
            write_array(stdout, binary_output, &u8_info, arr, futhark_shape_u8_1d(ctx, result_6), 1);
            free(arr);
        }
        printf("\n");
    }
    
  print_end:
    { }
    ;
    assert(futhark_free_u8_1d(ctx, result_1) == 0);
    assert(futhark_free_u8_1d(ctx, result_2) == 0);
    assert(futhark_free_u8_1d(ctx, result_3) == 0);
    assert(futhark_free_u8_1d(ctx, result_4) == 0);
    assert(futhark_free_u8_1d(ctx, result_5) == 0);
    assert(futhark_free_u8_1d(ctx, result_6) == 0);
    return retval;
}
typedef int entry_point_fun(struct futhark_context *);
struct entry_point_entry {
    const char *name;
    entry_point_fun *fun;
};
int main(int argc, char **argv)
{
    int retval = 0;
    
    fut_progname = argv[0];
    
    struct futhark_context_config *cfg = futhark_context_config_new();
    
    assert(cfg != NULL);
    
    int parsed_options = parse_options(cfg, argc, argv);
    
    argc -= parsed_options;
    argv += parsed_options;
    if (argc != 0)
        futhark_panic(1, "Excess non-option: %s\n", argv[0]);
    
    struct futhark_context *ctx = futhark_context_new(cfg);
    
    assert(ctx != NULL);
    
    char *error = futhark_context_get_error(ctx);
    
    if (error != NULL)
        futhark_panic(1, "%s", error);
    
    struct entry_point_entry entry_points[] = {{.name ="main", .fun =futrts_cli_entry_main}};
    
    if (entry_point != NULL) {
        int num_entry_points = sizeof(entry_points) / sizeof(entry_points[0]);
        entry_point_fun *entry_point_fun = NULL;
        
        for (int i = 0; i < num_entry_points; i++) {
            if (strcmp(entry_points[i].name, entry_point) == 0) {
                entry_point_fun = entry_points[i].fun;
                break;
            }
        }
        if (entry_point_fun == NULL) {
            fprintf(stderr, "No entry point '%s'.  Select another with --entry-point.  Options are:\n", entry_point);
            for (int i = 0; i < num_entry_points; i++)
                fprintf(stderr, "%s\n", entry_points[i].name);
            return 1;
        }
        if (isatty(fileno(stdin))) {
            fprintf(stderr, "Reading input from TTY.\n");
            fprintf(stderr, "Send EOF (CTRL-d) after typing all input values.\n");
        }
        retval = entry_point_fun(ctx);
        if (runtime_file != NULL)
            fclose(runtime_file);
        if (print_report) {
            char *report = futhark_context_report(ctx);
            
            fputs(report, stderr);
            free(report);
        }
    }
    futhark_context_free(ctx);
    futhark_context_config_free(cfg);
    return retval;
}

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

#if ISPC

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  // This strange pattern is used to prevent the ISPC compiler from
  // causing SIGFPEs and bogus results on divisions where inactive lanes
  // have 0-valued divisors. It ensures that any inactive lane instead
  // has a divisor of 1. https://github.com/ispc/ispc/issues/2292
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  

  return x / ys;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  

  return x / ys;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  

  return (x + y - 1) / ys;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return (x + y - 1) / ys;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return (x + y - 1) / ys;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return (x + y - 1) / ys;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  

  return x % ys;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : (x + y - 1) / ys;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : (x + y - 1) / ys;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : (x + y - 1) / ys;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : (x + y - 1) / ys;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int8_t q = x / ys;
  int8_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int16_t q = x / ys;
  int16_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  int32_t q = x / ys;
  int32_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int64_t q = x / ys;
  int64_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int8_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int16_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int32_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int64_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

#else

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

#endif

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x != 0;
}

static inline bool itob_i16_bool(int16_t x) {
  return x != 0;
}

static inline bool itob_i32_bool(int32_t x) {
  return x != 0;
}

static inline bool itob_i64_bool(int64_t x) {
  return x != 0;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__) || defined(ISPC)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t  futrts_umul_hi8 ( uint8_t a,  uint8_t b) { return mul_hi(a, b); }
static uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return mul_hi(a, b); }
static uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return mul_hi(a, b); }
static uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) { return mul_hi(a, b); }
static uint8_t  futrts_smul_hi8 ( int8_t a,  int8_t b) { return mul_hi(a, b); }
static uint16_t futrts_smul_hi16(int16_t a, int16_t b) { return mul_hi(a, b); }
static uint32_t futrts_smul_hi32(int32_t a, int32_t b) { return mul_hi(a, b); }
static uint64_t futrts_smul_hi64(int64_t a, int64_t b) { return mul_hi(a, b); }
#elif defined(__CUDA_ARCH__)
static  uint8_t futrts_umul_hi8(uint8_t a, uint8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
static uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
static uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return __umulhi(a, b); }
static uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) { return __umul64hi(a, b); }
static  uint8_t futrts_smul_hi8 ( int8_t a, int8_t b) { return ((int16_t)a) * ((int16_t)b) >> 8; }
static uint16_t futrts_smul_hi16(int16_t a, int16_t b) { return ((int32_t)a) * ((int32_t)b) >> 16; }
static uint32_t futrts_smul_hi32(int32_t a, int32_t b) { return __mulhi(a, b); }
static uint64_t futrts_smul_hi64(int64_t a, int64_t b) { return __mul64hi(a, b); }
#elif ISPC
static uint8_t futrts_umul_hi8(uint8_t a, uint8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
static uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
static uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return ((uint64_t)a) * ((uint64_t)b) >> 32; }
static uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) {
  uint64_t ah = a >> 32;
  uint64_t al = a & 0xffffffff;
  uint64_t bh = b >> 32;
  uint64_t bl = b & 0xffffffff;

  uint64_t p1 = al * bl;
  uint64_t p2 = al * bh;
  uint64_t p3 = ah * bl;
  uint64_t p4 = ah * bh;

  uint64_t p1h = p1 >> 32;
  uint64_t p2h = p2 >> 32;
  uint64_t p3h = p3 >> 32;
  uint64_t p2l = p2 & 0xffffffff;
  uint64_t p3l = p3 & 0xffffffff;

  uint64_t l = p1h + p2l + p3l;
  uint64_t m = (p2 >> 32) + (p3 >> 32);
  uint64_t h = (l >> 32) + m + p4;

  return h;
}
static  int8_t futrts_smul_hi8 ( int8_t a,  int8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
static int16_t futrts_smul_hi16(int16_t a, int16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
static int32_t futrts_smul_hi32(int32_t a, int32_t b) { return ((uint64_t)a) * ((uint64_t)b) >> 32; }
static int64_t futrts_smul_hi64(int64_t a, int64_t b) {
  uint64_t ah = a >> 32;
  uint64_t al = a & 0xffffffff;
  uint64_t bh = b >> 32;
  uint64_t bl = b & 0xffffffff;

  uint64_t p1 =  al * bl;
  int64_t  p2 = al * bh;
  int64_t  p3 = ah * bl;
  uint64_t p4 =  ah * bh;

  uint64_t p1h = p1 >> 32;
  uint64_t p2h = p2 >> 32;
  uint64_t p3h = p3 >> 32;
  uint64_t p2l = p2 & 0xffffffff;
  uint64_t p3l = p3 & 0xffffffff;

  uint64_t l = p1h + p2l + p3l;
  uint64_t m = (p2 >> 32) + (p3 >> 32);
  uint64_t h = (l >> 32) + m + p4;

  return h;
}

#else // Not OpenCL, ISPC, or CUDA, but plain C.
static uint8_t futrts_umul_hi8(uint8_t a, uint8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
static uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
static uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return ((uint64_t)a) * ((uint64_t)b) >> 32; }
static uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) { return ((__uint128_t)a) * ((__uint128_t)b) >> 64; }
static int8_t futrts_smul_hi8(int8_t a, int8_t b) { return ((int16_t)a) * ((int16_t)b) >> 8; }
static int16_t futrts_smul_hi16(int16_t a, int16_t b) { return ((int32_t)a) * ((int32_t)b) >> 16; }
static int32_t futrts_smul_hi32(int32_t a, int32_t b) { return ((int64_t)a) * ((int64_t)b) >> 32; }
static int64_t futrts_smul_hi64(int64_t a, int64_t b) { return ((__int128_t)a) * ((__int128_t)b) >> 64; }
#endif

#if defined(__OPENCL_VERSION__)
static  uint8_t futrts_umad_hi8 ( uint8_t a,  uint8_t b,  uint8_t c) { return mad_hi(a, b, c); }
static uint16_t futrts_umad_hi16(uint16_t a, uint16_t b, uint16_t c) { return mad_hi(a, b, c); }
static uint32_t futrts_umad_hi32(uint32_t a, uint32_t b, uint32_t c) { return mad_hi(a, b, c); }
static uint64_t futrts_umad_hi64(uint64_t a, uint64_t b, uint64_t c) { return mad_hi(a, b, c); }
static  uint8_t futrts_smad_hi8( int8_t a,  int8_t b,   int8_t c) { return mad_hi(a, b, c); }
static uint16_t futrts_smad_hi16(int16_t a, int16_t b, int16_t c) { return mad_hi(a, b, c); }
static uint32_t futrts_smad_hi32(int32_t a, int32_t b, int32_t c) { return mad_hi(a, b, c); }
static uint64_t futrts_smad_hi64(int64_t a, int64_t b, int64_t c) { return mad_hi(a, b, c); }
#else // Not OpenCL

static  uint8_t futrts_umad_hi8( uint8_t a,  uint8_t b,  uint8_t c) { return futrts_umul_hi8(a, b) + c; }
static uint16_t futrts_umad_hi16(uint16_t a, uint16_t b, uint16_t c) { return futrts_umul_hi16(a, b) + c; }
static uint32_t futrts_umad_hi32(uint32_t a, uint32_t b, uint32_t c) { return futrts_umul_hi32(a, b) + c; }
static uint64_t futrts_umad_hi64(uint64_t a, uint64_t b, uint64_t c) { return futrts_umul_hi64(a, b) + c; }
static  uint8_t futrts_smad_hi8 ( int8_t a,  int8_t b,  int8_t c) { return futrts_smul_hi8(a, b) + c; }
static uint16_t futrts_smad_hi16(int16_t a, int16_t b, int16_t c) { return futrts_smul_hi16(a, b) + c; }
static uint32_t futrts_smad_hi32(int32_t a, int32_t b, int32_t c) { return futrts_smul_hi32(a, b) + c; }
static uint64_t futrts_smad_hi64(int64_t a, int64_t b, int64_t c) { return futrts_smul_hi64(a, b) + c; }
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#elif ISPC

static int32_t futrts_clzz8(int8_t x) {
  return count_leading_zeros((int32_t)(uint8_t)x)-24;
}

static int32_t futrts_clzz16(int16_t x) {
  return count_leading_zeros((int32_t)(uint16_t)x)-16;
}

static int32_t futrts_clzz32(int32_t x) {
  return count_leading_zeros(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return count_leading_zeros(x);
}

#else // Not OpenCL, ISPC or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#elif ISPC

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : count_trailing_zeros((int32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : count_trailing_zeros((int32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return count_trailing_zeros(x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return count_trailing_zeros(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#elif ISPC

static inline float fabs32(float x) {
  return abs(x);
}

static inline float fmax32(float x, float y) {
  return isnan(x) ? y : isnan(y) ? x : max(x, y);
}

static inline float fmin32(float x, float y) {
  return isnan(x) ? y : isnan(y) ? x : min(x, y);
}

static inline float fpow32(float a, float b) {
  float ret;
  foreach_active (i) {
      uniform float r = __stdlib_powf(extract(a, i), extract(b, i));
      ret = insert(ret, i, r);
  }
  return ret;
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

#if ISPC

static inline bool futrts_isinf32(float x) {
  return !isnan(x) && isnan(x - x);
}

static inline bool futrts_isfinite32(float x) {
  return !isnan(x) && !futrts_isinf32(x);
}

#else

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#endif

static inline int8_t fptosi_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int64_t) x;
  };
}

static inline uint8_t fptoui_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f32_bool(float x) {
  return x != 0;
}

static inline float btof_bool_f32(bool x) {
  return x ? 1 : 0;
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_log1p_32(float x) {
  return log1p(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_cbrt32(float x) {
  return cbrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float futrts_erf32(float x) {
  return erf(x);
}

static inline float futrts_erfc32(float x) {
  return erfc(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_nextafter32(float x, float y) {
  return nextafter(x, y);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#elif ISPC

static inline float futrts_log32(float x) {
  return futrts_isfinite32(x) || (futrts_isinf32(x) && x < 0)? log(x) : x;
}

static inline float futrts_log2_32(float x) {
  return futrts_log32(x) / log(2.0f);
}

static inline float futrts_log10_32(float x) {
  return futrts_log32(x) / log(10.0f);
}

static inline float futrts_log1p_32(float x) {
  if(x == -1.0f || (futrts_isinf32(x) && x > 0.0f)) return x / 0.0f;
  float y = 1.0f + x;
  float z = y - 1.0f;
  return log(y) - (z-x)/y;
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

extern "C" unmasked uniform float cbrtf(uniform float);
static inline float futrts_cbrt32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = cbrtf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return (exp(x)+exp(-x)) / 2.0f;
}

static inline float futrts_sinh32(float x) {
  return (exp(x)-exp(-x)) / 2.0f;
}

static inline float futrts_tanh32(float x) {
  return futrts_sinh32(x)/futrts_cosh32(x);
}

static inline float futrts_acosh32(float x) {
  float f = x+sqrt(x*x-1);
  if(futrts_isfinite32(f)) return log(f);
  return f;
}

static inline float futrts_asinh32(float x) {
  float f = x+sqrt(x*x+1);
  if(futrts_isfinite32(f)) return log(f);
  return f;

}

static inline float futrts_atanh32(float x) {
  float f = (1+x)/(1-x);
  if(futrts_isfinite32(f)) return log(f)/2.0f;
  return f;

}

static inline float futrts_atan2_32(float x, float y) {
  return (x == 0.0f && y == 0.0f) ? 0.0f : atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  if (futrts_isfinite32(x) && futrts_isfinite32(y)) {
    x = abs(x);
    y = abs(y);
    float a;
    float b;
    if (x >= y){
        a = x;
        b = y;
    } else {
        a = y;
        b = x;
    }
    if(b == 0){
      return a;
    }

    int e;
    float an;
    float bn;
    an = frexp (a, &e);
    bn = ldexp (b, - e);
    float cn;
    cn = sqrt (an * an + bn * bn);
    return ldexp (cn, e);
  } else {
    if (futrts_isinf32(x) || futrts_isinf32(y)) return INFINITY;
    else return x + y;
  }

}

extern "C" unmasked uniform float tgammaf(uniform float x);
static inline float futrts_gamma32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = tgammaf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float lgammaf(uniform float x);
static inline float futrts_lgamma32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = lgammaf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float erff(uniform float x);
static inline float futrts_erf32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = erff(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float erfcf(uniform float x);
static inline float futrts_erfc32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = erfcf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline float fmod32(float x, float y) {
  return x - y * trunc(x/y);
}

static inline float futrts_round32(float x) {
  return round(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

extern "C" unmasked uniform float nextafterf(uniform float x, uniform float y);
static inline float futrts_nextafter32(float x, float y) {
  float res;
  foreach_active (i) {
    uniform float r = nextafterf(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return a * b + c;
}

#else // Not OpenCL or ISPC, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_log1p_32(float x) {
  return log1pf(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_cbrt32(float x) {
  return cbrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float futrts_erf32(float x) {
  return erff(x);
}

static inline float futrts_erfc32(float x) {
  return erfcf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_nextafter32(float x, float y) {
  return nextafterf(x, y);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

#if ISPC
static inline int32_t futrts_to_bits32(float x) {
  return intbits(x);
}

static inline float futrts_from_bits32(int32_t x) {
  return floatbits(x);
}
#else
static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}
#endif

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0 ? 1 : 0) - (x < 0 ? 1 : 0);
}

#ifdef FUTHARK_F64_ENABLED

#if ISPC
static inline bool futrts_isinf64(float x) {
  return !isnan(x) && isnan(x - x);
}

static inline bool futrts_isfinite64(float x) {
  return !isnan(x) && !futrts_isinf64(x);
}

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline double fabs64(double x) {
  return abs(x);
}

static inline double fmax64(double x, double y) {
  return isnan(x) ? y : isnan(y) ? x : max(x, y);
}

static inline double fmin64(double x, double y) {
  return isnan(x) ? y : isnan(y) ? x : min(x, y);
}

static inline double fpow64(double a, double b) {
  float ret;
  foreach_active (i) {
      uniform float r = __stdlib_powf(extract(a, i), extract(b, i));
      ret = insert(ret, i, r);
  }
  return ret;
}

static inline double futrts_log64(double x) {
  return futrts_isfinite64(x) || (futrts_isinf64(x) && x < 0)? log(x) : x;
}

static inline double futrts_log2_64(double x) {
  return futrts_log64(x)/log(2.0d);
}

static inline double futrts_log10_64(double x) {
  return futrts_log64(x)/log(10.0d);
}

static inline double futrts_log1p_64(double x) {
  if(x == -1.0d || (futrts_isinf64(x) && x > 0.0d)) return x / 0.0d;
  double y = 1.0d + x;
  double z = y - 1.0d;
  return log(y) - (z-x)/y;
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

extern "C" unmasked uniform double cbrt(uniform double);
static inline double futrts_cbrt64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = cbrtf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return (exp(x)+exp(-x)) / 2.0d;
}

static inline double futrts_sinh64(double x) {
  return (exp(x)-exp(-x)) / 2.0d;
}

static inline double futrts_tanh64(double x) {
  return futrts_sinh64(x)/futrts_cosh64(x);
}

static inline double futrts_acosh64(double x) {
  double f = x+sqrt(x*x-1.0d);
  if(futrts_isfinite64(f)) return log(f);
  return f;
}

static inline double futrts_asinh64(double x) {
  double f = x+sqrt(x*x+1.0d);
  if(futrts_isfinite64(f)) return log(f);
  return f;
}

static inline double futrts_atanh64(double x) {
  double f = (1.0d+x)/(1.0d-x);
  if(futrts_isfinite64(f)) return log(f)/2.0d;
  return f;

}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

extern "C" unmasked uniform double hypot(uniform double x, uniform double y);
static inline double futrts_hypot64(double x, double y) {
  double res;
  foreach_active (i) {
    uniform double r = hypot(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double tgamma(uniform double x);
static inline double futrts_gamma64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = tgamma(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double lgamma(uniform double x);
static inline double futrts_lgamma64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = lgamma(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double erf(uniform double x);
static inline double futrts_erf64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = erf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double erfc(uniform double x);
static inline double futrts_erfc64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = erfc(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline double futrts_fma64(double a, double b, double c) {
  return a * b + c;
}

static inline double futrts_round64(double x) {
  return round(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

extern "C" unmasked uniform double nextafter(uniform float x, uniform double y);
static inline float futrts_nextafter64(double x, double y) {
  double res;
  foreach_active (i) {
    uniform double r = nextafter(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

static inline uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f64_bool(double x) {
  return x != 0.0;
}

static inline double btof_bool_f64(bool x) {
  return x ? 1.0 : 0.0;
}

static inline int64_t futrts_to_bits64(double x) {
  int64_t res;
  foreach_active (i) {
    uniform double tmp = extract(x, i);
    uniform int64_t r = *((uniform int64_t* uniform)&tmp);
    res = insert(res, i, r);
  }
  return res;
}

static inline double futrts_from_bits64(int64_t x) {
  double res;
  foreach_active (i) {
    uniform int64_t tmp = extract(x, i);
    uniform double r = *((uniform double* uniform)&tmp);
    res = insert(res, i, r);
  }
  return res;
}

static inline double fmod64(double x, double y) {
  return x - y * trunc(x/y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0 ? 1.0d : 0.0d) - (x < 0 ? 1.0d : 0.0d);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
  return v0 + (v1 - v0) * t;
}

static inline double futrts_mad64(double a, double b, double c) {
  return a * b + c;
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#else

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_log1p_64(double x) {
  return log1p(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_cbrt64(double x) {
  return cbrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_erf64(double x) {
  return erf(x);
}

static inline double futrts_erfc64(double x) {
  return erfc(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline float futrts_nextafter64(float x, float y) {
  return nextafter(x, y);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

static inline uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f64_bool(double x) {
  return x != 0;
}

static inline double btof_bool_f64(bool x) {
  return x ? 1 : 0;
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600) && !(defined(ISPC))
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#elif ISPC
typedef float16 f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

static inline bool ftob_f16_bool(f16 x) {
  return x != (f16)0;
}

static inline f16 btof_bool_f16(bool x) {
  return x ? 1 : 0;
}

#ifndef EMULATE_F16
static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

#ifdef __OPENCL_VERSION__

static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#elif ISPC
static inline f16 fabs16(f16 x) {
  return abs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return futrts_isnan16(x) ? y : futrts_isnan16(y) ? x : max(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return futrts_isnan16(x) ? y : futrts_isnan16(y) ? x : min(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}
#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

#if ISPC
static inline bool futrts_isinf16(float x) {
  return !futrts_isnan16(x) && futrts_isnan16(x - x);
}
static inline bool futrts_isfinite16(float x) {
  return !futrts_isnan16(x) && !futrts_isinf16(x);
}

#else

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}
#endif

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_log1p_16(f16 x) {
  return log1p(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_cbrt16(f16 x) {
  return cbrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 futrts_erf16(f16 x) {
  return erf(x);
}

static inline f16 futrts_erfc16(f16 x) {
  return erfc(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_nextafter16(f16 x, f16 y) {
  return nextafter(x, y);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}
#elif ISPC

static inline f16 futrts_log16(f16 x) {
  return futrts_isfinite16(x) || (futrts_isinf16(x) && x < 0) ? log(x) : x;
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log16(x) / log(2.0f16);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log16(x) / log(10.0f16);
}

static inline f16 futrts_log1p_16(f16 x) {
  if(x == -1.0f16 || (futrts_isinf16(x) && x > 0.0f16)) return x / 0.0f16;
  f16 y = 1.0f16 + x;
  f16 z = y - 1.0f16;
  return log(y) - (z-x)/y;
}

static inline f16 futrts_sqrt16(f16 x) {
  return (float16)sqrt((float)x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return (float16)cos((float)x);
}

static inline f16 futrts_sin16(f16 x) {
  return (float16)sin((float)x);
}

static inline f16 futrts_tan16(f16 x) {
  return (float16)tan((float)x);
}

static inline f16 futrts_acos16(f16 x) {
  return (float16)acos((float)x);
}

static inline f16 futrts_asin16(f16 x) {
  return (float16)asin((float)x);
}

static inline f16 futrts_atan16(f16 x) {
  return (float16)atan((float)x);
}

static inline f16 futrts_cosh16(f16 x) {
  return (exp(x)+exp(-x)) / 2.0f16;
}

static inline f16 futrts_sinh16(f16 x) {
  return (exp(x)-exp(-x)) / 2.0f16;
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_sinh16(x)/futrts_cosh16(x);
}

static inline f16 futrts_acosh16(f16 x) {
  float16 f = x+(float16)sqrt((float)(x*x-1));
  if(futrts_isfinite16(f)) return log(f);
  return f;
}

static inline f16 futrts_asinh16(f16 x) {
  float16 f = x+(float16)sqrt((float)(x*x+1));
  if(futrts_isfinite16(f)) return log(f);
  return f;
}

static inline f16 futrts_atanh16(f16 x) {
  float16 f = (1+x)/(1-x);
  if(futrts_isfinite16(f)) return log(f)/2.0f16;
  return f;
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return (float16)atan2((float)x, (float)y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return (float16)futrts_hypot32((float)x, (float)y);
}

extern "C" unmasked uniform float tgammaf(uniform float x);
static inline f16 futrts_gamma16(f16 x) {
  f16 res;
  foreach_active (i) {
    uniform f16 r = (f16)tgammaf(extract((float)x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float lgammaf(uniform float x);
static inline f16 futrts_lgamma16(f16 x) {
  f16 res;
  foreach_active (i) {
    uniform f16 r = (f16)lgammaf(extract((float)x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline f16 futrts_cbrt16(f16 x) {
  f16 res = (f16)futrts_cbrt32((float)x);
  return res;
}

static inline f16 futrts_erf16(f16 x) {
  f16 res = (f16)futrts_erf32((float)x);
  return res;
}

static inline f16 futrts_erfc16(f16 x) {
  f16 res = (f16)futrts_erfc32((float)x);
  return res;
}

static inline f16 fmod16(f16 x, f16 y) {
  return x - y * (float16)trunc((float) (x/y));
}

static inline f16 futrts_round16(f16 x) {
  return (float16)round((float)x);
}

static inline f16 futrts_floor16(f16 x) {
  return (float16)floor((float)x);
}

static inline f16 futrts_ceil16(f16 x) {
  return (float16)ceil((float)x);
}

static inline f16 futrts_nextafter16(f16 x, f16 y) {
  return (float16)futrts_nextafter32((float)x, (float) y);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_log1p_16(f16 x) {
  return (f16)log1pf((float)x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_cbrt16(f16 x) {
  return cbrtf(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 futrts_erf16(f16 x) {
  return erff(x);
}

static inline f16 futrts_erfc16(f16 x) {
  return erfcf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_nextafter16(f16 x, f16 y) {
  return __ushort_as_half(halfbitsnextafter(__half_as_ushort(x), __half_as_ushort(y)));
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#elif ISPC

static inline int16_t futrts_to_bits16(f16 x) {
  varying int16_t y = *((varying int16_t * uniform)&x);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  varying f16 y = *((varying f16 * uniform)&x);
  return y;
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_log1p_16(f16 x) {
  return futrts_log1p_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_cbrt16(f16 x) {
  return futrts_cbrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 futrts_erf16(f16 x) {
  return futrts_erf32(x);
}

static inline f16 futrts_erfc16(f16 x) {
  return futrts_erfc32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_nextafter16(f16 x, f16 y) {
  return halfbits2float(halfbitsnextafter(float2halfbits(x), float2halfbits(y)));
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0 ? 1 : 0) - (x < 0 ? 1 : 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return (f16) x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

#if ISPC
static inline f16 fpconv_f64_f16(double x) {
  return (f16) ((float)x);
}
#else
static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}
#endif
#endif


// End of scalar_f16.h.

// Start of context_prototypes.h
//
// Prototypes for the functions in context.h, or that will be called
// from those functions, that need to be available very early.

struct futhark_context_config;
struct futhark_context;

static void set_error(struct futhark_context* ctx, char *error);

// These are called in context/config new/free functions and contain
// shared setup.  They are generated by the compiler itself.
static int init_constants(struct futhark_context*);
static int free_constants(struct futhark_context*);
static void setup_program(struct futhark_context* ctx);
static void teardown_program(struct futhark_context *ctx);

// Allocate host memory.  Must be freed with host_free().
static void host_alloc(struct futhark_context* ctx, size_t size, const char* tag, size_t* size_out, void** mem_out);
// Allocate memory allocated with host_alloc().
static void host_free(struct futhark_context* ctx, size_t size, const char* tag, void* mem);

// Functions that must be defined by the backend.
static void backend_context_config_setup(struct futhark_context_config* cfg);
static void backend_context_config_teardown(struct futhark_context_config* cfg);
static int backend_context_setup(struct futhark_context *ctx);
static void backend_context_teardown(struct futhark_context *ctx);

// End of of context_prototypes.h

struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct constants {
    int dummy;
    bool main_res_10740;
    struct memblock mem_26857;
    int64_t triplayer2_11201;
    int64_t triplayer3_11207;
    int64_t triplayer4_11213;
    int64_t triplayer5_11219;
    int64_t triplayer6_11225;
    int64_t triplayer7_11231;
};
static int8_t static_array_realtype_33278[2] = {(int8_t) 0, (int8_t) 1};
static int8_t static_array_realtype_33283[16] = {(int8_t) 0, (int8_t) 1, (int8_t) 2, (int8_t) 3, (int8_t) 4, (int8_t) 5, (int8_t) 6, (int8_t) 7, (int8_t) 8, (int8_t) 9, (int8_t) 10, (int8_t) 11, (int8_t) 12, (int8_t) 13, (int8_t) 14, (int8_t) 15};
static int8_t static_array_realtype_33288[16] = {(int8_t) 10, (int8_t) 10, (int8_t) 10, (int8_t) 10, (int8_t) 10, (int8_t) 10, (int8_t) 10, (int8_t) 10, (int8_t) 5, (int8_t) 5, (int8_t) 5, (int8_t) 5, (int8_t) 5, (int8_t) 5, (int8_t) 6, (int8_t) 7};
static const int num_tuning_params = 0;
static const char *tuning_param_names[1];
static const char *tuning_param_vars[1];
static const char *tuning_param_classes[1];
static int64_t *tuning_param_defaults[1];
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;
  int minimum_chunk_size;


  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}

static inline int64_t compute_chunk_size(int64_t minimum_chunk_size, double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), minimum_chunk_size);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->minimum_chunk_size,
                                               worker->scheduler->kappa,
                                               subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = scheduler->minimum_chunk_size; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
#ifdef FUTHARK_BACKEND_ispc
  int64_t get_gang_size();
  scheduler->minimum_chunk_size = get_gang_size();
#else
  scheduler->minimum_chunk_size = 1;
#endif

  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // We assume that this function is called by the thread controlling
  // the first worker, which is why we treat scheduler->workers[0]
  // specially here.

  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  // And then destroy our own queue.
  subtask_queue_destroy(&scheduler->workers[0].q);

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

// Start of backends/multicore.h

struct futhark_context_config {
  int in_use;
  int debugging;
  int profiling;
  int logging;
  const char *cache_fname;
  int num_tuning_params;
  int64_t *tuning_params;
  const char** tuning_param_names;
  const char** tuning_param_vars;
  const char** tuning_param_classes;
  // Uniform fields above.

  int num_threads;
};

static void backend_context_config_setup(struct futhark_context_config* cfg) {
  cfg->num_threads = 0;
}

static void backend_context_config_teardown(struct futhark_context_config* cfg) {
  (void)cfg;
}

void futhark_context_config_set_num_threads(struct futhark_context_config *cfg, int n) {
  cfg->num_threads = n;
}

int futhark_context_config_set_tuning_param(struct futhark_context_config* cfg, const char *param_name, size_t param_value) {
  (void)cfg; (void)param_name; (void)param_value;
  return 1;
}

struct futhark_context {
  struct futhark_context_config* cfg;
  int detail_memory;
  int debugging;
  int profiling;
  int profiling_paused;
  int logging;
  lock_t lock;
  char *error;
  lock_t error_lock;
  FILE *log;
  struct constants *constants;
  struct free_list free_list;
  int64_t peak_mem_usage_default;
  int64_t cur_mem_usage_default;
  struct program* program;
  // Uniform fields above.

  struct scheduler scheduler;
  int total_runs;
  long int total_runtime;
  int64_t tuning_timing;
  int64_t tuning_iter;
};

int backend_context_setup(struct futhark_context* ctx) {
  // Initialize rand()
  fast_srand(time(0));

  int tune_kappa = 0;
  double kappa = 5.1f * 1000;

  if (tune_kappa) {
    if (determine_kappa(&kappa) != 0) {
      ctx->error = strdup("Failed to determine kappa.");
      return 1;
    }
  }

  if (scheduler_init(&ctx->scheduler,
                     ctx->cfg->num_threads > 0 ?
                     ctx->cfg->num_threads : num_processors(),
                     kappa) != 0) {
    ctx->error = strdup("Failed to initialise scheduler.");
    return 1;
  }

  return 0;
}

void backend_context_teardown(struct futhark_context* ctx) {
  (void)scheduler_destroy(&ctx->scheduler);
}

int futhark_context_sync(struct futhark_context* ctx) {
  (void)ctx;
  return 0;
}

// End of backends/multicore.h

struct program {
    int64_t *futhark_mc_copy_parloop_33282_total_runtime;
    int *futhark_mc_copy_parloop_33282_runs;
    int64_t *futhark_mc_copy_parloop_33282_iter;
    int64_t futhark_mc_copy_parloop_33282_total_total_runtime;
    int futhark_mc_copy_parloop_33282_total_runs;
    int64_t futhark_mc_copy_parloop_33282_total_iter;
    int64_t *futhark_mc_copy_28080_task_33280_total_runtime;
    int *futhark_mc_copy_28080_task_33280_runs;
    int64_t *futhark_mc_copy_28080_task_33280_iter;
    int64_t futhark_mc_copy_28080_task_33280_total_time;
    int64_t futhark_mc_copy_28080_task_33280_total_iter;
    int64_t *futhark_mc_copy_parloop_33287_total_runtime;
    int *futhark_mc_copy_parloop_33287_runs;
    int64_t *futhark_mc_copy_parloop_33287_iter;
    int64_t futhark_mc_copy_parloop_33287_total_total_runtime;
    int futhark_mc_copy_parloop_33287_total_runs;
    int64_t futhark_mc_copy_parloop_33287_total_iter;
    int64_t *futhark_mc_copy_28091_task_33285_total_runtime;
    int *futhark_mc_copy_28091_task_33285_runs;
    int64_t *futhark_mc_copy_28091_task_33285_iter;
    int64_t futhark_mc_copy_28091_task_33285_total_time;
    int64_t futhark_mc_copy_28091_task_33285_total_iter;
    int64_t *futhark_mc_copy_parloop_33292_total_runtime;
    int *futhark_mc_copy_parloop_33292_runs;
    int64_t *futhark_mc_copy_parloop_33292_iter;
    int64_t futhark_mc_copy_parloop_33292_total_total_runtime;
    int futhark_mc_copy_parloop_33292_total_runs;
    int64_t futhark_mc_copy_parloop_33292_total_iter;
    int64_t *futhark_mc_copy_28102_task_33290_total_runtime;
    int *futhark_mc_copy_28102_task_33290_runs;
    int64_t *futhark_mc_copy_28102_task_33290_iter;
    int64_t futhark_mc_copy_28102_task_33290_total_time;
    int64_t futhark_mc_copy_28102_task_33290_total_iter;
    int64_t *futhark_mc_segmap_parloop_33296_total_runtime;
    int *futhark_mc_segmap_parloop_33296_runs;
    int64_t *futhark_mc_segmap_parloop_33296_iter;
    int64_t futhark_mc_segmap_parloop_33296_total_total_runtime;
    int futhark_mc_segmap_parloop_33296_total_runs;
    int64_t futhark_mc_segmap_parloop_33296_total_iter;
    int64_t *futhark_mc_segmap_task_33294_total_runtime;
    int *futhark_mc_segmap_task_33294_runs;
    int64_t *futhark_mc_segmap_task_33294_iter;
    int64_t futhark_mc_segmap_task_33294_total_time;
    int64_t futhark_mc_segmap_task_33294_total_iter;
    int64_t *futhark_mc_segmap_parloop_33308_total_runtime;
    int *futhark_mc_segmap_parloop_33308_runs;
    int64_t *futhark_mc_segmap_parloop_33308_iter;
    int64_t futhark_mc_segmap_parloop_33308_total_total_runtime;
    int futhark_mc_segmap_parloop_33308_total_runs;
    int64_t futhark_mc_segmap_parloop_33308_total_iter;
    int64_t *futhark_mc_segmap_task_33306_total_runtime;
    int *futhark_mc_segmap_task_33306_runs;
    int64_t *futhark_mc_segmap_task_33306_iter;
    int64_t futhark_mc_segmap_task_33306_total_time;
    int64_t futhark_mc_segmap_task_33306_total_iter;
    int64_t *futhark_mc_segmap_parloop_33320_total_runtime;
    int *futhark_mc_segmap_parloop_33320_runs;
    int64_t *futhark_mc_segmap_parloop_33320_iter;
    int64_t futhark_mc_segmap_parloop_33320_total_total_runtime;
    int futhark_mc_segmap_parloop_33320_total_runs;
    int64_t futhark_mc_segmap_parloop_33320_total_iter;
    int64_t *futhark_mc_segmap_task_33318_total_runtime;
    int *futhark_mc_segmap_task_33318_runs;
    int64_t *futhark_mc_segmap_task_33318_iter;
    int64_t futhark_mc_segmap_task_33318_total_time;
    int64_t futhark_mc_segmap_task_33318_total_iter;
    int64_t *futhark_mc_segmap_parloop_33332_total_runtime;
    int *futhark_mc_segmap_parloop_33332_runs;
    int64_t *futhark_mc_segmap_parloop_33332_iter;
    int64_t futhark_mc_segmap_parloop_33332_total_total_runtime;
    int futhark_mc_segmap_parloop_33332_total_runs;
    int64_t futhark_mc_segmap_parloop_33332_total_iter;
    int64_t *futhark_mc_segmap_task_33330_total_runtime;
    int *futhark_mc_segmap_task_33330_runs;
    int64_t *futhark_mc_segmap_task_33330_iter;
    int64_t futhark_mc_segmap_task_33330_total_time;
    int64_t futhark_mc_segmap_task_33330_total_iter;
    int64_t *futhark_mc_segmap_parloop_33343_total_runtime;
    int *futhark_mc_segmap_parloop_33343_runs;
    int64_t *futhark_mc_segmap_parloop_33343_iter;
    int64_t futhark_mc_segmap_parloop_33343_total_total_runtime;
    int futhark_mc_segmap_parloop_33343_total_runs;
    int64_t futhark_mc_segmap_parloop_33343_total_iter;
    int64_t *futhark_mc_segmap_task_33341_total_runtime;
    int *futhark_mc_segmap_task_33341_runs;
    int64_t *futhark_mc_segmap_task_33341_iter;
    int64_t futhark_mc_segmap_task_33341_total_time;
    int64_t futhark_mc_segmap_task_33341_total_iter;
    int64_t *futhark_mc_copy_parloop_33347_total_runtime;
    int *futhark_mc_copy_parloop_33347_runs;
    int64_t *futhark_mc_copy_parloop_33347_iter;
    int64_t futhark_mc_copy_parloop_33347_total_total_runtime;
    int futhark_mc_copy_parloop_33347_total_runs;
    int64_t futhark_mc_copy_parloop_33347_total_iter;
    int64_t *futhark_mc_copy_28568_task_33345_total_runtime;
    int *futhark_mc_copy_28568_task_33345_runs;
    int64_t *futhark_mc_copy_28568_task_33345_iter;
    int64_t futhark_mc_copy_28568_task_33345_total_time;
    int64_t futhark_mc_copy_28568_task_33345_total_iter;
    int64_t *futhark_mc_copy_parloop_33351_total_runtime;
    int *futhark_mc_copy_parloop_33351_runs;
    int64_t *futhark_mc_copy_parloop_33351_iter;
    int64_t futhark_mc_copy_parloop_33351_total_total_runtime;
    int futhark_mc_copy_parloop_33351_total_runs;
    int64_t futhark_mc_copy_parloop_33351_total_iter;
    int64_t *futhark_mc_copy_28578_task_33349_total_runtime;
    int *futhark_mc_copy_28578_task_33349_runs;
    int64_t *futhark_mc_copy_28578_task_33349_iter;
    int64_t futhark_mc_copy_28578_task_33349_total_time;
    int64_t futhark_mc_copy_28578_task_33349_total_iter;
    int64_t *futhark_mc_segmap_parloop_33337_total_runtime;
    int *futhark_mc_segmap_parloop_33337_runs;
    int64_t *futhark_mc_segmap_parloop_33337_iter;
    int64_t futhark_mc_segmap_parloop_33337_total_total_runtime;
    int futhark_mc_segmap_parloop_33337_total_runs;
    int64_t futhark_mc_segmap_parloop_33337_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33335_total_runtime;
    int *futhark_mc_segmap_nested_task_33335_runs;
    int64_t *futhark_mc_segmap_nested_task_33335_iter;
    int64_t *futhark_mc_copy_parloop_33355_total_runtime;
    int *futhark_mc_copy_parloop_33355_runs;
    int64_t *futhark_mc_copy_parloop_33355_iter;
    int64_t futhark_mc_copy_parloop_33355_total_total_runtime;
    int futhark_mc_copy_parloop_33355_total_runs;
    int64_t futhark_mc_copy_parloop_33355_total_iter;
    int64_t *futhark_mc_copy_28591_task_33353_total_runtime;
    int *futhark_mc_copy_28591_task_33353_runs;
    int64_t *futhark_mc_copy_28591_task_33353_iter;
    int64_t futhark_mc_copy_28591_task_33353_total_time;
    int64_t futhark_mc_copy_28591_task_33353_total_iter;
    int64_t *futhark_mc_copy_parloop_33359_total_runtime;
    int *futhark_mc_copy_parloop_33359_runs;
    int64_t *futhark_mc_copy_parloop_33359_iter;
    int64_t futhark_mc_copy_parloop_33359_total_total_runtime;
    int futhark_mc_copy_parloop_33359_total_runs;
    int64_t futhark_mc_copy_parloop_33359_total_iter;
    int64_t *futhark_mc_copy_28604_task_33357_total_runtime;
    int *futhark_mc_copy_28604_task_33357_runs;
    int64_t *futhark_mc_copy_28604_task_33357_iter;
    int64_t futhark_mc_copy_28604_task_33357_total_time;
    int64_t futhark_mc_copy_28604_task_33357_total_iter;
    int64_t *futhark_mc_segmap_parloop_33326_total_runtime;
    int *futhark_mc_segmap_parloop_33326_runs;
    int64_t *futhark_mc_segmap_parloop_33326_iter;
    int64_t futhark_mc_segmap_parloop_33326_total_total_runtime;
    int futhark_mc_segmap_parloop_33326_total_runs;
    int64_t futhark_mc_segmap_parloop_33326_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33324_total_runtime;
    int *futhark_mc_segmap_nested_task_33324_runs;
    int64_t *futhark_mc_segmap_nested_task_33324_iter;
    int64_t *futhark_mc_copy_parloop_33363_total_runtime;
    int *futhark_mc_copy_parloop_33363_runs;
    int64_t *futhark_mc_copy_parloop_33363_iter;
    int64_t futhark_mc_copy_parloop_33363_total_total_runtime;
    int futhark_mc_copy_parloop_33363_total_runs;
    int64_t futhark_mc_copy_parloop_33363_total_iter;
    int64_t *futhark_mc_copy_28620_task_33361_total_runtime;
    int *futhark_mc_copy_28620_task_33361_runs;
    int64_t *futhark_mc_copy_28620_task_33361_iter;
    int64_t futhark_mc_copy_28620_task_33361_total_time;
    int64_t futhark_mc_copy_28620_task_33361_total_iter;
    int64_t *futhark_mc_copy_parloop_33367_total_runtime;
    int *futhark_mc_copy_parloop_33367_runs;
    int64_t *futhark_mc_copy_parloop_33367_iter;
    int64_t futhark_mc_copy_parloop_33367_total_total_runtime;
    int futhark_mc_copy_parloop_33367_total_runs;
    int64_t futhark_mc_copy_parloop_33367_total_iter;
    int64_t *futhark_mc_copy_28636_task_33365_total_runtime;
    int *futhark_mc_copy_28636_task_33365_runs;
    int64_t *futhark_mc_copy_28636_task_33365_iter;
    int64_t futhark_mc_copy_28636_task_33365_total_time;
    int64_t futhark_mc_copy_28636_task_33365_total_iter;
    int64_t *futhark_mc_segmap_parloop_33314_total_runtime;
    int *futhark_mc_segmap_parloop_33314_runs;
    int64_t *futhark_mc_segmap_parloop_33314_iter;
    int64_t futhark_mc_segmap_parloop_33314_total_total_runtime;
    int futhark_mc_segmap_parloop_33314_total_runs;
    int64_t futhark_mc_segmap_parloop_33314_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33312_total_runtime;
    int *futhark_mc_segmap_nested_task_33312_runs;
    int64_t *futhark_mc_segmap_nested_task_33312_iter;
    int64_t *futhark_mc_copy_parloop_33371_total_runtime;
    int *futhark_mc_copy_parloop_33371_runs;
    int64_t *futhark_mc_copy_parloop_33371_iter;
    int64_t futhark_mc_copy_parloop_33371_total_total_runtime;
    int futhark_mc_copy_parloop_33371_total_runs;
    int64_t futhark_mc_copy_parloop_33371_total_iter;
    int64_t *futhark_mc_copy_28655_task_33369_total_runtime;
    int *futhark_mc_copy_28655_task_33369_runs;
    int64_t *futhark_mc_copy_28655_task_33369_iter;
    int64_t futhark_mc_copy_28655_task_33369_total_time;
    int64_t futhark_mc_copy_28655_task_33369_total_iter;
    int64_t *futhark_mc_copy_parloop_33375_total_runtime;
    int *futhark_mc_copy_parloop_33375_runs;
    int64_t *futhark_mc_copy_parloop_33375_iter;
    int64_t futhark_mc_copy_parloop_33375_total_total_runtime;
    int futhark_mc_copy_parloop_33375_total_runs;
    int64_t futhark_mc_copy_parloop_33375_total_iter;
    int64_t *futhark_mc_copy_28674_task_33373_total_runtime;
    int *futhark_mc_copy_28674_task_33373_runs;
    int64_t *futhark_mc_copy_28674_task_33373_iter;
    int64_t futhark_mc_copy_28674_task_33373_total_time;
    int64_t futhark_mc_copy_28674_task_33373_total_iter;
    int64_t *futhark_mc_segmap_parloop_33302_total_runtime;
    int *futhark_mc_segmap_parloop_33302_runs;
    int64_t *futhark_mc_segmap_parloop_33302_iter;
    int64_t futhark_mc_segmap_parloop_33302_total_total_runtime;
    int futhark_mc_segmap_parloop_33302_total_runs;
    int64_t futhark_mc_segmap_parloop_33302_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33300_total_runtime;
    int *futhark_mc_segmap_nested_task_33300_runs;
    int64_t *futhark_mc_segmap_nested_task_33300_iter;
    int64_t *futhark_mc_segmap_parloop_33379_total_runtime;
    int *futhark_mc_segmap_parloop_33379_runs;
    int64_t *futhark_mc_segmap_parloop_33379_iter;
    int64_t futhark_mc_segmap_parloop_33379_total_total_runtime;
    int futhark_mc_segmap_parloop_33379_total_runs;
    int64_t futhark_mc_segmap_parloop_33379_total_iter;
    int64_t *futhark_mc_segmap_task_33377_total_runtime;
    int *futhark_mc_segmap_task_33377_runs;
    int64_t *futhark_mc_segmap_task_33377_iter;
    int64_t futhark_mc_segmap_task_33377_total_time;
    int64_t futhark_mc_segmap_task_33377_total_iter;
    int64_t *futhark_mc_segmap_parloop_33391_total_runtime;
    int *futhark_mc_segmap_parloop_33391_runs;
    int64_t *futhark_mc_segmap_parloop_33391_iter;
    int64_t futhark_mc_segmap_parloop_33391_total_total_runtime;
    int futhark_mc_segmap_parloop_33391_total_runs;
    int64_t futhark_mc_segmap_parloop_33391_total_iter;
    int64_t *futhark_mc_segmap_task_33389_total_runtime;
    int *futhark_mc_segmap_task_33389_runs;
    int64_t *futhark_mc_segmap_task_33389_iter;
    int64_t futhark_mc_segmap_task_33389_total_time;
    int64_t futhark_mc_segmap_task_33389_total_iter;
    int64_t *futhark_mc_segmap_parloop_33403_total_runtime;
    int *futhark_mc_segmap_parloop_33403_runs;
    int64_t *futhark_mc_segmap_parloop_33403_iter;
    int64_t futhark_mc_segmap_parloop_33403_total_total_runtime;
    int futhark_mc_segmap_parloop_33403_total_runs;
    int64_t futhark_mc_segmap_parloop_33403_total_iter;
    int64_t *futhark_mc_segmap_task_33401_total_runtime;
    int *futhark_mc_segmap_task_33401_runs;
    int64_t *futhark_mc_segmap_task_33401_iter;
    int64_t futhark_mc_segmap_task_33401_total_time;
    int64_t futhark_mc_segmap_task_33401_total_iter;
    int64_t *futhark_mc_segmap_parloop_33415_total_runtime;
    int *futhark_mc_segmap_parloop_33415_runs;
    int64_t *futhark_mc_segmap_parloop_33415_iter;
    int64_t futhark_mc_segmap_parloop_33415_total_total_runtime;
    int futhark_mc_segmap_parloop_33415_total_runs;
    int64_t futhark_mc_segmap_parloop_33415_total_iter;
    int64_t *futhark_mc_segmap_task_33413_total_runtime;
    int *futhark_mc_segmap_task_33413_runs;
    int64_t *futhark_mc_segmap_task_33413_iter;
    int64_t futhark_mc_segmap_task_33413_total_time;
    int64_t futhark_mc_segmap_task_33413_total_iter;
    int64_t *futhark_mc_segmap_parloop_33427_total_runtime;
    int *futhark_mc_segmap_parloop_33427_runs;
    int64_t *futhark_mc_segmap_parloop_33427_iter;
    int64_t futhark_mc_segmap_parloop_33427_total_total_runtime;
    int futhark_mc_segmap_parloop_33427_total_runs;
    int64_t futhark_mc_segmap_parloop_33427_total_iter;
    int64_t *futhark_mc_segmap_task_33425_total_runtime;
    int *futhark_mc_segmap_task_33425_runs;
    int64_t *futhark_mc_segmap_task_33425_iter;
    int64_t futhark_mc_segmap_task_33425_total_time;
    int64_t futhark_mc_segmap_task_33425_total_iter;
    int64_t *futhark_mc_segmap_parloop_33439_total_runtime;
    int *futhark_mc_segmap_parloop_33439_runs;
    int64_t *futhark_mc_segmap_parloop_33439_iter;
    int64_t futhark_mc_segmap_parloop_33439_total_total_runtime;
    int futhark_mc_segmap_parloop_33439_total_runs;
    int64_t futhark_mc_segmap_parloop_33439_total_iter;
    int64_t *futhark_mc_segmap_task_33437_total_runtime;
    int *futhark_mc_segmap_task_33437_runs;
    int64_t *futhark_mc_segmap_task_33437_iter;
    int64_t futhark_mc_segmap_task_33437_total_time;
    int64_t futhark_mc_segmap_task_33437_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_33449_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_33449_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_33449_iter;
    int64_t futhark_mc_segred_stage_1_parloop_33449_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_33449_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_33449_total_iter;
    int64_t *futhark_mc_segred_task_33446_total_runtime;
    int *futhark_mc_segred_task_33446_runs;
    int64_t *futhark_mc_segred_task_33446_iter;
    int64_t futhark_mc_segred_task_33446_total_time;
    int64_t futhark_mc_segred_task_33446_total_iter;
    int64_t *futhark_mc_copy_parloop_33453_total_runtime;
    int *futhark_mc_copy_parloop_33453_runs;
    int64_t *futhark_mc_copy_parloop_33453_iter;
    int64_t futhark_mc_copy_parloop_33453_total_total_runtime;
    int futhark_mc_copy_parloop_33453_total_runs;
    int64_t futhark_mc_copy_parloop_33453_total_iter;
    int64_t *futhark_mc_copy_33084_task_33451_total_runtime;
    int *futhark_mc_copy_33084_task_33451_runs;
    int64_t *futhark_mc_copy_33084_task_33451_iter;
    int64_t futhark_mc_copy_33084_task_33451_total_time;
    int64_t futhark_mc_copy_33084_task_33451_total_iter;
    int64_t *futhark_mc_segmap_parloop_33443_total_runtime;
    int *futhark_mc_segmap_parloop_33443_runs;
    int64_t *futhark_mc_segmap_parloop_33443_iter;
    int64_t futhark_mc_segmap_parloop_33443_total_total_runtime;
    int futhark_mc_segmap_parloop_33443_total_runs;
    int64_t futhark_mc_segmap_parloop_33443_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33441_total_runtime;
    int *futhark_mc_segmap_nested_task_33441_runs;
    int64_t *futhark_mc_segmap_nested_task_33441_iter;
    int64_t *futhark_mc_copy_parloop_33457_total_runtime;
    int *futhark_mc_copy_parloop_33457_runs;
    int64_t *futhark_mc_copy_parloop_33457_iter;
    int64_t futhark_mc_copy_parloop_33457_total_total_runtime;
    int futhark_mc_copy_parloop_33457_total_runs;
    int64_t futhark_mc_copy_parloop_33457_total_iter;
    int64_t *futhark_mc_copy_33094_task_33455_total_runtime;
    int *futhark_mc_copy_33094_task_33455_runs;
    int64_t *futhark_mc_copy_33094_task_33455_iter;
    int64_t futhark_mc_copy_33094_task_33455_total_time;
    int64_t futhark_mc_copy_33094_task_33455_total_iter;
    int64_t *futhark_mc_copy_parloop_33461_total_runtime;
    int *futhark_mc_copy_parloop_33461_runs;
    int64_t *futhark_mc_copy_parloop_33461_iter;
    int64_t futhark_mc_copy_parloop_33461_total_total_runtime;
    int futhark_mc_copy_parloop_33461_total_runs;
    int64_t futhark_mc_copy_parloop_33461_total_iter;
    int64_t *futhark_mc_copy_33107_task_33459_total_runtime;
    int *futhark_mc_copy_33107_task_33459_runs;
    int64_t *futhark_mc_copy_33107_task_33459_iter;
    int64_t futhark_mc_copy_33107_task_33459_total_time;
    int64_t futhark_mc_copy_33107_task_33459_total_iter;
    int64_t *futhark_mc_segmap_parloop_33433_total_runtime;
    int *futhark_mc_segmap_parloop_33433_runs;
    int64_t *futhark_mc_segmap_parloop_33433_iter;
    int64_t futhark_mc_segmap_parloop_33433_total_total_runtime;
    int futhark_mc_segmap_parloop_33433_total_runs;
    int64_t futhark_mc_segmap_parloop_33433_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33431_total_runtime;
    int *futhark_mc_segmap_nested_task_33431_runs;
    int64_t *futhark_mc_segmap_nested_task_33431_iter;
    int64_t *futhark_mc_copy_parloop_33465_total_runtime;
    int *futhark_mc_copy_parloop_33465_runs;
    int64_t *futhark_mc_copy_parloop_33465_iter;
    int64_t futhark_mc_copy_parloop_33465_total_total_runtime;
    int futhark_mc_copy_parloop_33465_total_runs;
    int64_t futhark_mc_copy_parloop_33465_total_iter;
    int64_t *futhark_mc_copy_33120_task_33463_total_runtime;
    int *futhark_mc_copy_33120_task_33463_runs;
    int64_t *futhark_mc_copy_33120_task_33463_iter;
    int64_t futhark_mc_copy_33120_task_33463_total_time;
    int64_t futhark_mc_copy_33120_task_33463_total_iter;
    int64_t *futhark_mc_copy_parloop_33469_total_runtime;
    int *futhark_mc_copy_parloop_33469_runs;
    int64_t *futhark_mc_copy_parloop_33469_iter;
    int64_t futhark_mc_copy_parloop_33469_total_total_runtime;
    int futhark_mc_copy_parloop_33469_total_runs;
    int64_t futhark_mc_copy_parloop_33469_total_iter;
    int64_t *futhark_mc_copy_33136_task_33467_total_runtime;
    int *futhark_mc_copy_33136_task_33467_runs;
    int64_t *futhark_mc_copy_33136_task_33467_iter;
    int64_t futhark_mc_copy_33136_task_33467_total_time;
    int64_t futhark_mc_copy_33136_task_33467_total_iter;
    int64_t *futhark_mc_segmap_parloop_33421_total_runtime;
    int *futhark_mc_segmap_parloop_33421_runs;
    int64_t *futhark_mc_segmap_parloop_33421_iter;
    int64_t futhark_mc_segmap_parloop_33421_total_total_runtime;
    int futhark_mc_segmap_parloop_33421_total_runs;
    int64_t futhark_mc_segmap_parloop_33421_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33419_total_runtime;
    int *futhark_mc_segmap_nested_task_33419_runs;
    int64_t *futhark_mc_segmap_nested_task_33419_iter;
    int64_t *futhark_mc_copy_parloop_33473_total_runtime;
    int *futhark_mc_copy_parloop_33473_runs;
    int64_t *futhark_mc_copy_parloop_33473_iter;
    int64_t futhark_mc_copy_parloop_33473_total_total_runtime;
    int futhark_mc_copy_parloop_33473_total_runs;
    int64_t futhark_mc_copy_parloop_33473_total_iter;
    int64_t *futhark_mc_copy_33152_task_33471_total_runtime;
    int *futhark_mc_copy_33152_task_33471_runs;
    int64_t *futhark_mc_copy_33152_task_33471_iter;
    int64_t futhark_mc_copy_33152_task_33471_total_time;
    int64_t futhark_mc_copy_33152_task_33471_total_iter;
    int64_t *futhark_mc_copy_parloop_33477_total_runtime;
    int *futhark_mc_copy_parloop_33477_runs;
    int64_t *futhark_mc_copy_parloop_33477_iter;
    int64_t futhark_mc_copy_parloop_33477_total_total_runtime;
    int futhark_mc_copy_parloop_33477_total_runs;
    int64_t futhark_mc_copy_parloop_33477_total_iter;
    int64_t *futhark_mc_copy_33171_task_33475_total_runtime;
    int *futhark_mc_copy_33171_task_33475_runs;
    int64_t *futhark_mc_copy_33171_task_33475_iter;
    int64_t futhark_mc_copy_33171_task_33475_total_time;
    int64_t futhark_mc_copy_33171_task_33475_total_iter;
    int64_t *futhark_mc_segmap_parloop_33409_total_runtime;
    int *futhark_mc_segmap_parloop_33409_runs;
    int64_t *futhark_mc_segmap_parloop_33409_iter;
    int64_t futhark_mc_segmap_parloop_33409_total_total_runtime;
    int futhark_mc_segmap_parloop_33409_total_runs;
    int64_t futhark_mc_segmap_parloop_33409_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33407_total_runtime;
    int *futhark_mc_segmap_nested_task_33407_runs;
    int64_t *futhark_mc_segmap_nested_task_33407_iter;
    int64_t *futhark_mc_copy_parloop_33481_total_runtime;
    int *futhark_mc_copy_parloop_33481_runs;
    int64_t *futhark_mc_copy_parloop_33481_iter;
    int64_t futhark_mc_copy_parloop_33481_total_total_runtime;
    int futhark_mc_copy_parloop_33481_total_runs;
    int64_t futhark_mc_copy_parloop_33481_total_iter;
    int64_t *futhark_mc_copy_33190_task_33479_total_runtime;
    int *futhark_mc_copy_33190_task_33479_runs;
    int64_t *futhark_mc_copy_33190_task_33479_iter;
    int64_t futhark_mc_copy_33190_task_33479_total_time;
    int64_t futhark_mc_copy_33190_task_33479_total_iter;
    int64_t *futhark_mc_copy_parloop_33485_total_runtime;
    int *futhark_mc_copy_parloop_33485_runs;
    int64_t *futhark_mc_copy_parloop_33485_iter;
    int64_t futhark_mc_copy_parloop_33485_total_total_runtime;
    int futhark_mc_copy_parloop_33485_total_runs;
    int64_t futhark_mc_copy_parloop_33485_total_iter;
    int64_t *futhark_mc_copy_33212_task_33483_total_runtime;
    int *futhark_mc_copy_33212_task_33483_runs;
    int64_t *futhark_mc_copy_33212_task_33483_iter;
    int64_t futhark_mc_copy_33212_task_33483_total_time;
    int64_t futhark_mc_copy_33212_task_33483_total_iter;
    int64_t *futhark_mc_segmap_parloop_33397_total_runtime;
    int *futhark_mc_segmap_parloop_33397_runs;
    int64_t *futhark_mc_segmap_parloop_33397_iter;
    int64_t futhark_mc_segmap_parloop_33397_total_total_runtime;
    int futhark_mc_segmap_parloop_33397_total_runs;
    int64_t futhark_mc_segmap_parloop_33397_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33395_total_runtime;
    int *futhark_mc_segmap_nested_task_33395_runs;
    int64_t *futhark_mc_segmap_nested_task_33395_iter;
    int64_t *futhark_mc_copy_parloop_33489_total_runtime;
    int *futhark_mc_copy_parloop_33489_runs;
    int64_t *futhark_mc_copy_parloop_33489_iter;
    int64_t futhark_mc_copy_parloop_33489_total_total_runtime;
    int futhark_mc_copy_parloop_33489_total_runs;
    int64_t futhark_mc_copy_parloop_33489_total_iter;
    int64_t *futhark_mc_copy_33234_task_33487_total_runtime;
    int *futhark_mc_copy_33234_task_33487_runs;
    int64_t *futhark_mc_copy_33234_task_33487_iter;
    int64_t futhark_mc_copy_33234_task_33487_total_time;
    int64_t futhark_mc_copy_33234_task_33487_total_iter;
    int64_t *futhark_mc_copy_parloop_33493_total_runtime;
    int *futhark_mc_copy_parloop_33493_runs;
    int64_t *futhark_mc_copy_parloop_33493_iter;
    int64_t futhark_mc_copy_parloop_33493_total_total_runtime;
    int futhark_mc_copy_parloop_33493_total_runs;
    int64_t futhark_mc_copy_parloop_33493_total_iter;
    int64_t *futhark_mc_copy_33259_task_33491_total_runtime;
    int *futhark_mc_copy_33259_task_33491_runs;
    int64_t *futhark_mc_copy_33259_task_33491_iter;
    int64_t futhark_mc_copy_33259_task_33491_total_time;
    int64_t futhark_mc_copy_33259_task_33491_total_iter;
    int64_t *futhark_mc_segmap_parloop_33385_total_runtime;
    int *futhark_mc_segmap_parloop_33385_runs;
    int64_t *futhark_mc_segmap_parloop_33385_iter;
    int64_t futhark_mc_segmap_parloop_33385_total_total_runtime;
    int futhark_mc_segmap_parloop_33385_total_runs;
    int64_t futhark_mc_segmap_parloop_33385_total_iter;
    int64_t *futhark_mc_segmap_nested_task_33383_total_runtime;
    int *futhark_mc_segmap_nested_task_33383_runs;
    int64_t *futhark_mc_segmap_nested_task_33383_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_33498_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_33498_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_33498_iter;
    int64_t futhark_mc_segred_stage_1_parloop_33498_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_33498_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_33498_total_iter;
    int64_t *futhark_mc_segred_task_33495_total_runtime;
    int *futhark_mc_segred_task_33495_runs;
    int64_t *futhark_mc_segred_task_33495_iter;
    int64_t futhark_mc_segred_task_33495_total_time;
    int64_t futhark_mc_segred_task_33495_total_iter;
    int64_t *futhark_mc_copy_parloop_33509_total_runtime;
    int *futhark_mc_copy_parloop_33509_runs;
    int64_t *futhark_mc_copy_parloop_33509_iter;
    int64_t futhark_mc_copy_parloop_33509_total_total_runtime;
    int futhark_mc_copy_parloop_33509_total_runs;
    int64_t futhark_mc_copy_parloop_33509_total_iter;
    int64_t *futhark_mc_copy_28019_task_33507_total_runtime;
    int *futhark_mc_copy_28019_task_33507_runs;
    int64_t *futhark_mc_copy_28019_task_33507_iter;
    int64_t futhark_mc_copy_28019_task_33507_total_time;
    int64_t futhark_mc_copy_28019_task_33507_total_iter;
    int64_t *futhark_mc_copy_parloop_33513_total_runtime;
    int *futhark_mc_copy_parloop_33513_runs;
    int64_t *futhark_mc_copy_parloop_33513_iter;
    int64_t futhark_mc_copy_parloop_33513_total_total_runtime;
    int futhark_mc_copy_parloop_33513_total_runs;
    int64_t futhark_mc_copy_parloop_33513_total_iter;
    int64_t *futhark_mc_copy_28029_task_33511_total_runtime;
    int *futhark_mc_copy_28029_task_33511_runs;
    int64_t *futhark_mc_copy_28029_task_33511_iter;
    int64_t futhark_mc_copy_28029_task_33511_total_time;
    int64_t futhark_mc_copy_28029_task_33511_total_iter;
    int64_t *futhark_mc_copy_parloop_33517_total_runtime;
    int *futhark_mc_copy_parloop_33517_runs;
    int64_t *futhark_mc_copy_parloop_33517_iter;
    int64_t futhark_mc_copy_parloop_33517_total_total_runtime;
    int futhark_mc_copy_parloop_33517_total_runs;
    int64_t futhark_mc_copy_parloop_33517_total_iter;
    int64_t *futhark_mc_copy_28039_task_33515_total_runtime;
    int *futhark_mc_copy_28039_task_33515_runs;
    int64_t *futhark_mc_copy_28039_task_33515_iter;
    int64_t futhark_mc_copy_28039_task_33515_total_time;
    int64_t futhark_mc_copy_28039_task_33515_total_iter;
    int64_t *futhark_mc_copy_parloop_33521_total_runtime;
    int *futhark_mc_copy_parloop_33521_runs;
    int64_t *futhark_mc_copy_parloop_33521_iter;
    int64_t futhark_mc_copy_parloop_33521_total_total_runtime;
    int futhark_mc_copy_parloop_33521_total_runs;
    int64_t futhark_mc_copy_parloop_33521_total_iter;
    int64_t *futhark_mc_copy_28049_task_33519_total_runtime;
    int *futhark_mc_copy_28049_task_33519_runs;
    int64_t *futhark_mc_copy_28049_task_33519_iter;
    int64_t futhark_mc_copy_28049_task_33519_total_time;
    int64_t futhark_mc_copy_28049_task_33519_total_iter;
    int64_t *futhark_mc_copy_parloop_33525_total_runtime;
    int *futhark_mc_copy_parloop_33525_runs;
    int64_t *futhark_mc_copy_parloop_33525_iter;
    int64_t futhark_mc_copy_parloop_33525_total_total_runtime;
    int futhark_mc_copy_parloop_33525_total_runs;
    int64_t futhark_mc_copy_parloop_33525_total_iter;
    int64_t *futhark_mc_copy_28059_task_33523_total_runtime;
    int *futhark_mc_copy_28059_task_33523_runs;
    int64_t *futhark_mc_copy_28059_task_33523_iter;
    int64_t futhark_mc_copy_28059_task_33523_total_time;
    int64_t futhark_mc_copy_28059_task_33523_total_iter;
    int64_t *futhark_mc_copy_parloop_33529_total_runtime;
    int *futhark_mc_copy_parloop_33529_runs;
    int64_t *futhark_mc_copy_parloop_33529_iter;
    int64_t futhark_mc_copy_parloop_33529_total_total_runtime;
    int futhark_mc_copy_parloop_33529_total_runs;
    int64_t futhark_mc_copy_parloop_33529_total_iter;
    int64_t *futhark_mc_copy_28069_task_33527_total_runtime;
    int *futhark_mc_copy_28069_task_33527_runs;
    int64_t *futhark_mc_copy_28069_task_33527_iter;
    int64_t futhark_mc_copy_28069_task_33527_total_time;
    int64_t futhark_mc_copy_28069_task_33527_total_iter;
};
static void setup_program(struct futhark_context *ctx)
{
    (void) ctx;
    
    int error = 0;
    
    (void) error;
    ctx->program = malloc(sizeof(struct program));
    ctx->program->futhark_mc_copy_parloop_33282_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33282_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33282_total_iter = 0;
    ctx->program->futhark_mc_copy_28080_task_33280_total_time = 0;
    ctx->program->futhark_mc_copy_28080_task_33280_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33287_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33287_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33287_total_iter = 0;
    ctx->program->futhark_mc_copy_28091_task_33285_total_time = 0;
    ctx->program->futhark_mc_copy_28091_task_33285_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33292_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33292_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33292_total_iter = 0;
    ctx->program->futhark_mc_copy_28102_task_33290_total_time = 0;
    ctx->program->futhark_mc_copy_28102_task_33290_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33296_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33296_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33296_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33294_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33294_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33308_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33308_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33308_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33306_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33306_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33320_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33320_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33320_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33318_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33318_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33332_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33332_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33332_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33330_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33330_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33343_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33343_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33343_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33341_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33341_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33347_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33347_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33347_total_iter = 0;
    ctx->program->futhark_mc_copy_28568_task_33345_total_time = 0;
    ctx->program->futhark_mc_copy_28568_task_33345_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33351_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33351_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33351_total_iter = 0;
    ctx->program->futhark_mc_copy_28578_task_33349_total_time = 0;
    ctx->program->futhark_mc_copy_28578_task_33349_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33337_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33337_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33337_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33355_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33355_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33355_total_iter = 0;
    ctx->program->futhark_mc_copy_28591_task_33353_total_time = 0;
    ctx->program->futhark_mc_copy_28591_task_33353_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33359_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33359_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33359_total_iter = 0;
    ctx->program->futhark_mc_copy_28604_task_33357_total_time = 0;
    ctx->program->futhark_mc_copy_28604_task_33357_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33326_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33326_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33326_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33363_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33363_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33363_total_iter = 0;
    ctx->program->futhark_mc_copy_28620_task_33361_total_time = 0;
    ctx->program->futhark_mc_copy_28620_task_33361_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33367_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33367_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33367_total_iter = 0;
    ctx->program->futhark_mc_copy_28636_task_33365_total_time = 0;
    ctx->program->futhark_mc_copy_28636_task_33365_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33314_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33314_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33314_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33371_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33371_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33371_total_iter = 0;
    ctx->program->futhark_mc_copy_28655_task_33369_total_time = 0;
    ctx->program->futhark_mc_copy_28655_task_33369_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33375_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33375_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33375_total_iter = 0;
    ctx->program->futhark_mc_copy_28674_task_33373_total_time = 0;
    ctx->program->futhark_mc_copy_28674_task_33373_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33302_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33302_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33302_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33379_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33379_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33379_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33377_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33377_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33391_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33391_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33391_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33389_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33389_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33403_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33403_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33403_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33401_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33401_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33415_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33415_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33415_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33413_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33413_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33427_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33427_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33427_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33425_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33425_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33439_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33439_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33439_total_iter = 0;
    ctx->program->futhark_mc_segmap_task_33437_total_time = 0;
    ctx->program->futhark_mc_segmap_task_33437_total_iter = 0;
    ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_total_runtime = 0;
    ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runs = 0;
    ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_iter = 0;
    ctx->program->futhark_mc_segred_task_33446_total_time = 0;
    ctx->program->futhark_mc_segred_task_33446_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33453_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33453_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33453_total_iter = 0;
    ctx->program->futhark_mc_copy_33084_task_33451_total_time = 0;
    ctx->program->futhark_mc_copy_33084_task_33451_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33443_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33443_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33443_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33457_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33457_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33457_total_iter = 0;
    ctx->program->futhark_mc_copy_33094_task_33455_total_time = 0;
    ctx->program->futhark_mc_copy_33094_task_33455_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33461_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33461_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33461_total_iter = 0;
    ctx->program->futhark_mc_copy_33107_task_33459_total_time = 0;
    ctx->program->futhark_mc_copy_33107_task_33459_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33433_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33433_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33433_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33465_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33465_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33465_total_iter = 0;
    ctx->program->futhark_mc_copy_33120_task_33463_total_time = 0;
    ctx->program->futhark_mc_copy_33120_task_33463_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33469_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33469_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33469_total_iter = 0;
    ctx->program->futhark_mc_copy_33136_task_33467_total_time = 0;
    ctx->program->futhark_mc_copy_33136_task_33467_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33421_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33421_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33421_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33473_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33473_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33473_total_iter = 0;
    ctx->program->futhark_mc_copy_33152_task_33471_total_time = 0;
    ctx->program->futhark_mc_copy_33152_task_33471_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33477_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33477_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33477_total_iter = 0;
    ctx->program->futhark_mc_copy_33171_task_33475_total_time = 0;
    ctx->program->futhark_mc_copy_33171_task_33475_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33409_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33409_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33409_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33481_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33481_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33481_total_iter = 0;
    ctx->program->futhark_mc_copy_33190_task_33479_total_time = 0;
    ctx->program->futhark_mc_copy_33190_task_33479_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33485_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33485_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33485_total_iter = 0;
    ctx->program->futhark_mc_copy_33212_task_33483_total_time = 0;
    ctx->program->futhark_mc_copy_33212_task_33483_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33397_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33397_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33397_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33489_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33489_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33489_total_iter = 0;
    ctx->program->futhark_mc_copy_33234_task_33487_total_time = 0;
    ctx->program->futhark_mc_copy_33234_task_33487_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33493_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33493_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33493_total_iter = 0;
    ctx->program->futhark_mc_copy_33259_task_33491_total_time = 0;
    ctx->program->futhark_mc_copy_33259_task_33491_total_iter = 0;
    ctx->program->futhark_mc_segmap_parloop_33385_total_total_runtime = 0;
    ctx->program->futhark_mc_segmap_parloop_33385_total_runs = 0;
    ctx->program->futhark_mc_segmap_parloop_33385_total_iter = 0;
    ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_total_runtime = 0;
    ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runs = 0;
    ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_iter = 0;
    ctx->program->futhark_mc_segred_task_33495_total_time = 0;
    ctx->program->futhark_mc_segred_task_33495_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33509_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33509_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33509_total_iter = 0;
    ctx->program->futhark_mc_copy_28019_task_33507_total_time = 0;
    ctx->program->futhark_mc_copy_28019_task_33507_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33513_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33513_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33513_total_iter = 0;
    ctx->program->futhark_mc_copy_28029_task_33511_total_time = 0;
    ctx->program->futhark_mc_copy_28029_task_33511_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33517_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33517_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33517_total_iter = 0;
    ctx->program->futhark_mc_copy_28039_task_33515_total_time = 0;
    ctx->program->futhark_mc_copy_28039_task_33515_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33521_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33521_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33521_total_iter = 0;
    ctx->program->futhark_mc_copy_28049_task_33519_total_time = 0;
    ctx->program->futhark_mc_copy_28049_task_33519_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33525_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33525_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33525_total_iter = 0;
    ctx->program->futhark_mc_copy_28059_task_33523_total_time = 0;
    ctx->program->futhark_mc_copy_28059_task_33523_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33529_total_total_runtime = 0;
    ctx->program->futhark_mc_copy_parloop_33529_total_runs = 0;
    ctx->program->futhark_mc_copy_parloop_33529_total_iter = 0;
    ctx->program->futhark_mc_copy_28069_task_33527_total_time = 0;
    ctx->program->futhark_mc_copy_28069_task_33527_total_iter = 0;
    ctx->program->futhark_mc_copy_parloop_33282_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33282_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33282_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28080_task_33280_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28080_task_33280_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28080_task_33280_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33287_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33287_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33287_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28091_task_33285_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28091_task_33285_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28091_task_33285_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33292_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33292_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33292_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28102_task_33290_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28102_task_33290_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28102_task_33290_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33296_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33296_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33296_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33294_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33294_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33294_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33308_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33308_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33308_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33306_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33306_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33306_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33320_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33320_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33320_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33318_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33318_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33318_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33332_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33332_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33332_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33330_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33330_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33330_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33343_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33343_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33343_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33341_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33341_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33341_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33347_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33347_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33347_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28568_task_33345_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28568_task_33345_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28568_task_33345_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33351_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33351_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33351_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28578_task_33349_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28578_task_33349_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28578_task_33349_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33337_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33337_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33337_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33335_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33335_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33335_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33355_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33355_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33355_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28591_task_33353_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28591_task_33353_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28591_task_33353_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33359_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33359_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33359_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28604_task_33357_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28604_task_33357_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28604_task_33357_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33326_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33326_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33326_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33324_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33324_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33324_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33363_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33363_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33363_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28620_task_33361_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28620_task_33361_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28620_task_33361_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33367_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33367_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33367_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28636_task_33365_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28636_task_33365_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28636_task_33365_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33314_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33314_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33314_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33312_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33312_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33312_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33371_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33371_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33371_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28655_task_33369_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28655_task_33369_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28655_task_33369_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33375_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33375_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33375_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28674_task_33373_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28674_task_33373_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28674_task_33373_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33302_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33302_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33302_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33300_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33300_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33300_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33379_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33379_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33379_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33377_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33377_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33377_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33391_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33391_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33391_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33389_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33389_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33389_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33403_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33403_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33403_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33401_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33401_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33401_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33415_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33415_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33415_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33413_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33413_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33413_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33427_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33427_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33427_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33425_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33425_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33425_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33439_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33439_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33439_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33437_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33437_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_task_33437_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_stage_1_parloop_33449_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_stage_1_parloop_33449_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_task_33446_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_task_33446_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_task_33446_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33453_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33453_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33453_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33084_task_33451_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33084_task_33451_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33084_task_33451_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33443_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33443_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33443_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33441_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33441_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33441_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33457_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33457_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33457_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33094_task_33455_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33094_task_33455_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33094_task_33455_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33461_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33461_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33461_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33107_task_33459_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33107_task_33459_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33107_task_33459_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33433_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33433_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33433_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33431_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33431_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33431_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33465_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33465_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33465_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33120_task_33463_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33120_task_33463_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33120_task_33463_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33469_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33469_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33469_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33136_task_33467_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33136_task_33467_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33136_task_33467_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33421_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33421_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33421_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33419_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33419_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33419_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33473_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33473_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33473_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33152_task_33471_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33152_task_33471_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33152_task_33471_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33477_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33477_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33477_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33171_task_33475_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33171_task_33475_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33171_task_33475_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33409_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33409_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33409_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33407_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33407_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33407_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33481_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33481_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33481_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33190_task_33479_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33190_task_33479_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33190_task_33479_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33485_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33485_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33485_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33212_task_33483_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33212_task_33483_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33212_task_33483_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33397_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33397_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33397_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33395_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33395_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33395_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33489_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33489_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33489_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33234_task_33487_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33234_task_33487_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33234_task_33487_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33493_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33493_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33493_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33259_task_33491_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33259_task_33491_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_33259_task_33491_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33385_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33385_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_parloop_33385_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33383_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33383_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segmap_nested_task_33383_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_stage_1_parloop_33498_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_stage_1_parloop_33498_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_task_33495_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_task_33495_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_segred_task_33495_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33509_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33509_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33509_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28019_task_33507_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28019_task_33507_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28019_task_33507_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33513_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33513_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33513_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28029_task_33511_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28029_task_33511_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28029_task_33511_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33517_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33517_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33517_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28039_task_33515_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28039_task_33515_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28039_task_33515_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33521_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33521_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33521_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28049_task_33519_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28049_task_33519_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28049_task_33519_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33525_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33525_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33525_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28059_task_33523_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28059_task_33523_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28059_task_33523_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33529_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33529_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_parloop_33529_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28069_task_33527_total_runtime = calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28069_task_33527_runs = calloc(sizeof(int), ctx->scheduler.num_threads);
    ctx->program->futhark_mc_copy_28069_task_33527_iter = calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
}
static void teardown_program(struct futhark_context *ctx)
{
    (void) ctx;
    
    int error = 0;
    
    (void) error;
    free(ctx->program->futhark_mc_copy_parloop_33282_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33282_runs);
    free(ctx->program->futhark_mc_copy_parloop_33282_iter);
    free(ctx->program->futhark_mc_copy_28080_task_33280_total_runtime);
    free(ctx->program->futhark_mc_copy_28080_task_33280_runs);
    free(ctx->program->futhark_mc_copy_28080_task_33280_iter);
    free(ctx->program->futhark_mc_copy_parloop_33287_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33287_runs);
    free(ctx->program->futhark_mc_copy_parloop_33287_iter);
    free(ctx->program->futhark_mc_copy_28091_task_33285_total_runtime);
    free(ctx->program->futhark_mc_copy_28091_task_33285_runs);
    free(ctx->program->futhark_mc_copy_28091_task_33285_iter);
    free(ctx->program->futhark_mc_copy_parloop_33292_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33292_runs);
    free(ctx->program->futhark_mc_copy_parloop_33292_iter);
    free(ctx->program->futhark_mc_copy_28102_task_33290_total_runtime);
    free(ctx->program->futhark_mc_copy_28102_task_33290_runs);
    free(ctx->program->futhark_mc_copy_28102_task_33290_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33296_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33296_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33296_iter);
    free(ctx->program->futhark_mc_segmap_task_33294_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33294_runs);
    free(ctx->program->futhark_mc_segmap_task_33294_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33308_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33308_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33308_iter);
    free(ctx->program->futhark_mc_segmap_task_33306_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33306_runs);
    free(ctx->program->futhark_mc_segmap_task_33306_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33320_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33320_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33320_iter);
    free(ctx->program->futhark_mc_segmap_task_33318_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33318_runs);
    free(ctx->program->futhark_mc_segmap_task_33318_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33332_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33332_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33332_iter);
    free(ctx->program->futhark_mc_segmap_task_33330_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33330_runs);
    free(ctx->program->futhark_mc_segmap_task_33330_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33343_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33343_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33343_iter);
    free(ctx->program->futhark_mc_segmap_task_33341_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33341_runs);
    free(ctx->program->futhark_mc_segmap_task_33341_iter);
    free(ctx->program->futhark_mc_copy_parloop_33347_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33347_runs);
    free(ctx->program->futhark_mc_copy_parloop_33347_iter);
    free(ctx->program->futhark_mc_copy_28568_task_33345_total_runtime);
    free(ctx->program->futhark_mc_copy_28568_task_33345_runs);
    free(ctx->program->futhark_mc_copy_28568_task_33345_iter);
    free(ctx->program->futhark_mc_copy_parloop_33351_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33351_runs);
    free(ctx->program->futhark_mc_copy_parloop_33351_iter);
    free(ctx->program->futhark_mc_copy_28578_task_33349_total_runtime);
    free(ctx->program->futhark_mc_copy_28578_task_33349_runs);
    free(ctx->program->futhark_mc_copy_28578_task_33349_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33337_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33337_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33337_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33335_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33335_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33335_iter);
    free(ctx->program->futhark_mc_copy_parloop_33355_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33355_runs);
    free(ctx->program->futhark_mc_copy_parloop_33355_iter);
    free(ctx->program->futhark_mc_copy_28591_task_33353_total_runtime);
    free(ctx->program->futhark_mc_copy_28591_task_33353_runs);
    free(ctx->program->futhark_mc_copy_28591_task_33353_iter);
    free(ctx->program->futhark_mc_copy_parloop_33359_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33359_runs);
    free(ctx->program->futhark_mc_copy_parloop_33359_iter);
    free(ctx->program->futhark_mc_copy_28604_task_33357_total_runtime);
    free(ctx->program->futhark_mc_copy_28604_task_33357_runs);
    free(ctx->program->futhark_mc_copy_28604_task_33357_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33326_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33326_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33326_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33324_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33324_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33324_iter);
    free(ctx->program->futhark_mc_copy_parloop_33363_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33363_runs);
    free(ctx->program->futhark_mc_copy_parloop_33363_iter);
    free(ctx->program->futhark_mc_copy_28620_task_33361_total_runtime);
    free(ctx->program->futhark_mc_copy_28620_task_33361_runs);
    free(ctx->program->futhark_mc_copy_28620_task_33361_iter);
    free(ctx->program->futhark_mc_copy_parloop_33367_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33367_runs);
    free(ctx->program->futhark_mc_copy_parloop_33367_iter);
    free(ctx->program->futhark_mc_copy_28636_task_33365_total_runtime);
    free(ctx->program->futhark_mc_copy_28636_task_33365_runs);
    free(ctx->program->futhark_mc_copy_28636_task_33365_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33314_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33314_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33314_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33312_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33312_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33312_iter);
    free(ctx->program->futhark_mc_copy_parloop_33371_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33371_runs);
    free(ctx->program->futhark_mc_copy_parloop_33371_iter);
    free(ctx->program->futhark_mc_copy_28655_task_33369_total_runtime);
    free(ctx->program->futhark_mc_copy_28655_task_33369_runs);
    free(ctx->program->futhark_mc_copy_28655_task_33369_iter);
    free(ctx->program->futhark_mc_copy_parloop_33375_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33375_runs);
    free(ctx->program->futhark_mc_copy_parloop_33375_iter);
    free(ctx->program->futhark_mc_copy_28674_task_33373_total_runtime);
    free(ctx->program->futhark_mc_copy_28674_task_33373_runs);
    free(ctx->program->futhark_mc_copy_28674_task_33373_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33302_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33302_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33302_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33300_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33300_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33300_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33379_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33379_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33379_iter);
    free(ctx->program->futhark_mc_segmap_task_33377_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33377_runs);
    free(ctx->program->futhark_mc_segmap_task_33377_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33391_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33391_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33391_iter);
    free(ctx->program->futhark_mc_segmap_task_33389_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33389_runs);
    free(ctx->program->futhark_mc_segmap_task_33389_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33403_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33403_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33403_iter);
    free(ctx->program->futhark_mc_segmap_task_33401_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33401_runs);
    free(ctx->program->futhark_mc_segmap_task_33401_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33415_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33415_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33415_iter);
    free(ctx->program->futhark_mc_segmap_task_33413_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33413_runs);
    free(ctx->program->futhark_mc_segmap_task_33413_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33427_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33427_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33427_iter);
    free(ctx->program->futhark_mc_segmap_task_33425_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33425_runs);
    free(ctx->program->futhark_mc_segmap_task_33425_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33439_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33439_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33439_iter);
    free(ctx->program->futhark_mc_segmap_task_33437_total_runtime);
    free(ctx->program->futhark_mc_segmap_task_33437_runs);
    free(ctx->program->futhark_mc_segmap_task_33437_iter);
    free(ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runtime);
    free(ctx->program->futhark_mc_segred_stage_1_parloop_33449_runs);
    free(ctx->program->futhark_mc_segred_stage_1_parloop_33449_iter);
    free(ctx->program->futhark_mc_segred_task_33446_total_runtime);
    free(ctx->program->futhark_mc_segred_task_33446_runs);
    free(ctx->program->futhark_mc_segred_task_33446_iter);
    free(ctx->program->futhark_mc_copy_parloop_33453_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33453_runs);
    free(ctx->program->futhark_mc_copy_parloop_33453_iter);
    free(ctx->program->futhark_mc_copy_33084_task_33451_total_runtime);
    free(ctx->program->futhark_mc_copy_33084_task_33451_runs);
    free(ctx->program->futhark_mc_copy_33084_task_33451_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33443_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33443_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33443_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33441_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33441_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33441_iter);
    free(ctx->program->futhark_mc_copy_parloop_33457_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33457_runs);
    free(ctx->program->futhark_mc_copy_parloop_33457_iter);
    free(ctx->program->futhark_mc_copy_33094_task_33455_total_runtime);
    free(ctx->program->futhark_mc_copy_33094_task_33455_runs);
    free(ctx->program->futhark_mc_copy_33094_task_33455_iter);
    free(ctx->program->futhark_mc_copy_parloop_33461_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33461_runs);
    free(ctx->program->futhark_mc_copy_parloop_33461_iter);
    free(ctx->program->futhark_mc_copy_33107_task_33459_total_runtime);
    free(ctx->program->futhark_mc_copy_33107_task_33459_runs);
    free(ctx->program->futhark_mc_copy_33107_task_33459_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33433_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33433_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33433_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33431_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33431_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33431_iter);
    free(ctx->program->futhark_mc_copy_parloop_33465_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33465_runs);
    free(ctx->program->futhark_mc_copy_parloop_33465_iter);
    free(ctx->program->futhark_mc_copy_33120_task_33463_total_runtime);
    free(ctx->program->futhark_mc_copy_33120_task_33463_runs);
    free(ctx->program->futhark_mc_copy_33120_task_33463_iter);
    free(ctx->program->futhark_mc_copy_parloop_33469_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33469_runs);
    free(ctx->program->futhark_mc_copy_parloop_33469_iter);
    free(ctx->program->futhark_mc_copy_33136_task_33467_total_runtime);
    free(ctx->program->futhark_mc_copy_33136_task_33467_runs);
    free(ctx->program->futhark_mc_copy_33136_task_33467_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33421_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33421_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33421_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33419_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33419_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33419_iter);
    free(ctx->program->futhark_mc_copy_parloop_33473_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33473_runs);
    free(ctx->program->futhark_mc_copy_parloop_33473_iter);
    free(ctx->program->futhark_mc_copy_33152_task_33471_total_runtime);
    free(ctx->program->futhark_mc_copy_33152_task_33471_runs);
    free(ctx->program->futhark_mc_copy_33152_task_33471_iter);
    free(ctx->program->futhark_mc_copy_parloop_33477_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33477_runs);
    free(ctx->program->futhark_mc_copy_parloop_33477_iter);
    free(ctx->program->futhark_mc_copy_33171_task_33475_total_runtime);
    free(ctx->program->futhark_mc_copy_33171_task_33475_runs);
    free(ctx->program->futhark_mc_copy_33171_task_33475_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33409_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33409_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33409_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33407_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33407_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33407_iter);
    free(ctx->program->futhark_mc_copy_parloop_33481_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33481_runs);
    free(ctx->program->futhark_mc_copy_parloop_33481_iter);
    free(ctx->program->futhark_mc_copy_33190_task_33479_total_runtime);
    free(ctx->program->futhark_mc_copy_33190_task_33479_runs);
    free(ctx->program->futhark_mc_copy_33190_task_33479_iter);
    free(ctx->program->futhark_mc_copy_parloop_33485_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33485_runs);
    free(ctx->program->futhark_mc_copy_parloop_33485_iter);
    free(ctx->program->futhark_mc_copy_33212_task_33483_total_runtime);
    free(ctx->program->futhark_mc_copy_33212_task_33483_runs);
    free(ctx->program->futhark_mc_copy_33212_task_33483_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33397_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33397_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33397_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33395_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33395_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33395_iter);
    free(ctx->program->futhark_mc_copy_parloop_33489_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33489_runs);
    free(ctx->program->futhark_mc_copy_parloop_33489_iter);
    free(ctx->program->futhark_mc_copy_33234_task_33487_total_runtime);
    free(ctx->program->futhark_mc_copy_33234_task_33487_runs);
    free(ctx->program->futhark_mc_copy_33234_task_33487_iter);
    free(ctx->program->futhark_mc_copy_parloop_33493_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33493_runs);
    free(ctx->program->futhark_mc_copy_parloop_33493_iter);
    free(ctx->program->futhark_mc_copy_33259_task_33491_total_runtime);
    free(ctx->program->futhark_mc_copy_33259_task_33491_runs);
    free(ctx->program->futhark_mc_copy_33259_task_33491_iter);
    free(ctx->program->futhark_mc_segmap_parloop_33385_total_runtime);
    free(ctx->program->futhark_mc_segmap_parloop_33385_runs);
    free(ctx->program->futhark_mc_segmap_parloop_33385_iter);
    free(ctx->program->futhark_mc_segmap_nested_task_33383_total_runtime);
    free(ctx->program->futhark_mc_segmap_nested_task_33383_runs);
    free(ctx->program->futhark_mc_segmap_nested_task_33383_iter);
    free(ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runtime);
    free(ctx->program->futhark_mc_segred_stage_1_parloop_33498_runs);
    free(ctx->program->futhark_mc_segred_stage_1_parloop_33498_iter);
    free(ctx->program->futhark_mc_segred_task_33495_total_runtime);
    free(ctx->program->futhark_mc_segred_task_33495_runs);
    free(ctx->program->futhark_mc_segred_task_33495_iter);
    free(ctx->program->futhark_mc_copy_parloop_33509_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33509_runs);
    free(ctx->program->futhark_mc_copy_parloop_33509_iter);
    free(ctx->program->futhark_mc_copy_28019_task_33507_total_runtime);
    free(ctx->program->futhark_mc_copy_28019_task_33507_runs);
    free(ctx->program->futhark_mc_copy_28019_task_33507_iter);
    free(ctx->program->futhark_mc_copy_parloop_33513_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33513_runs);
    free(ctx->program->futhark_mc_copy_parloop_33513_iter);
    free(ctx->program->futhark_mc_copy_28029_task_33511_total_runtime);
    free(ctx->program->futhark_mc_copy_28029_task_33511_runs);
    free(ctx->program->futhark_mc_copy_28029_task_33511_iter);
    free(ctx->program->futhark_mc_copy_parloop_33517_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33517_runs);
    free(ctx->program->futhark_mc_copy_parloop_33517_iter);
    free(ctx->program->futhark_mc_copy_28039_task_33515_total_runtime);
    free(ctx->program->futhark_mc_copy_28039_task_33515_runs);
    free(ctx->program->futhark_mc_copy_28039_task_33515_iter);
    free(ctx->program->futhark_mc_copy_parloop_33521_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33521_runs);
    free(ctx->program->futhark_mc_copy_parloop_33521_iter);
    free(ctx->program->futhark_mc_copy_28049_task_33519_total_runtime);
    free(ctx->program->futhark_mc_copy_28049_task_33519_runs);
    free(ctx->program->futhark_mc_copy_28049_task_33519_iter);
    free(ctx->program->futhark_mc_copy_parloop_33525_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33525_runs);
    free(ctx->program->futhark_mc_copy_parloop_33525_iter);
    free(ctx->program->futhark_mc_copy_28059_task_33523_total_runtime);
    free(ctx->program->futhark_mc_copy_28059_task_33523_runs);
    free(ctx->program->futhark_mc_copy_28059_task_33523_iter);
    free(ctx->program->futhark_mc_copy_parloop_33529_total_runtime);
    free(ctx->program->futhark_mc_copy_parloop_33529_runs);
    free(ctx->program->futhark_mc_copy_parloop_33529_iter);
    free(ctx->program->futhark_mc_copy_28069_task_33527_total_runtime);
    free(ctx->program->futhark_mc_copy_28069_task_33527_runs);
    free(ctx->program->futhark_mc_copy_28069_task_33527_iter);
    free(ctx->program);
}
int memblock_unref(struct futhark_context *ctx, struct memblock *block, const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log, "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n", desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            host_free(ctx, (size_t) block->size, desc, (void *) block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log, "%lld bytes freed (now allocated: %lld bytes)\n", (long long) block->size, (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
int memblock_alloc(struct futhark_context *ctx, struct memblock *block, int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1, "Negative allocation of %lld bytes attempted for %s in %s.\n", (long long) size, desc, "default space", ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log, "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)", (long long) size, desc, "default space", (long long) ctx->cur_mem_usage_default + size);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    host_alloc(ctx, (size_t) size, desc, (size_t *) &size, (void *) &block->mem);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_default += size;
        return FUTHARK_SUCCESS;
    } else {
        // We are naively assuming that any memory allocation error is due to OOM.
        lock_lock(&ctx->error_lock);
        
        char *old_error = ctx->error;
        
        ctx->error = msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s", "default space", (long long) size, (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        lock_unlock(&ctx->error_lock);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
int memblock_set(struct futhark_context *ctx, struct memblock *lhs, struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg, int flag)
{
    cfg->profiling = cfg->logging = cfg->debugging = flag;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg, int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg, int flag)
{
    cfg->logging = flag;
}
void futhark_context_config_set_cache_file(struct futhark_context_config *cfg, const char *f)
{
    cfg->cache_fname = f;
}
int futhark_get_tuning_param_count(void)
{
    return num_tuning_params;
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    { }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33282            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33282_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33282_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33282_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33282_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33282_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33282_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33282_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33282_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33282_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33282_iter[i] / (ctx->program->futhark_mc_copy_parloop_33282_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33282_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33282_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33282_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33282_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33282_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33282_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33282_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33282_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33282_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33282_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33282_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33282_total_iter / (ctx->program->futhark_mc_copy_parloop_33282_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33282_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33282_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33282_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28080_task_33280         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28080_task_33280_runs[i], (long) ctx->program->futhark_mc_copy_28080_task_33280_total_runtime[i] / (ctx->program->futhark_mc_copy_28080_task_33280_runs[i] != 0 ? ctx->program->futhark_mc_copy_28080_task_33280_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28080_task_33280_total_runtime[i], (double) ctx->program->futhark_mc_copy_28080_task_33280_total_runtime[i] / (ctx->program->futhark_mc_copy_28080_task_33280_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28080_task_33280_iter[i]), (long) ctx->program->futhark_mc_copy_28080_task_33280_iter[i], (long) ctx->program->futhark_mc_copy_28080_task_33280_iter[i] / (ctx->program->futhark_mc_copy_28080_task_33280_runs[i] != 0 ? ctx->program->futhark_mc_copy_28080_task_33280_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33287            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33287_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33287_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33287_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33287_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33287_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33287_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33287_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33287_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33287_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33287_iter[i] / (ctx->program->futhark_mc_copy_parloop_33287_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33287_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33287_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33287_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33287_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33287_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33287_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33287_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33287_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33287_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33287_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33287_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33287_total_iter / (ctx->program->futhark_mc_copy_parloop_33287_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33287_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33287_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33287_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28091_task_33285         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28091_task_33285_runs[i], (long) ctx->program->futhark_mc_copy_28091_task_33285_total_runtime[i] / (ctx->program->futhark_mc_copy_28091_task_33285_runs[i] != 0 ? ctx->program->futhark_mc_copy_28091_task_33285_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28091_task_33285_total_runtime[i], (double) ctx->program->futhark_mc_copy_28091_task_33285_total_runtime[i] / (ctx->program->futhark_mc_copy_28091_task_33285_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28091_task_33285_iter[i]), (long) ctx->program->futhark_mc_copy_28091_task_33285_iter[i], (long) ctx->program->futhark_mc_copy_28091_task_33285_iter[i] / (ctx->program->futhark_mc_copy_28091_task_33285_runs[i] != 0 ? ctx->program->futhark_mc_copy_28091_task_33285_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33292            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33292_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33292_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33292_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33292_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33292_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33292_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33292_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33292_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33292_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33292_iter[i] / (ctx->program->futhark_mc_copy_parloop_33292_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33292_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33292_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33292_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33292_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33292_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33292_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33292_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33292_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33292_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33292_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33292_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33292_total_iter / (ctx->program->futhark_mc_copy_parloop_33292_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33292_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33292_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33292_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28102_task_33290         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28102_task_33290_runs[i], (long) ctx->program->futhark_mc_copy_28102_task_33290_total_runtime[i] / (ctx->program->futhark_mc_copy_28102_task_33290_runs[i] != 0 ? ctx->program->futhark_mc_copy_28102_task_33290_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28102_task_33290_total_runtime[i], (double) ctx->program->futhark_mc_copy_28102_task_33290_total_runtime[i] / (ctx->program->futhark_mc_copy_28102_task_33290_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28102_task_33290_iter[i]), (long) ctx->program->futhark_mc_copy_28102_task_33290_iter[i], (long) ctx->program->futhark_mc_copy_28102_task_33290_iter[i] / (ctx->program->futhark_mc_copy_28102_task_33290_runs[i] != 0 ? ctx->program->futhark_mc_copy_28102_task_33290_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33296          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33296_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33296_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33296_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33296_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33296_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33296_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33296_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33296_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33296_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33296_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33296_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33296_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33296_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33296_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33296_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33296_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33296_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33296_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33296_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33296_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33296_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33296_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33296_total_iter / (ctx->program->futhark_mc_segmap_parloop_33296_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33296_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33296_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33296_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33308          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33308_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33308_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33308_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33308_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33308_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33308_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33308_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33308_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33308_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33308_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33308_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33308_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33308_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33308_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33308_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33308_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33308_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33308_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33308_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33308_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33308_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33308_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33308_total_iter / (ctx->program->futhark_mc_segmap_parloop_33308_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33308_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33308_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33308_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33320          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33320_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33320_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33320_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33320_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33320_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33320_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33320_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33320_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33320_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33320_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33320_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33320_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33320_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33320_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33320_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33320_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33320_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33320_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33320_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33320_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33320_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33320_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33320_total_iter / (ctx->program->futhark_mc_segmap_parloop_33320_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33320_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33320_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33320_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33332          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33332_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33332_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33332_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33332_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33332_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33332_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33332_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33332_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33332_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33332_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33332_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33332_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33332_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33332_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33332_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33332_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33332_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33332_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33332_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33332_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33332_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33332_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33332_total_iter / (ctx->program->futhark_mc_segmap_parloop_33332_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33332_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33332_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33332_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33343          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33343_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33343_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33343_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33343_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33343_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33343_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33343_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33343_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33343_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33343_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33343_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33343_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33343_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33343_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33343_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33343_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33343_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33343_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33343_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33343_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33343_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33343_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33343_total_iter / (ctx->program->futhark_mc_segmap_parloop_33343_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33343_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33343_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33343_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33341             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33341_runs[i], (long) ctx->program->futhark_mc_segmap_task_33341_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33341_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33341_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33341_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33341_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33341_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33341_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33341_iter[i], (long) ctx->program->futhark_mc_segmap_task_33341_iter[i] / (ctx->program->futhark_mc_segmap_task_33341_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33341_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33347            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33347_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33347_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33347_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33347_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33347_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33347_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33347_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33347_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33347_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33347_iter[i] / (ctx->program->futhark_mc_copy_parloop_33347_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33347_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33347_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33347_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33347_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33347_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33347_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33347_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33347_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33347_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33347_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33347_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33347_total_iter / (ctx->program->futhark_mc_copy_parloop_33347_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33347_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33347_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33347_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28568_task_33345         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28568_task_33345_runs[i], (long) ctx->program->futhark_mc_copy_28568_task_33345_total_runtime[i] / (ctx->program->futhark_mc_copy_28568_task_33345_runs[i] != 0 ? ctx->program->futhark_mc_copy_28568_task_33345_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28568_task_33345_total_runtime[i], (double) ctx->program->futhark_mc_copy_28568_task_33345_total_runtime[i] / (ctx->program->futhark_mc_copy_28568_task_33345_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28568_task_33345_iter[i]), (long) ctx->program->futhark_mc_copy_28568_task_33345_iter[i], (long) ctx->program->futhark_mc_copy_28568_task_33345_iter[i] / (ctx->program->futhark_mc_copy_28568_task_33345_runs[i] != 0 ? ctx->program->futhark_mc_copy_28568_task_33345_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33351            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33351_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33351_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33351_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33351_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33351_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33351_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33351_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33351_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33351_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33351_iter[i] / (ctx->program->futhark_mc_copy_parloop_33351_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33351_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33351_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33351_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33351_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33351_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33351_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33351_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33351_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33351_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33351_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33351_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33351_total_iter / (ctx->program->futhark_mc_copy_parloop_33351_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33351_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33351_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33351_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28578_task_33349         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28578_task_33349_runs[i], (long) ctx->program->futhark_mc_copy_28578_task_33349_total_runtime[i] / (ctx->program->futhark_mc_copy_28578_task_33349_runs[i] != 0 ? ctx->program->futhark_mc_copy_28578_task_33349_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28578_task_33349_total_runtime[i], (double) ctx->program->futhark_mc_copy_28578_task_33349_total_runtime[i] / (ctx->program->futhark_mc_copy_28578_task_33349_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28578_task_33349_iter[i]), (long) ctx->program->futhark_mc_copy_28578_task_33349_iter[i], (long) ctx->program->futhark_mc_copy_28578_task_33349_iter[i] / (ctx->program->futhark_mc_copy_28578_task_33349_runs[i] != 0 ? ctx->program->futhark_mc_copy_28578_task_33349_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33337          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33337_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33337_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33337_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33337_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33337_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33337_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33337_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33337_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33337_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33337_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33337_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33337_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33337_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33337_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33337_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33337_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33337_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33337_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33337_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33337_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33337_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33337_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33337_total_iter / (ctx->program->futhark_mc_segmap_parloop_33337_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33337_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33337_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33337_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33330             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33330_runs[i], (long) ctx->program->futhark_mc_segmap_task_33330_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33330_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33330_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33330_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33330_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33330_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33330_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33330_iter[i], (long) ctx->program->futhark_mc_segmap_task_33330_iter[i] / (ctx->program->futhark_mc_segmap_task_33330_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33330_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33335      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33335_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33335_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33335_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33335_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33335_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33335_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33335_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33335_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33335_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33335_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33335_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33335_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33355            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33355_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33355_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33355_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33355_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33355_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33355_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33355_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33355_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33355_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33355_iter[i] / (ctx->program->futhark_mc_copy_parloop_33355_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33355_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33355_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33355_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33355_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33355_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33355_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33355_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33355_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33355_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33355_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33355_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33355_total_iter / (ctx->program->futhark_mc_copy_parloop_33355_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33355_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33355_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33355_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28591_task_33353         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28591_task_33353_runs[i], (long) ctx->program->futhark_mc_copy_28591_task_33353_total_runtime[i] / (ctx->program->futhark_mc_copy_28591_task_33353_runs[i] != 0 ? ctx->program->futhark_mc_copy_28591_task_33353_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28591_task_33353_total_runtime[i], (double) ctx->program->futhark_mc_copy_28591_task_33353_total_runtime[i] / (ctx->program->futhark_mc_copy_28591_task_33353_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28591_task_33353_iter[i]), (long) ctx->program->futhark_mc_copy_28591_task_33353_iter[i], (long) ctx->program->futhark_mc_copy_28591_task_33353_iter[i] / (ctx->program->futhark_mc_copy_28591_task_33353_runs[i] != 0 ? ctx->program->futhark_mc_copy_28591_task_33353_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33359            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33359_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33359_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33359_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33359_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33359_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33359_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33359_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33359_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33359_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33359_iter[i] / (ctx->program->futhark_mc_copy_parloop_33359_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33359_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33359_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33359_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33359_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33359_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33359_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33359_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33359_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33359_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33359_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33359_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33359_total_iter / (ctx->program->futhark_mc_copy_parloop_33359_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33359_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33359_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33359_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28604_task_33357         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28604_task_33357_runs[i], (long) ctx->program->futhark_mc_copy_28604_task_33357_total_runtime[i] / (ctx->program->futhark_mc_copy_28604_task_33357_runs[i] != 0 ? ctx->program->futhark_mc_copy_28604_task_33357_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28604_task_33357_total_runtime[i], (double) ctx->program->futhark_mc_copy_28604_task_33357_total_runtime[i] / (ctx->program->futhark_mc_copy_28604_task_33357_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28604_task_33357_iter[i]), (long) ctx->program->futhark_mc_copy_28604_task_33357_iter[i], (long) ctx->program->futhark_mc_copy_28604_task_33357_iter[i] / (ctx->program->futhark_mc_copy_28604_task_33357_runs[i] != 0 ? ctx->program->futhark_mc_copy_28604_task_33357_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33326          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33326_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33326_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33326_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33326_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33326_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33326_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33326_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33326_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33326_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33326_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33326_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33326_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33326_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33326_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33326_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33326_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33326_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33326_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33326_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33326_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33326_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33326_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33326_total_iter / (ctx->program->futhark_mc_segmap_parloop_33326_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33326_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33326_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33326_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33318             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33318_runs[i], (long) ctx->program->futhark_mc_segmap_task_33318_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33318_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33318_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33318_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33318_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33318_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33318_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33318_iter[i], (long) ctx->program->futhark_mc_segmap_task_33318_iter[i] / (ctx->program->futhark_mc_segmap_task_33318_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33318_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33324      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33324_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33324_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33324_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33324_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33324_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33324_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33324_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33324_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33324_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33324_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33324_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33324_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33363            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33363_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33363_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33363_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33363_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33363_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33363_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33363_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33363_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33363_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33363_iter[i] / (ctx->program->futhark_mc_copy_parloop_33363_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33363_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33363_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33363_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33363_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33363_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33363_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33363_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33363_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33363_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33363_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33363_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33363_total_iter / (ctx->program->futhark_mc_copy_parloop_33363_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33363_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33363_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33363_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28620_task_33361         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28620_task_33361_runs[i], (long) ctx->program->futhark_mc_copy_28620_task_33361_total_runtime[i] / (ctx->program->futhark_mc_copy_28620_task_33361_runs[i] != 0 ? ctx->program->futhark_mc_copy_28620_task_33361_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28620_task_33361_total_runtime[i], (double) ctx->program->futhark_mc_copy_28620_task_33361_total_runtime[i] / (ctx->program->futhark_mc_copy_28620_task_33361_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28620_task_33361_iter[i]), (long) ctx->program->futhark_mc_copy_28620_task_33361_iter[i], (long) ctx->program->futhark_mc_copy_28620_task_33361_iter[i] / (ctx->program->futhark_mc_copy_28620_task_33361_runs[i] != 0 ? ctx->program->futhark_mc_copy_28620_task_33361_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33367            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33367_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33367_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33367_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33367_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33367_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33367_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33367_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33367_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33367_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33367_iter[i] / (ctx->program->futhark_mc_copy_parloop_33367_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33367_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33367_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33367_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33367_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33367_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33367_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33367_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33367_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33367_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33367_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33367_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33367_total_iter / (ctx->program->futhark_mc_copy_parloop_33367_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33367_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33367_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33367_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28636_task_33365         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28636_task_33365_runs[i], (long) ctx->program->futhark_mc_copy_28636_task_33365_total_runtime[i] / (ctx->program->futhark_mc_copy_28636_task_33365_runs[i] != 0 ? ctx->program->futhark_mc_copy_28636_task_33365_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28636_task_33365_total_runtime[i], (double) ctx->program->futhark_mc_copy_28636_task_33365_total_runtime[i] / (ctx->program->futhark_mc_copy_28636_task_33365_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28636_task_33365_iter[i]), (long) ctx->program->futhark_mc_copy_28636_task_33365_iter[i], (long) ctx->program->futhark_mc_copy_28636_task_33365_iter[i] / (ctx->program->futhark_mc_copy_28636_task_33365_runs[i] != 0 ? ctx->program->futhark_mc_copy_28636_task_33365_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33314          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33314_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33314_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33314_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33314_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33314_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33314_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33314_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33314_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33314_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33314_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33314_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33314_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33314_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33314_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33314_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33314_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33314_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33314_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33314_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33314_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33314_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33314_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33314_total_iter / (ctx->program->futhark_mc_segmap_parloop_33314_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33314_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33314_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33314_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33306             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33306_runs[i], (long) ctx->program->futhark_mc_segmap_task_33306_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33306_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33306_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33306_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33306_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33306_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33306_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33306_iter[i], (long) ctx->program->futhark_mc_segmap_task_33306_iter[i] / (ctx->program->futhark_mc_segmap_task_33306_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33306_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33312      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33312_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33312_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33312_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33312_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33312_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33312_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33312_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33312_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33312_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33312_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33312_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33312_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33371            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33371_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33371_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33371_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33371_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33371_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33371_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33371_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33371_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33371_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33371_iter[i] / (ctx->program->futhark_mc_copy_parloop_33371_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33371_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33371_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33371_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33371_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33371_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33371_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33371_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33371_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33371_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33371_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33371_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33371_total_iter / (ctx->program->futhark_mc_copy_parloop_33371_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33371_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33371_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33371_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28655_task_33369         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28655_task_33369_runs[i], (long) ctx->program->futhark_mc_copy_28655_task_33369_total_runtime[i] / (ctx->program->futhark_mc_copy_28655_task_33369_runs[i] != 0 ? ctx->program->futhark_mc_copy_28655_task_33369_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28655_task_33369_total_runtime[i], (double) ctx->program->futhark_mc_copy_28655_task_33369_total_runtime[i] / (ctx->program->futhark_mc_copy_28655_task_33369_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28655_task_33369_iter[i]), (long) ctx->program->futhark_mc_copy_28655_task_33369_iter[i], (long) ctx->program->futhark_mc_copy_28655_task_33369_iter[i] / (ctx->program->futhark_mc_copy_28655_task_33369_runs[i] != 0 ? ctx->program->futhark_mc_copy_28655_task_33369_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33375            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33375_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33375_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33375_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33375_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33375_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33375_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33375_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33375_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33375_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33375_iter[i] / (ctx->program->futhark_mc_copy_parloop_33375_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33375_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33375_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33375_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33375_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33375_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33375_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33375_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33375_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33375_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33375_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33375_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33375_total_iter / (ctx->program->futhark_mc_copy_parloop_33375_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33375_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33375_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33375_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28674_task_33373         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28674_task_33373_runs[i], (long) ctx->program->futhark_mc_copy_28674_task_33373_total_runtime[i] / (ctx->program->futhark_mc_copy_28674_task_33373_runs[i] != 0 ? ctx->program->futhark_mc_copy_28674_task_33373_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28674_task_33373_total_runtime[i], (double) ctx->program->futhark_mc_copy_28674_task_33373_total_runtime[i] / (ctx->program->futhark_mc_copy_28674_task_33373_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28674_task_33373_iter[i]), (long) ctx->program->futhark_mc_copy_28674_task_33373_iter[i], (long) ctx->program->futhark_mc_copy_28674_task_33373_iter[i] / (ctx->program->futhark_mc_copy_28674_task_33373_runs[i] != 0 ? ctx->program->futhark_mc_copy_28674_task_33373_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33302          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33302_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33302_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33302_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33302_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33302_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33302_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33302_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33302_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33302_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33302_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33302_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33302_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33302_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33302_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33302_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33302_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33302_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33302_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33302_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33302_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33302_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33302_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33302_total_iter / (ctx->program->futhark_mc_segmap_parloop_33302_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33302_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33302_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33302_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33294             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33294_runs[i], (long) ctx->program->futhark_mc_segmap_task_33294_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33294_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33294_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33294_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33294_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33294_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33294_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33294_iter[i], (long) ctx->program->futhark_mc_segmap_task_33294_iter[i] / (ctx->program->futhark_mc_segmap_task_33294_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33294_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33300      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33300_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33300_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33300_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33300_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33300_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33300_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33300_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33300_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33300_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33300_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33300_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33300_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33379          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33379_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33379_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33379_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33379_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33379_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33379_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33379_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33379_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33379_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33379_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33379_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33379_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33379_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33379_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33379_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33379_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33379_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33379_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33379_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33379_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33379_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33379_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33379_total_iter / (ctx->program->futhark_mc_segmap_parloop_33379_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33379_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33379_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33379_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33391          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33391_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33391_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33391_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33391_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33391_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33391_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33391_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33391_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33391_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33391_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33391_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33391_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33391_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33391_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33391_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33391_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33391_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33391_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33391_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33391_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33391_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33391_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33391_total_iter / (ctx->program->futhark_mc_segmap_parloop_33391_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33391_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33391_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33391_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33403          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33403_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33403_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33403_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33403_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33403_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33403_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33403_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33403_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33403_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33403_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33403_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33403_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33403_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33403_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33403_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33403_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33403_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33403_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33403_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33403_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33403_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33403_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33403_total_iter / (ctx->program->futhark_mc_segmap_parloop_33403_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33403_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33403_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33403_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33415          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33415_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33415_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33415_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33415_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33415_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33415_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33415_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33415_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33415_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33415_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33415_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33415_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33415_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33415_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33415_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33415_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33415_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33415_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33415_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33415_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33415_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33415_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33415_total_iter / (ctx->program->futhark_mc_segmap_parloop_33415_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33415_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33415_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33415_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33427          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33427_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33427_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33427_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33427_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33427_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33427_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33427_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33427_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33427_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33427_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33427_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33427_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33427_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33427_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33427_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33427_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33427_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33427_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33427_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33427_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33427_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33427_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33427_total_iter / (ctx->program->futhark_mc_segmap_parloop_33427_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33427_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33427_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33427_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33439          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33439_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33439_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33439_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33439_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33439_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33439_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33439_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33439_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33439_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33439_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33439_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33439_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33439_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33439_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33439_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33439_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33439_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33439_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33439_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33439_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33439_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33439_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33439_total_iter / (ctx->program->futhark_mc_segmap_parloop_33439_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33439_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33439_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33439_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segred_stage_1_parloop_33449  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segred_stage_1_parloop_33449_runs[i], (long) ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runtime[i] / (ctx->program->futhark_mc_segred_stage_1_parloop_33449_runs[i] != 0 ? ctx->program->futhark_mc_segred_stage_1_parloop_33449_runs[i] : 1), (long) ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runtime[i], (double) ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runtime[i] / (ctx->program->futhark_mc_segred_stage_1_parloop_33449_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segred_stage_1_parloop_33449_iter[i]), (long) ctx->program->futhark_mc_segred_stage_1_parloop_33449_iter[i], (long) ctx->program->futhark_mc_segred_stage_1_parloop_33449_iter[i] / (ctx->program->futhark_mc_segred_stage_1_parloop_33449_runs[i] != 0 ? ctx->program->futhark_mc_segred_stage_1_parloop_33449_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segred_stage_1_parloop_33449_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runs, (long) ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_total_runtime / (ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runs != 0 ? ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runs : 1), (long) ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_total_runtime, (double) ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_total_runtime / (ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_iter), (long) ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_iter, (long) ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_iter / (ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runs != 0 ? ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segred_task_33446             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segred_task_33446_runs[i], (long) ctx->program->futhark_mc_segred_task_33446_total_runtime[i] / (ctx->program->futhark_mc_segred_task_33446_runs[i] != 0 ? ctx->program->futhark_mc_segred_task_33446_runs[i] : 1), (long) ctx->program->futhark_mc_segred_task_33446_total_runtime[i], (double) ctx->program->futhark_mc_segred_task_33446_total_runtime[i] / (ctx->program->futhark_mc_segred_task_33446_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segred_task_33446_iter[i]), (long) ctx->program->futhark_mc_segred_task_33446_iter[i], (long) ctx->program->futhark_mc_segred_task_33446_iter[i] / (ctx->program->futhark_mc_segred_task_33446_runs[i] != 0 ? ctx->program->futhark_mc_segred_task_33446_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33453            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33453_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33453_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33453_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33453_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33453_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33453_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33453_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33453_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33453_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33453_iter[i] / (ctx->program->futhark_mc_copy_parloop_33453_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33453_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33453_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33453_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33453_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33453_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33453_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33453_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33453_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33453_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33453_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33453_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33453_total_iter / (ctx->program->futhark_mc_copy_parloop_33453_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33453_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33453_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33453_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33084_task_33451         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33084_task_33451_runs[i], (long) ctx->program->futhark_mc_copy_33084_task_33451_total_runtime[i] / (ctx->program->futhark_mc_copy_33084_task_33451_runs[i] != 0 ? ctx->program->futhark_mc_copy_33084_task_33451_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33084_task_33451_total_runtime[i], (double) ctx->program->futhark_mc_copy_33084_task_33451_total_runtime[i] / (ctx->program->futhark_mc_copy_33084_task_33451_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33084_task_33451_iter[i]), (long) ctx->program->futhark_mc_copy_33084_task_33451_iter[i], (long) ctx->program->futhark_mc_copy_33084_task_33451_iter[i] / (ctx->program->futhark_mc_copy_33084_task_33451_runs[i] != 0 ? ctx->program->futhark_mc_copy_33084_task_33451_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33443          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33443_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33443_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33443_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33443_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33443_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33443_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33443_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33443_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33443_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33443_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33443_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33443_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33443_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33443_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33443_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33443_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33443_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33443_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33443_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33443_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33443_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33443_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33443_total_iter / (ctx->program->futhark_mc_segmap_parloop_33443_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33443_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33443_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33443_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33437             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33437_runs[i], (long) ctx->program->futhark_mc_segmap_task_33437_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33437_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33437_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33437_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33437_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33437_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33437_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33437_iter[i], (long) ctx->program->futhark_mc_segmap_task_33437_iter[i] / (ctx->program->futhark_mc_segmap_task_33437_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33437_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33441      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33441_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33441_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33441_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33441_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33441_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33441_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33441_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33441_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33441_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33441_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33441_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33441_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33457            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33457_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33457_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33457_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33457_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33457_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33457_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33457_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33457_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33457_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33457_iter[i] / (ctx->program->futhark_mc_copy_parloop_33457_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33457_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33457_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33457_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33457_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33457_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33457_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33457_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33457_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33457_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33457_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33457_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33457_total_iter / (ctx->program->futhark_mc_copy_parloop_33457_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33457_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33457_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33457_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33094_task_33455         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33094_task_33455_runs[i], (long) ctx->program->futhark_mc_copy_33094_task_33455_total_runtime[i] / (ctx->program->futhark_mc_copy_33094_task_33455_runs[i] != 0 ? ctx->program->futhark_mc_copy_33094_task_33455_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33094_task_33455_total_runtime[i], (double) ctx->program->futhark_mc_copy_33094_task_33455_total_runtime[i] / (ctx->program->futhark_mc_copy_33094_task_33455_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33094_task_33455_iter[i]), (long) ctx->program->futhark_mc_copy_33094_task_33455_iter[i], (long) ctx->program->futhark_mc_copy_33094_task_33455_iter[i] / (ctx->program->futhark_mc_copy_33094_task_33455_runs[i] != 0 ? ctx->program->futhark_mc_copy_33094_task_33455_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33461            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33461_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33461_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33461_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33461_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33461_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33461_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33461_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33461_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33461_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33461_iter[i] / (ctx->program->futhark_mc_copy_parloop_33461_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33461_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33461_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33461_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33461_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33461_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33461_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33461_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33461_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33461_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33461_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33461_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33461_total_iter / (ctx->program->futhark_mc_copy_parloop_33461_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33461_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33461_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33461_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33107_task_33459         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33107_task_33459_runs[i], (long) ctx->program->futhark_mc_copy_33107_task_33459_total_runtime[i] / (ctx->program->futhark_mc_copy_33107_task_33459_runs[i] != 0 ? ctx->program->futhark_mc_copy_33107_task_33459_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33107_task_33459_total_runtime[i], (double) ctx->program->futhark_mc_copy_33107_task_33459_total_runtime[i] / (ctx->program->futhark_mc_copy_33107_task_33459_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33107_task_33459_iter[i]), (long) ctx->program->futhark_mc_copy_33107_task_33459_iter[i], (long) ctx->program->futhark_mc_copy_33107_task_33459_iter[i] / (ctx->program->futhark_mc_copy_33107_task_33459_runs[i] != 0 ? ctx->program->futhark_mc_copy_33107_task_33459_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33433          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33433_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33433_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33433_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33433_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33433_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33433_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33433_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33433_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33433_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33433_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33433_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33433_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33433_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33433_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33433_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33433_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33433_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33433_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33433_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33433_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33433_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33433_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33433_total_iter / (ctx->program->futhark_mc_segmap_parloop_33433_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33433_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33433_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33433_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33425             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33425_runs[i], (long) ctx->program->futhark_mc_segmap_task_33425_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33425_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33425_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33425_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33425_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33425_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33425_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33425_iter[i], (long) ctx->program->futhark_mc_segmap_task_33425_iter[i] / (ctx->program->futhark_mc_segmap_task_33425_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33425_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33431      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33431_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33431_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33431_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33431_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33431_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33431_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33431_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33431_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33431_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33431_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33431_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33431_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33465            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33465_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33465_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33465_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33465_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33465_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33465_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33465_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33465_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33465_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33465_iter[i] / (ctx->program->futhark_mc_copy_parloop_33465_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33465_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33465_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33465_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33465_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33465_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33465_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33465_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33465_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33465_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33465_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33465_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33465_total_iter / (ctx->program->futhark_mc_copy_parloop_33465_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33465_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33465_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33465_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33120_task_33463         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33120_task_33463_runs[i], (long) ctx->program->futhark_mc_copy_33120_task_33463_total_runtime[i] / (ctx->program->futhark_mc_copy_33120_task_33463_runs[i] != 0 ? ctx->program->futhark_mc_copy_33120_task_33463_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33120_task_33463_total_runtime[i], (double) ctx->program->futhark_mc_copy_33120_task_33463_total_runtime[i] / (ctx->program->futhark_mc_copy_33120_task_33463_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33120_task_33463_iter[i]), (long) ctx->program->futhark_mc_copy_33120_task_33463_iter[i], (long) ctx->program->futhark_mc_copy_33120_task_33463_iter[i] / (ctx->program->futhark_mc_copy_33120_task_33463_runs[i] != 0 ? ctx->program->futhark_mc_copy_33120_task_33463_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33469            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33469_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33469_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33469_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33469_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33469_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33469_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33469_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33469_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33469_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33469_iter[i] / (ctx->program->futhark_mc_copy_parloop_33469_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33469_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33469_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33469_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33469_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33469_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33469_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33469_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33469_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33469_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33469_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33469_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33469_total_iter / (ctx->program->futhark_mc_copy_parloop_33469_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33469_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33469_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33469_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33136_task_33467         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33136_task_33467_runs[i], (long) ctx->program->futhark_mc_copy_33136_task_33467_total_runtime[i] / (ctx->program->futhark_mc_copy_33136_task_33467_runs[i] != 0 ? ctx->program->futhark_mc_copy_33136_task_33467_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33136_task_33467_total_runtime[i], (double) ctx->program->futhark_mc_copy_33136_task_33467_total_runtime[i] / (ctx->program->futhark_mc_copy_33136_task_33467_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33136_task_33467_iter[i]), (long) ctx->program->futhark_mc_copy_33136_task_33467_iter[i], (long) ctx->program->futhark_mc_copy_33136_task_33467_iter[i] / (ctx->program->futhark_mc_copy_33136_task_33467_runs[i] != 0 ? ctx->program->futhark_mc_copy_33136_task_33467_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33421          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33421_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33421_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33421_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33421_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33421_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33421_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33421_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33421_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33421_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33421_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33421_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33421_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33421_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33421_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33421_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33421_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33421_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33421_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33421_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33421_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33421_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33421_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33421_total_iter / (ctx->program->futhark_mc_segmap_parloop_33421_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33421_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33421_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33421_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33413             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33413_runs[i], (long) ctx->program->futhark_mc_segmap_task_33413_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33413_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33413_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33413_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33413_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33413_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33413_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33413_iter[i], (long) ctx->program->futhark_mc_segmap_task_33413_iter[i] / (ctx->program->futhark_mc_segmap_task_33413_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33413_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33419      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33419_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33419_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33419_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33419_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33419_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33419_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33419_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33419_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33419_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33419_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33419_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33419_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33473            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33473_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33473_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33473_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33473_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33473_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33473_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33473_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33473_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33473_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33473_iter[i] / (ctx->program->futhark_mc_copy_parloop_33473_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33473_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33473_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33473_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33473_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33473_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33473_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33473_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33473_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33473_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33473_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33473_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33473_total_iter / (ctx->program->futhark_mc_copy_parloop_33473_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33473_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33473_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33473_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33152_task_33471         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33152_task_33471_runs[i], (long) ctx->program->futhark_mc_copy_33152_task_33471_total_runtime[i] / (ctx->program->futhark_mc_copy_33152_task_33471_runs[i] != 0 ? ctx->program->futhark_mc_copy_33152_task_33471_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33152_task_33471_total_runtime[i], (double) ctx->program->futhark_mc_copy_33152_task_33471_total_runtime[i] / (ctx->program->futhark_mc_copy_33152_task_33471_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33152_task_33471_iter[i]), (long) ctx->program->futhark_mc_copy_33152_task_33471_iter[i], (long) ctx->program->futhark_mc_copy_33152_task_33471_iter[i] / (ctx->program->futhark_mc_copy_33152_task_33471_runs[i] != 0 ? ctx->program->futhark_mc_copy_33152_task_33471_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33477            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33477_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33477_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33477_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33477_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33477_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33477_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33477_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33477_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33477_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33477_iter[i] / (ctx->program->futhark_mc_copy_parloop_33477_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33477_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33477_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33477_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33477_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33477_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33477_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33477_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33477_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33477_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33477_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33477_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33477_total_iter / (ctx->program->futhark_mc_copy_parloop_33477_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33477_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33477_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33477_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33171_task_33475         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33171_task_33475_runs[i], (long) ctx->program->futhark_mc_copy_33171_task_33475_total_runtime[i] / (ctx->program->futhark_mc_copy_33171_task_33475_runs[i] != 0 ? ctx->program->futhark_mc_copy_33171_task_33475_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33171_task_33475_total_runtime[i], (double) ctx->program->futhark_mc_copy_33171_task_33475_total_runtime[i] / (ctx->program->futhark_mc_copy_33171_task_33475_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33171_task_33475_iter[i]), (long) ctx->program->futhark_mc_copy_33171_task_33475_iter[i], (long) ctx->program->futhark_mc_copy_33171_task_33475_iter[i] / (ctx->program->futhark_mc_copy_33171_task_33475_runs[i] != 0 ? ctx->program->futhark_mc_copy_33171_task_33475_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33409          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33409_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33409_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33409_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33409_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33409_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33409_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33409_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33409_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33409_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33409_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33409_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33409_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33409_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33409_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33409_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33409_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33409_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33409_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33409_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33409_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33409_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33409_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33409_total_iter / (ctx->program->futhark_mc_segmap_parloop_33409_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33409_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33409_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33409_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33401             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33401_runs[i], (long) ctx->program->futhark_mc_segmap_task_33401_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33401_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33401_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33401_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33401_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33401_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33401_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33401_iter[i], (long) ctx->program->futhark_mc_segmap_task_33401_iter[i] / (ctx->program->futhark_mc_segmap_task_33401_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33401_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33407      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33407_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33407_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33407_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33407_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33407_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33407_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33407_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33407_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33407_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33407_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33407_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33407_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33481            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33481_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33481_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33481_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33481_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33481_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33481_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33481_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33481_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33481_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33481_iter[i] / (ctx->program->futhark_mc_copy_parloop_33481_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33481_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33481_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33481_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33481_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33481_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33481_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33481_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33481_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33481_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33481_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33481_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33481_total_iter / (ctx->program->futhark_mc_copy_parloop_33481_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33481_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33481_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33481_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33190_task_33479         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33190_task_33479_runs[i], (long) ctx->program->futhark_mc_copy_33190_task_33479_total_runtime[i] / (ctx->program->futhark_mc_copy_33190_task_33479_runs[i] != 0 ? ctx->program->futhark_mc_copy_33190_task_33479_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33190_task_33479_total_runtime[i], (double) ctx->program->futhark_mc_copy_33190_task_33479_total_runtime[i] / (ctx->program->futhark_mc_copy_33190_task_33479_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33190_task_33479_iter[i]), (long) ctx->program->futhark_mc_copy_33190_task_33479_iter[i], (long) ctx->program->futhark_mc_copy_33190_task_33479_iter[i] / (ctx->program->futhark_mc_copy_33190_task_33479_runs[i] != 0 ? ctx->program->futhark_mc_copy_33190_task_33479_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33485            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33485_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33485_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33485_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33485_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33485_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33485_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33485_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33485_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33485_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33485_iter[i] / (ctx->program->futhark_mc_copy_parloop_33485_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33485_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33485_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33485_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33485_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33485_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33485_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33485_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33485_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33485_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33485_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33485_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33485_total_iter / (ctx->program->futhark_mc_copy_parloop_33485_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33485_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33485_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33485_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33212_task_33483         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33212_task_33483_runs[i], (long) ctx->program->futhark_mc_copy_33212_task_33483_total_runtime[i] / (ctx->program->futhark_mc_copy_33212_task_33483_runs[i] != 0 ? ctx->program->futhark_mc_copy_33212_task_33483_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33212_task_33483_total_runtime[i], (double) ctx->program->futhark_mc_copy_33212_task_33483_total_runtime[i] / (ctx->program->futhark_mc_copy_33212_task_33483_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33212_task_33483_iter[i]), (long) ctx->program->futhark_mc_copy_33212_task_33483_iter[i], (long) ctx->program->futhark_mc_copy_33212_task_33483_iter[i] / (ctx->program->futhark_mc_copy_33212_task_33483_runs[i] != 0 ? ctx->program->futhark_mc_copy_33212_task_33483_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33397          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33397_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33397_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33397_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33397_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33397_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33397_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33397_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33397_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33397_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33397_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33397_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33397_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33397_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33397_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33397_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33397_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33397_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33397_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33397_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33397_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33397_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33397_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33397_total_iter / (ctx->program->futhark_mc_segmap_parloop_33397_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33397_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33397_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33397_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33389             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33389_runs[i], (long) ctx->program->futhark_mc_segmap_task_33389_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33389_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33389_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33389_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33389_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33389_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33389_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33389_iter[i], (long) ctx->program->futhark_mc_segmap_task_33389_iter[i] / (ctx->program->futhark_mc_segmap_task_33389_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33389_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33395      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33395_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33395_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33395_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33395_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33395_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33395_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33395_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33395_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33395_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33395_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33395_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33395_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33489            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33489_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33489_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33489_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33489_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33489_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33489_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33489_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33489_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33489_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33489_iter[i] / (ctx->program->futhark_mc_copy_parloop_33489_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33489_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33489_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33489_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33489_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33489_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33489_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33489_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33489_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33489_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33489_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33489_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33489_total_iter / (ctx->program->futhark_mc_copy_parloop_33489_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33489_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33489_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33489_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33234_task_33487         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33234_task_33487_runs[i], (long) ctx->program->futhark_mc_copy_33234_task_33487_total_runtime[i] / (ctx->program->futhark_mc_copy_33234_task_33487_runs[i] != 0 ? ctx->program->futhark_mc_copy_33234_task_33487_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33234_task_33487_total_runtime[i], (double) ctx->program->futhark_mc_copy_33234_task_33487_total_runtime[i] / (ctx->program->futhark_mc_copy_33234_task_33487_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33234_task_33487_iter[i]), (long) ctx->program->futhark_mc_copy_33234_task_33487_iter[i], (long) ctx->program->futhark_mc_copy_33234_task_33487_iter[i] / (ctx->program->futhark_mc_copy_33234_task_33487_runs[i] != 0 ? ctx->program->futhark_mc_copy_33234_task_33487_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33493            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33493_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33493_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33493_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33493_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33493_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33493_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33493_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33493_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33493_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33493_iter[i] / (ctx->program->futhark_mc_copy_parloop_33493_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33493_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33493_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33493_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33493_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33493_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33493_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33493_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33493_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33493_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33493_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33493_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33493_total_iter / (ctx->program->futhark_mc_copy_parloop_33493_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33493_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33493_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33493_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_33259_task_33491         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_33259_task_33491_runs[i], (long) ctx->program->futhark_mc_copy_33259_task_33491_total_runtime[i] / (ctx->program->futhark_mc_copy_33259_task_33491_runs[i] != 0 ? ctx->program->futhark_mc_copy_33259_task_33491_runs[i] : 1), (long) ctx->program->futhark_mc_copy_33259_task_33491_total_runtime[i], (double) ctx->program->futhark_mc_copy_33259_task_33491_total_runtime[i] / (ctx->program->futhark_mc_copy_33259_task_33491_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_33259_task_33491_iter[i]), (long) ctx->program->futhark_mc_copy_33259_task_33491_iter[i], (long) ctx->program->futhark_mc_copy_33259_task_33491_iter[i] / (ctx->program->futhark_mc_copy_33259_task_33491_runs[i] != 0 ? ctx->program->futhark_mc_copy_33259_task_33491_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_parloop_33385          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_parloop_33385_runs[i], (long) ctx->program->futhark_mc_segmap_parloop_33385_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33385_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33385_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_parloop_33385_total_runtime[i], (double) ctx->program->futhark_mc_segmap_parloop_33385_total_runtime[i] / (ctx->program->futhark_mc_segmap_parloop_33385_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33385_iter[i]), (long) ctx->program->futhark_mc_segmap_parloop_33385_iter[i], (long) ctx->program->futhark_mc_segmap_parloop_33385_iter[i] / (ctx->program->futhark_mc_segmap_parloop_33385_runs[i] != 0 ? ctx->program->futhark_mc_segmap_parloop_33385_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segmap_parloop_33385_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segmap_parloop_33385_total_runs, (long) ctx->program->futhark_mc_segmap_parloop_33385_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33385_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33385_total_runs : 1), (long) ctx->program->futhark_mc_segmap_parloop_33385_total_total_runtime, (double) ctx->program->futhark_mc_segmap_parloop_33385_total_total_runtime / (ctx->program->futhark_mc_segmap_parloop_33385_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_parloop_33385_total_iter), (long) ctx->program->futhark_mc_segmap_parloop_33385_total_iter, (long) ctx->program->futhark_mc_segmap_parloop_33385_total_iter / (ctx->program->futhark_mc_segmap_parloop_33385_total_runs != 0 ? ctx->program->futhark_mc_segmap_parloop_33385_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segmap_parloop_33385_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segmap_parloop_33385_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_task_33377             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_task_33377_runs[i], (long) ctx->program->futhark_mc_segmap_task_33377_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33377_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33377_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_task_33377_total_runtime[i], (double) ctx->program->futhark_mc_segmap_task_33377_total_runtime[i] / (ctx->program->futhark_mc_segmap_task_33377_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_task_33377_iter[i]), (long) ctx->program->futhark_mc_segmap_task_33377_iter[i], (long) ctx->program->futhark_mc_segmap_task_33377_iter[i] / (ctx->program->futhark_mc_segmap_task_33377_runs[i] != 0 ? ctx->program->futhark_mc_segmap_task_33377_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segmap_nested_task_33383      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segmap_nested_task_33383_runs[i], (long) ctx->program->futhark_mc_segmap_nested_task_33383_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33383_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33383_runs[i] : 1), (long) ctx->program->futhark_mc_segmap_nested_task_33383_total_runtime[i], (double) ctx->program->futhark_mc_segmap_nested_task_33383_total_runtime[i] / (ctx->program->futhark_mc_segmap_nested_task_33383_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segmap_nested_task_33383_iter[i]), (long) ctx->program->futhark_mc_segmap_nested_task_33383_iter[i], (long) ctx->program->futhark_mc_segmap_nested_task_33383_iter[i] / (ctx->program->futhark_mc_segmap_nested_task_33383_runs[i] != 0 ? ctx->program->futhark_mc_segmap_nested_task_33383_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segred_stage_1_parloop_33498  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segred_stage_1_parloop_33498_runs[i], (long) ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runtime[i] / (ctx->program->futhark_mc_segred_stage_1_parloop_33498_runs[i] != 0 ? ctx->program->futhark_mc_segred_stage_1_parloop_33498_runs[i] : 1), (long) ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runtime[i], (double) ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runtime[i] / (ctx->program->futhark_mc_segred_stage_1_parloop_33498_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segred_stage_1_parloop_33498_iter[i]), (long) ctx->program->futhark_mc_segred_stage_1_parloop_33498_iter[i], (long) ctx->program->futhark_mc_segred_stage_1_parloop_33498_iter[i] / (ctx->program->futhark_mc_segred_stage_1_parloop_33498_runs[i] != 0 ? ctx->program->futhark_mc_segred_stage_1_parloop_33498_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_segred_stage_1_parloop_33498_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runs, (long) ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_total_runtime / (ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runs != 0 ? ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runs : 1), (long) ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_total_runtime, (double) ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_total_runtime / (ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_iter), (long) ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_iter, (long) ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_iter / (ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runs != 0 ? ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_segred_task_33495             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_segred_task_33495_runs[i], (long) ctx->program->futhark_mc_segred_task_33495_total_runtime[i] / (ctx->program->futhark_mc_segred_task_33495_runs[i] != 0 ? ctx->program->futhark_mc_segred_task_33495_runs[i] : 1), (long) ctx->program->futhark_mc_segred_task_33495_total_runtime[i], (double) ctx->program->futhark_mc_segred_task_33495_total_runtime[i] / (ctx->program->futhark_mc_segred_task_33495_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_segred_task_33495_iter[i]), (long) ctx->program->futhark_mc_segred_task_33495_iter[i], (long) ctx->program->futhark_mc_segred_task_33495_iter[i] / (ctx->program->futhark_mc_segred_task_33495_runs[i] != 0 ? ctx->program->futhark_mc_segred_task_33495_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33509            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33509_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33509_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33509_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33509_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33509_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33509_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33509_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33509_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33509_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33509_iter[i] / (ctx->program->futhark_mc_copy_parloop_33509_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33509_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33509_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33509_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33509_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33509_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33509_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33509_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33509_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33509_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33509_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33509_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33509_total_iter / (ctx->program->futhark_mc_copy_parloop_33509_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33509_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33509_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33509_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28019_task_33507         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28019_task_33507_runs[i], (long) ctx->program->futhark_mc_copy_28019_task_33507_total_runtime[i] / (ctx->program->futhark_mc_copy_28019_task_33507_runs[i] != 0 ? ctx->program->futhark_mc_copy_28019_task_33507_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28019_task_33507_total_runtime[i], (double) ctx->program->futhark_mc_copy_28019_task_33507_total_runtime[i] / (ctx->program->futhark_mc_copy_28019_task_33507_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28019_task_33507_iter[i]), (long) ctx->program->futhark_mc_copy_28019_task_33507_iter[i], (long) ctx->program->futhark_mc_copy_28019_task_33507_iter[i] / (ctx->program->futhark_mc_copy_28019_task_33507_runs[i] != 0 ? ctx->program->futhark_mc_copy_28019_task_33507_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33513            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33513_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33513_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33513_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33513_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33513_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33513_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33513_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33513_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33513_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33513_iter[i] / (ctx->program->futhark_mc_copy_parloop_33513_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33513_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33513_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33513_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33513_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33513_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33513_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33513_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33513_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33513_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33513_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33513_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33513_total_iter / (ctx->program->futhark_mc_copy_parloop_33513_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33513_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33513_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33513_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28029_task_33511         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28029_task_33511_runs[i], (long) ctx->program->futhark_mc_copy_28029_task_33511_total_runtime[i] / (ctx->program->futhark_mc_copy_28029_task_33511_runs[i] != 0 ? ctx->program->futhark_mc_copy_28029_task_33511_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28029_task_33511_total_runtime[i], (double) ctx->program->futhark_mc_copy_28029_task_33511_total_runtime[i] / (ctx->program->futhark_mc_copy_28029_task_33511_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28029_task_33511_iter[i]), (long) ctx->program->futhark_mc_copy_28029_task_33511_iter[i], (long) ctx->program->futhark_mc_copy_28029_task_33511_iter[i] / (ctx->program->futhark_mc_copy_28029_task_33511_runs[i] != 0 ? ctx->program->futhark_mc_copy_28029_task_33511_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33517            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33517_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33517_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33517_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33517_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33517_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33517_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33517_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33517_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33517_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33517_iter[i] / (ctx->program->futhark_mc_copy_parloop_33517_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33517_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33517_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33517_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33517_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33517_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33517_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33517_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33517_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33517_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33517_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33517_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33517_total_iter / (ctx->program->futhark_mc_copy_parloop_33517_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33517_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33517_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33517_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28039_task_33515         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28039_task_33515_runs[i], (long) ctx->program->futhark_mc_copy_28039_task_33515_total_runtime[i] / (ctx->program->futhark_mc_copy_28039_task_33515_runs[i] != 0 ? ctx->program->futhark_mc_copy_28039_task_33515_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28039_task_33515_total_runtime[i], (double) ctx->program->futhark_mc_copy_28039_task_33515_total_runtime[i] / (ctx->program->futhark_mc_copy_28039_task_33515_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28039_task_33515_iter[i]), (long) ctx->program->futhark_mc_copy_28039_task_33515_iter[i], (long) ctx->program->futhark_mc_copy_28039_task_33515_iter[i] / (ctx->program->futhark_mc_copy_28039_task_33515_runs[i] != 0 ? ctx->program->futhark_mc_copy_28039_task_33515_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33521            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33521_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33521_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33521_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33521_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33521_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33521_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33521_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33521_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33521_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33521_iter[i] / (ctx->program->futhark_mc_copy_parloop_33521_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33521_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33521_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33521_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33521_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33521_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33521_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33521_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33521_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33521_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33521_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33521_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33521_total_iter / (ctx->program->futhark_mc_copy_parloop_33521_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33521_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33521_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33521_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28049_task_33519         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28049_task_33519_runs[i], (long) ctx->program->futhark_mc_copy_28049_task_33519_total_runtime[i] / (ctx->program->futhark_mc_copy_28049_task_33519_runs[i] != 0 ? ctx->program->futhark_mc_copy_28049_task_33519_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28049_task_33519_total_runtime[i], (double) ctx->program->futhark_mc_copy_28049_task_33519_total_runtime[i] / (ctx->program->futhark_mc_copy_28049_task_33519_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28049_task_33519_iter[i]), (long) ctx->program->futhark_mc_copy_28049_task_33519_iter[i], (long) ctx->program->futhark_mc_copy_28049_task_33519_iter[i] / (ctx->program->futhark_mc_copy_28049_task_33519_runs[i] != 0 ? ctx->program->futhark_mc_copy_28049_task_33519_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33525            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33525_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33525_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33525_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33525_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33525_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33525_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33525_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33525_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33525_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33525_iter[i] / (ctx->program->futhark_mc_copy_parloop_33525_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33525_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33525_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33525_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33525_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33525_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33525_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33525_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33525_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33525_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33525_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33525_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33525_total_iter / (ctx->program->futhark_mc_copy_parloop_33525_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33525_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33525_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33525_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28059_task_33523         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28059_task_33523_runs[i], (long) ctx->program->futhark_mc_copy_28059_task_33523_total_runtime[i] / (ctx->program->futhark_mc_copy_28059_task_33523_runs[i] != 0 ? ctx->program->futhark_mc_copy_28059_task_33523_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28059_task_33523_total_runtime[i], (double) ctx->program->futhark_mc_copy_28059_task_33523_total_runtime[i] / (ctx->program->futhark_mc_copy_28059_task_33523_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28059_task_33523_iter[i]), (long) ctx->program->futhark_mc_copy_28059_task_33523_iter[i], (long) ctx->program->futhark_mc_copy_28059_task_33523_iter[i] / (ctx->program->futhark_mc_copy_28059_task_33523_runs[i] != 0 ? ctx->program->futhark_mc_copy_28059_task_33523_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_parloop_33529            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_parloop_33529_runs[i], (long) ctx->program->futhark_mc_copy_parloop_33529_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33529_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33529_runs[i] : 1), (long) ctx->program->futhark_mc_copy_parloop_33529_total_runtime[i], (double) ctx->program->futhark_mc_copy_parloop_33529_total_runtime[i] / (ctx->program->futhark_mc_copy_parloop_33529_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33529_iter[i]), (long) ctx->program->futhark_mc_copy_parloop_33529_iter[i], (long) ctx->program->futhark_mc_copy_parloop_33529_iter[i] / (ctx->program->futhark_mc_copy_parloop_33529_runs[i] != 0 ? ctx->program->futhark_mc_copy_parloop_33529_runs[i] : 1));
        fprintf(ctx->log, "         futhark_mc_copy_parloop_33529_total      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", ctx->program->futhark_mc_copy_parloop_33529_total_runs, (long) ctx->program->futhark_mc_copy_parloop_33529_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33529_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33529_total_runs : 1), (long) ctx->program->futhark_mc_copy_parloop_33529_total_total_runtime, (double) ctx->program->futhark_mc_copy_parloop_33529_total_total_runtime / (ctx->program->futhark_mc_copy_parloop_33529_total_iter == 0 ? 1 : (double) ctx->program->futhark_mc_copy_parloop_33529_total_iter), (long) ctx->program->futhark_mc_copy_parloop_33529_total_iter, (long) ctx->program->futhark_mc_copy_parloop_33529_total_iter / (ctx->program->futhark_mc_copy_parloop_33529_total_runs != 0 ? ctx->program->futhark_mc_copy_parloop_33529_total_runs : 1));
        ctx->total_runtime += ctx->program->futhark_mc_copy_parloop_33529_total_total_runtime;
        ctx->total_runs += ctx->program->futhark_mc_copy_parloop_33529_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log, "tid %2d - futhark_mc_copy_28069_task_33527         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n", i, ctx->program->futhark_mc_copy_28069_task_33527_runs[i], (long) ctx->program->futhark_mc_copy_28069_task_33527_total_runtime[i] / (ctx->program->futhark_mc_copy_28069_task_33527_runs[i] != 0 ? ctx->program->futhark_mc_copy_28069_task_33527_runs[i] : 1), (long) ctx->program->futhark_mc_copy_28069_task_33527_total_runtime[i], (double) ctx->program->futhark_mc_copy_28069_task_33527_total_runtime[i] / (ctx->program->futhark_mc_copy_28069_task_33527_iter[i] == 0 ? 1 : (double) ctx->program->futhark_mc_copy_28069_task_33527_iter[i]), (long) ctx->program->futhark_mc_copy_28069_task_33527_iter[i], (long) ctx->program->futhark_mc_copy_28069_task_33527_iter[i] / (ctx->program->futhark_mc_copy_28069_task_33527_runs[i] != 0 ? ctx->program->futhark_mc_copy_28069_task_33527_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

// Start of context.h

// Eventually it would be nice to move the context definition in here
// instead of generating it in the compiler.  For now it defines
// various helper functions that must be available.

// Internal functions.

static void set_error(struct futhark_context* ctx, char *error) {
  lock_lock(&ctx->error_lock);
  if (ctx->error == NULL) {
    ctx->error = error;
  } else {
    free(error);
  }
  lock_unlock(&ctx->error_lock);
}

// XXX: should be static, but used in ispc_util.h
void lexical_realloc_error(struct futhark_context* ctx, size_t new_size) {
  set_error(ctx,
            msgprintf("Failed to allocate memory.\nAttempted allocation: %12lld bytes\n",
                      (long long) new_size));
}

static int lexical_realloc(struct futhark_context *ctx,
                           unsigned char **ptr,
                           int64_t *old_size,
                           int64_t new_size) {
  unsigned char *new = realloc(*ptr, (size_t)new_size);
  if (new == NULL) {
    lexical_realloc_error(ctx, new_size);
    return FUTHARK_OUT_OF_MEMORY;
  } else {
    *ptr = new;
    *old_size = new_size;
    return FUTHARK_SUCCESS;
  }
}

static void free_all_in_free_list(struct futhark_context* ctx) {
  fl_mem mem;
  free_list_pack(&ctx->free_list);
  while (free_list_first(&ctx->free_list, (fl_mem*)&mem) == 0) {
    free((void*)mem);
  }
}

static int is_small_alloc(size_t size) {
  return size < 1024*1024;
}

static void host_alloc(struct futhark_context* ctx,
                       size_t size, const char* tag, size_t* size_out, void** mem_out) {
  if (is_small_alloc(size) || free_list_find(&ctx->free_list, size, tag, size_out, (fl_mem*)mem_out) != 0) {
    *size_out = size;
    *mem_out = malloc(size);
  }
}

static void host_free(struct futhark_context* ctx,
                      size_t size, const char* tag, void* mem) {
  // Small allocations are handled by malloc()s own free list.  The
  // threshold here is kind of arbitrary, but seems to work OK.
  // Larger allocations are mmap()ed/munmapped() every time, which is
  // very slow, and Futhark programs tend to use a few very large
  // allocations.
  if (is_small_alloc(size)) {
    free(mem);
  } else {
    free_list_insert(&ctx->free_list, size, (fl_mem)mem, tag);
  }
}

struct futhark_context_config* futhark_context_config_new(void) {
  struct futhark_context_config* cfg = malloc(sizeof(struct futhark_context_config));
  if (cfg == NULL) {
    return NULL;
  }
  cfg->in_use = 0;
  cfg->debugging = 0;
  cfg->profiling = 0;
  cfg->logging = 0;
  cfg->cache_fname = NULL;
  cfg->num_tuning_params = num_tuning_params;
  cfg->tuning_params = malloc(cfg->num_tuning_params * sizeof(int64_t));
  memcpy(cfg->tuning_params, tuning_param_defaults,
         cfg->num_tuning_params * sizeof(int64_t));
  cfg->tuning_param_names = tuning_param_names;
  cfg->tuning_param_vars = tuning_param_vars;
  cfg->tuning_param_classes = tuning_param_classes;
  backend_context_config_setup(cfg);
  return cfg;
}

void futhark_context_config_free(struct futhark_context_config* cfg) {
  assert(!cfg->in_use);
  backend_context_config_teardown(cfg);
  free(cfg->tuning_params);
  free(cfg);
}

struct futhark_context* futhark_context_new(struct futhark_context_config* cfg) {
  struct futhark_context* ctx = malloc(sizeof(struct futhark_context));
  if (ctx == NULL) {
    return NULL;
  }
  assert(!cfg->in_use);
  ctx->cfg = cfg;
  ctx->cfg->in_use = 1;
  create_lock(&ctx->error_lock);
  create_lock(&ctx->lock);
  free_list_init(&ctx->free_list);
  ctx->peak_mem_usage_default = 0;
  ctx->cur_mem_usage_default = 0;
  ctx->constants = malloc(sizeof(struct constants));
  ctx->detail_memory = cfg->debugging;
  ctx->debugging = cfg->debugging;
  ctx->logging = cfg->logging;
  ctx->profiling = cfg->profiling;
  ctx->profiling_paused = 0;
  ctx->error = NULL;
  ctx->log = stderr;
  if (backend_context_setup(ctx) == 0) {
    setup_program(ctx);
    init_constants(ctx);
    (void)futhark_context_clear_caches(ctx);
    (void)futhark_context_sync(ctx);
  }
  return ctx;
}

void futhark_context_free(struct futhark_context* ctx) {
  free_constants(ctx);
  teardown_program(ctx);
  backend_context_teardown(ctx);
  free_all_in_free_list(ctx);
  free_list_destroy(&ctx->free_list);
  free(ctx->constants);
  free_lock(&ctx->lock);
  free_lock(&ctx->error_lock);
  ctx->cfg->in_use = 0;
  free(ctx);
}

// End of context.h

static int futrts_entry_main(struct futhark_context *ctx, struct memblock *mem_out_p_33499, struct memblock *mem_out_p_33500, struct memblock *mem_out_p_33501, struct memblock *mem_out_p_33502, struct memblock *mem_out_p_33503, struct memblock *mem_out_p_33504, bool *out_prim_out_33505);

struct futhark_mc_task_33279 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26373;
    unsigned char *free_static_array_28071;
};
struct futhark_mc_copy_parloop_struct_33281 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26373;
    unsigned char *free_static_array_28071;
};
static int futhark_mc_copy_parloop_33282(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33281 *futhark_mc_copy_parloop_struct_33281 = (struct futhark_mc_copy_parloop_struct_33281 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33281->ctx;
    uint64_t futhark_mc_copy_parloop_33282_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33282_start = get_wall_time();
    
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_copy_parloop_struct_33281->free_mem_26373, .size =0, .references =NULL};
    struct memblock static_array_28071 = {.desc ="static_array_28071", .mem =futhark_mc_copy_parloop_struct_33281->free_static_array_28071, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28072;
        int64_t end_28073;
        
        start_28072 = start;
        end_28073 = end;
        
        int64_t n_28074 = end_28073 - start_28072;
        
        for (int64_t copy_i_28075 = start_28072; copy_i_28075 < start_28072 + n_28074; copy_i_28075++) {
            int64_t slice_28077 = (int64_t) 2;
            int64_t i_28076 = copy_i_28075;
            int64_t remnant_28078 = copy_i_28075 - i_28076;
            int8_t tmp_28079 = ((int8_t *) static_array_28071.mem)[i_28076];
            
            ((int8_t *) mem_26373.mem)[i_28076] = tmp_28079;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33282_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33282_end - futhark_mc_copy_parloop_33282_start;
        
        ctx->program->futhark_mc_copy_parloop_33282_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33282_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33282_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28080_task_33280(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33279 *futhark_mc_task_33279 = (struct futhark_mc_task_33279 *) args;
    struct futhark_context *ctx = futhark_mc_task_33279->ctx;
    uint64_t futhark_mc_copy_28080_task_33280_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28080_task_33280_start = get_wall_time();
    
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_task_33279->free_mem_26373, .size =0, .references =NULL};
    struct memblock static_array_28071 = {.desc ="static_array_28071", .mem =futhark_mc_task_33279->free_static_array_28071, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33281 futhark_mc_copy_parloop_struct_33281_;
    
    futhark_mc_copy_parloop_struct_33281_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33281_.free_mem_26373 = mem_26373.mem;
    futhark_mc_copy_parloop_struct_33281_.free_static_array_28071 = static_array_28071.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33282_task;
    
    futhark_mc_copy_parloop_33282_task.name = "futhark_mc_copy_parloop_33282";
    futhark_mc_copy_parloop_33282_task.fn = futhark_mc_copy_parloop_33282;
    futhark_mc_copy_parloop_33282_task.args = &futhark_mc_copy_parloop_struct_33281_;
    futhark_mc_copy_parloop_33282_task.iterations = iterations;
    futhark_mc_copy_parloop_33282_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33282_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33282_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33282_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33282_task);
    
    if (futhark_mc_copy_parloop_33282_err != 0) {
        err = futhark_mc_copy_parloop_33282_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33282_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33282_total_end - futhark_mc_copy_parloop_33282_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33282_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33282_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33282_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28080_task_33280_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28080_task_33280_end - futhark_mc_copy_28080_task_33280_start;
        
        ctx->program->futhark_mc_copy_28080_task_33280_runs[tid]++;
        ctx->program->futhark_mc_copy_28080_task_33280_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28080_task_33280_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33284 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26375;
    unsigned char *free_static_array_28082;
};
struct futhark_mc_copy_parloop_struct_33286 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26375;
    unsigned char *free_static_array_28082;
};
static int futhark_mc_copy_parloop_33287(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33286 *futhark_mc_copy_parloop_struct_33286 = (struct futhark_mc_copy_parloop_struct_33286 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33286->ctx;
    uint64_t futhark_mc_copy_parloop_33287_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33287_start = get_wall_time();
    
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_copy_parloop_struct_33286->free_mem_26375, .size =0, .references =NULL};
    struct memblock static_array_28082 = {.desc ="static_array_28082", .mem =futhark_mc_copy_parloop_struct_33286->free_static_array_28082, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28083;
        int64_t end_28084;
        
        start_28083 = start;
        end_28084 = end;
        
        int64_t n_28085 = end_28084 - start_28083;
        
        for (int64_t copy_i_28086 = start_28083; copy_i_28086 < start_28083 + n_28085; copy_i_28086++) {
            int64_t slice_28088 = (int64_t) 16;
            int64_t i_28087 = copy_i_28086;
            int64_t remnant_28089 = copy_i_28086 - i_28087;
            int8_t tmp_28090 = ((int8_t *) static_array_28082.mem)[i_28087];
            
            ((int8_t *) mem_26375.mem)[i_28087] = tmp_28090;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33287_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33287_end - futhark_mc_copy_parloop_33287_start;
        
        ctx->program->futhark_mc_copy_parloop_33287_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33287_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33287_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28091_task_33285(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33284 *futhark_mc_task_33284 = (struct futhark_mc_task_33284 *) args;
    struct futhark_context *ctx = futhark_mc_task_33284->ctx;
    uint64_t futhark_mc_copy_28091_task_33285_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28091_task_33285_start = get_wall_time();
    
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33284->free_mem_26375, .size =0, .references =NULL};
    struct memblock static_array_28082 = {.desc ="static_array_28082", .mem =futhark_mc_task_33284->free_static_array_28082, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33286 futhark_mc_copy_parloop_struct_33286_;
    
    futhark_mc_copy_parloop_struct_33286_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33286_.free_mem_26375 = mem_26375.mem;
    futhark_mc_copy_parloop_struct_33286_.free_static_array_28082 = static_array_28082.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33287_task;
    
    futhark_mc_copy_parloop_33287_task.name = "futhark_mc_copy_parloop_33287";
    futhark_mc_copy_parloop_33287_task.fn = futhark_mc_copy_parloop_33287;
    futhark_mc_copy_parloop_33287_task.args = &futhark_mc_copy_parloop_struct_33286_;
    futhark_mc_copy_parloop_33287_task.iterations = iterations;
    futhark_mc_copy_parloop_33287_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33287_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33287_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33287_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33287_task);
    
    if (futhark_mc_copy_parloop_33287_err != 0) {
        err = futhark_mc_copy_parloop_33287_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33287_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33287_total_end - futhark_mc_copy_parloop_33287_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33287_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33287_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33287_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28091_task_33285_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28091_task_33285_end - futhark_mc_copy_28091_task_33285_start;
        
        ctx->program->futhark_mc_copy_28091_task_33285_runs[tid]++;
        ctx->program->futhark_mc_copy_28091_task_33285_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28091_task_33285_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33289 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26377;
    unsigned char *free_static_array_28093;
};
struct futhark_mc_copy_parloop_struct_33291 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26377;
    unsigned char *free_static_array_28093;
};
static int futhark_mc_copy_parloop_33292(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33291 *futhark_mc_copy_parloop_struct_33291 = (struct futhark_mc_copy_parloop_struct_33291 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33291->ctx;
    uint64_t futhark_mc_copy_parloop_33292_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33292_start = get_wall_time();
    
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_copy_parloop_struct_33291->free_mem_26377, .size =0, .references =NULL};
    struct memblock static_array_28093 = {.desc ="static_array_28093", .mem =futhark_mc_copy_parloop_struct_33291->free_static_array_28093, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28094;
        int64_t end_28095;
        
        start_28094 = start;
        end_28095 = end;
        
        int64_t n_28096 = end_28095 - start_28094;
        
        for (int64_t copy_i_28097 = start_28094; copy_i_28097 < start_28094 + n_28096; copy_i_28097++) {
            int64_t slice_28099 = (int64_t) 16;
            int64_t i_28098 = copy_i_28097;
            int64_t remnant_28100 = copy_i_28097 - i_28098;
            int8_t tmp_28101 = ((int8_t *) static_array_28093.mem)[i_28098];
            
            ((int8_t *) mem_26377.mem)[i_28098] = tmp_28101;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33292_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33292_end - futhark_mc_copy_parloop_33292_start;
        
        ctx->program->futhark_mc_copy_parloop_33292_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33292_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33292_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28102_task_33290(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33289 *futhark_mc_task_33289 = (struct futhark_mc_task_33289 *) args;
    struct futhark_context *ctx = futhark_mc_task_33289->ctx;
    uint64_t futhark_mc_copy_28102_task_33290_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28102_task_33290_start = get_wall_time();
    
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33289->free_mem_26377, .size =0, .references =NULL};
    struct memblock static_array_28093 = {.desc ="static_array_28093", .mem =futhark_mc_task_33289->free_static_array_28093, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33291 futhark_mc_copy_parloop_struct_33291_;
    
    futhark_mc_copy_parloop_struct_33291_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33291_.free_mem_26377 = mem_26377.mem;
    futhark_mc_copy_parloop_struct_33291_.free_static_array_28093 = static_array_28093.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33292_task;
    
    futhark_mc_copy_parloop_33292_task.name = "futhark_mc_copy_parloop_33292";
    futhark_mc_copy_parloop_33292_task.fn = futhark_mc_copy_parloop_33292;
    futhark_mc_copy_parloop_33292_task.args = &futhark_mc_copy_parloop_struct_33291_;
    futhark_mc_copy_parloop_33292_task.iterations = iterations;
    futhark_mc_copy_parloop_33292_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33292_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33292_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33292_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33292_task);
    
    if (futhark_mc_copy_parloop_33292_err != 0) {
        err = futhark_mc_copy_parloop_33292_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33292_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33292_total_end - futhark_mc_copy_parloop_33292_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33292_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33292_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33292_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28102_task_33290_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28102_task_33290_end - futhark_mc_copy_28102_task_33290_start;
        
        ctx->program->futhark_mc_copy_28102_task_33290_runs[tid]++;
        ctx->program->futhark_mc_copy_28102_task_33290_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28102_task_33290_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33293 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26855;
    unsigned char *free_mem_26857;
};
struct futhark_mc_segmap_parloop_struct_33295 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26855;
    unsigned char *free_mem_26857;
};
static int futhark_mc_segmap_parloop_33296(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33295 *futhark_mc_segmap_parloop_struct_33295 = (struct futhark_mc_segmap_parloop_struct_33295 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33295->ctx;
    uint64_t futhark_mc_segmap_parloop_33296_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33296_start = get_wall_time();
    
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_segmap_parloop_struct_33295->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33295->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33295->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_segmap_parloop_struct_33295->free_mem_26857, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_26607_cached_sizze_33297 = 0;
    unsigned char *mem_26607 = NULL;
    int64_t mem_26609_cached_sizze_33298 = 0;
    unsigned char *mem_26609 = NULL;
    int64_t mem_26753_cached_sizze_33299 = 0;
    unsigned char *mem_26753 = NULL;
    int64_t flat_tid_22155;
    
    flat_tid_22155 = subtask_id;
    {
        int64_t start_28140;
        int64_t end_28141;
        
        start_28140 = start;
        end_28141 = end;
        
        int64_t n_28142 = end_28141 - start_28140;
        
        if (mem_26607_cached_sizze_33297 < (int64_t) 1024) {
            err = lexical_realloc(ctx, &mem_26607, &mem_26607_cached_sizze_33297, (int64_t) 1024);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_26609_cached_sizze_33298 < (int64_t) 256) {
            err = lexical_realloc(ctx, &mem_26609, &mem_26609_cached_sizze_33298, (int64_t) 256);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_26753_cached_sizze_33299 < (int64_t) 4) {
            err = lexical_realloc(ctx, &mem_26753, &mem_26753_cached_sizze_33299, (int64_t) 4);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_28143 = start_28140; SegMap_i_28143 < start_28140 + n_28142; SegMap_i_28143++) {
            int64_t slice_28144 = (int64_t) 16;
            int64_t gtid_22156 = SegMap_i_28143;
            int64_t remnant_28145 = SegMap_i_28143 - gtid_22156;
            int8_t x_19837 = ((int8_t *) mem_26375.mem)[gtid_22156];
            
            for (int64_t i_28105 = 0; i_28105 < (int64_t) 16; i_28105++) {
                int8_t x_28108 = ((int8_t *) mem_26375.mem)[i_28105];
                
                for (int64_t i_28111 = 0; i_28111 < (int64_t) 2; i_28111++) {
                    int8_t x_28114 = ((int8_t *) mem_26373.mem)[i_28111];
                    bool u8_res_28115 = itob_i8_bool(x_28114);
                    
                    for (int64_t i_28118 = 0; i_28118 < (int64_t) 2; i_28118++) {
                        int8_t x_28121 = ((int8_t *) mem_26373.mem)[i_28118];
                        bool u8_res_28122 = itob_i8_bool(x_28121);
                        
                        for (int64_t i_28124 = 0; i_28124 < (int64_t) 16; i_28124++) {
                            int8_t x_28126 = ((int8_t *) mem_26375.mem)[i_28124];
                            bool cond_28127 = ult8(x_28126, x_19837);
                            int8_t comperator_res_28128;
                            
                            if (cond_28127 == 1) {
                                comperator_res_28128 = (int8_t) 0;
                            } else {
                                int8_t comperator_res_f_res_28129;
                                
                                if (u8_res_28115 == 1) {
                                    int8_t comperator_res_f_res_t_res_28130 = sub8(x_28126, x_19837);
                                    
                                    comperator_res_f_res_28129 = comperator_res_f_res_t_res_28130;
                                } else {
                                    comperator_res_f_res_28129 = x_28126;
                                }
                                comperator_res_28128 = comperator_res_f_res_28129;
                            }
                            
                            bool cond_28131 = ult8(x_28108, x_28126);
                            int8_t comperator_res_28132;
                            
                            if (cond_28131 == 1) {
                                comperator_res_28132 = (int8_t) 0;
                            } else {
                                int8_t comperator_res_f_res_28133;
                                
                                if (u8_res_28122 == 1) {
                                    int8_t comperator_res_f_res_t_res_28134 = sub8(x_28108, x_28126);
                                    
                                    comperator_res_f_res_28133 = comperator_res_f_res_t_res_28134;
                                } else {
                                    comperator_res_f_res_28133 = x_28108;
                                }
                                comperator_res_28132 = comperator_res_f_res_28133;
                            }
                            
                            bool cond_28135 = ult8(comperator_res_28132, comperator_res_28128);
                            int8_t layer_res_28136;
                            
                            if (cond_28135 == 1) {
                                layer_res_28136 = comperator_res_28128;
                            } else {
                                layer_res_28136 = comperator_res_28132;
                            }
                            ((int8_t *) mem_26607)[i_28105 * (int64_t) 64 + i_28111 * (int64_t) 32 + i_28118 * (int64_t) 16 + i_28124] = layer_res_28136;
                        }
                        ((int8_t *) mem_26753)[(int64_t) 0] = x_19837;
                        ((int8_t *) mem_26753)[(int64_t) 1] = x_28108;
                        ((int8_t *) mem_26753)[(int64_t) 2] = x_28114;
                        ((int8_t *) mem_26753)[(int64_t) 3] = x_28121;
                        if ((int64_t) 4 > 0)
                            memmove(mem_26609 + (i_28105 * (int64_t) 16 + i_28111 * (int64_t) 8 + i_28118 * (int64_t) 4), mem_26753 + (int64_t) 0, (int64_t) 4);
                    }
                }
            }
            if ((int64_t) 1024 > 0)
                memmove(mem_26855.mem + gtid_22156 * (int64_t) 1024, mem_26607 + (int64_t) 0, (int64_t) 1024);
            if ((int64_t) 256 > 0)
                memmove(mem_26857.mem + gtid_22156 * (int64_t) 256, mem_26609 + (int64_t) 0, (int64_t) 256);
        }
    }
    
  cleanup:
    {
        free(mem_26607);
        free(mem_26609);
        free(mem_26753);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33296_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33296_end - futhark_mc_segmap_parloop_33296_start;
        
        ctx->program->futhark_mc_segmap_parloop_33296_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33296_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33296_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33294(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33293 *futhark_mc_task_33293 = (struct futhark_mc_task_33293 *) args;
    struct futhark_context *ctx = futhark_mc_task_33293->ctx;
    uint64_t futhark_mc_segmap_task_33294_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33294_start = get_wall_time();
    
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_task_33293->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33293->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33293->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_task_33293->free_mem_26857, .size =0, .references =NULL};
    int32_t nsubtasks_28104;
    
    nsubtasks_28104 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33295 futhark_mc_segmap_parloop_struct_33295_;
    
    futhark_mc_segmap_parloop_struct_33295_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33295_.free_mem_26373 = mem_26373.mem;
    futhark_mc_segmap_parloop_struct_33295_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33295_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33295_.free_mem_26857 = mem_26857.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33296_task;
    
    futhark_mc_segmap_parloop_33296_task.name = "futhark_mc_segmap_parloop_33296";
    futhark_mc_segmap_parloop_33296_task.fn = futhark_mc_segmap_parloop_33296;
    futhark_mc_segmap_parloop_33296_task.args = &futhark_mc_segmap_parloop_struct_33295_;
    futhark_mc_segmap_parloop_33296_task.iterations = iterations;
    futhark_mc_segmap_parloop_33296_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33296_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33296_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33296_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33296_task);
    
    if (futhark_mc_segmap_parloop_33296_err != 0) {
        err = futhark_mc_segmap_parloop_33296_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33296_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33296_total_end - futhark_mc_segmap_parloop_33296_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33296_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33296_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33296_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33294_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33294_end - futhark_mc_segmap_task_33294_start;
        
        ctx->program->futhark_mc_segmap_task_33294_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33294_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33294_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33301 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26855;
    unsigned char *free_mem_26857;
};
struct futhark_mc_task_33305 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26603;
    unsigned char *free_mem_26605;
};
struct futhark_mc_segmap_parloop_struct_33307 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26603;
    unsigned char *free_mem_26605;
};
static int futhark_mc_segmap_parloop_33308(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33307 *futhark_mc_segmap_parloop_struct_33307 = (struct futhark_mc_segmap_parloop_struct_33307 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33307->ctx;
    uint64_t futhark_mc_segmap_parloop_33308_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33308_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_segmap_parloop_struct_33307->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_segmap_parloop_struct_33307->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33307->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26603 = {.desc ="mem_26603", .mem =futhark_mc_segmap_parloop_struct_33307->free_mem_26603, .size =0, .references =NULL};
    struct memblock mem_26605 = {.desc ="mem_26605", .mem =futhark_mc_segmap_parloop_struct_33307->free_mem_26605, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_28249_cached_sizze_33309 = 0;
    unsigned char *mem_28249 = NULL;
    int64_t mem_28251_cached_sizze_33310 = 0;
    unsigned char *mem_28251 = NULL;
    int64_t mem_28253_cached_sizze_33311 = 0;
    unsigned char *mem_28253 = NULL;
    int64_t flat_tid_28246;
    
    flat_tid_28246 = subtask_id;
    {
        int64_t start_28321;
        int64_t end_28322;
        
        start_28321 = start;
        end_28322 = end;
        
        int64_t n_28323 = end_28322 - start_28321;
        
        if (mem_28249_cached_sizze_33309 < (int64_t) 64) {
            err = lexical_realloc(ctx, &mem_28249, &mem_28249_cached_sizze_33309, (int64_t) 64);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_28251_cached_sizze_33310 < (int64_t) 16) {
            err = lexical_realloc(ctx, &mem_28251, &mem_28251_cached_sizze_33310, (int64_t) 16);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_28253_cached_sizze_33311 < (int64_t) 4) {
            err = lexical_realloc(ctx, &mem_28253, &mem_28253_cached_sizze_33311, (int64_t) 4);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_28324 = start_28321; SegMap_i_28324 < start_28321 + n_28323; SegMap_i_28324++) {
            int64_t slice_28325 = (int64_t) 16;
            int64_t gtid_28247 = SegMap_i_28324;
            int64_t remnant_28326 = SegMap_i_28324 - gtid_28247;
            int8_t x_28248 = ((int8_t *) mem_26375.mem)[gtid_28247];
            
            for (int64_t i_28292 = 0; i_28292 < (int64_t) 2; i_28292++) {
                int8_t x_28295 = ((int8_t *) mem_26373.mem)[i_28292];
                bool u8_res_28296 = itob_i8_bool(x_28295);
                
                for (int64_t i_28299 = 0; i_28299 < (int64_t) 2; i_28299++) {
                    int8_t x_28302 = ((int8_t *) mem_26373.mem)[i_28299];
                    bool u8_res_28303 = itob_i8_bool(x_28302);
                    
                    for (int64_t i_28305 = 0; i_28305 < (int64_t) 16; i_28305++) {
                        int8_t x_28307 = ((int8_t *) mem_26375.mem)[i_28305];
                        bool cond_28308 = ult8(x_28307, x_22304);
                        int8_t comperator_res_28309;
                        
                        if (cond_28308 == 1) {
                            comperator_res_28309 = (int8_t) 0;
                        } else {
                            int8_t comperator_res_f_res_28310;
                            
                            if (u8_res_28296 == 1) {
                                int8_t comperator_res_f_res_t_res_28311 = sub8(x_28307, x_22304);
                                
                                comperator_res_f_res_28310 = comperator_res_f_res_t_res_28311;
                            } else {
                                comperator_res_f_res_28310 = x_28307;
                            }
                            comperator_res_28309 = comperator_res_f_res_28310;
                        }
                        
                        bool cond_28312 = ult8(x_28248, x_28307);
                        int8_t comperator_res_28313;
                        
                        if (cond_28312 == 1) {
                            comperator_res_28313 = (int8_t) 0;
                        } else {
                            int8_t comperator_res_f_res_28314;
                            
                            if (u8_res_28303 == 1) {
                                int8_t comperator_res_f_res_t_res_28315 = sub8(x_28248, x_28307);
                                
                                comperator_res_f_res_28314 = comperator_res_f_res_t_res_28315;
                            } else {
                                comperator_res_f_res_28314 = x_28248;
                            }
                            comperator_res_28313 = comperator_res_f_res_28314;
                        }
                        
                        bool cond_28316 = ult8(comperator_res_28313, comperator_res_28309);
                        int8_t layer_res_28317;
                        
                        if (cond_28316 == 1) {
                            layer_res_28317 = comperator_res_28309;
                        } else {
                            layer_res_28317 = comperator_res_28313;
                        }
                        ((int8_t *) mem_28249)[i_28292 * (int64_t) 32 + i_28299 * (int64_t) 16 + i_28305] = layer_res_28317;
                    }
                    ((int8_t *) mem_28253)[(int64_t) 0] = x_22304;
                    ((int8_t *) mem_28253)[(int64_t) 1] = x_28248;
                    ((int8_t *) mem_28253)[(int64_t) 2] = x_28295;
                    ((int8_t *) mem_28253)[(int64_t) 3] = x_28302;
                    if ((int64_t) 4 > 0)
                        memmove(mem_28251 + (i_28292 * (int64_t) 8 + i_28299 * (int64_t) 4), mem_28253 + (int64_t) 0, (int64_t) 4);
                }
            }
            if ((int64_t) 64 > 0)
                memmove(mem_26603.mem + gtid_28247 * (int64_t) 64, mem_28249 + (int64_t) 0, (int64_t) 64);
            if ((int64_t) 16 > 0)
                memmove(mem_26605.mem + gtid_28247 * (int64_t) 16, mem_28251 + (int64_t) 0, (int64_t) 16);
        }
    }
    
  cleanup:
    {
        free(mem_28249);
        free(mem_28251);
        free(mem_28253);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33308_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33308_end - futhark_mc_segmap_parloop_33308_start;
        
        ctx->program->futhark_mc_segmap_parloop_33308_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33308_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33308_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33306(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33305 *futhark_mc_task_33305 = (struct futhark_mc_task_33305 *) args;
    struct futhark_context *ctx = futhark_mc_task_33305->ctx;
    uint64_t futhark_mc_segmap_task_33306_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33306_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_task_33305->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_task_33305->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33305->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26603 = {.desc ="mem_26603", .mem =futhark_mc_task_33305->free_mem_26603, .size =0, .references =NULL};
    struct memblock mem_26605 = {.desc ="mem_26605", .mem =futhark_mc_task_33305->free_mem_26605, .size =0, .references =NULL};
    int32_t nsubtasks_28291;
    
    nsubtasks_28291 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33307 futhark_mc_segmap_parloop_struct_33307_;
    
    futhark_mc_segmap_parloop_struct_33307_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33307_.free_x_22304 = x_22304;
    futhark_mc_segmap_parloop_struct_33307_.free_mem_26373 = mem_26373.mem;
    futhark_mc_segmap_parloop_struct_33307_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33307_.free_mem_26603 = mem_26603.mem;
    futhark_mc_segmap_parloop_struct_33307_.free_mem_26605 = mem_26605.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33308_task;
    
    futhark_mc_segmap_parloop_33308_task.name = "futhark_mc_segmap_parloop_33308";
    futhark_mc_segmap_parloop_33308_task.fn = futhark_mc_segmap_parloop_33308;
    futhark_mc_segmap_parloop_33308_task.args = &futhark_mc_segmap_parloop_struct_33307_;
    futhark_mc_segmap_parloop_33308_task.iterations = iterations;
    futhark_mc_segmap_parloop_33308_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33308_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33308_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33308_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33308_task);
    
    if (futhark_mc_segmap_parloop_33308_err != 0) {
        err = futhark_mc_segmap_parloop_33308_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33308_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33308_total_end - futhark_mc_segmap_parloop_33308_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33308_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33308_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33308_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33306_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33306_end - futhark_mc_segmap_task_33306_start;
        
        ctx->program->futhark_mc_segmap_task_33306_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33306_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33306_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33313 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26603;
    unsigned char *free_mem_26605;
};
struct futhark_mc_task_33317 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    int8_t free_x_28156;
    unsigned char *free_mem_28157;
    unsigned char *free_mem_28158;
};
struct futhark_mc_segmap_parloop_struct_33319 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    int8_t free_x_28156;
    unsigned char *free_mem_28157;
    unsigned char *free_mem_28158;
};
static int futhark_mc_segmap_parloop_33320(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33319 *futhark_mc_segmap_parloop_struct_33319 = (struct futhark_mc_segmap_parloop_struct_33319 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33319->ctx;
    uint64_t futhark_mc_segmap_parloop_33320_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33320_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_segmap_parloop_struct_33319->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_segmap_parloop_struct_33319->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33319->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_segmap_parloop_struct_33319->free_x_28156;
    struct memblock mem_28157 = {.desc ="mem_28157", .mem =futhark_mc_segmap_parloop_struct_33319->free_mem_28157, .size =0, .references =NULL};
    struct memblock mem_28158 = {.desc ="mem_28158", .mem =futhark_mc_segmap_parloop_struct_33319->free_mem_28158, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_28389_cached_sizze_33321 = 0;
    unsigned char *mem_28389 = NULL;
    int64_t mem_28391_cached_sizze_33322 = 0;
    unsigned char *mem_28391 = NULL;
    int64_t mem_28393_cached_sizze_33323 = 0;
    unsigned char *mem_28393 = NULL;
    int64_t flat_tid_28385;
    
    flat_tid_28385 = subtask_id;
    {
        int64_t start_28447;
        int64_t end_28448;
        
        start_28447 = start;
        end_28448 = end;
        
        int64_t n_28449 = end_28448 - start_28447;
        
        if (mem_28389_cached_sizze_33321 < (int64_t) 32) {
            err = lexical_realloc(ctx, &mem_28389, &mem_28389_cached_sizze_33321, (int64_t) 32);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_28391_cached_sizze_33322 < (int64_t) 8) {
            err = lexical_realloc(ctx, &mem_28391, &mem_28391_cached_sizze_33322, (int64_t) 8);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_28393_cached_sizze_33323 < (int64_t) 4) {
            err = lexical_realloc(ctx, &mem_28393, &mem_28393_cached_sizze_33323, (int64_t) 4);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_28450 = start_28447; SegMap_i_28450 < start_28447 + n_28449; SegMap_i_28450++) {
            int64_t slice_28451 = (int64_t) 2;
            int64_t gtid_28386 = SegMap_i_28450;
            int64_t remnant_28452 = SegMap_i_28450 - gtid_28386;
            int8_t x_28387 = ((int8_t *) mem_26373.mem)[gtid_28386];
            bool u8_res_28388 = itob_i8_bool(x_28387);
            
            for (int64_t i_28425 = 0; i_28425 < (int64_t) 2; i_28425++) {
                int8_t x_28428 = ((int8_t *) mem_26373.mem)[i_28425];
                bool u8_res_28429 = itob_i8_bool(x_28428);
                
                for (int64_t i_28431 = 0; i_28431 < (int64_t) 16; i_28431++) {
                    int8_t x_28433 = ((int8_t *) mem_26375.mem)[i_28431];
                    bool cond_28434 = ult8(x_28433, x_22304);
                    int8_t comperator_res_28435;
                    
                    if (cond_28434 == 1) {
                        comperator_res_28435 = (int8_t) 0;
                    } else {
                        int8_t comperator_res_f_res_28436;
                        
                        if (u8_res_28388 == 1) {
                            int8_t comperator_res_f_res_t_res_28437 = sub8(x_28433, x_22304);
                            
                            comperator_res_f_res_28436 = comperator_res_f_res_t_res_28437;
                        } else {
                            comperator_res_f_res_28436 = x_28433;
                        }
                        comperator_res_28435 = comperator_res_f_res_28436;
                    }
                    
                    bool cond_28438 = ult8(x_28156, x_28433);
                    int8_t comperator_res_28439;
                    
                    if (cond_28438 == 1) {
                        comperator_res_28439 = (int8_t) 0;
                    } else {
                        int8_t comperator_res_f_res_28440;
                        
                        if (u8_res_28429 == 1) {
                            int8_t comperator_res_f_res_t_res_28441 = sub8(x_28156, x_28433);
                            
                            comperator_res_f_res_28440 = comperator_res_f_res_t_res_28441;
                        } else {
                            comperator_res_f_res_28440 = x_28156;
                        }
                        comperator_res_28439 = comperator_res_f_res_28440;
                    }
                    
                    bool cond_28442 = ult8(comperator_res_28439, comperator_res_28435);
                    int8_t layer_res_28443;
                    
                    if (cond_28442 == 1) {
                        layer_res_28443 = comperator_res_28435;
                    } else {
                        layer_res_28443 = comperator_res_28439;
                    }
                    ((int8_t *) mem_28389)[i_28425 * (int64_t) 16 + i_28431] = layer_res_28443;
                }
                ((int8_t *) mem_28393)[(int64_t) 0] = x_22304;
                ((int8_t *) mem_28393)[(int64_t) 1] = x_28156;
                ((int8_t *) mem_28393)[(int64_t) 2] = x_28387;
                ((int8_t *) mem_28393)[(int64_t) 3] = x_28428;
                if ((int64_t) 4 > 0)
                    memmove(mem_28391 + i_28425 * (int64_t) 4, mem_28393 + (int64_t) 0, (int64_t) 4);
            }
            if ((int64_t) 32 > 0)
                memmove(mem_28157.mem + gtid_28386 * (int64_t) 32, mem_28389 + (int64_t) 0, (int64_t) 32);
            if ((int64_t) 8 > 0)
                memmove(mem_28158.mem + gtid_28386 * (int64_t) 8, mem_28391 + (int64_t) 0, (int64_t) 8);
        }
    }
    
  cleanup:
    {
        free(mem_28389);
        free(mem_28391);
        free(mem_28393);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33320_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33320_end - futhark_mc_segmap_parloop_33320_start;
        
        ctx->program->futhark_mc_segmap_parloop_33320_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33320_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33320_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33318(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33317 *futhark_mc_task_33317 = (struct futhark_mc_task_33317 *) args;
    struct futhark_context *ctx = futhark_mc_task_33317->ctx;
    uint64_t futhark_mc_segmap_task_33318_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33318_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_task_33317->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_task_33317->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33317->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_task_33317->free_x_28156;
    struct memblock mem_28157 = {.desc ="mem_28157", .mem =futhark_mc_task_33317->free_mem_28157, .size =0, .references =NULL};
    struct memblock mem_28158 = {.desc ="mem_28158", .mem =futhark_mc_task_33317->free_mem_28158, .size =0, .references =NULL};
    int32_t nsubtasks_28424;
    
    nsubtasks_28424 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33319 futhark_mc_segmap_parloop_struct_33319_;
    
    futhark_mc_segmap_parloop_struct_33319_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33319_.free_x_22304 = x_22304;
    futhark_mc_segmap_parloop_struct_33319_.free_mem_26373 = mem_26373.mem;
    futhark_mc_segmap_parloop_struct_33319_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33319_.free_x_28156 = x_28156;
    futhark_mc_segmap_parloop_struct_33319_.free_mem_28157 = mem_28157.mem;
    futhark_mc_segmap_parloop_struct_33319_.free_mem_28158 = mem_28158.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33320_task;
    
    futhark_mc_segmap_parloop_33320_task.name = "futhark_mc_segmap_parloop_33320";
    futhark_mc_segmap_parloop_33320_task.fn = futhark_mc_segmap_parloop_33320;
    futhark_mc_segmap_parloop_33320_task.args = &futhark_mc_segmap_parloop_struct_33319_;
    futhark_mc_segmap_parloop_33320_task.iterations = iterations;
    futhark_mc_segmap_parloop_33320_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33320_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33320_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33320_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33320_task);
    
    if (futhark_mc_segmap_parloop_33320_err != 0) {
        err = futhark_mc_segmap_parloop_33320_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33320_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33320_total_end - futhark_mc_segmap_parloop_33320_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33320_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33320_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33320_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33318_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33318_end - futhark_mc_segmap_task_33318_start;
        
        ctx->program->futhark_mc_segmap_task_33318_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33318_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33318_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33325 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    int8_t free_x_28156;
    unsigned char *free_mem_28157;
    unsigned char *free_mem_28158;
};
struct futhark_mc_task_33329 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    int8_t free_x_28156;
    int8_t free_x_28335;
    bool free_u8_res_28336;
    unsigned char *free_mem_28337;
    unsigned char *free_mem_28338;
};
struct futhark_mc_segmap_parloop_struct_33331 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    int8_t free_x_28156;
    int8_t free_x_28335;
    bool free_u8_res_28336;
    unsigned char *free_mem_28337;
    unsigned char *free_mem_28338;
};
static int futhark_mc_segmap_parloop_33332(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33331 *futhark_mc_segmap_parloop_struct_33331 = (struct futhark_mc_segmap_parloop_struct_33331 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33331->ctx;
    uint64_t futhark_mc_segmap_parloop_33332_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33332_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_segmap_parloop_struct_33331->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_segmap_parloop_struct_33331->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33331->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_segmap_parloop_struct_33331->free_x_28156;
    int8_t x_28335 = futhark_mc_segmap_parloop_struct_33331->free_x_28335;
    bool u8_res_28336 = futhark_mc_segmap_parloop_struct_33331->free_u8_res_28336;
    struct memblock mem_28337 = {.desc ="mem_28337", .mem =futhark_mc_segmap_parloop_struct_33331->free_mem_28337, .size =0, .references =NULL};
    struct memblock mem_28338 = {.desc ="mem_28338", .mem =futhark_mc_segmap_parloop_struct_33331->free_mem_28338, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_28482_cached_sizze_33333 = 0;
    unsigned char *mem_28482 = NULL;
    int64_t mem_28499_cached_sizze_33334 = 0;
    unsigned char *mem_28499 = NULL;
    int64_t flat_tid_28478;
    
    flat_tid_28478 = subtask_id;
    {
        int64_t start_28522;
        int64_t end_28523;
        
        start_28522 = start;
        end_28523 = end;
        
        int64_t n_28524 = end_28523 - start_28522;
        
        if (mem_28482_cached_sizze_33333 < (int64_t) 16) {
            err = lexical_realloc(ctx, &mem_28482, &mem_28482_cached_sizze_33333, (int64_t) 16);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_28499_cached_sizze_33334 < (int64_t) 4) {
            err = lexical_realloc(ctx, &mem_28499, &mem_28499_cached_sizze_33334, (int64_t) 4);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_28525 = start_28522; SegMap_i_28525 < start_28522 + n_28524; SegMap_i_28525++) {
            int64_t slice_28526 = (int64_t) 2;
            int64_t gtid_28479 = SegMap_i_28525;
            int64_t remnant_28527 = SegMap_i_28525 - gtid_28479;
            int8_t x_28480 = ((int8_t *) mem_26373.mem)[gtid_28479];
            bool u8_res_28481 = itob_i8_bool(x_28480);
            
            for (int64_t i_28508 = 0; i_28508 < (int64_t) 16; i_28508++) {
                int8_t x_28510 = ((int8_t *) mem_26375.mem)[i_28508];
                bool cond_28511 = ult8(x_28510, x_22304);
                int8_t comperator_res_28512;
                
                if (cond_28511 == 1) {
                    comperator_res_28512 = (int8_t) 0;
                } else {
                    int8_t comperator_res_f_res_28513;
                    
                    if (u8_res_28336 == 1) {
                        int8_t comperator_res_f_res_t_res_28514 = sub8(x_28510, x_22304);
                        
                        comperator_res_f_res_28513 = comperator_res_f_res_t_res_28514;
                    } else {
                        comperator_res_f_res_28513 = x_28510;
                    }
                    comperator_res_28512 = comperator_res_f_res_28513;
                }
                
                bool cond_28515 = ult8(x_28156, x_28510);
                int8_t comperator_res_28516;
                
                if (cond_28515 == 1) {
                    comperator_res_28516 = (int8_t) 0;
                } else {
                    int8_t comperator_res_f_res_28517;
                    
                    if (u8_res_28481 == 1) {
                        int8_t comperator_res_f_res_t_res_28518 = sub8(x_28156, x_28510);
                        
                        comperator_res_f_res_28517 = comperator_res_f_res_t_res_28518;
                    } else {
                        comperator_res_f_res_28517 = x_28156;
                    }
                    comperator_res_28516 = comperator_res_f_res_28517;
                }
                
                bool cond_28519 = ult8(comperator_res_28516, comperator_res_28512);
                int8_t layer_res_28520;
                
                if (cond_28519 == 1) {
                    layer_res_28520 = comperator_res_28512;
                } else {
                    layer_res_28520 = comperator_res_28516;
                }
                ((int8_t *) mem_28482)[i_28508] = layer_res_28520;
            }
            ((int8_t *) mem_28499)[(int64_t) 0] = x_22304;
            ((int8_t *) mem_28499)[(int64_t) 1] = x_28156;
            ((int8_t *) mem_28499)[(int64_t) 2] = x_28335;
            ((int8_t *) mem_28499)[(int64_t) 3] = x_28480;
            if ((int64_t) 16 > 0)
                memmove(mem_28337.mem + gtid_28479 * (int64_t) 16, mem_28482 + (int64_t) 0, (int64_t) 16);
            if ((int64_t) 4 > 0)
                memmove(mem_28338.mem + gtid_28479 * (int64_t) 4, mem_28499 + (int64_t) 0, (int64_t) 4);
        }
    }
    
  cleanup:
    {
        free(mem_28482);
        free(mem_28499);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33332_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33332_end - futhark_mc_segmap_parloop_33332_start;
        
        ctx->program->futhark_mc_segmap_parloop_33332_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33332_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33332_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33330(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33329 *futhark_mc_task_33329 = (struct futhark_mc_task_33329 *) args;
    struct futhark_context *ctx = futhark_mc_task_33329->ctx;
    uint64_t futhark_mc_segmap_task_33330_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33330_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_task_33329->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_task_33329->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33329->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_task_33329->free_x_28156;
    int8_t x_28335 = futhark_mc_task_33329->free_x_28335;
    bool u8_res_28336 = futhark_mc_task_33329->free_u8_res_28336;
    struct memblock mem_28337 = {.desc ="mem_28337", .mem =futhark_mc_task_33329->free_mem_28337, .size =0, .references =NULL};
    struct memblock mem_28338 = {.desc ="mem_28338", .mem =futhark_mc_task_33329->free_mem_28338, .size =0, .references =NULL};
    int32_t nsubtasks_28507;
    
    nsubtasks_28507 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33331 futhark_mc_segmap_parloop_struct_33331_;
    
    futhark_mc_segmap_parloop_struct_33331_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33331_.free_x_22304 = x_22304;
    futhark_mc_segmap_parloop_struct_33331_.free_mem_26373 = mem_26373.mem;
    futhark_mc_segmap_parloop_struct_33331_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33331_.free_x_28156 = x_28156;
    futhark_mc_segmap_parloop_struct_33331_.free_x_28335 = x_28335;
    futhark_mc_segmap_parloop_struct_33331_.free_u8_res_28336 = u8_res_28336;
    futhark_mc_segmap_parloop_struct_33331_.free_mem_28337 = mem_28337.mem;
    futhark_mc_segmap_parloop_struct_33331_.free_mem_28338 = mem_28338.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33332_task;
    
    futhark_mc_segmap_parloop_33332_task.name = "futhark_mc_segmap_parloop_33332";
    futhark_mc_segmap_parloop_33332_task.fn = futhark_mc_segmap_parloop_33332;
    futhark_mc_segmap_parloop_33332_task.args = &futhark_mc_segmap_parloop_struct_33331_;
    futhark_mc_segmap_parloop_33332_task.iterations = iterations;
    futhark_mc_segmap_parloop_33332_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33332_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33332_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33332_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33332_task);
    
    if (futhark_mc_segmap_parloop_33332_err != 0) {
        err = futhark_mc_segmap_parloop_33332_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33332_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33332_total_end - futhark_mc_segmap_parloop_33332_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33332_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33332_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33332_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33330_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33330_end - futhark_mc_segmap_task_33330_start;
        
        ctx->program->futhark_mc_segmap_task_33330_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33330_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33330_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33336 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26373;
    unsigned char *free_mem_26375;
    int8_t free_x_28156;
    int8_t free_x_28335;
    bool free_u8_res_28336;
    unsigned char *free_mem_28337;
    unsigned char *free_mem_28338;
};
struct futhark_mc_task_33340 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26375;
    int8_t free_x_28156;
    bool free_u8_res_28336;
    bool free_u8_res_28460;
    unsigned char *free_mem_28461;
};
struct futhark_mc_segmap_parloop_struct_33342 {
    struct futhark_context *ctx;
    int8_t free_x_22304;
    unsigned char *free_mem_26375;
    int8_t free_x_28156;
    bool free_u8_res_28336;
    bool free_u8_res_28460;
    unsigned char *free_mem_28461;
};
static int futhark_mc_segmap_parloop_33343(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33342 *futhark_mc_segmap_parloop_struct_33342 = (struct futhark_mc_segmap_parloop_struct_33342 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33342->ctx;
    uint64_t futhark_mc_segmap_parloop_33343_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33343_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_segmap_parloop_struct_33342->free_x_22304;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33342->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_segmap_parloop_struct_33342->free_x_28156;
    bool u8_res_28336 = futhark_mc_segmap_parloop_struct_33342->free_u8_res_28336;
    bool u8_res_28460 = futhark_mc_segmap_parloop_struct_33342->free_u8_res_28460;
    struct memblock mem_28461 = {.desc ="mem_28461", .mem =futhark_mc_segmap_parloop_struct_33342->free_mem_28461, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t flat_tid_28530;
    
    flat_tid_28530 = subtask_id;
    {
        int64_t start_28554;
        int64_t end_28555;
        
        start_28554 = start;
        end_28555 = end;
        
        int64_t n_28556 = end_28555 - start_28554;
        
        for (int64_t SegMap_i_28557 = start_28554; SegMap_i_28557 < start_28554 + n_28556; SegMap_i_28557++) {
            int64_t slice_28558 = (int64_t) 16;
            int64_t gtid_28531 = SegMap_i_28557;
            int64_t remnant_28559 = SegMap_i_28557 - gtid_28531;
            int8_t x_28532 = ((int8_t *) mem_26375.mem)[gtid_28531];
            bool cond_28533 = ult8(x_28532, x_22304);
            int8_t comperator_res_28534;
            
            if (cond_28533 == 1) {
                comperator_res_28534 = (int8_t) 0;
            } else {
                int8_t comperator_res_f_res_28550;
                
                if (u8_res_28336 == 1) {
                    int8_t comperator_res_f_res_t_res_28551 = sub8(x_28532, x_22304);
                    
                    comperator_res_f_res_28550 = comperator_res_f_res_t_res_28551;
                } else {
                    comperator_res_f_res_28550 = x_28532;
                }
                comperator_res_28534 = comperator_res_f_res_28550;
            }
            
            bool cond_28537 = ult8(x_28156, x_28532);
            int8_t comperator_res_28538;
            
            if (cond_28537 == 1) {
                comperator_res_28538 = (int8_t) 0;
            } else {
                int8_t comperator_res_f_res_28552;
                
                if (u8_res_28460 == 1) {
                    int8_t comperator_res_f_res_t_res_28553 = sub8(x_28156, x_28532);
                    
                    comperator_res_f_res_28552 = comperator_res_f_res_t_res_28553;
                } else {
                    comperator_res_f_res_28552 = x_28156;
                }
                comperator_res_28538 = comperator_res_f_res_28552;
            }
            
            bool cond_28541 = ult8(comperator_res_28538, comperator_res_28534);
            int8_t layer_res_28542;
            
            if (cond_28541 == 1) {
                layer_res_28542 = comperator_res_28534;
            } else {
                layer_res_28542 = comperator_res_28538;
            }
            ((int8_t *) mem_28461.mem)[gtid_28531] = layer_res_28542;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33343_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33343_end - futhark_mc_segmap_parloop_33343_start;
        
        ctx->program->futhark_mc_segmap_parloop_33343_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33343_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33343_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33341(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33340 *futhark_mc_task_33340 = (struct futhark_mc_task_33340 *) args;
    struct futhark_context *ctx = futhark_mc_task_33340->ctx;
    uint64_t futhark_mc_segmap_task_33341_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33341_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_task_33340->free_x_22304;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33340->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_task_33340->free_x_28156;
    bool u8_res_28336 = futhark_mc_task_33340->free_u8_res_28336;
    bool u8_res_28460 = futhark_mc_task_33340->free_u8_res_28460;
    struct memblock mem_28461 = {.desc ="mem_28461", .mem =futhark_mc_task_33340->free_mem_28461, .size =0, .references =NULL};
    int32_t nsubtasks_28549;
    
    nsubtasks_28549 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33342 futhark_mc_segmap_parloop_struct_33342_;
    
    futhark_mc_segmap_parloop_struct_33342_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33342_.free_x_22304 = x_22304;
    futhark_mc_segmap_parloop_struct_33342_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33342_.free_x_28156 = x_28156;
    futhark_mc_segmap_parloop_struct_33342_.free_u8_res_28336 = u8_res_28336;
    futhark_mc_segmap_parloop_struct_33342_.free_u8_res_28460 = u8_res_28460;
    futhark_mc_segmap_parloop_struct_33342_.free_mem_28461 = mem_28461.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33343_task;
    
    futhark_mc_segmap_parloop_33343_task.name = "futhark_mc_segmap_parloop_33343";
    futhark_mc_segmap_parloop_33343_task.fn = futhark_mc_segmap_parloop_33343;
    futhark_mc_segmap_parloop_33343_task.args = &futhark_mc_segmap_parloop_struct_33342_;
    futhark_mc_segmap_parloop_33343_task.iterations = iterations;
    futhark_mc_segmap_parloop_33343_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33343_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33343_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33343_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33343_task);
    
    if (futhark_mc_segmap_parloop_33343_err != 0) {
        err = futhark_mc_segmap_parloop_33343_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33343_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33343_total_end - futhark_mc_segmap_parloop_33343_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33343_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33343_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33343_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33341_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33341_end - futhark_mc_segmap_task_33341_start;
        
        ctx->program->futhark_mc_segmap_task_33341_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33341_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33341_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33344 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28337;
    int64_t free_gtid_28458;
    unsigned char *free_mem_28461;
};
struct futhark_mc_copy_parloop_struct_33346 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28337;
    int64_t free_gtid_28458;
    unsigned char *free_mem_28461;
};
static int futhark_mc_copy_parloop_33347(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33346 *futhark_mc_copy_parloop_struct_33346 = (struct futhark_mc_copy_parloop_struct_33346 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33346->ctx;
    uint64_t futhark_mc_copy_parloop_33347_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33347_start = get_wall_time();
    
    struct memblock mem_28337 = {.desc ="mem_28337", .mem =futhark_mc_copy_parloop_struct_33346->free_mem_28337, .size =0, .references =NULL};
    int64_t gtid_28458 = futhark_mc_copy_parloop_struct_33346->free_gtid_28458;
    struct memblock mem_28461 = {.desc ="mem_28461", .mem =futhark_mc_copy_parloop_struct_33346->free_mem_28461, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28560;
        int64_t end_28561;
        
        start_28560 = start;
        end_28561 = end;
        
        int64_t n_28562 = end_28561 - start_28560;
        
        for (int64_t copy_i_28563 = start_28560; copy_i_28563 < start_28560 + n_28562; copy_i_28563++) {
            int64_t slice_28565 = (int64_t) 16;
            int64_t i_28564 = copy_i_28563;
            int64_t remnant_28566 = copy_i_28563 - i_28564;
            int8_t tmp_28567 = ((int8_t *) mem_28461.mem)[i_28564];
            
            ((int8_t *) mem_28337.mem)[gtid_28458 * (int64_t) 16 + i_28564] = tmp_28567;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33347_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33347_end - futhark_mc_copy_parloop_33347_start;
        
        ctx->program->futhark_mc_copy_parloop_33347_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33347_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33347_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28568_task_33345(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33344 *futhark_mc_task_33344 = (struct futhark_mc_task_33344 *) args;
    struct futhark_context *ctx = futhark_mc_task_33344->ctx;
    uint64_t futhark_mc_copy_28568_task_33345_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28568_task_33345_start = get_wall_time();
    
    struct memblock mem_28337 = {.desc ="mem_28337", .mem =futhark_mc_task_33344->free_mem_28337, .size =0, .references =NULL};
    int64_t gtid_28458 = futhark_mc_task_33344->free_gtid_28458;
    struct memblock mem_28461 = {.desc ="mem_28461", .mem =futhark_mc_task_33344->free_mem_28461, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33346 futhark_mc_copy_parloop_struct_33346_;
    
    futhark_mc_copy_parloop_struct_33346_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33346_.free_mem_28337 = mem_28337.mem;
    futhark_mc_copy_parloop_struct_33346_.free_gtid_28458 = gtid_28458;
    futhark_mc_copy_parloop_struct_33346_.free_mem_28461 = mem_28461.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33347_task;
    
    futhark_mc_copy_parloop_33347_task.name = "futhark_mc_copy_parloop_33347";
    futhark_mc_copy_parloop_33347_task.fn = futhark_mc_copy_parloop_33347;
    futhark_mc_copy_parloop_33347_task.args = &futhark_mc_copy_parloop_struct_33346_;
    futhark_mc_copy_parloop_33347_task.iterations = iterations;
    futhark_mc_copy_parloop_33347_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33347_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33347_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33347_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33347_task);
    
    if (futhark_mc_copy_parloop_33347_err != 0) {
        err = futhark_mc_copy_parloop_33347_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33347_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33347_total_end - futhark_mc_copy_parloop_33347_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33347_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33347_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33347_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28568_task_33345_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28568_task_33345_end - futhark_mc_copy_28568_task_33345_start;
        
        ctx->program->futhark_mc_copy_28568_task_33345_runs[tid]++;
        ctx->program->futhark_mc_copy_28568_task_33345_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28568_task_33345_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33348 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28338;
    int64_t free_gtid_28458;
    unsigned char *free_mem_28476;
};
struct futhark_mc_copy_parloop_struct_33350 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28338;
    int64_t free_gtid_28458;
    unsigned char *free_mem_28476;
};
static int futhark_mc_copy_parloop_33351(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33350 *futhark_mc_copy_parloop_struct_33350 = (struct futhark_mc_copy_parloop_struct_33350 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33350->ctx;
    uint64_t futhark_mc_copy_parloop_33351_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33351_start = get_wall_time();
    
    struct memblock mem_28338 = {.desc ="mem_28338", .mem =futhark_mc_copy_parloop_struct_33350->free_mem_28338, .size =0, .references =NULL};
    int64_t gtid_28458 = futhark_mc_copy_parloop_struct_33350->free_gtid_28458;
    struct memblock mem_28476 = {.desc ="mem_28476", .mem =futhark_mc_copy_parloop_struct_33350->free_mem_28476, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28570;
        int64_t end_28571;
        
        start_28570 = start;
        end_28571 = end;
        
        int64_t n_28572 = end_28571 - start_28570;
        
        for (int64_t copy_i_28573 = start_28570; copy_i_28573 < start_28570 + n_28572; copy_i_28573++) {
            int64_t slice_28575 = (int64_t) 4;
            int64_t i_28574 = copy_i_28573;
            int64_t remnant_28576 = copy_i_28573 - i_28574;
            int8_t tmp_28577 = ((int8_t *) mem_28476.mem)[i_28574];
            
            ((int8_t *) mem_28338.mem)[gtid_28458 * (int64_t) 4 + i_28574] = tmp_28577;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33351_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33351_end - futhark_mc_copy_parloop_33351_start;
        
        ctx->program->futhark_mc_copy_parloop_33351_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33351_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33351_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28578_task_33349(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33348 *futhark_mc_task_33348 = (struct futhark_mc_task_33348 *) args;
    struct futhark_context *ctx = futhark_mc_task_33348->ctx;
    uint64_t futhark_mc_copy_28578_task_33349_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28578_task_33349_start = get_wall_time();
    
    struct memblock mem_28338 = {.desc ="mem_28338", .mem =futhark_mc_task_33348->free_mem_28338, .size =0, .references =NULL};
    int64_t gtid_28458 = futhark_mc_task_33348->free_gtid_28458;
    struct memblock mem_28476 = {.desc ="mem_28476", .mem =futhark_mc_task_33348->free_mem_28476, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33350 futhark_mc_copy_parloop_struct_33350_;
    
    futhark_mc_copy_parloop_struct_33350_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33350_.free_mem_28338 = mem_28338.mem;
    futhark_mc_copy_parloop_struct_33350_.free_gtid_28458 = gtid_28458;
    futhark_mc_copy_parloop_struct_33350_.free_mem_28476 = mem_28476.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33351_task;
    
    futhark_mc_copy_parloop_33351_task.name = "futhark_mc_copy_parloop_33351";
    futhark_mc_copy_parloop_33351_task.fn = futhark_mc_copy_parloop_33351;
    futhark_mc_copy_parloop_33351_task.args = &futhark_mc_copy_parloop_struct_33350_;
    futhark_mc_copy_parloop_33351_task.iterations = iterations;
    futhark_mc_copy_parloop_33351_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33351_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33351_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33351_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33351_task);
    
    if (futhark_mc_copy_parloop_33351_err != 0) {
        err = futhark_mc_copy_parloop_33351_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33351_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33351_total_end - futhark_mc_copy_parloop_33351_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33351_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33351_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33351_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28578_task_33349_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28578_task_33349_end - futhark_mc_copy_28578_task_33349_start;
        
        ctx->program->futhark_mc_copy_28578_task_33349_runs[tid]++;
        ctx->program->futhark_mc_copy_28578_task_33349_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28578_task_33349_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33337(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33336 *futhark_mc_segmap_parloop_struct_33336 = (struct futhark_mc_segmap_parloop_struct_33336 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33336->ctx;
    uint64_t futhark_mc_segmap_parloop_33337_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33337_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_segmap_parloop_struct_33336->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_segmap_parloop_struct_33336->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33336->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_segmap_parloop_struct_33336->free_x_28156;
    int8_t x_28335 = futhark_mc_segmap_parloop_struct_33336->free_x_28335;
    bool u8_res_28336 = futhark_mc_segmap_parloop_struct_33336->free_u8_res_28336;
    struct memblock mem_28337 = {.desc ="mem_28337", .mem =futhark_mc_segmap_parloop_struct_33336->free_mem_28337, .size =0, .references =NULL};
    struct memblock mem_28338 = {.desc ="mem_28338", .mem =futhark_mc_segmap_parloop_struct_33336->free_mem_28338, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_28461_cached_sizze_33338 = 0;
    unsigned char *mem_28461 = NULL;
    int64_t mem_28476_cached_sizze_33339 = 0;
    unsigned char *mem_28476 = NULL;
    int64_t flat_tid_28457;
    
    flat_tid_28457 = subtask_id;
    {
        int64_t start_28543;
        int64_t end_28544;
        
        start_28543 = start;
        end_28544 = end;
        
        int64_t n_28545 = end_28544 - start_28543;
        
        if (mem_28461_cached_sizze_33338 < (int64_t) 16) {
            err = lexical_realloc(ctx, &mem_28461, &mem_28461_cached_sizze_33338, (int64_t) 16);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_28476_cached_sizze_33339 < (int64_t) 4) {
            err = lexical_realloc(ctx, &mem_28476, &mem_28476_cached_sizze_33339, (int64_t) 4);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_28546 = start_28543; SegMap_i_28546 < start_28543 + n_28545; SegMap_i_28546++) {
            int64_t slice_28547 = (int64_t) 2;
            int64_t gtid_28458 = SegMap_i_28546;
            int64_t remnant_28548 = SegMap_i_28546 - gtid_28458;
            int8_t x_28459 = ((int8_t *) mem_26373.mem)[gtid_28458];
            bool u8_res_28460 = itob_i8_bool(x_28459);
            int64_t flat_tid_28530 = (int64_t) 0;
            struct futhark_mc_task_33340 futhark_mc_task_33340_;
            
            futhark_mc_task_33340_.ctx = ctx;
            futhark_mc_task_33340_.free_x_22304 = x_22304;
            futhark_mc_task_33340_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33340_.free_x_28156 = x_28156;
            futhark_mc_task_33340_.free_u8_res_28336 = u8_res_28336;
            futhark_mc_task_33340_.free_u8_res_28460 = u8_res_28460;
            futhark_mc_task_33340_.free_mem_28461 = mem_28461;
            
            struct scheduler_segop futhark_mc_task_33340_task;
            
            futhark_mc_task_33340_task.args = &futhark_mc_task_33340_;
            futhark_mc_task_33340_task.top_level_fn = futhark_mc_segmap_task_33341;
            futhark_mc_task_33340_task.name = "futhark_mc_segmap_task_33341";
            futhark_mc_task_33340_task.iterations = (int64_t) 16;
            futhark_mc_task_33340_task.task_time = &ctx->program->futhark_mc_segmap_task_33341_total_time;
            futhark_mc_task_33340_task.task_iter = &ctx->program->futhark_mc_segmap_task_33341_total_iter;
            futhark_mc_task_33340_task.sched = STATIC;
            futhark_mc_task_33340_task.nested_fn = NULL;
            
            int futhark_mc_segmap_task_33341_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33340_task);
            
            if (futhark_mc_segmap_task_33341_err != 0) {
                ;
                err = futhark_mc_segmap_task_33341_err;
                goto cleanup;
            }
            ((int8_t *) mem_28476)[(int64_t) 0] = x_22304;
            ((int8_t *) mem_28476)[(int64_t) 1] = x_28156;
            ((int8_t *) mem_28476)[(int64_t) 2] = x_28335;
            ((int8_t *) mem_28476)[(int64_t) 3] = x_28459;
            
            int64_t iterations_28569 = (int64_t) 16;
            struct futhark_mc_task_33344 futhark_mc_task_33344_;
            
            futhark_mc_task_33344_.ctx = ctx;
            futhark_mc_task_33344_.free_mem_28337 = mem_28337.mem;
            futhark_mc_task_33344_.free_gtid_28458 = gtid_28458;
            futhark_mc_task_33344_.free_mem_28461 = mem_28461;
            
            struct scheduler_segop futhark_mc_task_33344_task;
            
            futhark_mc_task_33344_task.args = &futhark_mc_task_33344_;
            futhark_mc_task_33344_task.top_level_fn = futhark_mc_copy_28568_task_33345;
            futhark_mc_task_33344_task.name = "futhark_mc_copy_28568_task_33345";
            futhark_mc_task_33344_task.iterations = iterations_28569;
            futhark_mc_task_33344_task.task_time = &ctx->program->futhark_mc_copy_28568_task_33345_total_time;
            futhark_mc_task_33344_task.task_iter = &ctx->program->futhark_mc_copy_28568_task_33345_total_iter;
            futhark_mc_task_33344_task.sched = STATIC;
            futhark_mc_task_33344_task.nested_fn = NULL;
            
            int futhark_mc_copy_28568_task_33345_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33344_task);
            
            if (futhark_mc_copy_28568_task_33345_err != 0) {
                ;
                err = futhark_mc_copy_28568_task_33345_err;
                goto cleanup;
            }
            
            int64_t iterations_28579 = (int64_t) 4;
            struct futhark_mc_task_33348 futhark_mc_task_33348_;
            
            futhark_mc_task_33348_.ctx = ctx;
            futhark_mc_task_33348_.free_mem_28338 = mem_28338.mem;
            futhark_mc_task_33348_.free_gtid_28458 = gtid_28458;
            futhark_mc_task_33348_.free_mem_28476 = mem_28476;
            
            struct scheduler_segop futhark_mc_task_33348_task;
            
            futhark_mc_task_33348_task.args = &futhark_mc_task_33348_;
            futhark_mc_task_33348_task.top_level_fn = futhark_mc_copy_28578_task_33349;
            futhark_mc_task_33348_task.name = "futhark_mc_copy_28578_task_33349";
            futhark_mc_task_33348_task.iterations = iterations_28579;
            futhark_mc_task_33348_task.task_time = &ctx->program->futhark_mc_copy_28578_task_33349_total_time;
            futhark_mc_task_33348_task.task_iter = &ctx->program->futhark_mc_copy_28578_task_33349_total_iter;
            futhark_mc_task_33348_task.sched = STATIC;
            futhark_mc_task_33348_task.nested_fn = NULL;
            
            int futhark_mc_copy_28578_task_33349_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33348_task);
            
            if (futhark_mc_copy_28578_task_33349_err != 0) {
                ;
                err = futhark_mc_copy_28578_task_33349_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_28461);
        free(mem_28476);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33337_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33337_end - futhark_mc_segmap_parloop_33337_start;
        
        ctx->program->futhark_mc_segmap_parloop_33337_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33337_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33337_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33335(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33329 *futhark_mc_task_33329 = (struct futhark_mc_task_33329 *) args;
    struct futhark_context *ctx = futhark_mc_task_33329->ctx;
    uint64_t futhark_mc_segmap_nested_task_33335_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33335_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_task_33329->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_task_33329->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33329->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_task_33329->free_x_28156;
    int8_t x_28335 = futhark_mc_task_33329->free_x_28335;
    bool u8_res_28336 = futhark_mc_task_33329->free_u8_res_28336;
    struct memblock mem_28337 = {.desc ="mem_28337", .mem =futhark_mc_task_33329->free_mem_28337, .size =0, .references =NULL};
    struct memblock mem_28338 = {.desc ="mem_28338", .mem =futhark_mc_task_33329->free_mem_28338, .size =0, .references =NULL};
    int32_t nsubtasks_28529;
    
    nsubtasks_28529 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33336 futhark_mc_segmap_parloop_struct_33336_;
    
    futhark_mc_segmap_parloop_struct_33336_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33336_.free_x_22304 = x_22304;
    futhark_mc_segmap_parloop_struct_33336_.free_mem_26373 = mem_26373.mem;
    futhark_mc_segmap_parloop_struct_33336_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33336_.free_x_28156 = x_28156;
    futhark_mc_segmap_parloop_struct_33336_.free_x_28335 = x_28335;
    futhark_mc_segmap_parloop_struct_33336_.free_u8_res_28336 = u8_res_28336;
    futhark_mc_segmap_parloop_struct_33336_.free_mem_28337 = mem_28337.mem;
    futhark_mc_segmap_parloop_struct_33336_.free_mem_28338 = mem_28338.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33337_task;
    
    futhark_mc_segmap_parloop_33337_task.name = "futhark_mc_segmap_parloop_33337";
    futhark_mc_segmap_parloop_33337_task.fn = futhark_mc_segmap_parloop_33337;
    futhark_mc_segmap_parloop_33337_task.args = &futhark_mc_segmap_parloop_struct_33336_;
    futhark_mc_segmap_parloop_33337_task.iterations = iterations;
    futhark_mc_segmap_parloop_33337_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33337_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33337_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33337_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33337_task);
    
    if (futhark_mc_segmap_parloop_33337_err != 0) {
        err = futhark_mc_segmap_parloop_33337_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33337_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33337_total_end - futhark_mc_segmap_parloop_33337_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33337_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33337_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33337_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33335_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33335_end - futhark_mc_segmap_nested_task_33335_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33335_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33335_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33335_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33352 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28157;
    int64_t free_gtid_28334;
    unsigned char *free_mem_28337;
};
struct futhark_mc_copy_parloop_struct_33354 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28157;
    int64_t free_gtid_28334;
    unsigned char *free_mem_28337;
};
static int futhark_mc_copy_parloop_33355(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33354 *futhark_mc_copy_parloop_struct_33354 = (struct futhark_mc_copy_parloop_struct_33354 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33354->ctx;
    uint64_t futhark_mc_copy_parloop_33355_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33355_start = get_wall_time();
    
    struct memblock mem_28157 = {.desc ="mem_28157", .mem =futhark_mc_copy_parloop_struct_33354->free_mem_28157, .size =0, .references =NULL};
    int64_t gtid_28334 = futhark_mc_copy_parloop_struct_33354->free_gtid_28334;
    struct memblock mem_28337 = {.desc ="mem_28337", .mem =futhark_mc_copy_parloop_struct_33354->free_mem_28337, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28580;
        int64_t end_28581;
        
        start_28580 = start;
        end_28581 = end;
        
        int64_t n_28582 = end_28581 - start_28580;
        
        for (int64_t copy_i_28583 = start_28580; copy_i_28583 < start_28580 + n_28582; copy_i_28583++) {
            int64_t slice_28586 = (int64_t) 16;
            int64_t slice_28587 = (int64_t) 2 * slice_28586;
            int64_t i_28584 = squot64(copy_i_28583, slice_28586);
            int64_t remnant_28588 = copy_i_28583 - i_28584 * slice_28586;
            int64_t i_28585 = remnant_28588;
            int64_t remnant_28589 = remnant_28588 - i_28585;
            int8_t tmp_28590 = ((int8_t *) mem_28337.mem)[i_28584 * (int64_t) 16 + i_28585];
            
            ((int8_t *) mem_28157.mem)[gtid_28334 * (int64_t) 32 + (i_28584 * (int64_t) 16 + i_28585)] = tmp_28590;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33355_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33355_end - futhark_mc_copy_parloop_33355_start;
        
        ctx->program->futhark_mc_copy_parloop_33355_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33355_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33355_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28591_task_33353(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33352 *futhark_mc_task_33352 = (struct futhark_mc_task_33352 *) args;
    struct futhark_context *ctx = futhark_mc_task_33352->ctx;
    uint64_t futhark_mc_copy_28591_task_33353_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28591_task_33353_start = get_wall_time();
    
    struct memblock mem_28157 = {.desc ="mem_28157", .mem =futhark_mc_task_33352->free_mem_28157, .size =0, .references =NULL};
    int64_t gtid_28334 = futhark_mc_task_33352->free_gtid_28334;
    struct memblock mem_28337 = {.desc ="mem_28337", .mem =futhark_mc_task_33352->free_mem_28337, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33354 futhark_mc_copy_parloop_struct_33354_;
    
    futhark_mc_copy_parloop_struct_33354_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33354_.free_mem_28157 = mem_28157.mem;
    futhark_mc_copy_parloop_struct_33354_.free_gtid_28334 = gtid_28334;
    futhark_mc_copy_parloop_struct_33354_.free_mem_28337 = mem_28337.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33355_task;
    
    futhark_mc_copy_parloop_33355_task.name = "futhark_mc_copy_parloop_33355";
    futhark_mc_copy_parloop_33355_task.fn = futhark_mc_copy_parloop_33355;
    futhark_mc_copy_parloop_33355_task.args = &futhark_mc_copy_parloop_struct_33354_;
    futhark_mc_copy_parloop_33355_task.iterations = iterations;
    futhark_mc_copy_parloop_33355_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33355_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33355_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33355_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33355_task);
    
    if (futhark_mc_copy_parloop_33355_err != 0) {
        err = futhark_mc_copy_parloop_33355_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33355_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33355_total_end - futhark_mc_copy_parloop_33355_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33355_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33355_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33355_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28591_task_33353_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28591_task_33353_end - futhark_mc_copy_28591_task_33353_start;
        
        ctx->program->futhark_mc_copy_28591_task_33353_runs[tid]++;
        ctx->program->futhark_mc_copy_28591_task_33353_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28591_task_33353_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33356 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28158;
    int64_t free_gtid_28334;
    unsigned char *free_mem_28338;
};
struct futhark_mc_copy_parloop_struct_33358 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28158;
    int64_t free_gtid_28334;
    unsigned char *free_mem_28338;
};
static int futhark_mc_copy_parloop_33359(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33358 *futhark_mc_copy_parloop_struct_33358 = (struct futhark_mc_copy_parloop_struct_33358 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33358->ctx;
    uint64_t futhark_mc_copy_parloop_33359_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33359_start = get_wall_time();
    
    struct memblock mem_28158 = {.desc ="mem_28158", .mem =futhark_mc_copy_parloop_struct_33358->free_mem_28158, .size =0, .references =NULL};
    int64_t gtid_28334 = futhark_mc_copy_parloop_struct_33358->free_gtid_28334;
    struct memblock mem_28338 = {.desc ="mem_28338", .mem =futhark_mc_copy_parloop_struct_33358->free_mem_28338, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28593;
        int64_t end_28594;
        
        start_28593 = start;
        end_28594 = end;
        
        int64_t n_28595 = end_28594 - start_28593;
        
        for (int64_t copy_i_28596 = start_28593; copy_i_28596 < start_28593 + n_28595; copy_i_28596++) {
            int64_t slice_28599 = (int64_t) 4;
            int64_t slice_28600 = (int64_t) 2 * slice_28599;
            int64_t i_28597 = squot64(copy_i_28596, slice_28599);
            int64_t remnant_28601 = copy_i_28596 - i_28597 * slice_28599;
            int64_t i_28598 = remnant_28601;
            int64_t remnant_28602 = remnant_28601 - i_28598;
            int8_t tmp_28603 = ((int8_t *) mem_28338.mem)[i_28597 * (int64_t) 4 + i_28598];
            
            ((int8_t *) mem_28158.mem)[gtid_28334 * (int64_t) 8 + (i_28597 * (int64_t) 4 + i_28598)] = tmp_28603;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33359_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33359_end - futhark_mc_copy_parloop_33359_start;
        
        ctx->program->futhark_mc_copy_parloop_33359_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33359_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33359_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28604_task_33357(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33356 *futhark_mc_task_33356 = (struct futhark_mc_task_33356 *) args;
    struct futhark_context *ctx = futhark_mc_task_33356->ctx;
    uint64_t futhark_mc_copy_28604_task_33357_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28604_task_33357_start = get_wall_time();
    
    struct memblock mem_28158 = {.desc ="mem_28158", .mem =futhark_mc_task_33356->free_mem_28158, .size =0, .references =NULL};
    int64_t gtid_28334 = futhark_mc_task_33356->free_gtid_28334;
    struct memblock mem_28338 = {.desc ="mem_28338", .mem =futhark_mc_task_33356->free_mem_28338, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33358 futhark_mc_copy_parloop_struct_33358_;
    
    futhark_mc_copy_parloop_struct_33358_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33358_.free_mem_28158 = mem_28158.mem;
    futhark_mc_copy_parloop_struct_33358_.free_gtid_28334 = gtid_28334;
    futhark_mc_copy_parloop_struct_33358_.free_mem_28338 = mem_28338.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33359_task;
    
    futhark_mc_copy_parloop_33359_task.name = "futhark_mc_copy_parloop_33359";
    futhark_mc_copy_parloop_33359_task.fn = futhark_mc_copy_parloop_33359;
    futhark_mc_copy_parloop_33359_task.args = &futhark_mc_copy_parloop_struct_33358_;
    futhark_mc_copy_parloop_33359_task.iterations = iterations;
    futhark_mc_copy_parloop_33359_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33359_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33359_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33359_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33359_task);
    
    if (futhark_mc_copy_parloop_33359_err != 0) {
        err = futhark_mc_copy_parloop_33359_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33359_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33359_total_end - futhark_mc_copy_parloop_33359_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33359_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33359_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33359_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28604_task_33357_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28604_task_33357_end - futhark_mc_copy_28604_task_33357_start;
        
        ctx->program->futhark_mc_copy_28604_task_33357_runs[tid]++;
        ctx->program->futhark_mc_copy_28604_task_33357_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28604_task_33357_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33326(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33325 *futhark_mc_segmap_parloop_struct_33325 = (struct futhark_mc_segmap_parloop_struct_33325 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33325->ctx;
    uint64_t futhark_mc_segmap_parloop_33326_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33326_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_segmap_parloop_struct_33325->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_segmap_parloop_struct_33325->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33325->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_segmap_parloop_struct_33325->free_x_28156;
    struct memblock mem_28157 = {.desc ="mem_28157", .mem =futhark_mc_segmap_parloop_struct_33325->free_mem_28157, .size =0, .references =NULL};
    struct memblock mem_28158 = {.desc ="mem_28158", .mem =futhark_mc_segmap_parloop_struct_33325->free_mem_28158, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_28337_cached_sizze_33327 = 0;
    unsigned char *mem_28337 = NULL;
    int64_t mem_28338_cached_sizze_33328 = 0;
    unsigned char *mem_28338 = NULL;
    int64_t flat_tid_28333;
    
    flat_tid_28333 = subtask_id;
    {
        int64_t start_28501;
        int64_t end_28502;
        
        start_28501 = start;
        end_28502 = end;
        
        int64_t n_28503 = end_28502 - start_28501;
        
        if (mem_28337_cached_sizze_33327 < (int64_t) 32) {
            err = lexical_realloc(ctx, &mem_28337, &mem_28337_cached_sizze_33327, (int64_t) 32);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_28338_cached_sizze_33328 < (int64_t) 8) {
            err = lexical_realloc(ctx, &mem_28338, &mem_28338_cached_sizze_33328, (int64_t) 8);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_28504 = start_28501; SegMap_i_28504 < start_28501 + n_28503; SegMap_i_28504++) {
            int64_t slice_28505 = (int64_t) 2;
            int64_t gtid_28334 = SegMap_i_28504;
            int64_t remnant_28506 = SegMap_i_28504 - gtid_28334;
            int8_t x_28335 = ((int8_t *) mem_26373.mem)[gtid_28334];
            bool u8_res_28336 = itob_i8_bool(x_28335);
            int64_t flat_tid_28478 = (int64_t) 0;
            int64_t flat_tid_28457 = (int64_t) 0;
            struct futhark_mc_task_33329 futhark_mc_task_33329_;
            
            futhark_mc_task_33329_.ctx = ctx;
            futhark_mc_task_33329_.free_x_22304 = x_22304;
            futhark_mc_task_33329_.free_mem_26373 = mem_26373.mem;
            futhark_mc_task_33329_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33329_.free_x_28156 = x_28156;
            futhark_mc_task_33329_.free_x_28335 = x_28335;
            futhark_mc_task_33329_.free_u8_res_28336 = u8_res_28336;
            futhark_mc_task_33329_.free_mem_28337 = mem_28337;
            futhark_mc_task_33329_.free_mem_28338 = mem_28338;
            
            struct scheduler_segop futhark_mc_task_33329_task;
            
            futhark_mc_task_33329_task.args = &futhark_mc_task_33329_;
            futhark_mc_task_33329_task.top_level_fn = futhark_mc_segmap_task_33330;
            futhark_mc_task_33329_task.name = "futhark_mc_segmap_task_33330";
            futhark_mc_task_33329_task.iterations = (int64_t) 2;
            futhark_mc_task_33329_task.task_time = &ctx->program->futhark_mc_segmap_task_33330_total_time;
            futhark_mc_task_33329_task.task_iter = &ctx->program->futhark_mc_segmap_task_33330_total_iter;
            futhark_mc_task_33329_task.sched = STATIC;
            futhark_mc_task_33329_task.nested_fn = futhark_mc_segmap_nested_task_33335;
            
            int futhark_mc_segmap_task_33330_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33329_task);
            
            if (futhark_mc_segmap_task_33330_err != 0) {
                ;
                err = futhark_mc_segmap_task_33330_err;
                goto cleanup;
            }
            
            int64_t iterations_28592 = (int64_t) 32;
            struct futhark_mc_task_33352 futhark_mc_task_33352_;
            
            futhark_mc_task_33352_.ctx = ctx;
            futhark_mc_task_33352_.free_mem_28157 = mem_28157.mem;
            futhark_mc_task_33352_.free_gtid_28334 = gtid_28334;
            futhark_mc_task_33352_.free_mem_28337 = mem_28337;
            
            struct scheduler_segop futhark_mc_task_33352_task;
            
            futhark_mc_task_33352_task.args = &futhark_mc_task_33352_;
            futhark_mc_task_33352_task.top_level_fn = futhark_mc_copy_28591_task_33353;
            futhark_mc_task_33352_task.name = "futhark_mc_copy_28591_task_33353";
            futhark_mc_task_33352_task.iterations = iterations_28592;
            futhark_mc_task_33352_task.task_time = &ctx->program->futhark_mc_copy_28591_task_33353_total_time;
            futhark_mc_task_33352_task.task_iter = &ctx->program->futhark_mc_copy_28591_task_33353_total_iter;
            futhark_mc_task_33352_task.sched = STATIC;
            futhark_mc_task_33352_task.nested_fn = NULL;
            
            int futhark_mc_copy_28591_task_33353_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33352_task);
            
            if (futhark_mc_copy_28591_task_33353_err != 0) {
                ;
                err = futhark_mc_copy_28591_task_33353_err;
                goto cleanup;
            }
            
            int64_t iterations_28605 = (int64_t) 8;
            struct futhark_mc_task_33356 futhark_mc_task_33356_;
            
            futhark_mc_task_33356_.ctx = ctx;
            futhark_mc_task_33356_.free_mem_28158 = mem_28158.mem;
            futhark_mc_task_33356_.free_gtid_28334 = gtid_28334;
            futhark_mc_task_33356_.free_mem_28338 = mem_28338;
            
            struct scheduler_segop futhark_mc_task_33356_task;
            
            futhark_mc_task_33356_task.args = &futhark_mc_task_33356_;
            futhark_mc_task_33356_task.top_level_fn = futhark_mc_copy_28604_task_33357;
            futhark_mc_task_33356_task.name = "futhark_mc_copy_28604_task_33357";
            futhark_mc_task_33356_task.iterations = iterations_28605;
            futhark_mc_task_33356_task.task_time = &ctx->program->futhark_mc_copy_28604_task_33357_total_time;
            futhark_mc_task_33356_task.task_iter = &ctx->program->futhark_mc_copy_28604_task_33357_total_iter;
            futhark_mc_task_33356_task.sched = STATIC;
            futhark_mc_task_33356_task.nested_fn = NULL;
            
            int futhark_mc_copy_28604_task_33357_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33356_task);
            
            if (futhark_mc_copy_28604_task_33357_err != 0) {
                ;
                err = futhark_mc_copy_28604_task_33357_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_28337);
        free(mem_28338);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33326_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33326_end - futhark_mc_segmap_parloop_33326_start;
        
        ctx->program->futhark_mc_segmap_parloop_33326_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33326_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33326_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33324(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33317 *futhark_mc_task_33317 = (struct futhark_mc_task_33317 *) args;
    struct futhark_context *ctx = futhark_mc_task_33317->ctx;
    uint64_t futhark_mc_segmap_nested_task_33324_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33324_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_task_33317->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_task_33317->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33317->free_mem_26375, .size =0, .references =NULL};
    int8_t x_28156 = futhark_mc_task_33317->free_x_28156;
    struct memblock mem_28157 = {.desc ="mem_28157", .mem =futhark_mc_task_33317->free_mem_28157, .size =0, .references =NULL};
    struct memblock mem_28158 = {.desc ="mem_28158", .mem =futhark_mc_task_33317->free_mem_28158, .size =0, .references =NULL};
    int32_t nsubtasks_28456;
    
    nsubtasks_28456 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33325 futhark_mc_segmap_parloop_struct_33325_;
    
    futhark_mc_segmap_parloop_struct_33325_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33325_.free_x_22304 = x_22304;
    futhark_mc_segmap_parloop_struct_33325_.free_mem_26373 = mem_26373.mem;
    futhark_mc_segmap_parloop_struct_33325_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33325_.free_x_28156 = x_28156;
    futhark_mc_segmap_parloop_struct_33325_.free_mem_28157 = mem_28157.mem;
    futhark_mc_segmap_parloop_struct_33325_.free_mem_28158 = mem_28158.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33326_task;
    
    futhark_mc_segmap_parloop_33326_task.name = "futhark_mc_segmap_parloop_33326";
    futhark_mc_segmap_parloop_33326_task.fn = futhark_mc_segmap_parloop_33326;
    futhark_mc_segmap_parloop_33326_task.args = &futhark_mc_segmap_parloop_struct_33325_;
    futhark_mc_segmap_parloop_33326_task.iterations = iterations;
    futhark_mc_segmap_parloop_33326_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33326_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33326_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33326_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33326_task);
    
    if (futhark_mc_segmap_parloop_33326_err != 0) {
        err = futhark_mc_segmap_parloop_33326_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33326_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33326_total_end - futhark_mc_segmap_parloop_33326_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33326_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33326_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33326_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33324_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33324_end - futhark_mc_segmap_nested_task_33324_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33324_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33324_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33324_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33360 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26603;
    int64_t free_gtid_28155;
    unsigned char *free_mem_28157;
};
struct futhark_mc_copy_parloop_struct_33362 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26603;
    int64_t free_gtid_28155;
    unsigned char *free_mem_28157;
};
static int futhark_mc_copy_parloop_33363(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33362 *futhark_mc_copy_parloop_struct_33362 = (struct futhark_mc_copy_parloop_struct_33362 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33362->ctx;
    uint64_t futhark_mc_copy_parloop_33363_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33363_start = get_wall_time();
    
    struct memblock mem_26603 = {.desc ="mem_26603", .mem =futhark_mc_copy_parloop_struct_33362->free_mem_26603, .size =0, .references =NULL};
    int64_t gtid_28155 = futhark_mc_copy_parloop_struct_33362->free_gtid_28155;
    struct memblock mem_28157 = {.desc ="mem_28157", .mem =futhark_mc_copy_parloop_struct_33362->free_mem_28157, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28606;
        int64_t end_28607;
        
        start_28606 = start;
        end_28607 = end;
        
        int64_t n_28608 = end_28607 - start_28606;
        
        for (int64_t copy_i_28609 = start_28606; copy_i_28609 < start_28606 + n_28608; copy_i_28609++) {
            int64_t slice_28613 = (int64_t) 16;
            int64_t slice_28614 = (int64_t) 2 * slice_28613;
            int64_t slice_28615 = (int64_t) 2 * slice_28614;
            int64_t i_28610 = squot64(copy_i_28609, slice_28614);
            int64_t remnant_28616 = copy_i_28609 - i_28610 * slice_28614;
            int64_t i_28611 = squot64(remnant_28616, slice_28613);
            int64_t remnant_28617 = remnant_28616 - i_28611 * slice_28613;
            int64_t i_28612 = remnant_28617;
            int64_t remnant_28618 = remnant_28617 - i_28612;
            int8_t tmp_28619 = ((int8_t *) mem_28157.mem)[i_28610 * (int64_t) 32 + i_28611 * (int64_t) 16 + i_28612];
            
            ((int8_t *) mem_26603.mem)[gtid_28155 * (int64_t) 64 + (i_28610 * (int64_t) 32 + i_28611 * (int64_t) 16 + i_28612)] = tmp_28619;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33363_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33363_end - futhark_mc_copy_parloop_33363_start;
        
        ctx->program->futhark_mc_copy_parloop_33363_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33363_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33363_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28620_task_33361(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33360 *futhark_mc_task_33360 = (struct futhark_mc_task_33360 *) args;
    struct futhark_context *ctx = futhark_mc_task_33360->ctx;
    uint64_t futhark_mc_copy_28620_task_33361_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28620_task_33361_start = get_wall_time();
    
    struct memblock mem_26603 = {.desc ="mem_26603", .mem =futhark_mc_task_33360->free_mem_26603, .size =0, .references =NULL};
    int64_t gtid_28155 = futhark_mc_task_33360->free_gtid_28155;
    struct memblock mem_28157 = {.desc ="mem_28157", .mem =futhark_mc_task_33360->free_mem_28157, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33362 futhark_mc_copy_parloop_struct_33362_;
    
    futhark_mc_copy_parloop_struct_33362_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33362_.free_mem_26603 = mem_26603.mem;
    futhark_mc_copy_parloop_struct_33362_.free_gtid_28155 = gtid_28155;
    futhark_mc_copy_parloop_struct_33362_.free_mem_28157 = mem_28157.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33363_task;
    
    futhark_mc_copy_parloop_33363_task.name = "futhark_mc_copy_parloop_33363";
    futhark_mc_copy_parloop_33363_task.fn = futhark_mc_copy_parloop_33363;
    futhark_mc_copy_parloop_33363_task.args = &futhark_mc_copy_parloop_struct_33362_;
    futhark_mc_copy_parloop_33363_task.iterations = iterations;
    futhark_mc_copy_parloop_33363_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33363_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33363_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33363_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33363_task);
    
    if (futhark_mc_copy_parloop_33363_err != 0) {
        err = futhark_mc_copy_parloop_33363_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33363_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33363_total_end - futhark_mc_copy_parloop_33363_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33363_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33363_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33363_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28620_task_33361_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28620_task_33361_end - futhark_mc_copy_28620_task_33361_start;
        
        ctx->program->futhark_mc_copy_28620_task_33361_runs[tid]++;
        ctx->program->futhark_mc_copy_28620_task_33361_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28620_task_33361_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33364 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26605;
    int64_t free_gtid_28155;
    unsigned char *free_mem_28158;
};
struct futhark_mc_copy_parloop_struct_33366 {
    struct futhark_context *ctx;
    unsigned char *free_mem_26605;
    int64_t free_gtid_28155;
    unsigned char *free_mem_28158;
};
static int futhark_mc_copy_parloop_33367(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33366 *futhark_mc_copy_parloop_struct_33366 = (struct futhark_mc_copy_parloop_struct_33366 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33366->ctx;
    uint64_t futhark_mc_copy_parloop_33367_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33367_start = get_wall_time();
    
    struct memblock mem_26605 = {.desc ="mem_26605", .mem =futhark_mc_copy_parloop_struct_33366->free_mem_26605, .size =0, .references =NULL};
    int64_t gtid_28155 = futhark_mc_copy_parloop_struct_33366->free_gtid_28155;
    struct memblock mem_28158 = {.desc ="mem_28158", .mem =futhark_mc_copy_parloop_struct_33366->free_mem_28158, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28622;
        int64_t end_28623;
        
        start_28622 = start;
        end_28623 = end;
        
        int64_t n_28624 = end_28623 - start_28622;
        
        for (int64_t copy_i_28625 = start_28622; copy_i_28625 < start_28622 + n_28624; copy_i_28625++) {
            int64_t slice_28629 = (int64_t) 4;
            int64_t slice_28630 = (int64_t) 2 * slice_28629;
            int64_t slice_28631 = (int64_t) 2 * slice_28630;
            int64_t i_28626 = squot64(copy_i_28625, slice_28630);
            int64_t remnant_28632 = copy_i_28625 - i_28626 * slice_28630;
            int64_t i_28627 = squot64(remnant_28632, slice_28629);
            int64_t remnant_28633 = remnant_28632 - i_28627 * slice_28629;
            int64_t i_28628 = remnant_28633;
            int64_t remnant_28634 = remnant_28633 - i_28628;
            int8_t tmp_28635 = ((int8_t *) mem_28158.mem)[i_28626 * (int64_t) 8 + i_28627 * (int64_t) 4 + i_28628];
            
            ((int8_t *) mem_26605.mem)[gtid_28155 * (int64_t) 16 + (i_28626 * (int64_t) 8 + i_28627 * (int64_t) 4 + i_28628)] = tmp_28635;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33367_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33367_end - futhark_mc_copy_parloop_33367_start;
        
        ctx->program->futhark_mc_copy_parloop_33367_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33367_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33367_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28636_task_33365(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33364 *futhark_mc_task_33364 = (struct futhark_mc_task_33364 *) args;
    struct futhark_context *ctx = futhark_mc_task_33364->ctx;
    uint64_t futhark_mc_copy_28636_task_33365_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28636_task_33365_start = get_wall_time();
    
    struct memblock mem_26605 = {.desc ="mem_26605", .mem =futhark_mc_task_33364->free_mem_26605, .size =0, .references =NULL};
    int64_t gtid_28155 = futhark_mc_task_33364->free_gtid_28155;
    struct memblock mem_28158 = {.desc ="mem_28158", .mem =futhark_mc_task_33364->free_mem_28158, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33366 futhark_mc_copy_parloop_struct_33366_;
    
    futhark_mc_copy_parloop_struct_33366_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33366_.free_mem_26605 = mem_26605.mem;
    futhark_mc_copy_parloop_struct_33366_.free_gtid_28155 = gtid_28155;
    futhark_mc_copy_parloop_struct_33366_.free_mem_28158 = mem_28158.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33367_task;
    
    futhark_mc_copy_parloop_33367_task.name = "futhark_mc_copy_parloop_33367";
    futhark_mc_copy_parloop_33367_task.fn = futhark_mc_copy_parloop_33367;
    futhark_mc_copy_parloop_33367_task.args = &futhark_mc_copy_parloop_struct_33366_;
    futhark_mc_copy_parloop_33367_task.iterations = iterations;
    futhark_mc_copy_parloop_33367_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33367_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33367_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33367_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33367_task);
    
    if (futhark_mc_copy_parloop_33367_err != 0) {
        err = futhark_mc_copy_parloop_33367_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33367_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33367_total_end - futhark_mc_copy_parloop_33367_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33367_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33367_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33367_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28636_task_33365_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28636_task_33365_end - futhark_mc_copy_28636_task_33365_start;
        
        ctx->program->futhark_mc_copy_28636_task_33365_runs[tid]++;
        ctx->program->futhark_mc_copy_28636_task_33365_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28636_task_33365_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33314(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33313 *futhark_mc_segmap_parloop_struct_33313 = (struct futhark_mc_segmap_parloop_struct_33313 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33313->ctx;
    uint64_t futhark_mc_segmap_parloop_33314_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33314_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_segmap_parloop_struct_33313->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_segmap_parloop_struct_33313->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33313->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26603 = {.desc ="mem_26603", .mem =futhark_mc_segmap_parloop_struct_33313->free_mem_26603, .size =0, .references =NULL};
    struct memblock mem_26605 = {.desc ="mem_26605", .mem =futhark_mc_segmap_parloop_struct_33313->free_mem_26605, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_28157_cached_sizze_33315 = 0;
    unsigned char *mem_28157 = NULL;
    int64_t mem_28158_cached_sizze_33316 = 0;
    unsigned char *mem_28158 = NULL;
    int64_t flat_tid_28154;
    
    flat_tid_28154 = subtask_id;
    {
        int64_t start_28418;
        int64_t end_28419;
        
        start_28418 = start;
        end_28419 = end;
        
        int64_t n_28420 = end_28419 - start_28418;
        
        if (mem_28157_cached_sizze_33315 < (int64_t) 64) {
            err = lexical_realloc(ctx, &mem_28157, &mem_28157_cached_sizze_33315, (int64_t) 64);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_28158_cached_sizze_33316 < (int64_t) 16) {
            err = lexical_realloc(ctx, &mem_28158, &mem_28158_cached_sizze_33316, (int64_t) 16);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_28421 = start_28418; SegMap_i_28421 < start_28418 + n_28420; SegMap_i_28421++) {
            int64_t slice_28422 = (int64_t) 16;
            int64_t gtid_28155 = SegMap_i_28421;
            int64_t remnant_28423 = SegMap_i_28421 - gtid_28155;
            int8_t x_28156 = ((int8_t *) mem_26375.mem)[gtid_28155];
            int64_t flat_tid_28385 = (int64_t) 0;
            int64_t flat_tid_28333 = (int64_t) 0;
            struct futhark_mc_task_33317 futhark_mc_task_33317_;
            
            futhark_mc_task_33317_.ctx = ctx;
            futhark_mc_task_33317_.free_x_22304 = x_22304;
            futhark_mc_task_33317_.free_mem_26373 = mem_26373.mem;
            futhark_mc_task_33317_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33317_.free_x_28156 = x_28156;
            futhark_mc_task_33317_.free_mem_28157 = mem_28157;
            futhark_mc_task_33317_.free_mem_28158 = mem_28158;
            
            struct scheduler_segop futhark_mc_task_33317_task;
            
            futhark_mc_task_33317_task.args = &futhark_mc_task_33317_;
            futhark_mc_task_33317_task.top_level_fn = futhark_mc_segmap_task_33318;
            futhark_mc_task_33317_task.name = "futhark_mc_segmap_task_33318";
            futhark_mc_task_33317_task.iterations = (int64_t) 2;
            futhark_mc_task_33317_task.task_time = &ctx->program->futhark_mc_segmap_task_33318_total_time;
            futhark_mc_task_33317_task.task_iter = &ctx->program->futhark_mc_segmap_task_33318_total_iter;
            futhark_mc_task_33317_task.sched = STATIC;
            futhark_mc_task_33317_task.nested_fn = futhark_mc_segmap_nested_task_33324;
            
            int futhark_mc_segmap_task_33318_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33317_task);
            
            if (futhark_mc_segmap_task_33318_err != 0) {
                ;
                err = futhark_mc_segmap_task_33318_err;
                goto cleanup;
            }
            
            int64_t iterations_28621 = (int64_t) 64;
            struct futhark_mc_task_33360 futhark_mc_task_33360_;
            
            futhark_mc_task_33360_.ctx = ctx;
            futhark_mc_task_33360_.free_mem_26603 = mem_26603.mem;
            futhark_mc_task_33360_.free_gtid_28155 = gtid_28155;
            futhark_mc_task_33360_.free_mem_28157 = mem_28157;
            
            struct scheduler_segop futhark_mc_task_33360_task;
            
            futhark_mc_task_33360_task.args = &futhark_mc_task_33360_;
            futhark_mc_task_33360_task.top_level_fn = futhark_mc_copy_28620_task_33361;
            futhark_mc_task_33360_task.name = "futhark_mc_copy_28620_task_33361";
            futhark_mc_task_33360_task.iterations = iterations_28621;
            futhark_mc_task_33360_task.task_time = &ctx->program->futhark_mc_copy_28620_task_33361_total_time;
            futhark_mc_task_33360_task.task_iter = &ctx->program->futhark_mc_copy_28620_task_33361_total_iter;
            futhark_mc_task_33360_task.sched = STATIC;
            futhark_mc_task_33360_task.nested_fn = NULL;
            
            int futhark_mc_copy_28620_task_33361_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33360_task);
            
            if (futhark_mc_copy_28620_task_33361_err != 0) {
                ;
                err = futhark_mc_copy_28620_task_33361_err;
                goto cleanup;
            }
            
            int64_t iterations_28637 = (int64_t) 16;
            struct futhark_mc_task_33364 futhark_mc_task_33364_;
            
            futhark_mc_task_33364_.ctx = ctx;
            futhark_mc_task_33364_.free_mem_26605 = mem_26605.mem;
            futhark_mc_task_33364_.free_gtid_28155 = gtid_28155;
            futhark_mc_task_33364_.free_mem_28158 = mem_28158;
            
            struct scheduler_segop futhark_mc_task_33364_task;
            
            futhark_mc_task_33364_task.args = &futhark_mc_task_33364_;
            futhark_mc_task_33364_task.top_level_fn = futhark_mc_copy_28636_task_33365;
            futhark_mc_task_33364_task.name = "futhark_mc_copy_28636_task_33365";
            futhark_mc_task_33364_task.iterations = iterations_28637;
            futhark_mc_task_33364_task.task_time = &ctx->program->futhark_mc_copy_28636_task_33365_total_time;
            futhark_mc_task_33364_task.task_iter = &ctx->program->futhark_mc_copy_28636_task_33365_total_iter;
            futhark_mc_task_33364_task.sched = STATIC;
            futhark_mc_task_33364_task.nested_fn = NULL;
            
            int futhark_mc_copy_28636_task_33365_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33364_task);
            
            if (futhark_mc_copy_28636_task_33365_err != 0) {
                ;
                err = futhark_mc_copy_28636_task_33365_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_28157);
        free(mem_28158);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33314_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33314_end - futhark_mc_segmap_parloop_33314_start;
        
        ctx->program->futhark_mc_segmap_parloop_33314_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33314_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33314_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33312(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33305 *futhark_mc_task_33305 = (struct futhark_mc_task_33305 *) args;
    struct futhark_context *ctx = futhark_mc_task_33305->ctx;
    uint64_t futhark_mc_segmap_nested_task_33312_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33312_start = get_wall_time();
    
    int8_t x_22304 = futhark_mc_task_33305->free_x_22304;
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_task_33305->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33305->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26603 = {.desc ="mem_26603", .mem =futhark_mc_task_33305->free_mem_26603, .size =0, .references =NULL};
    struct memblock mem_26605 = {.desc ="mem_26605", .mem =futhark_mc_task_33305->free_mem_26605, .size =0, .references =NULL};
    int32_t nsubtasks_28332;
    
    nsubtasks_28332 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33313 futhark_mc_segmap_parloop_struct_33313_;
    
    futhark_mc_segmap_parloop_struct_33313_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33313_.free_x_22304 = x_22304;
    futhark_mc_segmap_parloop_struct_33313_.free_mem_26373 = mem_26373.mem;
    futhark_mc_segmap_parloop_struct_33313_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33313_.free_mem_26603 = mem_26603.mem;
    futhark_mc_segmap_parloop_struct_33313_.free_mem_26605 = mem_26605.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33314_task;
    
    futhark_mc_segmap_parloop_33314_task.name = "futhark_mc_segmap_parloop_33314";
    futhark_mc_segmap_parloop_33314_task.fn = futhark_mc_segmap_parloop_33314;
    futhark_mc_segmap_parloop_33314_task.args = &futhark_mc_segmap_parloop_struct_33313_;
    futhark_mc_segmap_parloop_33314_task.iterations = iterations;
    futhark_mc_segmap_parloop_33314_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33314_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33314_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33314_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33314_task);
    
    if (futhark_mc_segmap_parloop_33314_err != 0) {
        err = futhark_mc_segmap_parloop_33314_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33314_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33314_total_end - futhark_mc_segmap_parloop_33314_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33314_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33314_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33314_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33312_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33312_end - futhark_mc_segmap_nested_task_33312_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33312_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33312_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33312_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33368 {
    struct futhark_context *ctx;
    int64_t free_gtid_22303;
    unsigned char *free_mem_26603;
    unsigned char *free_mem_26855;
};
struct futhark_mc_copy_parloop_struct_33370 {
    struct futhark_context *ctx;
    int64_t free_gtid_22303;
    unsigned char *free_mem_26603;
    unsigned char *free_mem_26855;
};
static int futhark_mc_copy_parloop_33371(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33370 *futhark_mc_copy_parloop_struct_33370 = (struct futhark_mc_copy_parloop_struct_33370 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33370->ctx;
    uint64_t futhark_mc_copy_parloop_33371_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33371_start = get_wall_time();
    
    int64_t gtid_22303 = futhark_mc_copy_parloop_struct_33370->free_gtid_22303;
    struct memblock mem_26603 = {.desc ="mem_26603", .mem =futhark_mc_copy_parloop_struct_33370->free_mem_26603, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_copy_parloop_struct_33370->free_mem_26855, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28638;
        int64_t end_28639;
        
        start_28638 = start;
        end_28639 = end;
        
        int64_t n_28640 = end_28639 - start_28638;
        
        for (int64_t copy_i_28641 = start_28638; copy_i_28641 < start_28638 + n_28640; copy_i_28641++) {
            int64_t slice_28646 = (int64_t) 16;
            int64_t slice_28647 = (int64_t) 2 * slice_28646;
            int64_t slice_28648 = (int64_t) 2 * slice_28647;
            int64_t slice_28649 = (int64_t) 16 * slice_28648;
            int64_t i_28642 = squot64(copy_i_28641, slice_28648);
            int64_t remnant_28650 = copy_i_28641 - i_28642 * slice_28648;
            int64_t i_28643 = squot64(remnant_28650, slice_28647);
            int64_t remnant_28651 = remnant_28650 - i_28643 * slice_28647;
            int64_t i_28644 = squot64(remnant_28651, slice_28646);
            int64_t remnant_28652 = remnant_28651 - i_28644 * slice_28646;
            int64_t i_28645 = remnant_28652;
            int64_t remnant_28653 = remnant_28652 - i_28645;
            int8_t tmp_28654 = ((int8_t *) mem_26603.mem)[i_28642 * (int64_t) 64 + i_28643 * (int64_t) 32 + i_28644 * (int64_t) 16 + i_28645];
            
            ((int8_t *) mem_26855.mem)[gtid_22303 * (int64_t) 1024 + (i_28642 * (int64_t) 64 + i_28643 * (int64_t) 32 + i_28644 * (int64_t) 16 + i_28645)] = tmp_28654;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33371_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33371_end - futhark_mc_copy_parloop_33371_start;
        
        ctx->program->futhark_mc_copy_parloop_33371_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33371_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33371_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28655_task_33369(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33368 *futhark_mc_task_33368 = (struct futhark_mc_task_33368 *) args;
    struct futhark_context *ctx = futhark_mc_task_33368->ctx;
    uint64_t futhark_mc_copy_28655_task_33369_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28655_task_33369_start = get_wall_time();
    
    int64_t gtid_22303 = futhark_mc_task_33368->free_gtid_22303;
    struct memblock mem_26603 = {.desc ="mem_26603", .mem =futhark_mc_task_33368->free_mem_26603, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33368->free_mem_26855, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33370 futhark_mc_copy_parloop_struct_33370_;
    
    futhark_mc_copy_parloop_struct_33370_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33370_.free_gtid_22303 = gtid_22303;
    futhark_mc_copy_parloop_struct_33370_.free_mem_26603 = mem_26603.mem;
    futhark_mc_copy_parloop_struct_33370_.free_mem_26855 = mem_26855.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33371_task;
    
    futhark_mc_copy_parloop_33371_task.name = "futhark_mc_copy_parloop_33371";
    futhark_mc_copy_parloop_33371_task.fn = futhark_mc_copy_parloop_33371;
    futhark_mc_copy_parloop_33371_task.args = &futhark_mc_copy_parloop_struct_33370_;
    futhark_mc_copy_parloop_33371_task.iterations = iterations;
    futhark_mc_copy_parloop_33371_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33371_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33371_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33371_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33371_task);
    
    if (futhark_mc_copy_parloop_33371_err != 0) {
        err = futhark_mc_copy_parloop_33371_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33371_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33371_total_end - futhark_mc_copy_parloop_33371_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33371_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33371_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33371_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28655_task_33369_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28655_task_33369_end - futhark_mc_copy_28655_task_33369_start;
        
        ctx->program->futhark_mc_copy_28655_task_33369_runs[tid]++;
        ctx->program->futhark_mc_copy_28655_task_33369_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28655_task_33369_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33372 {
    struct futhark_context *ctx;
    int64_t free_gtid_22303;
    unsigned char *free_mem_26605;
    unsigned char *free_mem_26857;
};
struct futhark_mc_copy_parloop_struct_33374 {
    struct futhark_context *ctx;
    int64_t free_gtid_22303;
    unsigned char *free_mem_26605;
    unsigned char *free_mem_26857;
};
static int futhark_mc_copy_parloop_33375(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33374 *futhark_mc_copy_parloop_struct_33374 = (struct futhark_mc_copy_parloop_struct_33374 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33374->ctx;
    uint64_t futhark_mc_copy_parloop_33375_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33375_start = get_wall_time();
    
    int64_t gtid_22303 = futhark_mc_copy_parloop_struct_33374->free_gtid_22303;
    struct memblock mem_26605 = {.desc ="mem_26605", .mem =futhark_mc_copy_parloop_struct_33374->free_mem_26605, .size =0, .references =NULL};
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_copy_parloop_struct_33374->free_mem_26857, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28657;
        int64_t end_28658;
        
        start_28657 = start;
        end_28658 = end;
        
        int64_t n_28659 = end_28658 - start_28657;
        
        for (int64_t copy_i_28660 = start_28657; copy_i_28660 < start_28657 + n_28659; copy_i_28660++) {
            int64_t slice_28665 = (int64_t) 4;
            int64_t slice_28666 = (int64_t) 2 * slice_28665;
            int64_t slice_28667 = (int64_t) 2 * slice_28666;
            int64_t slice_28668 = (int64_t) 16 * slice_28667;
            int64_t i_28661 = squot64(copy_i_28660, slice_28667);
            int64_t remnant_28669 = copy_i_28660 - i_28661 * slice_28667;
            int64_t i_28662 = squot64(remnant_28669, slice_28666);
            int64_t remnant_28670 = remnant_28669 - i_28662 * slice_28666;
            int64_t i_28663 = squot64(remnant_28670, slice_28665);
            int64_t remnant_28671 = remnant_28670 - i_28663 * slice_28665;
            int64_t i_28664 = remnant_28671;
            int64_t remnant_28672 = remnant_28671 - i_28664;
            int8_t tmp_28673 = ((int8_t *) mem_26605.mem)[i_28661 * (int64_t) 16 + i_28662 * (int64_t) 8 + i_28663 * (int64_t) 4 + i_28664];
            
            ((int8_t *) mem_26857.mem)[gtid_22303 * (int64_t) 256 + (i_28661 * (int64_t) 16 + i_28662 * (int64_t) 8 + i_28663 * (int64_t) 4 + i_28664)] = tmp_28673;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33375_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33375_end - futhark_mc_copy_parloop_33375_start;
        
        ctx->program->futhark_mc_copy_parloop_33375_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33375_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33375_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28674_task_33373(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33372 *futhark_mc_task_33372 = (struct futhark_mc_task_33372 *) args;
    struct futhark_context *ctx = futhark_mc_task_33372->ctx;
    uint64_t futhark_mc_copy_28674_task_33373_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28674_task_33373_start = get_wall_time();
    
    int64_t gtid_22303 = futhark_mc_task_33372->free_gtid_22303;
    struct memblock mem_26605 = {.desc ="mem_26605", .mem =futhark_mc_task_33372->free_mem_26605, .size =0, .references =NULL};
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_task_33372->free_mem_26857, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33374 futhark_mc_copy_parloop_struct_33374_;
    
    futhark_mc_copy_parloop_struct_33374_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33374_.free_gtid_22303 = gtid_22303;
    futhark_mc_copy_parloop_struct_33374_.free_mem_26605 = mem_26605.mem;
    futhark_mc_copy_parloop_struct_33374_.free_mem_26857 = mem_26857.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33375_task;
    
    futhark_mc_copy_parloop_33375_task.name = "futhark_mc_copy_parloop_33375";
    futhark_mc_copy_parloop_33375_task.fn = futhark_mc_copy_parloop_33375;
    futhark_mc_copy_parloop_33375_task.args = &futhark_mc_copy_parloop_struct_33374_;
    futhark_mc_copy_parloop_33375_task.iterations = iterations;
    futhark_mc_copy_parloop_33375_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33375_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33375_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33375_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33375_task);
    
    if (futhark_mc_copy_parloop_33375_err != 0) {
        err = futhark_mc_copy_parloop_33375_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33375_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33375_total_end - futhark_mc_copy_parloop_33375_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33375_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33375_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33375_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28674_task_33373_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28674_task_33373_end - futhark_mc_copy_28674_task_33373_start;
        
        ctx->program->futhark_mc_copy_28674_task_33373_runs[tid]++;
        ctx->program->futhark_mc_copy_28674_task_33373_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28674_task_33373_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33302(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33301 *futhark_mc_segmap_parloop_struct_33301 = (struct futhark_mc_segmap_parloop_struct_33301 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33301->ctx;
    uint64_t futhark_mc_segmap_parloop_33302_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33302_start = get_wall_time();
    
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_segmap_parloop_struct_33301->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33301->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33301->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_segmap_parloop_struct_33301->free_mem_26857, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_26603_cached_sizze_33303 = 0;
    unsigned char *mem_26603 = NULL;
    int64_t mem_26605_cached_sizze_33304 = 0;
    unsigned char *mem_26605 = NULL;
    int64_t flat_tid_22302;
    
    flat_tid_22302 = subtask_id;
    {
        int64_t start_28285;
        int64_t end_28286;
        
        start_28285 = start;
        end_28286 = end;
        
        int64_t n_28287 = end_28286 - start_28285;
        
        if (mem_26603_cached_sizze_33303 < (int64_t) 1024) {
            err = lexical_realloc(ctx, &mem_26603, &mem_26603_cached_sizze_33303, (int64_t) 1024);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_26605_cached_sizze_33304 < (int64_t) 256) {
            err = lexical_realloc(ctx, &mem_26605, &mem_26605_cached_sizze_33304, (int64_t) 256);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_28288 = start_28285; SegMap_i_28288 < start_28285 + n_28287; SegMap_i_28288++) {
            int64_t slice_28289 = (int64_t) 16;
            int64_t gtid_22303 = SegMap_i_28288;
            int64_t remnant_28290 = SegMap_i_28288 - gtid_22303;
            int8_t x_22304 = ((int8_t *) mem_26375.mem)[gtid_22303];
            int64_t flat_tid_28246 = (int64_t) 0;
            int64_t flat_tid_28154 = (int64_t) 0;
            struct futhark_mc_task_33305 futhark_mc_task_33305_;
            
            futhark_mc_task_33305_.ctx = ctx;
            futhark_mc_task_33305_.free_x_22304 = x_22304;
            futhark_mc_task_33305_.free_mem_26373 = mem_26373.mem;
            futhark_mc_task_33305_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33305_.free_mem_26603 = mem_26603;
            futhark_mc_task_33305_.free_mem_26605 = mem_26605;
            
            struct scheduler_segop futhark_mc_task_33305_task;
            
            futhark_mc_task_33305_task.args = &futhark_mc_task_33305_;
            futhark_mc_task_33305_task.top_level_fn = futhark_mc_segmap_task_33306;
            futhark_mc_task_33305_task.name = "futhark_mc_segmap_task_33306";
            futhark_mc_task_33305_task.iterations = (int64_t) 16;
            futhark_mc_task_33305_task.task_time = &ctx->program->futhark_mc_segmap_task_33306_total_time;
            futhark_mc_task_33305_task.task_iter = &ctx->program->futhark_mc_segmap_task_33306_total_iter;
            futhark_mc_task_33305_task.sched = STATIC;
            futhark_mc_task_33305_task.nested_fn = futhark_mc_segmap_nested_task_33312;
            
            int futhark_mc_segmap_task_33306_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33305_task);
            
            if (futhark_mc_segmap_task_33306_err != 0) {
                ;
                err = futhark_mc_segmap_task_33306_err;
                goto cleanup;
            }
            
            int64_t iterations_28656 = (int64_t) 1024;
            struct futhark_mc_task_33368 futhark_mc_task_33368_;
            
            futhark_mc_task_33368_.ctx = ctx;
            futhark_mc_task_33368_.free_gtid_22303 = gtid_22303;
            futhark_mc_task_33368_.free_mem_26603 = mem_26603;
            futhark_mc_task_33368_.free_mem_26855 = mem_26855.mem;
            
            struct scheduler_segop futhark_mc_task_33368_task;
            
            futhark_mc_task_33368_task.args = &futhark_mc_task_33368_;
            futhark_mc_task_33368_task.top_level_fn = futhark_mc_copy_28655_task_33369;
            futhark_mc_task_33368_task.name = "futhark_mc_copy_28655_task_33369";
            futhark_mc_task_33368_task.iterations = iterations_28656;
            futhark_mc_task_33368_task.task_time = &ctx->program->futhark_mc_copy_28655_task_33369_total_time;
            futhark_mc_task_33368_task.task_iter = &ctx->program->futhark_mc_copy_28655_task_33369_total_iter;
            futhark_mc_task_33368_task.sched = STATIC;
            futhark_mc_task_33368_task.nested_fn = NULL;
            
            int futhark_mc_copy_28655_task_33369_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33368_task);
            
            if (futhark_mc_copy_28655_task_33369_err != 0) {
                ;
                err = futhark_mc_copy_28655_task_33369_err;
                goto cleanup;
            }
            
            int64_t iterations_28675 = (int64_t) 256;
            struct futhark_mc_task_33372 futhark_mc_task_33372_;
            
            futhark_mc_task_33372_.ctx = ctx;
            futhark_mc_task_33372_.free_gtid_22303 = gtid_22303;
            futhark_mc_task_33372_.free_mem_26605 = mem_26605;
            futhark_mc_task_33372_.free_mem_26857 = mem_26857.mem;
            
            struct scheduler_segop futhark_mc_task_33372_task;
            
            futhark_mc_task_33372_task.args = &futhark_mc_task_33372_;
            futhark_mc_task_33372_task.top_level_fn = futhark_mc_copy_28674_task_33373;
            futhark_mc_task_33372_task.name = "futhark_mc_copy_28674_task_33373";
            futhark_mc_task_33372_task.iterations = iterations_28675;
            futhark_mc_task_33372_task.task_time = &ctx->program->futhark_mc_copy_28674_task_33373_total_time;
            futhark_mc_task_33372_task.task_iter = &ctx->program->futhark_mc_copy_28674_task_33373_total_iter;
            futhark_mc_task_33372_task.sched = STATIC;
            futhark_mc_task_33372_task.nested_fn = NULL;
            
            int futhark_mc_copy_28674_task_33373_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33372_task);
            
            if (futhark_mc_copy_28674_task_33373_err != 0) {
                ;
                err = futhark_mc_copy_28674_task_33373_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_26603);
        free(mem_26605);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33302_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33302_end - futhark_mc_segmap_parloop_33302_start;
        
        ctx->program->futhark_mc_segmap_parloop_33302_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33302_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33302_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33300(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33293 *futhark_mc_task_33293 = (struct futhark_mc_task_33293 *) args;
    struct futhark_context *ctx = futhark_mc_task_33293->ctx;
    uint64_t futhark_mc_segmap_nested_task_33300_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33300_start = get_wall_time();
    
    struct memblock mem_26373 = {.desc ="mem_26373", .mem =futhark_mc_task_33293->free_mem_26373, .size =0, .references =NULL};
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33293->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33293->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_task_33293->free_mem_26857, .size =0, .references =NULL};
    int32_t nsubtasks_28153;
    
    nsubtasks_28153 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33301 futhark_mc_segmap_parloop_struct_33301_;
    
    futhark_mc_segmap_parloop_struct_33301_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33301_.free_mem_26373 = mem_26373.mem;
    futhark_mc_segmap_parloop_struct_33301_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33301_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33301_.free_mem_26857 = mem_26857.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33302_task;
    
    futhark_mc_segmap_parloop_33302_task.name = "futhark_mc_segmap_parloop_33302";
    futhark_mc_segmap_parloop_33302_task.fn = futhark_mc_segmap_parloop_33302;
    futhark_mc_segmap_parloop_33302_task.args = &futhark_mc_segmap_parloop_struct_33301_;
    futhark_mc_segmap_parloop_33302_task.iterations = iterations;
    futhark_mc_segmap_parloop_33302_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33302_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33302_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33302_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33302_task);
    
    if (futhark_mc_segmap_parloop_33302_err != 0) {
        err = futhark_mc_segmap_parloop_33302_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33302_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33302_total_end - futhark_mc_segmap_parloop_33302_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33302_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33302_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33302_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33300_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33300_end - futhark_mc_segmap_nested_task_33300_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33300_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33300_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33300_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33376 {
    struct futhark_context *ctx;
    int64_t free_arg_19218;
    int64_t free_arg_20165;
    int64_t free_arg_20169;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    unsigned char *free_mem_27983;
    unsigned char *free_mem_27985;
};
struct futhark_mc_segmap_parloop_struct_33378 {
    struct futhark_context *ctx;
    int64_t free_arg_19218;
    int64_t free_arg_20165;
    int64_t free_arg_20169;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    unsigned char *free_mem_27983;
    unsigned char *free_mem_27985;
};
static int futhark_mc_segmap_parloop_33379(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33378 *futhark_mc_segmap_parloop_struct_33378 = (struct futhark_mc_segmap_parloop_struct_33378 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33378->ctx;
    uint64_t futhark_mc_segmap_parloop_33379_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33379_start = get_wall_time();
    
    int64_t arg_19218 = futhark_mc_segmap_parloop_struct_33378->free_arg_19218;
    int64_t arg_20165 = futhark_mc_segmap_parloop_struct_33378->free_arg_20165;
    int64_t arg_20169 = futhark_mc_segmap_parloop_struct_33378->free_arg_20169;
    int64_t arg_20173 = futhark_mc_segmap_parloop_struct_33378->free_arg_20173;
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33378->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33378->free_arg_20181;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33378->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33378->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33378->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_27983 = {.desc ="mem_27983", .mem =futhark_mc_segmap_parloop_struct_33378->free_mem_27983, .size =0, .references =NULL};
    struct memblock mem_27985 = {.desc ="mem_27985", .mem =futhark_mc_segmap_parloop_struct_33378->free_mem_27985, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_27511_cached_sizze_33380 = 0;
    unsigned char *mem_27511 = NULL;
    int64_t mem_27513_cached_sizze_33381 = 0;
    unsigned char *mem_27513 = NULL;
    int64_t mem_27740_cached_sizze_33382 = 0;
    unsigned char *mem_27740 = NULL;
    int64_t flat_tid_22401;
    
    flat_tid_22401 = subtask_id;
    {
        int64_t start_28914;
        int64_t end_28915;
        
        start_28914 = start;
        end_28915 = end;
        
        int64_t n_28916 = end_28915 - start_28914;
        
        if (mem_27511_cached_sizze_33380 < (int64_t) 1073741824) {
            err = lexical_realloc(ctx, &mem_27511, &mem_27511_cached_sizze_33380, (int64_t) 1073741824);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_27513_cached_sizze_33381 < (int64_t) 12884901888) {
            err = lexical_realloc(ctx, &mem_27513, &mem_27513_cached_sizze_33381, (int64_t) 12884901888);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_27740_cached_sizze_33382 < (int64_t) 12) {
            err = lexical_realloc(ctx, &mem_27740, &mem_27740_cached_sizze_33382, (int64_t) 12);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_28917 = start_28914; SegMap_i_28917 < start_28914 + n_28916; SegMap_i_28917++) {
            int64_t slice_28918 = (int64_t) 64;
            int64_t gtid_22402 = SegMap_i_28917;
            int64_t remnant_28919 = SegMap_i_28917 - gtid_22402;
            int64_t defunc_0_f_res_21245 = add64(arg_19218, gtid_22402);
            int16_t i64_res_21247 = sext_i64_i16(defunc_0_f_res_21245);
            bool x_21248 = sle64((int64_t) 0, defunc_0_f_res_21245);
            bool y_21249 = slt64(defunc_0_f_res_21245, (int64_t) 1024);
            bool bounds_check_21250 = x_21248 && y_21249;
            int64_t binop_x_21251 = (int64_t) 16 * defunc_0_f_res_21245;
            
            for (int64_t i_28731 = 0; i_28731 < (int64_t) 64; i_28731++) {
                int64_t index_primexp_28734 = add64(arg_20165, i_28731);
                int16_t i64_res_28735 = sext_i64_i16(index_primexp_28734);
                bool x_28736 = sle64((int64_t) 0, index_primexp_28734);
                bool y_28737 = slt64(index_primexp_28734, (int64_t) 1024);
                bool bounds_check_28738 = x_28736 && y_28737;
                int64_t binop_x_28739 = (int64_t) 16 * index_primexp_28734;
                
                for (int64_t i_28742 = 0; i_28742 < (int64_t) 64; i_28742++) {
                    int64_t index_primexp_28745 = add64(arg_20169, i_28742);
                    int16_t i64_res_28746 = sext_i64_i16(index_primexp_28745);
                    bool x_28747 = sle64((int64_t) 0, index_primexp_28745);
                    bool y_28748 = slt64(index_primexp_28745, (int64_t) 1024);
                    bool bounds_check_28749 = x_28747 && y_28748;
                    int64_t binop_x_28750 = (int64_t) 16 * index_primexp_28745;
                    
                    for (int64_t i_28753 = 0; i_28753 < (int64_t) 64; i_28753++) {
                        int64_t index_primexp_28756 = add64(arg_20173, i_28753);
                        int16_t i64_res_28757 = sext_i64_i16(index_primexp_28756);
                        bool x_28758 = sle64((int64_t) 0, index_primexp_28756);
                        bool y_28759 = slt64(index_primexp_28756, (int64_t) 1024);
                        bool bounds_check_28760 = x_28758 && y_28759;
                        int64_t binop_x_28761 = (int64_t) 16 * index_primexp_28756;
                        
                        for (int64_t i_28764 = 0; i_28764 < (int64_t) 64; i_28764++) {
                            int64_t index_primexp_28767 = add64(arg_20177, i_28764);
                            int16_t i64_res_28768 = sext_i64_i16(index_primexp_28767);
                            bool x_28769 = sle64((int64_t) 0, index_primexp_28767);
                            bool y_28770 = slt64(index_primexp_28767, (int64_t) 1024);
                            bool bounds_check_28771 = x_28769 && y_28770;
                            int64_t binop_x_28772 = (int64_t) 16 * index_primexp_28767;
                            
                            for (int64_t i_28775 = 0; i_28775 < (int64_t) 64; i_28775++) {
                                int64_t index_primexp_28778 = add64(arg_20181, i_28775);
                                bool x_28779 = sle64((int64_t) 0, index_primexp_28778);
                                bool y_28780 = slt64(index_primexp_28778, (int64_t) 1024);
                                bool bounds_check_28781 = x_28779 && y_28780;
                                int64_t binop_x_28782 = (int64_t) 16 * index_primexp_28778;
                                bool all_equal_28783;
                                bool redout_28785 = 1;
                                
                                for (int64_t i_28784 = 0; i_28784 < (int64_t) 16; i_28784++) {
                                    int8_t x_28786 = ((int8_t *) mem_26375.mem)[i_28784];
                                    int8_t y_28787 = ((int8_t *) mem_26377.mem)[i_28784];
                                    int64_t u8_res_28788 = zext_i8_i64(x_28786);
                                    bool x_28789 = sle64((int64_t) 0, u8_res_28788);
                                    bool y_28790 = slt64(u8_res_28788, (int64_t) 16);
                                    bool bounds_check_28791 = x_28789 && y_28790;
                                    bool index_ok_28792 = bounds_check_28781 && bounds_check_28791;
                                    bool index_certs_28793;
                                    
                                    if (!index_ok_28792) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28778, ", ", (long long) u8_res_28788, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t binop_x_28794 = binop_x_28782 + u8_res_28788;
                                    int64_t new_index_28795 = squot64(binop_x_28794, (int64_t) 1024);
                                    int64_t binop_y_28796 = (int64_t) 1024 * new_index_28795;
                                    int64_t binop_x_28797 = binop_x_28794 - binop_y_28796;
                                    int64_t new_index_28798 = squot64(binop_x_28797, (int64_t) 64);
                                    int64_t binop_y_28799 = (int64_t) 64 * new_index_28798;
                                    int64_t binop_x_28800 = binop_x_28797 - binop_y_28799;
                                    int64_t new_index_28801 = squot64(binop_x_28800, (int64_t) 32);
                                    int64_t binop_y_28802 = (int64_t) 32 * new_index_28801;
                                    int64_t binop_x_28803 = binop_x_28800 - binop_y_28802;
                                    int64_t new_index_28804 = squot64(binop_x_28803, (int64_t) 16);
                                    int64_t binop_y_28805 = (int64_t) 16 * new_index_28804;
                                    int64_t new_index_28806 = binop_x_28803 - binop_y_28805;
                                    int8_t defunc_0_f_res_28807 = ((int8_t *) mem_26855.mem)[new_index_28795 * (int64_t) 1024 + new_index_28798 * (int64_t) 64 + new_index_28801 * (int64_t) 32 + new_index_28804 * (int64_t) 16 + new_index_28806];
                                    int64_t u8_res_28808 = zext_i8_i64(defunc_0_f_res_28807);
                                    bool x_28809 = sle64((int64_t) 0, u8_res_28808);
                                    bool y_28810 = slt64(u8_res_28808, (int64_t) 16);
                                    bool bounds_check_28811 = x_28809 && y_28810;
                                    bool index_ok_28812 = bounds_check_28771 && bounds_check_28811;
                                    bool index_certs_28813;
                                    
                                    if (!index_ok_28812) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28767, ", ", (long long) u8_res_28808, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t binop_x_28814 = binop_x_28772 + u8_res_28808;
                                    int64_t new_index_28815 = squot64(binop_x_28814, (int64_t) 1024);
                                    int64_t binop_y_28816 = (int64_t) 1024 * new_index_28815;
                                    int64_t binop_x_28817 = binop_x_28814 - binop_y_28816;
                                    int64_t new_index_28818 = squot64(binop_x_28817, (int64_t) 64);
                                    int64_t binop_y_28819 = (int64_t) 64 * new_index_28818;
                                    int64_t binop_x_28820 = binop_x_28817 - binop_y_28819;
                                    int64_t new_index_28821 = squot64(binop_x_28820, (int64_t) 32);
                                    int64_t binop_y_28822 = (int64_t) 32 * new_index_28821;
                                    int64_t binop_x_28823 = binop_x_28820 - binop_y_28822;
                                    int64_t new_index_28824 = squot64(binop_x_28823, (int64_t) 16);
                                    int64_t binop_y_28825 = (int64_t) 16 * new_index_28824;
                                    int64_t new_index_28826 = binop_x_28823 - binop_y_28825;
                                    int8_t defunc_0_f_res_28827 = ((int8_t *) mem_26855.mem)[new_index_28815 * (int64_t) 1024 + new_index_28818 * (int64_t) 64 + new_index_28821 * (int64_t) 32 + new_index_28824 * (int64_t) 16 + new_index_28826];
                                    int64_t u8_res_28828 = zext_i8_i64(defunc_0_f_res_28827);
                                    bool x_28829 = sle64((int64_t) 0, u8_res_28828);
                                    bool y_28830 = slt64(u8_res_28828, (int64_t) 16);
                                    bool bounds_check_28831 = x_28829 && y_28830;
                                    bool index_ok_28832 = bounds_check_28760 && bounds_check_28831;
                                    bool index_certs_28833;
                                    
                                    if (!index_ok_28832) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28756, ", ", (long long) u8_res_28828, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t binop_x_28834 = binop_x_28761 + u8_res_28828;
                                    int64_t new_index_28835 = squot64(binop_x_28834, (int64_t) 1024);
                                    int64_t binop_y_28836 = (int64_t) 1024 * new_index_28835;
                                    int64_t binop_x_28837 = binop_x_28834 - binop_y_28836;
                                    int64_t new_index_28838 = squot64(binop_x_28837, (int64_t) 64);
                                    int64_t binop_y_28839 = (int64_t) 64 * new_index_28838;
                                    int64_t binop_x_28840 = binop_x_28837 - binop_y_28839;
                                    int64_t new_index_28841 = squot64(binop_x_28840, (int64_t) 32);
                                    int64_t binop_y_28842 = (int64_t) 32 * new_index_28841;
                                    int64_t binop_x_28843 = binop_x_28840 - binop_y_28842;
                                    int64_t new_index_28844 = squot64(binop_x_28843, (int64_t) 16);
                                    int64_t binop_y_28845 = (int64_t) 16 * new_index_28844;
                                    int64_t new_index_28846 = binop_x_28843 - binop_y_28845;
                                    int8_t defunc_0_f_res_28847 = ((int8_t *) mem_26855.mem)[new_index_28835 * (int64_t) 1024 + new_index_28838 * (int64_t) 64 + new_index_28841 * (int64_t) 32 + new_index_28844 * (int64_t) 16 + new_index_28846];
                                    int64_t u8_res_28848 = zext_i8_i64(defunc_0_f_res_28847);
                                    bool x_28849 = sle64((int64_t) 0, u8_res_28848);
                                    bool y_28850 = slt64(u8_res_28848, (int64_t) 16);
                                    bool bounds_check_28851 = x_28849 && y_28850;
                                    bool index_ok_28852 = bounds_check_28749 && bounds_check_28851;
                                    bool index_certs_28853;
                                    
                                    if (!index_ok_28852) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28745, ", ", (long long) u8_res_28848, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t binop_x_28854 = binop_x_28750 + u8_res_28848;
                                    int64_t new_index_28855 = squot64(binop_x_28854, (int64_t) 1024);
                                    int64_t binop_y_28856 = (int64_t) 1024 * new_index_28855;
                                    int64_t binop_x_28857 = binop_x_28854 - binop_y_28856;
                                    int64_t new_index_28858 = squot64(binop_x_28857, (int64_t) 64);
                                    int64_t binop_y_28859 = (int64_t) 64 * new_index_28858;
                                    int64_t binop_x_28860 = binop_x_28857 - binop_y_28859;
                                    int64_t new_index_28861 = squot64(binop_x_28860, (int64_t) 32);
                                    int64_t binop_y_28862 = (int64_t) 32 * new_index_28861;
                                    int64_t binop_x_28863 = binop_x_28860 - binop_y_28862;
                                    int64_t new_index_28864 = squot64(binop_x_28863, (int64_t) 16);
                                    int64_t binop_y_28865 = (int64_t) 16 * new_index_28864;
                                    int64_t new_index_28866 = binop_x_28863 - binop_y_28865;
                                    int8_t defunc_0_f_res_28867 = ((int8_t *) mem_26855.mem)[new_index_28855 * (int64_t) 1024 + new_index_28858 * (int64_t) 64 + new_index_28861 * (int64_t) 32 + new_index_28864 * (int64_t) 16 + new_index_28866];
                                    int64_t u8_res_28868 = zext_i8_i64(defunc_0_f_res_28867);
                                    bool x_28869 = sle64((int64_t) 0, u8_res_28868);
                                    bool y_28870 = slt64(u8_res_28868, (int64_t) 16);
                                    bool bounds_check_28871 = x_28869 && y_28870;
                                    bool index_ok_28872 = bounds_check_28738 && bounds_check_28871;
                                    bool index_certs_28873;
                                    
                                    if (!index_ok_28872) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28734, ", ", (long long) u8_res_28868, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t binop_x_28874 = binop_x_28739 + u8_res_28868;
                                    int64_t new_index_28875 = squot64(binop_x_28874, (int64_t) 1024);
                                    int64_t binop_y_28876 = (int64_t) 1024 * new_index_28875;
                                    int64_t binop_x_28877 = binop_x_28874 - binop_y_28876;
                                    int64_t new_index_28878 = squot64(binop_x_28877, (int64_t) 64);
                                    int64_t binop_y_28879 = (int64_t) 64 * new_index_28878;
                                    int64_t binop_x_28880 = binop_x_28877 - binop_y_28879;
                                    int64_t new_index_28881 = squot64(binop_x_28880, (int64_t) 32);
                                    int64_t binop_y_28882 = (int64_t) 32 * new_index_28881;
                                    int64_t binop_x_28883 = binop_x_28880 - binop_y_28882;
                                    int64_t new_index_28884 = squot64(binop_x_28883, (int64_t) 16);
                                    int64_t binop_y_28885 = (int64_t) 16 * new_index_28884;
                                    int64_t new_index_28886 = binop_x_28883 - binop_y_28885;
                                    int8_t defunc_0_f_res_28887 = ((int8_t *) mem_26855.mem)[new_index_28875 * (int64_t) 1024 + new_index_28878 * (int64_t) 64 + new_index_28881 * (int64_t) 32 + new_index_28884 * (int64_t) 16 + new_index_28886];
                                    int64_t u8_res_28888 = zext_i8_i64(defunc_0_f_res_28887);
                                    bool x_28889 = sle64((int64_t) 0, u8_res_28888);
                                    bool y_28890 = slt64(u8_res_28888, (int64_t) 16);
                                    bool bounds_check_28891 = x_28889 && y_28890;
                                    bool index_ok_28892 = bounds_check_21250 && bounds_check_28891;
                                    bool index_certs_28893;
                                    
                                    if (!index_ok_28892) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_21245, ", ", (long long) u8_res_28888, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t binop_x_28894 = binop_x_21251 + u8_res_28888;
                                    int64_t new_index_28895 = squot64(binop_x_28894, (int64_t) 1024);
                                    int64_t binop_y_28896 = (int64_t) 1024 * new_index_28895;
                                    int64_t binop_x_28897 = binop_x_28894 - binop_y_28896;
                                    int64_t new_index_28898 = squot64(binop_x_28897, (int64_t) 64);
                                    int64_t binop_y_28899 = (int64_t) 64 * new_index_28898;
                                    int64_t binop_x_28900 = binop_x_28897 - binop_y_28899;
                                    int64_t new_index_28901 = squot64(binop_x_28900, (int64_t) 32);
                                    int64_t binop_y_28902 = (int64_t) 32 * new_index_28901;
                                    int64_t binop_x_28903 = binop_x_28900 - binop_y_28902;
                                    int64_t new_index_28904 = squot64(binop_x_28903, (int64_t) 16);
                                    int64_t binop_y_28905 = (int64_t) 16 * new_index_28904;
                                    int64_t new_index_28906 = binop_x_28903 - binop_y_28905;
                                    int8_t defunc_0_f_res_28907 = ((int8_t *) mem_26855.mem)[new_index_28895 * (int64_t) 1024 + new_index_28898 * (int64_t) 64 + new_index_28901 * (int64_t) 32 + new_index_28904 * (int64_t) 16 + new_index_28906];
                                    bool binlam_res_28908 = defunc_0_f_res_28907 == y_28787;
                                    bool binlam_res_28909 = binlam_res_28908 && redout_28785;
                                    bool redout_tmp_28930 = binlam_res_28909;
                                    
                                    redout_28785 = redout_tmp_28930;
                                }
                                all_equal_28783 = redout_28785;
                                
                                int16_t i64_res_28910 = sext_i64_i16(index_primexp_28778);
                                
                                ((int16_t *) mem_27740)[(int64_t) 0] = i64_res_21247;
                                ((int16_t *) mem_27740)[(int64_t) 1] = i64_res_28735;
                                ((int16_t *) mem_27740)[(int64_t) 2] = i64_res_28746;
                                ((int16_t *) mem_27740)[(int64_t) 3] = i64_res_28757;
                                ((int16_t *) mem_27740)[(int64_t) 4] = i64_res_28768;
                                ((int16_t *) mem_27740)[(int64_t) 5] = i64_res_28910;
                                ((bool *) mem_27511)[i_28731 * (int64_t) 16777216 + i_28742 * (int64_t) 262144 + i_28753 * (int64_t) 4096 + i_28764 * (int64_t) 64 + i_28775] = all_equal_28783;
                                if ((int64_t) 12 > 0)
                                    memmove(mem_27513 + (i_28731 * (int64_t) 100663296 + i_28742 * (int64_t) 1572864 + i_28753 * (int64_t) 24576 + i_28764 * (int64_t) 384 + i_28775 * (int64_t) 6) * (int64_t) 2, mem_27740 + (int64_t) 0, (int64_t) 12);
                            }
                        }
                    }
                }
            }
            if ((int64_t) 1073741824 > 0)
                memmove(mem_27983.mem + gtid_22402 * (int64_t) 1073741824, mem_27511 + (int64_t) 0, (int64_t) 1073741824);
            if ((int64_t) 12884901888 > 0)
                memmove(mem_27985.mem + gtid_22402 * (int64_t) 6442450944 * (int64_t) 2, mem_27513 + (int64_t) 0, (int64_t) 12884901888);
        }
    }
    
  cleanup:
    {
        free(mem_27511);
        free(mem_27513);
        free(mem_27740);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33379_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33379_end - futhark_mc_segmap_parloop_33379_start;
        
        ctx->program->futhark_mc_segmap_parloop_33379_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33379_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33379_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33377(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33376 *futhark_mc_task_33376 = (struct futhark_mc_task_33376 *) args;
    struct futhark_context *ctx = futhark_mc_task_33376->ctx;
    uint64_t futhark_mc_segmap_task_33377_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33377_start = get_wall_time();
    
    int64_t arg_19218 = futhark_mc_task_33376->free_arg_19218;
    int64_t arg_20165 = futhark_mc_task_33376->free_arg_20165;
    int64_t arg_20169 = futhark_mc_task_33376->free_arg_20169;
    int64_t arg_20173 = futhark_mc_task_33376->free_arg_20173;
    int64_t arg_20177 = futhark_mc_task_33376->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33376->free_arg_20181;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33376->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33376->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33376->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_27983 = {.desc ="mem_27983", .mem =futhark_mc_task_33376->free_mem_27983, .size =0, .references =NULL};
    struct memblock mem_27985 = {.desc ="mem_27985", .mem =futhark_mc_task_33376->free_mem_27985, .size =0, .references =NULL};
    int32_t nsubtasks_28730;
    
    nsubtasks_28730 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33378 futhark_mc_segmap_parloop_struct_33378_;
    
    futhark_mc_segmap_parloop_struct_33378_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33378_.free_arg_19218 = arg_19218;
    futhark_mc_segmap_parloop_struct_33378_.free_arg_20165 = arg_20165;
    futhark_mc_segmap_parloop_struct_33378_.free_arg_20169 = arg_20169;
    futhark_mc_segmap_parloop_struct_33378_.free_arg_20173 = arg_20173;
    futhark_mc_segmap_parloop_struct_33378_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33378_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33378_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33378_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33378_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33378_.free_mem_27983 = mem_27983.mem;
    futhark_mc_segmap_parloop_struct_33378_.free_mem_27985 = mem_27985.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33379_task;
    
    futhark_mc_segmap_parloop_33379_task.name = "futhark_mc_segmap_parloop_33379";
    futhark_mc_segmap_parloop_33379_task.fn = futhark_mc_segmap_parloop_33379;
    futhark_mc_segmap_parloop_33379_task.args = &futhark_mc_segmap_parloop_struct_33378_;
    futhark_mc_segmap_parloop_33379_task.iterations = iterations;
    futhark_mc_segmap_parloop_33379_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33379_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33379_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33379_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33379_task);
    
    if (futhark_mc_segmap_parloop_33379_err != 0) {
        err = futhark_mc_segmap_parloop_33379_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33379_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33379_total_end - futhark_mc_segmap_parloop_33379_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33379_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33379_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33379_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33377_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33377_end - futhark_mc_segmap_task_33377_start;
        
        ctx->program->futhark_mc_segmap_task_33377_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33377_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33377_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33384 {
    struct futhark_context *ctx;
    int64_t free_arg_19218;
    int64_t free_arg_20165;
    int64_t free_arg_20169;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    unsigned char *free_mem_27983;
    unsigned char *free_mem_27985;
};
struct futhark_mc_task_33388 {
    struct futhark_context *ctx;
    int64_t free_arg_20165;
    int64_t free_arg_20169;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    unsigned char *free_mem_27507;
    unsigned char *free_mem_27509;
};
struct futhark_mc_segmap_parloop_struct_33390 {
    struct futhark_context *ctx;
    int64_t free_arg_20165;
    int64_t free_arg_20169;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    unsigned char *free_mem_27507;
    unsigned char *free_mem_27509;
};
static int futhark_mc_segmap_parloop_33391(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33390 *futhark_mc_segmap_parloop_struct_33390 = (struct futhark_mc_segmap_parloop_struct_33390 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33390->ctx;
    uint64_t futhark_mc_segmap_parloop_33391_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33391_start = get_wall_time();
    
    int64_t arg_20165 = futhark_mc_segmap_parloop_struct_33390->free_arg_20165;
    int64_t arg_20169 = futhark_mc_segmap_parloop_struct_33390->free_arg_20169;
    int64_t arg_20173 = futhark_mc_segmap_parloop_struct_33390->free_arg_20173;
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33390->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33390->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33390->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33390->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33390->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33390->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33390->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33390->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33390->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_27507 = {.desc ="mem_27507", .mem =futhark_mc_segmap_parloop_struct_33390->free_mem_27507, .size =0, .references =NULL};
    struct memblock mem_27509 = {.desc ="mem_27509", .mem =futhark_mc_segmap_parloop_struct_33390->free_mem_27509, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_29759_cached_sizze_33392 = 0;
    unsigned char *mem_29759 = NULL;
    int64_t mem_29761_cached_sizze_33393 = 0;
    unsigned char *mem_29761 = NULL;
    int64_t mem_29763_cached_sizze_33394 = 0;
    unsigned char *mem_29763 = NULL;
    int64_t flat_tid_29751;
    
    flat_tid_29751 = subtask_id;
    {
        int64_t start_30117;
        int64_t end_30118;
        
        start_30117 = start;
        end_30118 = end;
        
        int64_t n_30119 = end_30118 - start_30117;
        
        if (mem_29759_cached_sizze_33392 < (int64_t) 16777216) {
            err = lexical_realloc(ctx, &mem_29759, &mem_29759_cached_sizze_33392, (int64_t) 16777216);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_29761_cached_sizze_33393 < (int64_t) 201326592) {
            err = lexical_realloc(ctx, &mem_29761, &mem_29761_cached_sizze_33393, (int64_t) 201326592);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_29763_cached_sizze_33394 < (int64_t) 12) {
            err = lexical_realloc(ctx, &mem_29763, &mem_29763_cached_sizze_33394, (int64_t) 12);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_30120 = start_30117; SegMap_i_30120 < start_30117 + n_30119; SegMap_i_30120++) {
            int64_t slice_30121 = (int64_t) 64;
            int64_t gtid_29752 = SegMap_i_30120;
            int64_t remnant_30122 = SegMap_i_30120 - gtid_29752;
            int64_t index_primexp_29753 = add64(arg_20165, gtid_29752);
            int16_t i64_res_29754 = sext_i64_i16(index_primexp_29753);
            bool x_29755 = sle64((int64_t) 0, index_primexp_29753);
            bool y_29756 = slt64(index_primexp_29753, (int64_t) 1024);
            bool bounds_check_29757 = x_29755 && y_29756;
            int64_t binop_x_29758 = (int64_t) 16 * index_primexp_29753;
            
            for (int64_t i_29945 = 0; i_29945 < (int64_t) 64; i_29945++) {
                int64_t index_primexp_29948 = add64(arg_20169, i_29945);
                int16_t i64_res_29949 = sext_i64_i16(index_primexp_29948);
                bool x_29950 = sle64((int64_t) 0, index_primexp_29948);
                bool y_29951 = slt64(index_primexp_29948, (int64_t) 1024);
                bool bounds_check_29952 = x_29950 && y_29951;
                int64_t binop_x_29953 = (int64_t) 16 * index_primexp_29948;
                
                for (int64_t i_29956 = 0; i_29956 < (int64_t) 64; i_29956++) {
                    int64_t index_primexp_29959 = add64(arg_20173, i_29956);
                    int16_t i64_res_29960 = sext_i64_i16(index_primexp_29959);
                    bool x_29961 = sle64((int64_t) 0, index_primexp_29959);
                    bool y_29962 = slt64(index_primexp_29959, (int64_t) 1024);
                    bool bounds_check_29963 = x_29961 && y_29962;
                    int64_t binop_x_29964 = (int64_t) 16 * index_primexp_29959;
                    
                    for (int64_t i_29967 = 0; i_29967 < (int64_t) 64; i_29967++) {
                        int64_t index_primexp_29970 = add64(arg_20177, i_29967);
                        int16_t i64_res_29971 = sext_i64_i16(index_primexp_29970);
                        bool x_29972 = sle64((int64_t) 0, index_primexp_29970);
                        bool y_29973 = slt64(index_primexp_29970, (int64_t) 1024);
                        bool bounds_check_29974 = x_29972 && y_29973;
                        int64_t binop_x_29975 = (int64_t) 16 * index_primexp_29970;
                        
                        for (int64_t i_29978 = 0; i_29978 < (int64_t) 64; i_29978++) {
                            int64_t index_primexp_29981 = add64(arg_20181, i_29978);
                            bool x_29982 = sle64((int64_t) 0, index_primexp_29981);
                            bool y_29983 = slt64(index_primexp_29981, (int64_t) 1024);
                            bool bounds_check_29984 = x_29982 && y_29983;
                            int64_t binop_x_29985 = (int64_t) 16 * index_primexp_29981;
                            bool all_equal_29986;
                            bool redout_29988 = 1;
                            
                            for (int64_t i_29987 = 0; i_29987 < (int64_t) 16; i_29987++) {
                                int8_t x_29989 = ((int8_t *) mem_26375.mem)[i_29987];
                                int8_t y_29990 = ((int8_t *) mem_26377.mem)[i_29987];
                                int64_t u8_res_29991 = zext_i8_i64(x_29989);
                                bool x_29992 = sle64((int64_t) 0, u8_res_29991);
                                bool y_29993 = slt64(u8_res_29991, (int64_t) 16);
                                bool bounds_check_29994 = x_29992 && y_29993;
                                bool index_ok_29995 = bounds_check_29984 && bounds_check_29994;
                                bool index_certs_29996;
                                
                                if (!index_ok_29995) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_29981, ", ", (long long) u8_res_29991, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t binop_x_29997 = binop_x_29985 + u8_res_29991;
                                int64_t new_index_29998 = squot64(binop_x_29997, (int64_t) 1024);
                                int64_t binop_y_29999 = (int64_t) 1024 * new_index_29998;
                                int64_t binop_x_30000 = binop_x_29997 - binop_y_29999;
                                int64_t new_index_30001 = squot64(binop_x_30000, (int64_t) 64);
                                int64_t binop_y_30002 = (int64_t) 64 * new_index_30001;
                                int64_t binop_x_30003 = binop_x_30000 - binop_y_30002;
                                int64_t new_index_30004 = squot64(binop_x_30003, (int64_t) 32);
                                int64_t binop_y_30005 = (int64_t) 32 * new_index_30004;
                                int64_t binop_x_30006 = binop_x_30003 - binop_y_30005;
                                int64_t new_index_30007 = squot64(binop_x_30006, (int64_t) 16);
                                int64_t binop_y_30008 = (int64_t) 16 * new_index_30007;
                                int64_t new_index_30009 = binop_x_30006 - binop_y_30008;
                                int8_t defunc_0_f_res_30010 = ((int8_t *) mem_26855.mem)[new_index_29998 * (int64_t) 1024 + new_index_30001 * (int64_t) 64 + new_index_30004 * (int64_t) 32 + new_index_30007 * (int64_t) 16 + new_index_30009];
                                int64_t u8_res_30011 = zext_i8_i64(defunc_0_f_res_30010);
                                bool x_30012 = sle64((int64_t) 0, u8_res_30011);
                                bool y_30013 = slt64(u8_res_30011, (int64_t) 16);
                                bool bounds_check_30014 = x_30012 && y_30013;
                                bool index_ok_30015 = bounds_check_29974 && bounds_check_30014;
                                bool index_certs_30016;
                                
                                if (!index_ok_30015) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_29970, ", ", (long long) u8_res_30011, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t binop_x_30017 = binop_x_29975 + u8_res_30011;
                                int64_t new_index_30018 = squot64(binop_x_30017, (int64_t) 1024);
                                int64_t binop_y_30019 = (int64_t) 1024 * new_index_30018;
                                int64_t binop_x_30020 = binop_x_30017 - binop_y_30019;
                                int64_t new_index_30021 = squot64(binop_x_30020, (int64_t) 64);
                                int64_t binop_y_30022 = (int64_t) 64 * new_index_30021;
                                int64_t binop_x_30023 = binop_x_30020 - binop_y_30022;
                                int64_t new_index_30024 = squot64(binop_x_30023, (int64_t) 32);
                                int64_t binop_y_30025 = (int64_t) 32 * new_index_30024;
                                int64_t binop_x_30026 = binop_x_30023 - binop_y_30025;
                                int64_t new_index_30027 = squot64(binop_x_30026, (int64_t) 16);
                                int64_t binop_y_30028 = (int64_t) 16 * new_index_30027;
                                int64_t new_index_30029 = binop_x_30026 - binop_y_30028;
                                int8_t defunc_0_f_res_30030 = ((int8_t *) mem_26855.mem)[new_index_30018 * (int64_t) 1024 + new_index_30021 * (int64_t) 64 + new_index_30024 * (int64_t) 32 + new_index_30027 * (int64_t) 16 + new_index_30029];
                                int64_t u8_res_30031 = zext_i8_i64(defunc_0_f_res_30030);
                                bool x_30032 = sle64((int64_t) 0, u8_res_30031);
                                bool y_30033 = slt64(u8_res_30031, (int64_t) 16);
                                bool bounds_check_30034 = x_30032 && y_30033;
                                bool index_ok_30035 = bounds_check_29963 && bounds_check_30034;
                                bool index_certs_30036;
                                
                                if (!index_ok_30035) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_29959, ", ", (long long) u8_res_30031, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t binop_x_30037 = binop_x_29964 + u8_res_30031;
                                int64_t new_index_30038 = squot64(binop_x_30037, (int64_t) 1024);
                                int64_t binop_y_30039 = (int64_t) 1024 * new_index_30038;
                                int64_t binop_x_30040 = binop_x_30037 - binop_y_30039;
                                int64_t new_index_30041 = squot64(binop_x_30040, (int64_t) 64);
                                int64_t binop_y_30042 = (int64_t) 64 * new_index_30041;
                                int64_t binop_x_30043 = binop_x_30040 - binop_y_30042;
                                int64_t new_index_30044 = squot64(binop_x_30043, (int64_t) 32);
                                int64_t binop_y_30045 = (int64_t) 32 * new_index_30044;
                                int64_t binop_x_30046 = binop_x_30043 - binop_y_30045;
                                int64_t new_index_30047 = squot64(binop_x_30046, (int64_t) 16);
                                int64_t binop_y_30048 = (int64_t) 16 * new_index_30047;
                                int64_t new_index_30049 = binop_x_30046 - binop_y_30048;
                                int8_t defunc_0_f_res_30050 = ((int8_t *) mem_26855.mem)[new_index_30038 * (int64_t) 1024 + new_index_30041 * (int64_t) 64 + new_index_30044 * (int64_t) 32 + new_index_30047 * (int64_t) 16 + new_index_30049];
                                int64_t u8_res_30051 = zext_i8_i64(defunc_0_f_res_30050);
                                bool x_30052 = sle64((int64_t) 0, u8_res_30051);
                                bool y_30053 = slt64(u8_res_30051, (int64_t) 16);
                                bool bounds_check_30054 = x_30052 && y_30053;
                                bool index_ok_30055 = bounds_check_29952 && bounds_check_30054;
                                bool index_certs_30056;
                                
                                if (!index_ok_30055) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_29948, ", ", (long long) u8_res_30051, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t binop_x_30057 = binop_x_29953 + u8_res_30051;
                                int64_t new_index_30058 = squot64(binop_x_30057, (int64_t) 1024);
                                int64_t binop_y_30059 = (int64_t) 1024 * new_index_30058;
                                int64_t binop_x_30060 = binop_x_30057 - binop_y_30059;
                                int64_t new_index_30061 = squot64(binop_x_30060, (int64_t) 64);
                                int64_t binop_y_30062 = (int64_t) 64 * new_index_30061;
                                int64_t binop_x_30063 = binop_x_30060 - binop_y_30062;
                                int64_t new_index_30064 = squot64(binop_x_30063, (int64_t) 32);
                                int64_t binop_y_30065 = (int64_t) 32 * new_index_30064;
                                int64_t binop_x_30066 = binop_x_30063 - binop_y_30065;
                                int64_t new_index_30067 = squot64(binop_x_30066, (int64_t) 16);
                                int64_t binop_y_30068 = (int64_t) 16 * new_index_30067;
                                int64_t new_index_30069 = binop_x_30066 - binop_y_30068;
                                int8_t defunc_0_f_res_30070 = ((int8_t *) mem_26855.mem)[new_index_30058 * (int64_t) 1024 + new_index_30061 * (int64_t) 64 + new_index_30064 * (int64_t) 32 + new_index_30067 * (int64_t) 16 + new_index_30069];
                                int64_t u8_res_30071 = zext_i8_i64(defunc_0_f_res_30070);
                                bool x_30072 = sle64((int64_t) 0, u8_res_30071);
                                bool y_30073 = slt64(u8_res_30071, (int64_t) 16);
                                bool bounds_check_30074 = x_30072 && y_30073;
                                bool index_ok_30075 = bounds_check_29757 && bounds_check_30074;
                                bool index_certs_30076;
                                
                                if (!index_ok_30075) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_29753, ", ", (long long) u8_res_30071, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t binop_x_30077 = binop_x_29758 + u8_res_30071;
                                int64_t new_index_30078 = squot64(binop_x_30077, (int64_t) 1024);
                                int64_t binop_y_30079 = (int64_t) 1024 * new_index_30078;
                                int64_t binop_x_30080 = binop_x_30077 - binop_y_30079;
                                int64_t new_index_30081 = squot64(binop_x_30080, (int64_t) 64);
                                int64_t binop_y_30082 = (int64_t) 64 * new_index_30081;
                                int64_t binop_x_30083 = binop_x_30080 - binop_y_30082;
                                int64_t new_index_30084 = squot64(binop_x_30083, (int64_t) 32);
                                int64_t binop_y_30085 = (int64_t) 32 * new_index_30084;
                                int64_t binop_x_30086 = binop_x_30083 - binop_y_30085;
                                int64_t new_index_30087 = squot64(binop_x_30086, (int64_t) 16);
                                int64_t binop_y_30088 = (int64_t) 16 * new_index_30087;
                                int64_t new_index_30089 = binop_x_30086 - binop_y_30088;
                                int8_t defunc_0_f_res_30090 = ((int8_t *) mem_26855.mem)[new_index_30078 * (int64_t) 1024 + new_index_30081 * (int64_t) 64 + new_index_30084 * (int64_t) 32 + new_index_30087 * (int64_t) 16 + new_index_30089];
                                int64_t u8_res_30091 = zext_i8_i64(defunc_0_f_res_30090);
                                bool x_30092 = sle64((int64_t) 0, u8_res_30091);
                                bool y_30093 = slt64(u8_res_30091, (int64_t) 16);
                                bool bounds_check_30094 = x_30092 && y_30093;
                                bool index_ok_30095 = bounds_check_24664 && bounds_check_30094;
                                bool index_certs_30096;
                                
                                if (!index_ok_30095) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_24660, ", ", (long long) u8_res_30091, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t binop_x_30097 = binop_x_24665 + u8_res_30091;
                                int64_t new_index_30098 = squot64(binop_x_30097, (int64_t) 1024);
                                int64_t binop_y_30099 = (int64_t) 1024 * new_index_30098;
                                int64_t binop_x_30100 = binop_x_30097 - binop_y_30099;
                                int64_t new_index_30101 = squot64(binop_x_30100, (int64_t) 64);
                                int64_t binop_y_30102 = (int64_t) 64 * new_index_30101;
                                int64_t binop_x_30103 = binop_x_30100 - binop_y_30102;
                                int64_t new_index_30104 = squot64(binop_x_30103, (int64_t) 32);
                                int64_t binop_y_30105 = (int64_t) 32 * new_index_30104;
                                int64_t binop_x_30106 = binop_x_30103 - binop_y_30105;
                                int64_t new_index_30107 = squot64(binop_x_30106, (int64_t) 16);
                                int64_t binop_y_30108 = (int64_t) 16 * new_index_30107;
                                int64_t new_index_30109 = binop_x_30106 - binop_y_30108;
                                int8_t defunc_0_f_res_30110 = ((int8_t *) mem_26855.mem)[new_index_30098 * (int64_t) 1024 + new_index_30101 * (int64_t) 64 + new_index_30104 * (int64_t) 32 + new_index_30107 * (int64_t) 16 + new_index_30109];
                                bool binlam_res_30111 = defunc_0_f_res_30110 == y_29990;
                                bool binlam_res_30112 = binlam_res_30111 && redout_29988;
                                bool redout_tmp_30131 = binlam_res_30112;
                                
                                redout_29988 = redout_tmp_30131;
                            }
                            all_equal_29986 = redout_29988;
                            
                            int16_t i64_res_30113 = sext_i64_i16(index_primexp_29981);
                            
                            ((int16_t *) mem_29763)[(int64_t) 0] = i64_res_24661;
                            ((int16_t *) mem_29763)[(int64_t) 1] = i64_res_29754;
                            ((int16_t *) mem_29763)[(int64_t) 2] = i64_res_29949;
                            ((int16_t *) mem_29763)[(int64_t) 3] = i64_res_29960;
                            ((int16_t *) mem_29763)[(int64_t) 4] = i64_res_29971;
                            ((int16_t *) mem_29763)[(int64_t) 5] = i64_res_30113;
                            ((bool *) mem_29759)[i_29945 * (int64_t) 262144 + i_29956 * (int64_t) 4096 + i_29967 * (int64_t) 64 + i_29978] = all_equal_29986;
                            if ((int64_t) 12 > 0)
                                memmove(mem_29761 + (i_29945 * (int64_t) 1572864 + i_29956 * (int64_t) 24576 + i_29967 * (int64_t) 384 + i_29978 * (int64_t) 6) * (int64_t) 2, mem_29763 + (int64_t) 0, (int64_t) 12);
                        }
                    }
                }
            }
            if ((int64_t) 16777216 > 0)
                memmove(mem_27507.mem + gtid_29752 * (int64_t) 16777216, mem_29759 + (int64_t) 0, (int64_t) 16777216);
            if ((int64_t) 201326592 > 0)
                memmove(mem_27509.mem + gtid_29752 * (int64_t) 100663296 * (int64_t) 2, mem_29761 + (int64_t) 0, (int64_t) 201326592);
        }
    }
    
  cleanup:
    {
        free(mem_29759);
        free(mem_29761);
        free(mem_29763);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33391_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33391_end - futhark_mc_segmap_parloop_33391_start;
        
        ctx->program->futhark_mc_segmap_parloop_33391_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33391_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33391_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33389(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33388 *futhark_mc_task_33388 = (struct futhark_mc_task_33388 *) args;
    struct futhark_context *ctx = futhark_mc_task_33388->ctx;
    uint64_t futhark_mc_segmap_task_33389_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33389_start = get_wall_time();
    
    int64_t arg_20165 = futhark_mc_task_33388->free_arg_20165;
    int64_t arg_20169 = futhark_mc_task_33388->free_arg_20169;
    int64_t arg_20173 = futhark_mc_task_33388->free_arg_20173;
    int64_t arg_20177 = futhark_mc_task_33388->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33388->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33388->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33388->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33388->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33388->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33388->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33388->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33388->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_27507 = {.desc ="mem_27507", .mem =futhark_mc_task_33388->free_mem_27507, .size =0, .references =NULL};
    struct memblock mem_27509 = {.desc ="mem_27509", .mem =futhark_mc_task_33388->free_mem_27509, .size =0, .references =NULL};
    int32_t nsubtasks_29944;
    
    nsubtasks_29944 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33390 futhark_mc_segmap_parloop_struct_33390_;
    
    futhark_mc_segmap_parloop_struct_33390_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33390_.free_arg_20165 = arg_20165;
    futhark_mc_segmap_parloop_struct_33390_.free_arg_20169 = arg_20169;
    futhark_mc_segmap_parloop_struct_33390_.free_arg_20173 = arg_20173;
    futhark_mc_segmap_parloop_struct_33390_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33390_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33390_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33390_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33390_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33390_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33390_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33390_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33390_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33390_.free_mem_27507 = mem_27507.mem;
    futhark_mc_segmap_parloop_struct_33390_.free_mem_27509 = mem_27509.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33391_task;
    
    futhark_mc_segmap_parloop_33391_task.name = "futhark_mc_segmap_parloop_33391";
    futhark_mc_segmap_parloop_33391_task.fn = futhark_mc_segmap_parloop_33391;
    futhark_mc_segmap_parloop_33391_task.args = &futhark_mc_segmap_parloop_struct_33390_;
    futhark_mc_segmap_parloop_33391_task.iterations = iterations;
    futhark_mc_segmap_parloop_33391_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33391_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33391_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33391_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33391_task);
    
    if (futhark_mc_segmap_parloop_33391_err != 0) {
        err = futhark_mc_segmap_parloop_33391_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33391_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33391_total_end - futhark_mc_segmap_parloop_33391_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33391_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33391_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33391_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33389_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33389_end - futhark_mc_segmap_task_33389_start;
        
        ctx->program->futhark_mc_segmap_task_33389_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33389_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33389_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33396 {
    struct futhark_context *ctx;
    int64_t free_arg_20165;
    int64_t free_arg_20169;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    unsigned char *free_mem_27507;
    unsigned char *free_mem_27509;
};
struct futhark_mc_task_33400 {
    struct futhark_context *ctx;
    int64_t free_arg_20169;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    unsigned char *free_mem_28940;
    unsigned char *free_mem_28941;
};
struct futhark_mc_segmap_parloop_struct_33402 {
    struct futhark_context *ctx;
    int64_t free_arg_20169;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    unsigned char *free_mem_28940;
    unsigned char *free_mem_28941;
};
static int futhark_mc_segmap_parloop_33403(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33402 *futhark_mc_segmap_parloop_struct_33402 = (struct futhark_mc_segmap_parloop_struct_33402 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33402->ctx;
    uint64_t futhark_mc_segmap_parloop_33403_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33403_start = get_wall_time();
    
    int64_t arg_20169 = futhark_mc_segmap_parloop_struct_33402->free_arg_20169;
    int64_t arg_20173 = futhark_mc_segmap_parloop_struct_33402->free_arg_20173;
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33402->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33402->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33402->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33402->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33402->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33402->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33402->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33402->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33402->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_segmap_parloop_struct_33402->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_segmap_parloop_struct_33402->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_segmap_parloop_struct_33402->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_segmap_parloop_struct_33402->free_binop_x_28939;
    struct memblock mem_28940 = {.desc ="mem_28940", .mem =futhark_mc_segmap_parloop_struct_33402->free_mem_28940, .size =0, .references =NULL};
    struct memblock mem_28941 = {.desc ="mem_28941", .mem =futhark_mc_segmap_parloop_struct_33402->free_mem_28941, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_30772_cached_sizze_33404 = 0;
    unsigned char *mem_30772 = NULL;
    int64_t mem_30774_cached_sizze_33405 = 0;
    unsigned char *mem_30774 = NULL;
    int64_t mem_30776_cached_sizze_33406 = 0;
    unsigned char *mem_30776 = NULL;
    int64_t flat_tid_30764;
    
    flat_tid_30764 = subtask_id;
    {
        int64_t start_31108;
        int64_t end_31109;
        
        start_31108 = start;
        end_31109 = end;
        
        int64_t n_31110 = end_31109 - start_31108;
        
        if (mem_30772_cached_sizze_33404 < (int64_t) 262144) {
            err = lexical_realloc(ctx, &mem_30772, &mem_30772_cached_sizze_33404, (int64_t) 262144);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_30774_cached_sizze_33405 < (int64_t) 3145728) {
            err = lexical_realloc(ctx, &mem_30774, &mem_30774_cached_sizze_33405, (int64_t) 3145728);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_30776_cached_sizze_33406 < (int64_t) 12) {
            err = lexical_realloc(ctx, &mem_30776, &mem_30776_cached_sizze_33406, (int64_t) 12);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_31111 = start_31108; SegMap_i_31111 < start_31108 + n_31110; SegMap_i_31111++) {
            int64_t slice_31112 = (int64_t) 64;
            int64_t gtid_30765 = SegMap_i_31111;
            int64_t remnant_31113 = SegMap_i_31111 - gtid_30765;
            int64_t index_primexp_30766 = add64(arg_20169, gtid_30765);
            int16_t i64_res_30767 = sext_i64_i16(index_primexp_30766);
            bool x_30768 = sle64((int64_t) 0, index_primexp_30766);
            bool y_30769 = slt64(index_primexp_30766, (int64_t) 1024);
            bool bounds_check_30770 = x_30768 && y_30769;
            int64_t binop_x_30771 = (int64_t) 16 * index_primexp_30766;
            
            for (int64_t i_30947 = 0; i_30947 < (int64_t) 64; i_30947++) {
                int64_t index_primexp_30950 = add64(arg_20173, i_30947);
                int16_t i64_res_30951 = sext_i64_i16(index_primexp_30950);
                bool x_30952 = sle64((int64_t) 0, index_primexp_30950);
                bool y_30953 = slt64(index_primexp_30950, (int64_t) 1024);
                bool bounds_check_30954 = x_30952 && y_30953;
                int64_t binop_x_30955 = (int64_t) 16 * index_primexp_30950;
                
                for (int64_t i_30958 = 0; i_30958 < (int64_t) 64; i_30958++) {
                    int64_t index_primexp_30961 = add64(arg_20177, i_30958);
                    int16_t i64_res_30962 = sext_i64_i16(index_primexp_30961);
                    bool x_30963 = sle64((int64_t) 0, index_primexp_30961);
                    bool y_30964 = slt64(index_primexp_30961, (int64_t) 1024);
                    bool bounds_check_30965 = x_30963 && y_30964;
                    int64_t binop_x_30966 = (int64_t) 16 * index_primexp_30961;
                    
                    for (int64_t i_30969 = 0; i_30969 < (int64_t) 64; i_30969++) {
                        int64_t index_primexp_30972 = add64(arg_20181, i_30969);
                        bool x_30973 = sle64((int64_t) 0, index_primexp_30972);
                        bool y_30974 = slt64(index_primexp_30972, (int64_t) 1024);
                        bool bounds_check_30975 = x_30973 && y_30974;
                        int64_t binop_x_30976 = (int64_t) 16 * index_primexp_30972;
                        bool all_equal_30977;
                        bool redout_30979 = 1;
                        
                        for (int64_t i_30978 = 0; i_30978 < (int64_t) 16; i_30978++) {
                            int8_t x_30980 = ((int8_t *) mem_26375.mem)[i_30978];
                            int8_t y_30981 = ((int8_t *) mem_26377.mem)[i_30978];
                            int64_t u8_res_30982 = zext_i8_i64(x_30980);
                            bool x_30983 = sle64((int64_t) 0, u8_res_30982);
                            bool y_30984 = slt64(u8_res_30982, (int64_t) 16);
                            bool bounds_check_30985 = x_30983 && y_30984;
                            bool index_ok_30986 = bounds_check_30975 && bounds_check_30985;
                            bool index_certs_30987;
                            
                            if (!index_ok_30986) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_30972, ", ", (long long) u8_res_30982, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_30988 = binop_x_30976 + u8_res_30982;
                            int64_t new_index_30989 = squot64(binop_x_30988, (int64_t) 1024);
                            int64_t binop_y_30990 = (int64_t) 1024 * new_index_30989;
                            int64_t binop_x_30991 = binop_x_30988 - binop_y_30990;
                            int64_t new_index_30992 = squot64(binop_x_30991, (int64_t) 64);
                            int64_t binop_y_30993 = (int64_t) 64 * new_index_30992;
                            int64_t binop_x_30994 = binop_x_30991 - binop_y_30993;
                            int64_t new_index_30995 = squot64(binop_x_30994, (int64_t) 32);
                            int64_t binop_y_30996 = (int64_t) 32 * new_index_30995;
                            int64_t binop_x_30997 = binop_x_30994 - binop_y_30996;
                            int64_t new_index_30998 = squot64(binop_x_30997, (int64_t) 16);
                            int64_t binop_y_30999 = (int64_t) 16 * new_index_30998;
                            int64_t new_index_31000 = binop_x_30997 - binop_y_30999;
                            int8_t defunc_0_f_res_31001 = ((int8_t *) mem_26855.mem)[new_index_30989 * (int64_t) 1024 + new_index_30992 * (int64_t) 64 + new_index_30995 * (int64_t) 32 + new_index_30998 * (int64_t) 16 + new_index_31000];
                            int64_t u8_res_31002 = zext_i8_i64(defunc_0_f_res_31001);
                            bool x_31003 = sle64((int64_t) 0, u8_res_31002);
                            bool y_31004 = slt64(u8_res_31002, (int64_t) 16);
                            bool bounds_check_31005 = x_31003 && y_31004;
                            bool index_ok_31006 = bounds_check_30965 && bounds_check_31005;
                            bool index_certs_31007;
                            
                            if (!index_ok_31006) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_30961, ", ", (long long) u8_res_31002, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_31008 = binop_x_30966 + u8_res_31002;
                            int64_t new_index_31009 = squot64(binop_x_31008, (int64_t) 1024);
                            int64_t binop_y_31010 = (int64_t) 1024 * new_index_31009;
                            int64_t binop_x_31011 = binop_x_31008 - binop_y_31010;
                            int64_t new_index_31012 = squot64(binop_x_31011, (int64_t) 64);
                            int64_t binop_y_31013 = (int64_t) 64 * new_index_31012;
                            int64_t binop_x_31014 = binop_x_31011 - binop_y_31013;
                            int64_t new_index_31015 = squot64(binop_x_31014, (int64_t) 32);
                            int64_t binop_y_31016 = (int64_t) 32 * new_index_31015;
                            int64_t binop_x_31017 = binop_x_31014 - binop_y_31016;
                            int64_t new_index_31018 = squot64(binop_x_31017, (int64_t) 16);
                            int64_t binop_y_31019 = (int64_t) 16 * new_index_31018;
                            int64_t new_index_31020 = binop_x_31017 - binop_y_31019;
                            int8_t defunc_0_f_res_31021 = ((int8_t *) mem_26855.mem)[new_index_31009 * (int64_t) 1024 + new_index_31012 * (int64_t) 64 + new_index_31015 * (int64_t) 32 + new_index_31018 * (int64_t) 16 + new_index_31020];
                            int64_t u8_res_31022 = zext_i8_i64(defunc_0_f_res_31021);
                            bool x_31023 = sle64((int64_t) 0, u8_res_31022);
                            bool y_31024 = slt64(u8_res_31022, (int64_t) 16);
                            bool bounds_check_31025 = x_31023 && y_31024;
                            bool index_ok_31026 = bounds_check_30954 && bounds_check_31025;
                            bool index_certs_31027;
                            
                            if (!index_ok_31026) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_30950, ", ", (long long) u8_res_31022, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_31028 = binop_x_30955 + u8_res_31022;
                            int64_t new_index_31029 = squot64(binop_x_31028, (int64_t) 1024);
                            int64_t binop_y_31030 = (int64_t) 1024 * new_index_31029;
                            int64_t binop_x_31031 = binop_x_31028 - binop_y_31030;
                            int64_t new_index_31032 = squot64(binop_x_31031, (int64_t) 64);
                            int64_t binop_y_31033 = (int64_t) 64 * new_index_31032;
                            int64_t binop_x_31034 = binop_x_31031 - binop_y_31033;
                            int64_t new_index_31035 = squot64(binop_x_31034, (int64_t) 32);
                            int64_t binop_y_31036 = (int64_t) 32 * new_index_31035;
                            int64_t binop_x_31037 = binop_x_31034 - binop_y_31036;
                            int64_t new_index_31038 = squot64(binop_x_31037, (int64_t) 16);
                            int64_t binop_y_31039 = (int64_t) 16 * new_index_31038;
                            int64_t new_index_31040 = binop_x_31037 - binop_y_31039;
                            int8_t defunc_0_f_res_31041 = ((int8_t *) mem_26855.mem)[new_index_31029 * (int64_t) 1024 + new_index_31032 * (int64_t) 64 + new_index_31035 * (int64_t) 32 + new_index_31038 * (int64_t) 16 + new_index_31040];
                            int64_t u8_res_31042 = zext_i8_i64(defunc_0_f_res_31041);
                            bool x_31043 = sle64((int64_t) 0, u8_res_31042);
                            bool y_31044 = slt64(u8_res_31042, (int64_t) 16);
                            bool bounds_check_31045 = x_31043 && y_31044;
                            bool index_ok_31046 = bounds_check_30770 && bounds_check_31045;
                            bool index_certs_31047;
                            
                            if (!index_ok_31046) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_30766, ", ", (long long) u8_res_31042, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_31048 = binop_x_30771 + u8_res_31042;
                            int64_t new_index_31049 = squot64(binop_x_31048, (int64_t) 1024);
                            int64_t binop_y_31050 = (int64_t) 1024 * new_index_31049;
                            int64_t binop_x_31051 = binop_x_31048 - binop_y_31050;
                            int64_t new_index_31052 = squot64(binop_x_31051, (int64_t) 64);
                            int64_t binop_y_31053 = (int64_t) 64 * new_index_31052;
                            int64_t binop_x_31054 = binop_x_31051 - binop_y_31053;
                            int64_t new_index_31055 = squot64(binop_x_31054, (int64_t) 32);
                            int64_t binop_y_31056 = (int64_t) 32 * new_index_31055;
                            int64_t binop_x_31057 = binop_x_31054 - binop_y_31056;
                            int64_t new_index_31058 = squot64(binop_x_31057, (int64_t) 16);
                            int64_t binop_y_31059 = (int64_t) 16 * new_index_31058;
                            int64_t new_index_31060 = binop_x_31057 - binop_y_31059;
                            int8_t defunc_0_f_res_31061 = ((int8_t *) mem_26855.mem)[new_index_31049 * (int64_t) 1024 + new_index_31052 * (int64_t) 64 + new_index_31055 * (int64_t) 32 + new_index_31058 * (int64_t) 16 + new_index_31060];
                            int64_t u8_res_31062 = zext_i8_i64(defunc_0_f_res_31061);
                            bool x_31063 = sle64((int64_t) 0, u8_res_31062);
                            bool y_31064 = slt64(u8_res_31062, (int64_t) 16);
                            bool bounds_check_31065 = x_31063 && y_31064;
                            bool index_ok_31066 = bounds_check_28938 && bounds_check_31065;
                            bool index_certs_31067;
                            
                            if (!index_ok_31066) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28934, ", ", (long long) u8_res_31062, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_31068 = binop_x_28939 + u8_res_31062;
                            int64_t new_index_31069 = squot64(binop_x_31068, (int64_t) 1024);
                            int64_t binop_y_31070 = (int64_t) 1024 * new_index_31069;
                            int64_t binop_x_31071 = binop_x_31068 - binop_y_31070;
                            int64_t new_index_31072 = squot64(binop_x_31071, (int64_t) 64);
                            int64_t binop_y_31073 = (int64_t) 64 * new_index_31072;
                            int64_t binop_x_31074 = binop_x_31071 - binop_y_31073;
                            int64_t new_index_31075 = squot64(binop_x_31074, (int64_t) 32);
                            int64_t binop_y_31076 = (int64_t) 32 * new_index_31075;
                            int64_t binop_x_31077 = binop_x_31074 - binop_y_31076;
                            int64_t new_index_31078 = squot64(binop_x_31077, (int64_t) 16);
                            int64_t binop_y_31079 = (int64_t) 16 * new_index_31078;
                            int64_t new_index_31080 = binop_x_31077 - binop_y_31079;
                            int8_t defunc_0_f_res_31081 = ((int8_t *) mem_26855.mem)[new_index_31069 * (int64_t) 1024 + new_index_31072 * (int64_t) 64 + new_index_31075 * (int64_t) 32 + new_index_31078 * (int64_t) 16 + new_index_31080];
                            int64_t u8_res_31082 = zext_i8_i64(defunc_0_f_res_31081);
                            bool x_31083 = sle64((int64_t) 0, u8_res_31082);
                            bool y_31084 = slt64(u8_res_31082, (int64_t) 16);
                            bool bounds_check_31085 = x_31083 && y_31084;
                            bool index_ok_31086 = bounds_check_24664 && bounds_check_31085;
                            bool index_certs_31087;
                            
                            if (!index_ok_31086) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_24660, ", ", (long long) u8_res_31082, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_31088 = binop_x_24665 + u8_res_31082;
                            int64_t new_index_31089 = squot64(binop_x_31088, (int64_t) 1024);
                            int64_t binop_y_31090 = (int64_t) 1024 * new_index_31089;
                            int64_t binop_x_31091 = binop_x_31088 - binop_y_31090;
                            int64_t new_index_31092 = squot64(binop_x_31091, (int64_t) 64);
                            int64_t binop_y_31093 = (int64_t) 64 * new_index_31092;
                            int64_t binop_x_31094 = binop_x_31091 - binop_y_31093;
                            int64_t new_index_31095 = squot64(binop_x_31094, (int64_t) 32);
                            int64_t binop_y_31096 = (int64_t) 32 * new_index_31095;
                            int64_t binop_x_31097 = binop_x_31094 - binop_y_31096;
                            int64_t new_index_31098 = squot64(binop_x_31097, (int64_t) 16);
                            int64_t binop_y_31099 = (int64_t) 16 * new_index_31098;
                            int64_t new_index_31100 = binop_x_31097 - binop_y_31099;
                            int8_t defunc_0_f_res_31101 = ((int8_t *) mem_26855.mem)[new_index_31089 * (int64_t) 1024 + new_index_31092 * (int64_t) 64 + new_index_31095 * (int64_t) 32 + new_index_31098 * (int64_t) 16 + new_index_31100];
                            bool binlam_res_31102 = defunc_0_f_res_31101 == y_30981;
                            bool binlam_res_31103 = binlam_res_31102 && redout_30979;
                            bool redout_tmp_31120 = binlam_res_31103;
                            
                            redout_30979 = redout_tmp_31120;
                        }
                        all_equal_30977 = redout_30979;
                        
                        int16_t i64_res_31104 = sext_i64_i16(index_primexp_30972);
                        
                        ((int16_t *) mem_30776)[(int64_t) 0] = i64_res_24661;
                        ((int16_t *) mem_30776)[(int64_t) 1] = i64_res_28935;
                        ((int16_t *) mem_30776)[(int64_t) 2] = i64_res_30767;
                        ((int16_t *) mem_30776)[(int64_t) 3] = i64_res_30951;
                        ((int16_t *) mem_30776)[(int64_t) 4] = i64_res_30962;
                        ((int16_t *) mem_30776)[(int64_t) 5] = i64_res_31104;
                        ((bool *) mem_30772)[i_30947 * (int64_t) 4096 + i_30958 * (int64_t) 64 + i_30969] = all_equal_30977;
                        if ((int64_t) 12 > 0)
                            memmove(mem_30774 + (i_30947 * (int64_t) 24576 + i_30958 * (int64_t) 384 + i_30969 * (int64_t) 6) * (int64_t) 2, mem_30776 + (int64_t) 0, (int64_t) 12);
                    }
                }
            }
            if ((int64_t) 262144 > 0)
                memmove(mem_28940.mem + gtid_30765 * (int64_t) 262144, mem_30772 + (int64_t) 0, (int64_t) 262144);
            if ((int64_t) 3145728 > 0)
                memmove(mem_28941.mem + gtid_30765 * (int64_t) 1572864 * (int64_t) 2, mem_30774 + (int64_t) 0, (int64_t) 3145728);
        }
    }
    
  cleanup:
    {
        free(mem_30772);
        free(mem_30774);
        free(mem_30776);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33403_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33403_end - futhark_mc_segmap_parloop_33403_start;
        
        ctx->program->futhark_mc_segmap_parloop_33403_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33403_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33403_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33401(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33400 *futhark_mc_task_33400 = (struct futhark_mc_task_33400 *) args;
    struct futhark_context *ctx = futhark_mc_task_33400->ctx;
    uint64_t futhark_mc_segmap_task_33401_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33401_start = get_wall_time();
    
    int64_t arg_20169 = futhark_mc_task_33400->free_arg_20169;
    int64_t arg_20173 = futhark_mc_task_33400->free_arg_20173;
    int64_t arg_20177 = futhark_mc_task_33400->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33400->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33400->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33400->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33400->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33400->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33400->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33400->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33400->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_task_33400->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_task_33400->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_task_33400->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_task_33400->free_binop_x_28939;
    struct memblock mem_28940 = {.desc ="mem_28940", .mem =futhark_mc_task_33400->free_mem_28940, .size =0, .references =NULL};
    struct memblock mem_28941 = {.desc ="mem_28941", .mem =futhark_mc_task_33400->free_mem_28941, .size =0, .references =NULL};
    int32_t nsubtasks_30946;
    
    nsubtasks_30946 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33402 futhark_mc_segmap_parloop_struct_33402_;
    
    futhark_mc_segmap_parloop_struct_33402_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33402_.free_arg_20169 = arg_20169;
    futhark_mc_segmap_parloop_struct_33402_.free_arg_20173 = arg_20173;
    futhark_mc_segmap_parloop_struct_33402_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33402_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33402_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33402_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33402_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33402_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33402_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33402_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33402_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33402_.free_index_primexp_28934 = index_primexp_28934;
    futhark_mc_segmap_parloop_struct_33402_.free_i64_res_28935 = i64_res_28935;
    futhark_mc_segmap_parloop_struct_33402_.free_bounds_check_28938 = bounds_check_28938;
    futhark_mc_segmap_parloop_struct_33402_.free_binop_x_28939 = binop_x_28939;
    futhark_mc_segmap_parloop_struct_33402_.free_mem_28940 = mem_28940.mem;
    futhark_mc_segmap_parloop_struct_33402_.free_mem_28941 = mem_28941.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33403_task;
    
    futhark_mc_segmap_parloop_33403_task.name = "futhark_mc_segmap_parloop_33403";
    futhark_mc_segmap_parloop_33403_task.fn = futhark_mc_segmap_parloop_33403;
    futhark_mc_segmap_parloop_33403_task.args = &futhark_mc_segmap_parloop_struct_33402_;
    futhark_mc_segmap_parloop_33403_task.iterations = iterations;
    futhark_mc_segmap_parloop_33403_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33403_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33403_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33403_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33403_task);
    
    if (futhark_mc_segmap_parloop_33403_err != 0) {
        err = futhark_mc_segmap_parloop_33403_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33403_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33403_total_end - futhark_mc_segmap_parloop_33403_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33403_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33403_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33403_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33401_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33401_end - futhark_mc_segmap_task_33401_start;
        
        ctx->program->futhark_mc_segmap_task_33401_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33401_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33401_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33408 {
    struct futhark_context *ctx;
    int64_t free_arg_20169;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    unsigned char *free_mem_28940;
    unsigned char *free_mem_28941;
};
struct futhark_mc_task_33412 {
    struct futhark_context *ctx;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    int16_t free_i64_res_30136;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    unsigned char *free_mem_30141;
    unsigned char *free_mem_30142;
};
struct futhark_mc_segmap_parloop_struct_33414 {
    struct futhark_context *ctx;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    int16_t free_i64_res_30136;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    unsigned char *free_mem_30141;
    unsigned char *free_mem_30142;
};
static int futhark_mc_segmap_parloop_33415(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33414 *futhark_mc_segmap_parloop_struct_33414 = (struct futhark_mc_segmap_parloop_struct_33414 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33414->ctx;
    uint64_t futhark_mc_segmap_parloop_33415_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33415_start = get_wall_time();
    
    int64_t arg_20173 = futhark_mc_segmap_parloop_struct_33414->free_arg_20173;
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33414->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33414->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33414->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33414->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33414->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33414->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33414->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33414->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33414->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_segmap_parloop_struct_33414->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_segmap_parloop_struct_33414->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_segmap_parloop_struct_33414->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_segmap_parloop_struct_33414->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_segmap_parloop_struct_33414->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_segmap_parloop_struct_33414->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_segmap_parloop_struct_33414->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_segmap_parloop_struct_33414->free_binop_x_30140;
    struct memblock mem_30141 = {.desc ="mem_30141", .mem =futhark_mc_segmap_parloop_struct_33414->free_mem_30141, .size =0, .references =NULL};
    struct memblock mem_30142 = {.desc ="mem_30142", .mem =futhark_mc_segmap_parloop_struct_33414->free_mem_30142, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_31584_cached_sizze_33416 = 0;
    unsigned char *mem_31584 = NULL;
    int64_t mem_31586_cached_sizze_33417 = 0;
    unsigned char *mem_31586 = NULL;
    int64_t mem_31588_cached_sizze_33418 = 0;
    unsigned char *mem_31588 = NULL;
    int64_t flat_tid_31576;
    
    flat_tid_31576 = subtask_id;
    {
        int64_t start_31898;
        int64_t end_31899;
        
        start_31898 = start;
        end_31899 = end;
        
        int64_t n_31900 = end_31899 - start_31898;
        
        if (mem_31584_cached_sizze_33416 < (int64_t) 4096) {
            err = lexical_realloc(ctx, &mem_31584, &mem_31584_cached_sizze_33416, (int64_t) 4096);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_31586_cached_sizze_33417 < (int64_t) 49152) {
            err = lexical_realloc(ctx, &mem_31586, &mem_31586_cached_sizze_33417, (int64_t) 49152);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_31588_cached_sizze_33418 < (int64_t) 12) {
            err = lexical_realloc(ctx, &mem_31588, &mem_31588_cached_sizze_33418, (int64_t) 12);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_31901 = start_31898; SegMap_i_31901 < start_31898 + n_31900; SegMap_i_31901++) {
            int64_t slice_31902 = (int64_t) 64;
            int64_t gtid_31577 = SegMap_i_31901;
            int64_t remnant_31903 = SegMap_i_31901 - gtid_31577;
            int64_t index_primexp_31578 = add64(arg_20173, gtid_31577);
            int16_t i64_res_31579 = sext_i64_i16(index_primexp_31578);
            bool x_31580 = sle64((int64_t) 0, index_primexp_31578);
            bool y_31581 = slt64(index_primexp_31578, (int64_t) 1024);
            bool bounds_check_31582 = x_31580 && y_31581;
            int64_t binop_x_31583 = (int64_t) 16 * index_primexp_31578;
            
            for (int64_t i_31748 = 0; i_31748 < (int64_t) 64; i_31748++) {
                int64_t index_primexp_31751 = add64(arg_20177, i_31748);
                int16_t i64_res_31752 = sext_i64_i16(index_primexp_31751);
                bool x_31753 = sle64((int64_t) 0, index_primexp_31751);
                bool y_31754 = slt64(index_primexp_31751, (int64_t) 1024);
                bool bounds_check_31755 = x_31753 && y_31754;
                int64_t binop_x_31756 = (int64_t) 16 * index_primexp_31751;
                
                for (int64_t i_31759 = 0; i_31759 < (int64_t) 64; i_31759++) {
                    int64_t index_primexp_31762 = add64(arg_20181, i_31759);
                    bool x_31763 = sle64((int64_t) 0, index_primexp_31762);
                    bool y_31764 = slt64(index_primexp_31762, (int64_t) 1024);
                    bool bounds_check_31765 = x_31763 && y_31764;
                    int64_t binop_x_31766 = (int64_t) 16 * index_primexp_31762;
                    bool all_equal_31767;
                    bool redout_31769 = 1;
                    
                    for (int64_t i_31768 = 0; i_31768 < (int64_t) 16; i_31768++) {
                        int8_t x_31770 = ((int8_t *) mem_26375.mem)[i_31768];
                        int8_t y_31771 = ((int8_t *) mem_26377.mem)[i_31768];
                        int64_t u8_res_31772 = zext_i8_i64(x_31770);
                        bool x_31773 = sle64((int64_t) 0, u8_res_31772);
                        bool y_31774 = slt64(u8_res_31772, (int64_t) 16);
                        bool bounds_check_31775 = x_31773 && y_31774;
                        bool index_ok_31776 = bounds_check_31765 && bounds_check_31775;
                        bool index_certs_31777;
                        
                        if (!index_ok_31776) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_31762, ", ", (long long) u8_res_31772, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t binop_x_31778 = binop_x_31766 + u8_res_31772;
                        int64_t new_index_31779 = squot64(binop_x_31778, (int64_t) 1024);
                        int64_t binop_y_31780 = (int64_t) 1024 * new_index_31779;
                        int64_t binop_x_31781 = binop_x_31778 - binop_y_31780;
                        int64_t new_index_31782 = squot64(binop_x_31781, (int64_t) 64);
                        int64_t binop_y_31783 = (int64_t) 64 * new_index_31782;
                        int64_t binop_x_31784 = binop_x_31781 - binop_y_31783;
                        int64_t new_index_31785 = squot64(binop_x_31784, (int64_t) 32);
                        int64_t binop_y_31786 = (int64_t) 32 * new_index_31785;
                        int64_t binop_x_31787 = binop_x_31784 - binop_y_31786;
                        int64_t new_index_31788 = squot64(binop_x_31787, (int64_t) 16);
                        int64_t binop_y_31789 = (int64_t) 16 * new_index_31788;
                        int64_t new_index_31790 = binop_x_31787 - binop_y_31789;
                        int8_t defunc_0_f_res_31791 = ((int8_t *) mem_26855.mem)[new_index_31779 * (int64_t) 1024 + new_index_31782 * (int64_t) 64 + new_index_31785 * (int64_t) 32 + new_index_31788 * (int64_t) 16 + new_index_31790];
                        int64_t u8_res_31792 = zext_i8_i64(defunc_0_f_res_31791);
                        bool x_31793 = sle64((int64_t) 0, u8_res_31792);
                        bool y_31794 = slt64(u8_res_31792, (int64_t) 16);
                        bool bounds_check_31795 = x_31793 && y_31794;
                        bool index_ok_31796 = bounds_check_31755 && bounds_check_31795;
                        bool index_certs_31797;
                        
                        if (!index_ok_31796) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_31751, ", ", (long long) u8_res_31792, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t binop_x_31798 = binop_x_31756 + u8_res_31792;
                        int64_t new_index_31799 = squot64(binop_x_31798, (int64_t) 1024);
                        int64_t binop_y_31800 = (int64_t) 1024 * new_index_31799;
                        int64_t binop_x_31801 = binop_x_31798 - binop_y_31800;
                        int64_t new_index_31802 = squot64(binop_x_31801, (int64_t) 64);
                        int64_t binop_y_31803 = (int64_t) 64 * new_index_31802;
                        int64_t binop_x_31804 = binop_x_31801 - binop_y_31803;
                        int64_t new_index_31805 = squot64(binop_x_31804, (int64_t) 32);
                        int64_t binop_y_31806 = (int64_t) 32 * new_index_31805;
                        int64_t binop_x_31807 = binop_x_31804 - binop_y_31806;
                        int64_t new_index_31808 = squot64(binop_x_31807, (int64_t) 16);
                        int64_t binop_y_31809 = (int64_t) 16 * new_index_31808;
                        int64_t new_index_31810 = binop_x_31807 - binop_y_31809;
                        int8_t defunc_0_f_res_31811 = ((int8_t *) mem_26855.mem)[new_index_31799 * (int64_t) 1024 + new_index_31802 * (int64_t) 64 + new_index_31805 * (int64_t) 32 + new_index_31808 * (int64_t) 16 + new_index_31810];
                        int64_t u8_res_31812 = zext_i8_i64(defunc_0_f_res_31811);
                        bool x_31813 = sle64((int64_t) 0, u8_res_31812);
                        bool y_31814 = slt64(u8_res_31812, (int64_t) 16);
                        bool bounds_check_31815 = x_31813 && y_31814;
                        bool index_ok_31816 = bounds_check_31582 && bounds_check_31815;
                        bool index_certs_31817;
                        
                        if (!index_ok_31816) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_31578, ", ", (long long) u8_res_31812, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t binop_x_31818 = binop_x_31583 + u8_res_31812;
                        int64_t new_index_31819 = squot64(binop_x_31818, (int64_t) 1024);
                        int64_t binop_y_31820 = (int64_t) 1024 * new_index_31819;
                        int64_t binop_x_31821 = binop_x_31818 - binop_y_31820;
                        int64_t new_index_31822 = squot64(binop_x_31821, (int64_t) 64);
                        int64_t binop_y_31823 = (int64_t) 64 * new_index_31822;
                        int64_t binop_x_31824 = binop_x_31821 - binop_y_31823;
                        int64_t new_index_31825 = squot64(binop_x_31824, (int64_t) 32);
                        int64_t binop_y_31826 = (int64_t) 32 * new_index_31825;
                        int64_t binop_x_31827 = binop_x_31824 - binop_y_31826;
                        int64_t new_index_31828 = squot64(binop_x_31827, (int64_t) 16);
                        int64_t binop_y_31829 = (int64_t) 16 * new_index_31828;
                        int64_t new_index_31830 = binop_x_31827 - binop_y_31829;
                        int8_t defunc_0_f_res_31831 = ((int8_t *) mem_26855.mem)[new_index_31819 * (int64_t) 1024 + new_index_31822 * (int64_t) 64 + new_index_31825 * (int64_t) 32 + new_index_31828 * (int64_t) 16 + new_index_31830];
                        int64_t u8_res_31832 = zext_i8_i64(defunc_0_f_res_31831);
                        bool x_31833 = sle64((int64_t) 0, u8_res_31832);
                        bool y_31834 = slt64(u8_res_31832, (int64_t) 16);
                        bool bounds_check_31835 = x_31833 && y_31834;
                        bool index_ok_31836 = bounds_check_30139 && bounds_check_31835;
                        bool index_certs_31837;
                        
                        if (!index_ok_31836) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_30135, ", ", (long long) u8_res_31832, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t binop_x_31838 = binop_x_30140 + u8_res_31832;
                        int64_t new_index_31839 = squot64(binop_x_31838, (int64_t) 1024);
                        int64_t binop_y_31840 = (int64_t) 1024 * new_index_31839;
                        int64_t binop_x_31841 = binop_x_31838 - binop_y_31840;
                        int64_t new_index_31842 = squot64(binop_x_31841, (int64_t) 64);
                        int64_t binop_y_31843 = (int64_t) 64 * new_index_31842;
                        int64_t binop_x_31844 = binop_x_31841 - binop_y_31843;
                        int64_t new_index_31845 = squot64(binop_x_31844, (int64_t) 32);
                        int64_t binop_y_31846 = (int64_t) 32 * new_index_31845;
                        int64_t binop_x_31847 = binop_x_31844 - binop_y_31846;
                        int64_t new_index_31848 = squot64(binop_x_31847, (int64_t) 16);
                        int64_t binop_y_31849 = (int64_t) 16 * new_index_31848;
                        int64_t new_index_31850 = binop_x_31847 - binop_y_31849;
                        int8_t defunc_0_f_res_31851 = ((int8_t *) mem_26855.mem)[new_index_31839 * (int64_t) 1024 + new_index_31842 * (int64_t) 64 + new_index_31845 * (int64_t) 32 + new_index_31848 * (int64_t) 16 + new_index_31850];
                        int64_t u8_res_31852 = zext_i8_i64(defunc_0_f_res_31851);
                        bool x_31853 = sle64((int64_t) 0, u8_res_31852);
                        bool y_31854 = slt64(u8_res_31852, (int64_t) 16);
                        bool bounds_check_31855 = x_31853 && y_31854;
                        bool index_ok_31856 = bounds_check_28938 && bounds_check_31855;
                        bool index_certs_31857;
                        
                        if (!index_ok_31856) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28934, ", ", (long long) u8_res_31852, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t binop_x_31858 = binop_x_28939 + u8_res_31852;
                        int64_t new_index_31859 = squot64(binop_x_31858, (int64_t) 1024);
                        int64_t binop_y_31860 = (int64_t) 1024 * new_index_31859;
                        int64_t binop_x_31861 = binop_x_31858 - binop_y_31860;
                        int64_t new_index_31862 = squot64(binop_x_31861, (int64_t) 64);
                        int64_t binop_y_31863 = (int64_t) 64 * new_index_31862;
                        int64_t binop_x_31864 = binop_x_31861 - binop_y_31863;
                        int64_t new_index_31865 = squot64(binop_x_31864, (int64_t) 32);
                        int64_t binop_y_31866 = (int64_t) 32 * new_index_31865;
                        int64_t binop_x_31867 = binop_x_31864 - binop_y_31866;
                        int64_t new_index_31868 = squot64(binop_x_31867, (int64_t) 16);
                        int64_t binop_y_31869 = (int64_t) 16 * new_index_31868;
                        int64_t new_index_31870 = binop_x_31867 - binop_y_31869;
                        int8_t defunc_0_f_res_31871 = ((int8_t *) mem_26855.mem)[new_index_31859 * (int64_t) 1024 + new_index_31862 * (int64_t) 64 + new_index_31865 * (int64_t) 32 + new_index_31868 * (int64_t) 16 + new_index_31870];
                        int64_t u8_res_31872 = zext_i8_i64(defunc_0_f_res_31871);
                        bool x_31873 = sle64((int64_t) 0, u8_res_31872);
                        bool y_31874 = slt64(u8_res_31872, (int64_t) 16);
                        bool bounds_check_31875 = x_31873 && y_31874;
                        bool index_ok_31876 = bounds_check_24664 && bounds_check_31875;
                        bool index_certs_31877;
                        
                        if (!index_ok_31876) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_24660, ", ", (long long) u8_res_31872, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t binop_x_31878 = binop_x_24665 + u8_res_31872;
                        int64_t new_index_31879 = squot64(binop_x_31878, (int64_t) 1024);
                        int64_t binop_y_31880 = (int64_t) 1024 * new_index_31879;
                        int64_t binop_x_31881 = binop_x_31878 - binop_y_31880;
                        int64_t new_index_31882 = squot64(binop_x_31881, (int64_t) 64);
                        int64_t binop_y_31883 = (int64_t) 64 * new_index_31882;
                        int64_t binop_x_31884 = binop_x_31881 - binop_y_31883;
                        int64_t new_index_31885 = squot64(binop_x_31884, (int64_t) 32);
                        int64_t binop_y_31886 = (int64_t) 32 * new_index_31885;
                        int64_t binop_x_31887 = binop_x_31884 - binop_y_31886;
                        int64_t new_index_31888 = squot64(binop_x_31887, (int64_t) 16);
                        int64_t binop_y_31889 = (int64_t) 16 * new_index_31888;
                        int64_t new_index_31890 = binop_x_31887 - binop_y_31889;
                        int8_t defunc_0_f_res_31891 = ((int8_t *) mem_26855.mem)[new_index_31879 * (int64_t) 1024 + new_index_31882 * (int64_t) 64 + new_index_31885 * (int64_t) 32 + new_index_31888 * (int64_t) 16 + new_index_31890];
                        bool binlam_res_31892 = defunc_0_f_res_31891 == y_31771;
                        bool binlam_res_31893 = binlam_res_31892 && redout_31769;
                        bool redout_tmp_31908 = binlam_res_31893;
                        
                        redout_31769 = redout_tmp_31908;
                    }
                    all_equal_31767 = redout_31769;
                    
                    int16_t i64_res_31894 = sext_i64_i16(index_primexp_31762);
                    
                    ((int16_t *) mem_31588)[(int64_t) 0] = i64_res_24661;
                    ((int16_t *) mem_31588)[(int64_t) 1] = i64_res_28935;
                    ((int16_t *) mem_31588)[(int64_t) 2] = i64_res_30136;
                    ((int16_t *) mem_31588)[(int64_t) 3] = i64_res_31579;
                    ((int16_t *) mem_31588)[(int64_t) 4] = i64_res_31752;
                    ((int16_t *) mem_31588)[(int64_t) 5] = i64_res_31894;
                    ((bool *) mem_31584)[i_31748 * (int64_t) 64 + i_31759] = all_equal_31767;
                    if ((int64_t) 12 > 0)
                        memmove(mem_31586 + (i_31748 * (int64_t) 384 + i_31759 * (int64_t) 6) * (int64_t) 2, mem_31588 + (int64_t) 0, (int64_t) 12);
                }
            }
            if ((int64_t) 4096 > 0)
                memmove(mem_30141.mem + gtid_31577 * (int64_t) 4096, mem_31584 + (int64_t) 0, (int64_t) 4096);
            if ((int64_t) 49152 > 0)
                memmove(mem_30142.mem + gtid_31577 * (int64_t) 24576 * (int64_t) 2, mem_31586 + (int64_t) 0, (int64_t) 49152);
        }
    }
    
  cleanup:
    {
        free(mem_31584);
        free(mem_31586);
        free(mem_31588);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33415_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33415_end - futhark_mc_segmap_parloop_33415_start;
        
        ctx->program->futhark_mc_segmap_parloop_33415_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33415_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33415_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33413(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33412 *futhark_mc_task_33412 = (struct futhark_mc_task_33412 *) args;
    struct futhark_context *ctx = futhark_mc_task_33412->ctx;
    uint64_t futhark_mc_segmap_task_33413_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33413_start = get_wall_time();
    
    int64_t arg_20173 = futhark_mc_task_33412->free_arg_20173;
    int64_t arg_20177 = futhark_mc_task_33412->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33412->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33412->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33412->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33412->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33412->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33412->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33412->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33412->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_task_33412->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_task_33412->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_task_33412->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_task_33412->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_task_33412->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_task_33412->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_task_33412->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_task_33412->free_binop_x_30140;
    struct memblock mem_30141 = {.desc ="mem_30141", .mem =futhark_mc_task_33412->free_mem_30141, .size =0, .references =NULL};
    struct memblock mem_30142 = {.desc ="mem_30142", .mem =futhark_mc_task_33412->free_mem_30142, .size =0, .references =NULL};
    int32_t nsubtasks_31747;
    
    nsubtasks_31747 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33414 futhark_mc_segmap_parloop_struct_33414_;
    
    futhark_mc_segmap_parloop_struct_33414_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33414_.free_arg_20173 = arg_20173;
    futhark_mc_segmap_parloop_struct_33414_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33414_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33414_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33414_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33414_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33414_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33414_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33414_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33414_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33414_.free_index_primexp_28934 = index_primexp_28934;
    futhark_mc_segmap_parloop_struct_33414_.free_i64_res_28935 = i64_res_28935;
    futhark_mc_segmap_parloop_struct_33414_.free_bounds_check_28938 = bounds_check_28938;
    futhark_mc_segmap_parloop_struct_33414_.free_binop_x_28939 = binop_x_28939;
    futhark_mc_segmap_parloop_struct_33414_.free_index_primexp_30135 = index_primexp_30135;
    futhark_mc_segmap_parloop_struct_33414_.free_i64_res_30136 = i64_res_30136;
    futhark_mc_segmap_parloop_struct_33414_.free_bounds_check_30139 = bounds_check_30139;
    futhark_mc_segmap_parloop_struct_33414_.free_binop_x_30140 = binop_x_30140;
    futhark_mc_segmap_parloop_struct_33414_.free_mem_30141 = mem_30141.mem;
    futhark_mc_segmap_parloop_struct_33414_.free_mem_30142 = mem_30142.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33415_task;
    
    futhark_mc_segmap_parloop_33415_task.name = "futhark_mc_segmap_parloop_33415";
    futhark_mc_segmap_parloop_33415_task.fn = futhark_mc_segmap_parloop_33415;
    futhark_mc_segmap_parloop_33415_task.args = &futhark_mc_segmap_parloop_struct_33414_;
    futhark_mc_segmap_parloop_33415_task.iterations = iterations;
    futhark_mc_segmap_parloop_33415_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33415_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33415_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33415_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33415_task);
    
    if (futhark_mc_segmap_parloop_33415_err != 0) {
        err = futhark_mc_segmap_parloop_33415_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33415_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33415_total_end - futhark_mc_segmap_parloop_33415_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33415_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33415_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33415_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33413_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33413_end - futhark_mc_segmap_task_33413_start;
        
        ctx->program->futhark_mc_segmap_task_33413_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33413_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33413_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33420 {
    struct futhark_context *ctx;
    int64_t free_arg_20173;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    int16_t free_i64_res_30136;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    unsigned char *free_mem_30141;
    unsigned char *free_mem_30142;
};
struct futhark_mc_task_33424 {
    struct futhark_context *ctx;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    int16_t free_i64_res_30136;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    int64_t free_index_primexp_31124;
    int16_t free_i64_res_31125;
    bool free_bounds_check_31128;
    int64_t free_binop_x_31129;
    unsigned char *free_mem_31130;
    unsigned char *free_mem_31131;
};
struct futhark_mc_segmap_parloop_struct_33426 {
    struct futhark_context *ctx;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    int16_t free_i64_res_30136;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    int64_t free_index_primexp_31124;
    int16_t free_i64_res_31125;
    bool free_bounds_check_31128;
    int64_t free_binop_x_31129;
    unsigned char *free_mem_31130;
    unsigned char *free_mem_31131;
};
static int futhark_mc_segmap_parloop_33427(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33426 *futhark_mc_segmap_parloop_struct_33426 = (struct futhark_mc_segmap_parloop_struct_33426 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33426->ctx;
    uint64_t futhark_mc_segmap_parloop_33427_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33427_start = get_wall_time();
    
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33426->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33426->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33426->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33426->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33426->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33426->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33426->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33426->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33426->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_segmap_parloop_struct_33426->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_segmap_parloop_struct_33426->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_segmap_parloop_struct_33426->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_segmap_parloop_struct_33426->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_segmap_parloop_struct_33426->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_segmap_parloop_struct_33426->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_segmap_parloop_struct_33426->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_segmap_parloop_struct_33426->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_segmap_parloop_struct_33426->free_index_primexp_31124;
    int16_t i64_res_31125 = futhark_mc_segmap_parloop_struct_33426->free_i64_res_31125;
    bool bounds_check_31128 = futhark_mc_segmap_parloop_struct_33426->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_segmap_parloop_struct_33426->free_binop_x_31129;
    struct memblock mem_31130 = {.desc ="mem_31130", .mem =futhark_mc_segmap_parloop_struct_33426->free_mem_31130, .size =0, .references =NULL};
    struct memblock mem_31131 = {.desc ="mem_31131", .mem =futhark_mc_segmap_parloop_struct_33426->free_mem_31131, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_32206_cached_sizze_33428 = 0;
    unsigned char *mem_32206 = NULL;
    int64_t mem_32208_cached_sizze_33429 = 0;
    unsigned char *mem_32208 = NULL;
    int64_t mem_32210_cached_sizze_33430 = 0;
    unsigned char *mem_32210 = NULL;
    int64_t flat_tid_32198;
    
    flat_tid_32198 = subtask_id;
    {
        int64_t start_32498;
        int64_t end_32499;
        
        start_32498 = start;
        end_32499 = end;
        
        int64_t n_32500 = end_32499 - start_32498;
        
        if (mem_32206_cached_sizze_33428 < (int64_t) 64) {
            err = lexical_realloc(ctx, &mem_32206, &mem_32206_cached_sizze_33428, (int64_t) 64);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_32208_cached_sizze_33429 < (int64_t) 768) {
            err = lexical_realloc(ctx, &mem_32208, &mem_32208_cached_sizze_33429, (int64_t) 768);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_32210_cached_sizze_33430 < (int64_t) 12) {
            err = lexical_realloc(ctx, &mem_32210, &mem_32210_cached_sizze_33430, (int64_t) 12);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_32501 = start_32498; SegMap_i_32501 < start_32498 + n_32500; SegMap_i_32501++) {
            int64_t slice_32502 = (int64_t) 64;
            int64_t gtid_32199 = SegMap_i_32501;
            int64_t remnant_32503 = SegMap_i_32501 - gtid_32199;
            int64_t index_primexp_32200 = add64(arg_20177, gtid_32199);
            int16_t i64_res_32201 = sext_i64_i16(index_primexp_32200);
            bool x_32202 = sle64((int64_t) 0, index_primexp_32200);
            bool y_32203 = slt64(index_primexp_32200, (int64_t) 1024);
            bool bounds_check_32204 = x_32202 && y_32203;
            int64_t binop_x_32205 = (int64_t) 16 * index_primexp_32200;
            
            for (int64_t i_32359 = 0; i_32359 < (int64_t) 64; i_32359++) {
                int64_t index_primexp_32362 = add64(arg_20181, i_32359);
                bool x_32363 = sle64((int64_t) 0, index_primexp_32362);
                bool y_32364 = slt64(index_primexp_32362, (int64_t) 1024);
                bool bounds_check_32365 = x_32363 && y_32364;
                int64_t binop_x_32366 = (int64_t) 16 * index_primexp_32362;
                bool all_equal_32367;
                bool redout_32369 = 1;
                
                for (int64_t i_32368 = 0; i_32368 < (int64_t) 16; i_32368++) {
                    int8_t x_32370 = ((int8_t *) mem_26375.mem)[i_32368];
                    int8_t y_32371 = ((int8_t *) mem_26377.mem)[i_32368];
                    int64_t u8_res_32372 = zext_i8_i64(x_32370);
                    bool x_32373 = sle64((int64_t) 0, u8_res_32372);
                    bool y_32374 = slt64(u8_res_32372, (int64_t) 16);
                    bool bounds_check_32375 = x_32373 && y_32374;
                    bool index_ok_32376 = bounds_check_32365 && bounds_check_32375;
                    bool index_certs_32377;
                    
                    if (!index_ok_32376) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_32362, ", ", (long long) u8_res_32372, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_32378 = binop_x_32366 + u8_res_32372;
                    int64_t new_index_32379 = squot64(binop_x_32378, (int64_t) 1024);
                    int64_t binop_y_32380 = (int64_t) 1024 * new_index_32379;
                    int64_t binop_x_32381 = binop_x_32378 - binop_y_32380;
                    int64_t new_index_32382 = squot64(binop_x_32381, (int64_t) 64);
                    int64_t binop_y_32383 = (int64_t) 64 * new_index_32382;
                    int64_t binop_x_32384 = binop_x_32381 - binop_y_32383;
                    int64_t new_index_32385 = squot64(binop_x_32384, (int64_t) 32);
                    int64_t binop_y_32386 = (int64_t) 32 * new_index_32385;
                    int64_t binop_x_32387 = binop_x_32384 - binop_y_32386;
                    int64_t new_index_32388 = squot64(binop_x_32387, (int64_t) 16);
                    int64_t binop_y_32389 = (int64_t) 16 * new_index_32388;
                    int64_t new_index_32390 = binop_x_32387 - binop_y_32389;
                    int8_t defunc_0_f_res_32391 = ((int8_t *) mem_26855.mem)[new_index_32379 * (int64_t) 1024 + new_index_32382 * (int64_t) 64 + new_index_32385 * (int64_t) 32 + new_index_32388 * (int64_t) 16 + new_index_32390];
                    int64_t u8_res_32392 = zext_i8_i64(defunc_0_f_res_32391);
                    bool x_32393 = sle64((int64_t) 0, u8_res_32392);
                    bool y_32394 = slt64(u8_res_32392, (int64_t) 16);
                    bool bounds_check_32395 = x_32393 && y_32394;
                    bool index_ok_32396 = bounds_check_32204 && bounds_check_32395;
                    bool index_certs_32397;
                    
                    if (!index_ok_32396) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_32200, ", ", (long long) u8_res_32392, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_32398 = binop_x_32205 + u8_res_32392;
                    int64_t new_index_32399 = squot64(binop_x_32398, (int64_t) 1024);
                    int64_t binop_y_32400 = (int64_t) 1024 * new_index_32399;
                    int64_t binop_x_32401 = binop_x_32398 - binop_y_32400;
                    int64_t new_index_32402 = squot64(binop_x_32401, (int64_t) 64);
                    int64_t binop_y_32403 = (int64_t) 64 * new_index_32402;
                    int64_t binop_x_32404 = binop_x_32401 - binop_y_32403;
                    int64_t new_index_32405 = squot64(binop_x_32404, (int64_t) 32);
                    int64_t binop_y_32406 = (int64_t) 32 * new_index_32405;
                    int64_t binop_x_32407 = binop_x_32404 - binop_y_32406;
                    int64_t new_index_32408 = squot64(binop_x_32407, (int64_t) 16);
                    int64_t binop_y_32409 = (int64_t) 16 * new_index_32408;
                    int64_t new_index_32410 = binop_x_32407 - binop_y_32409;
                    int8_t defunc_0_f_res_32411 = ((int8_t *) mem_26855.mem)[new_index_32399 * (int64_t) 1024 + new_index_32402 * (int64_t) 64 + new_index_32405 * (int64_t) 32 + new_index_32408 * (int64_t) 16 + new_index_32410];
                    int64_t u8_res_32412 = zext_i8_i64(defunc_0_f_res_32411);
                    bool x_32413 = sle64((int64_t) 0, u8_res_32412);
                    bool y_32414 = slt64(u8_res_32412, (int64_t) 16);
                    bool bounds_check_32415 = x_32413 && y_32414;
                    bool index_ok_32416 = bounds_check_31128 && bounds_check_32415;
                    bool index_certs_32417;
                    
                    if (!index_ok_32416) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_31124, ", ", (long long) u8_res_32412, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_32418 = binop_x_31129 + u8_res_32412;
                    int64_t new_index_32419 = squot64(binop_x_32418, (int64_t) 1024);
                    int64_t binop_y_32420 = (int64_t) 1024 * new_index_32419;
                    int64_t binop_x_32421 = binop_x_32418 - binop_y_32420;
                    int64_t new_index_32422 = squot64(binop_x_32421, (int64_t) 64);
                    int64_t binop_y_32423 = (int64_t) 64 * new_index_32422;
                    int64_t binop_x_32424 = binop_x_32421 - binop_y_32423;
                    int64_t new_index_32425 = squot64(binop_x_32424, (int64_t) 32);
                    int64_t binop_y_32426 = (int64_t) 32 * new_index_32425;
                    int64_t binop_x_32427 = binop_x_32424 - binop_y_32426;
                    int64_t new_index_32428 = squot64(binop_x_32427, (int64_t) 16);
                    int64_t binop_y_32429 = (int64_t) 16 * new_index_32428;
                    int64_t new_index_32430 = binop_x_32427 - binop_y_32429;
                    int8_t defunc_0_f_res_32431 = ((int8_t *) mem_26855.mem)[new_index_32419 * (int64_t) 1024 + new_index_32422 * (int64_t) 64 + new_index_32425 * (int64_t) 32 + new_index_32428 * (int64_t) 16 + new_index_32430];
                    int64_t u8_res_32432 = zext_i8_i64(defunc_0_f_res_32431);
                    bool x_32433 = sle64((int64_t) 0, u8_res_32432);
                    bool y_32434 = slt64(u8_res_32432, (int64_t) 16);
                    bool bounds_check_32435 = x_32433 && y_32434;
                    bool index_ok_32436 = bounds_check_30139 && bounds_check_32435;
                    bool index_certs_32437;
                    
                    if (!index_ok_32436) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_30135, ", ", (long long) u8_res_32432, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_32438 = binop_x_30140 + u8_res_32432;
                    int64_t new_index_32439 = squot64(binop_x_32438, (int64_t) 1024);
                    int64_t binop_y_32440 = (int64_t) 1024 * new_index_32439;
                    int64_t binop_x_32441 = binop_x_32438 - binop_y_32440;
                    int64_t new_index_32442 = squot64(binop_x_32441, (int64_t) 64);
                    int64_t binop_y_32443 = (int64_t) 64 * new_index_32442;
                    int64_t binop_x_32444 = binop_x_32441 - binop_y_32443;
                    int64_t new_index_32445 = squot64(binop_x_32444, (int64_t) 32);
                    int64_t binop_y_32446 = (int64_t) 32 * new_index_32445;
                    int64_t binop_x_32447 = binop_x_32444 - binop_y_32446;
                    int64_t new_index_32448 = squot64(binop_x_32447, (int64_t) 16);
                    int64_t binop_y_32449 = (int64_t) 16 * new_index_32448;
                    int64_t new_index_32450 = binop_x_32447 - binop_y_32449;
                    int8_t defunc_0_f_res_32451 = ((int8_t *) mem_26855.mem)[new_index_32439 * (int64_t) 1024 + new_index_32442 * (int64_t) 64 + new_index_32445 * (int64_t) 32 + new_index_32448 * (int64_t) 16 + new_index_32450];
                    int64_t u8_res_32452 = zext_i8_i64(defunc_0_f_res_32451);
                    bool x_32453 = sle64((int64_t) 0, u8_res_32452);
                    bool y_32454 = slt64(u8_res_32452, (int64_t) 16);
                    bool bounds_check_32455 = x_32453 && y_32454;
                    bool index_ok_32456 = bounds_check_28938 && bounds_check_32455;
                    bool index_certs_32457;
                    
                    if (!index_ok_32456) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28934, ", ", (long long) u8_res_32452, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_32458 = binop_x_28939 + u8_res_32452;
                    int64_t new_index_32459 = squot64(binop_x_32458, (int64_t) 1024);
                    int64_t binop_y_32460 = (int64_t) 1024 * new_index_32459;
                    int64_t binop_x_32461 = binop_x_32458 - binop_y_32460;
                    int64_t new_index_32462 = squot64(binop_x_32461, (int64_t) 64);
                    int64_t binop_y_32463 = (int64_t) 64 * new_index_32462;
                    int64_t binop_x_32464 = binop_x_32461 - binop_y_32463;
                    int64_t new_index_32465 = squot64(binop_x_32464, (int64_t) 32);
                    int64_t binop_y_32466 = (int64_t) 32 * new_index_32465;
                    int64_t binop_x_32467 = binop_x_32464 - binop_y_32466;
                    int64_t new_index_32468 = squot64(binop_x_32467, (int64_t) 16);
                    int64_t binop_y_32469 = (int64_t) 16 * new_index_32468;
                    int64_t new_index_32470 = binop_x_32467 - binop_y_32469;
                    int8_t defunc_0_f_res_32471 = ((int8_t *) mem_26855.mem)[new_index_32459 * (int64_t) 1024 + new_index_32462 * (int64_t) 64 + new_index_32465 * (int64_t) 32 + new_index_32468 * (int64_t) 16 + new_index_32470];
                    int64_t u8_res_32472 = zext_i8_i64(defunc_0_f_res_32471);
                    bool x_32473 = sle64((int64_t) 0, u8_res_32472);
                    bool y_32474 = slt64(u8_res_32472, (int64_t) 16);
                    bool bounds_check_32475 = x_32473 && y_32474;
                    bool index_ok_32476 = bounds_check_24664 && bounds_check_32475;
                    bool index_certs_32477;
                    
                    if (!index_ok_32476) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_24660, ", ", (long long) u8_res_32472, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_32478 = binop_x_24665 + u8_res_32472;
                    int64_t new_index_32479 = squot64(binop_x_32478, (int64_t) 1024);
                    int64_t binop_y_32480 = (int64_t) 1024 * new_index_32479;
                    int64_t binop_x_32481 = binop_x_32478 - binop_y_32480;
                    int64_t new_index_32482 = squot64(binop_x_32481, (int64_t) 64);
                    int64_t binop_y_32483 = (int64_t) 64 * new_index_32482;
                    int64_t binop_x_32484 = binop_x_32481 - binop_y_32483;
                    int64_t new_index_32485 = squot64(binop_x_32484, (int64_t) 32);
                    int64_t binop_y_32486 = (int64_t) 32 * new_index_32485;
                    int64_t binop_x_32487 = binop_x_32484 - binop_y_32486;
                    int64_t new_index_32488 = squot64(binop_x_32487, (int64_t) 16);
                    int64_t binop_y_32489 = (int64_t) 16 * new_index_32488;
                    int64_t new_index_32490 = binop_x_32487 - binop_y_32489;
                    int8_t defunc_0_f_res_32491 = ((int8_t *) mem_26855.mem)[new_index_32479 * (int64_t) 1024 + new_index_32482 * (int64_t) 64 + new_index_32485 * (int64_t) 32 + new_index_32488 * (int64_t) 16 + new_index_32490];
                    bool binlam_res_32492 = defunc_0_f_res_32491 == y_32371;
                    bool binlam_res_32493 = binlam_res_32492 && redout_32369;
                    bool redout_tmp_32506 = binlam_res_32493;
                    
                    redout_32369 = redout_tmp_32506;
                }
                all_equal_32367 = redout_32369;
                
                int16_t i64_res_32494 = sext_i64_i16(index_primexp_32362);
                
                ((int16_t *) mem_32210)[(int64_t) 0] = i64_res_24661;
                ((int16_t *) mem_32210)[(int64_t) 1] = i64_res_28935;
                ((int16_t *) mem_32210)[(int64_t) 2] = i64_res_30136;
                ((int16_t *) mem_32210)[(int64_t) 3] = i64_res_31125;
                ((int16_t *) mem_32210)[(int64_t) 4] = i64_res_32201;
                ((int16_t *) mem_32210)[(int64_t) 5] = i64_res_32494;
                ((bool *) mem_32206)[i_32359] = all_equal_32367;
                if ((int64_t) 12 > 0)
                    memmove(mem_32208 + i_32359 * (int64_t) 6 * (int64_t) 2, mem_32210 + (int64_t) 0, (int64_t) 12);
            }
            if ((int64_t) 64 > 0)
                memmove(mem_31130.mem + gtid_32199 * (int64_t) 64, mem_32206 + (int64_t) 0, (int64_t) 64);
            if ((int64_t) 768 > 0)
                memmove(mem_31131.mem + gtid_32199 * (int64_t) 384 * (int64_t) 2, mem_32208 + (int64_t) 0, (int64_t) 768);
        }
    }
    
  cleanup:
    {
        free(mem_32206);
        free(mem_32208);
        free(mem_32210);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33427_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33427_end - futhark_mc_segmap_parloop_33427_start;
        
        ctx->program->futhark_mc_segmap_parloop_33427_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33427_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33427_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33425(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33424 *futhark_mc_task_33424 = (struct futhark_mc_task_33424 *) args;
    struct futhark_context *ctx = futhark_mc_task_33424->ctx;
    uint64_t futhark_mc_segmap_task_33425_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33425_start = get_wall_time();
    
    int64_t arg_20177 = futhark_mc_task_33424->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33424->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33424->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33424->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33424->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33424->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33424->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33424->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33424->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_task_33424->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_task_33424->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_task_33424->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_task_33424->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_task_33424->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_task_33424->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_task_33424->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_task_33424->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_task_33424->free_index_primexp_31124;
    int16_t i64_res_31125 = futhark_mc_task_33424->free_i64_res_31125;
    bool bounds_check_31128 = futhark_mc_task_33424->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_task_33424->free_binop_x_31129;
    struct memblock mem_31130 = {.desc ="mem_31130", .mem =futhark_mc_task_33424->free_mem_31130, .size =0, .references =NULL};
    struct memblock mem_31131 = {.desc ="mem_31131", .mem =futhark_mc_task_33424->free_mem_31131, .size =0, .references =NULL};
    int32_t nsubtasks_32358;
    
    nsubtasks_32358 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33426 futhark_mc_segmap_parloop_struct_33426_;
    
    futhark_mc_segmap_parloop_struct_33426_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33426_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33426_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33426_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33426_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33426_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33426_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33426_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33426_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33426_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33426_.free_index_primexp_28934 = index_primexp_28934;
    futhark_mc_segmap_parloop_struct_33426_.free_i64_res_28935 = i64_res_28935;
    futhark_mc_segmap_parloop_struct_33426_.free_bounds_check_28938 = bounds_check_28938;
    futhark_mc_segmap_parloop_struct_33426_.free_binop_x_28939 = binop_x_28939;
    futhark_mc_segmap_parloop_struct_33426_.free_index_primexp_30135 = index_primexp_30135;
    futhark_mc_segmap_parloop_struct_33426_.free_i64_res_30136 = i64_res_30136;
    futhark_mc_segmap_parloop_struct_33426_.free_bounds_check_30139 = bounds_check_30139;
    futhark_mc_segmap_parloop_struct_33426_.free_binop_x_30140 = binop_x_30140;
    futhark_mc_segmap_parloop_struct_33426_.free_index_primexp_31124 = index_primexp_31124;
    futhark_mc_segmap_parloop_struct_33426_.free_i64_res_31125 = i64_res_31125;
    futhark_mc_segmap_parloop_struct_33426_.free_bounds_check_31128 = bounds_check_31128;
    futhark_mc_segmap_parloop_struct_33426_.free_binop_x_31129 = binop_x_31129;
    futhark_mc_segmap_parloop_struct_33426_.free_mem_31130 = mem_31130.mem;
    futhark_mc_segmap_parloop_struct_33426_.free_mem_31131 = mem_31131.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33427_task;
    
    futhark_mc_segmap_parloop_33427_task.name = "futhark_mc_segmap_parloop_33427";
    futhark_mc_segmap_parloop_33427_task.fn = futhark_mc_segmap_parloop_33427;
    futhark_mc_segmap_parloop_33427_task.args = &futhark_mc_segmap_parloop_struct_33426_;
    futhark_mc_segmap_parloop_33427_task.iterations = iterations;
    futhark_mc_segmap_parloop_33427_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33427_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33427_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33427_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33427_task);
    
    if (futhark_mc_segmap_parloop_33427_err != 0) {
        err = futhark_mc_segmap_parloop_33427_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33427_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33427_total_end - futhark_mc_segmap_parloop_33427_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33427_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33427_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33427_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33425_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33425_end - futhark_mc_segmap_task_33425_start;
        
        ctx->program->futhark_mc_segmap_task_33425_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33425_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33425_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33432 {
    struct futhark_context *ctx;
    int64_t free_arg_20177;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    int16_t free_i64_res_30136;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    int64_t free_index_primexp_31124;
    int16_t free_i64_res_31125;
    bool free_bounds_check_31128;
    int64_t free_binop_x_31129;
    unsigned char *free_mem_31130;
    unsigned char *free_mem_31131;
};
struct futhark_mc_task_33436 {
    struct futhark_context *ctx;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    int16_t free_i64_res_30136;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    int64_t free_index_primexp_31124;
    int16_t free_i64_res_31125;
    bool free_bounds_check_31128;
    int64_t free_binop_x_31129;
    int64_t free_index_primexp_31912;
    int16_t free_i64_res_31913;
    bool free_bounds_check_31916;
    int64_t free_binop_x_31917;
    unsigned char *free_mem_31918;
    unsigned char *free_mem_31919;
};
struct futhark_mc_segmap_parloop_struct_33438 {
    struct futhark_context *ctx;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    int16_t free_i64_res_30136;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    int64_t free_index_primexp_31124;
    int16_t free_i64_res_31125;
    bool free_bounds_check_31128;
    int64_t free_binop_x_31129;
    int64_t free_index_primexp_31912;
    int16_t free_i64_res_31913;
    bool free_bounds_check_31916;
    int64_t free_binop_x_31917;
    unsigned char *free_mem_31918;
    unsigned char *free_mem_31919;
};
static int futhark_mc_segmap_parloop_33439(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33438 *futhark_mc_segmap_parloop_struct_33438 = (struct futhark_mc_segmap_parloop_struct_33438 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33438->ctx;
    uint64_t futhark_mc_segmap_parloop_33439_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33439_start = get_wall_time();
    
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33438->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33438->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33438->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33438->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33438->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33438->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33438->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33438->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_segmap_parloop_struct_33438->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_segmap_parloop_struct_33438->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_segmap_parloop_struct_33438->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_segmap_parloop_struct_33438->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_segmap_parloop_struct_33438->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_segmap_parloop_struct_33438->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_segmap_parloop_struct_33438->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_segmap_parloop_struct_33438->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_segmap_parloop_struct_33438->free_index_primexp_31124;
    int16_t i64_res_31125 = futhark_mc_segmap_parloop_struct_33438->free_i64_res_31125;
    bool bounds_check_31128 = futhark_mc_segmap_parloop_struct_33438->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_segmap_parloop_struct_33438->free_binop_x_31129;
    int64_t index_primexp_31912 = futhark_mc_segmap_parloop_struct_33438->free_index_primexp_31912;
    int16_t i64_res_31913 = futhark_mc_segmap_parloop_struct_33438->free_i64_res_31913;
    bool bounds_check_31916 = futhark_mc_segmap_parloop_struct_33438->free_bounds_check_31916;
    int64_t binop_x_31917 = futhark_mc_segmap_parloop_struct_33438->free_binop_x_31917;
    struct memblock mem_31918 = {.desc ="mem_31918", .mem =futhark_mc_segmap_parloop_struct_33438->free_mem_31918, .size =0, .references =NULL};
    struct memblock mem_31919 = {.desc ="mem_31919", .mem =futhark_mc_segmap_parloop_struct_33438->free_mem_31919, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_32782_cached_sizze_33440 = 0;
    unsigned char *mem_32782 = NULL;
    int64_t flat_tid_32647;
    
    flat_tid_32647 = subtask_id;
    {
        int64_t start_32917;
        int64_t end_32918;
        
        start_32917 = start;
        end_32918 = end;
        
        int64_t n_32919 = end_32918 - start_32917;
        
        if (mem_32782_cached_sizze_33440 < (int64_t) 12) {
            err = lexical_realloc(ctx, &mem_32782, &mem_32782_cached_sizze_33440, (int64_t) 12);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_32920 = start_32917; SegMap_i_32920 < start_32917 + n_32919; SegMap_i_32920++) {
            int64_t slice_32921 = (int64_t) 64;
            int64_t gtid_32648 = SegMap_i_32920;
            int64_t remnant_32922 = SegMap_i_32920 - gtid_32648;
            int64_t index_primexp_32649 = add64(arg_20181, gtid_32648);
            bool x_32650 = sle64((int64_t) 0, index_primexp_32649);
            bool y_32651 = slt64(index_primexp_32649, (int64_t) 1024);
            bool bounds_check_32652 = x_32650 && y_32651;
            int64_t binop_x_32653 = (int64_t) 16 * index_primexp_32649;
            bool all_equal_32654;
            bool redout_32792 = 1;
            
            for (int64_t i_32791 = 0; i_32791 < (int64_t) 16; i_32791++) {
                int8_t x_32793 = ((int8_t *) mem_26375.mem)[i_32791];
                int8_t y_32794 = ((int8_t *) mem_26377.mem)[i_32791];
                int64_t u8_res_32795 = zext_i8_i64(x_32793);
                bool x_32796 = sle64((int64_t) 0, u8_res_32795);
                bool y_32797 = slt64(u8_res_32795, (int64_t) 16);
                bool bounds_check_32798 = x_32796 && y_32797;
                bool index_ok_32799 = bounds_check_32652 && bounds_check_32798;
                bool index_certs_32800;
                
                if (!index_ok_32799) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_32649, ", ", (long long) u8_res_32795, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t binop_x_32801 = binop_x_32653 + u8_res_32795;
                int64_t new_index_32802 = squot64(binop_x_32801, (int64_t) 1024);
                int64_t binop_y_32803 = (int64_t) 1024 * new_index_32802;
                int64_t binop_x_32804 = binop_x_32801 - binop_y_32803;
                int64_t new_index_32805 = squot64(binop_x_32804, (int64_t) 64);
                int64_t binop_y_32806 = (int64_t) 64 * new_index_32805;
                int64_t binop_x_32807 = binop_x_32804 - binop_y_32806;
                int64_t new_index_32808 = squot64(binop_x_32807, (int64_t) 32);
                int64_t binop_y_32809 = (int64_t) 32 * new_index_32808;
                int64_t binop_x_32810 = binop_x_32807 - binop_y_32809;
                int64_t new_index_32811 = squot64(binop_x_32810, (int64_t) 16);
                int64_t binop_y_32812 = (int64_t) 16 * new_index_32811;
                int64_t new_index_32813 = binop_x_32810 - binop_y_32812;
                int8_t defunc_0_f_res_32814 = ((int8_t *) mem_26855.mem)[new_index_32802 * (int64_t) 1024 + new_index_32805 * (int64_t) 64 + new_index_32808 * (int64_t) 32 + new_index_32811 * (int64_t) 16 + new_index_32813];
                int64_t u8_res_32815 = zext_i8_i64(defunc_0_f_res_32814);
                bool x_32816 = sle64((int64_t) 0, u8_res_32815);
                bool y_32817 = slt64(u8_res_32815, (int64_t) 16);
                bool bounds_check_32818 = x_32816 && y_32817;
                bool index_ok_32819 = bounds_check_31916 && bounds_check_32818;
                bool index_certs_32820;
                
                if (!index_ok_32819) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_31912, ", ", (long long) u8_res_32815, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t binop_x_32821 = binop_x_31917 + u8_res_32815;
                int64_t new_index_32822 = squot64(binop_x_32821, (int64_t) 1024);
                int64_t binop_y_32823 = (int64_t) 1024 * new_index_32822;
                int64_t binop_x_32824 = binop_x_32821 - binop_y_32823;
                int64_t new_index_32825 = squot64(binop_x_32824, (int64_t) 64);
                int64_t binop_y_32826 = (int64_t) 64 * new_index_32825;
                int64_t binop_x_32827 = binop_x_32824 - binop_y_32826;
                int64_t new_index_32828 = squot64(binop_x_32827, (int64_t) 32);
                int64_t binop_y_32829 = (int64_t) 32 * new_index_32828;
                int64_t binop_x_32830 = binop_x_32827 - binop_y_32829;
                int64_t new_index_32831 = squot64(binop_x_32830, (int64_t) 16);
                int64_t binop_y_32832 = (int64_t) 16 * new_index_32831;
                int64_t new_index_32833 = binop_x_32830 - binop_y_32832;
                int8_t defunc_0_f_res_32834 = ((int8_t *) mem_26855.mem)[new_index_32822 * (int64_t) 1024 + new_index_32825 * (int64_t) 64 + new_index_32828 * (int64_t) 32 + new_index_32831 * (int64_t) 16 + new_index_32833];
                int64_t u8_res_32835 = zext_i8_i64(defunc_0_f_res_32834);
                bool x_32836 = sle64((int64_t) 0, u8_res_32835);
                bool y_32837 = slt64(u8_res_32835, (int64_t) 16);
                bool bounds_check_32838 = x_32836 && y_32837;
                bool index_ok_32839 = bounds_check_31128 && bounds_check_32838;
                bool index_certs_32840;
                
                if (!index_ok_32839) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_31124, ", ", (long long) u8_res_32835, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t binop_x_32841 = binop_x_31129 + u8_res_32835;
                int64_t new_index_32842 = squot64(binop_x_32841, (int64_t) 1024);
                int64_t binop_y_32843 = (int64_t) 1024 * new_index_32842;
                int64_t binop_x_32844 = binop_x_32841 - binop_y_32843;
                int64_t new_index_32845 = squot64(binop_x_32844, (int64_t) 64);
                int64_t binop_y_32846 = (int64_t) 64 * new_index_32845;
                int64_t binop_x_32847 = binop_x_32844 - binop_y_32846;
                int64_t new_index_32848 = squot64(binop_x_32847, (int64_t) 32);
                int64_t binop_y_32849 = (int64_t) 32 * new_index_32848;
                int64_t binop_x_32850 = binop_x_32847 - binop_y_32849;
                int64_t new_index_32851 = squot64(binop_x_32850, (int64_t) 16);
                int64_t binop_y_32852 = (int64_t) 16 * new_index_32851;
                int64_t new_index_32853 = binop_x_32850 - binop_y_32852;
                int8_t defunc_0_f_res_32854 = ((int8_t *) mem_26855.mem)[new_index_32842 * (int64_t) 1024 + new_index_32845 * (int64_t) 64 + new_index_32848 * (int64_t) 32 + new_index_32851 * (int64_t) 16 + new_index_32853];
                int64_t u8_res_32855 = zext_i8_i64(defunc_0_f_res_32854);
                bool x_32856 = sle64((int64_t) 0, u8_res_32855);
                bool y_32857 = slt64(u8_res_32855, (int64_t) 16);
                bool bounds_check_32858 = x_32856 && y_32857;
                bool index_ok_32859 = bounds_check_30139 && bounds_check_32858;
                bool index_certs_32860;
                
                if (!index_ok_32859) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_30135, ", ", (long long) u8_res_32855, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t binop_x_32861 = binop_x_30140 + u8_res_32855;
                int64_t new_index_32862 = squot64(binop_x_32861, (int64_t) 1024);
                int64_t binop_y_32863 = (int64_t) 1024 * new_index_32862;
                int64_t binop_x_32864 = binop_x_32861 - binop_y_32863;
                int64_t new_index_32865 = squot64(binop_x_32864, (int64_t) 64);
                int64_t binop_y_32866 = (int64_t) 64 * new_index_32865;
                int64_t binop_x_32867 = binop_x_32864 - binop_y_32866;
                int64_t new_index_32868 = squot64(binop_x_32867, (int64_t) 32);
                int64_t binop_y_32869 = (int64_t) 32 * new_index_32868;
                int64_t binop_x_32870 = binop_x_32867 - binop_y_32869;
                int64_t new_index_32871 = squot64(binop_x_32870, (int64_t) 16);
                int64_t binop_y_32872 = (int64_t) 16 * new_index_32871;
                int64_t new_index_32873 = binop_x_32870 - binop_y_32872;
                int8_t defunc_0_f_res_32874 = ((int8_t *) mem_26855.mem)[new_index_32862 * (int64_t) 1024 + new_index_32865 * (int64_t) 64 + new_index_32868 * (int64_t) 32 + new_index_32871 * (int64_t) 16 + new_index_32873];
                int64_t u8_res_32875 = zext_i8_i64(defunc_0_f_res_32874);
                bool x_32876 = sle64((int64_t) 0, u8_res_32875);
                bool y_32877 = slt64(u8_res_32875, (int64_t) 16);
                bool bounds_check_32878 = x_32876 && y_32877;
                bool index_ok_32879 = bounds_check_28938 && bounds_check_32878;
                bool index_certs_32880;
                
                if (!index_ok_32879) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28934, ", ", (long long) u8_res_32875, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t binop_x_32881 = binop_x_28939 + u8_res_32875;
                int64_t new_index_32882 = squot64(binop_x_32881, (int64_t) 1024);
                int64_t binop_y_32883 = (int64_t) 1024 * new_index_32882;
                int64_t binop_x_32884 = binop_x_32881 - binop_y_32883;
                int64_t new_index_32885 = squot64(binop_x_32884, (int64_t) 64);
                int64_t binop_y_32886 = (int64_t) 64 * new_index_32885;
                int64_t binop_x_32887 = binop_x_32884 - binop_y_32886;
                int64_t new_index_32888 = squot64(binop_x_32887, (int64_t) 32);
                int64_t binop_y_32889 = (int64_t) 32 * new_index_32888;
                int64_t binop_x_32890 = binop_x_32887 - binop_y_32889;
                int64_t new_index_32891 = squot64(binop_x_32890, (int64_t) 16);
                int64_t binop_y_32892 = (int64_t) 16 * new_index_32891;
                int64_t new_index_32893 = binop_x_32890 - binop_y_32892;
                int8_t defunc_0_f_res_32894 = ((int8_t *) mem_26855.mem)[new_index_32882 * (int64_t) 1024 + new_index_32885 * (int64_t) 64 + new_index_32888 * (int64_t) 32 + new_index_32891 * (int64_t) 16 + new_index_32893];
                int64_t u8_res_32895 = zext_i8_i64(defunc_0_f_res_32894);
                bool x_32896 = sle64((int64_t) 0, u8_res_32895);
                bool y_32897 = slt64(u8_res_32895, (int64_t) 16);
                bool bounds_check_32898 = x_32896 && y_32897;
                bool index_ok_32899 = bounds_check_24664 && bounds_check_32898;
                bool index_certs_32900;
                
                if (!index_ok_32899) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_24660, ", ", (long long) u8_res_32895, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t binop_x_32901 = binop_x_24665 + u8_res_32895;
                int64_t new_index_32902 = squot64(binop_x_32901, (int64_t) 1024);
                int64_t binop_y_32903 = (int64_t) 1024 * new_index_32902;
                int64_t binop_x_32904 = binop_x_32901 - binop_y_32903;
                int64_t new_index_32905 = squot64(binop_x_32904, (int64_t) 64);
                int64_t binop_y_32906 = (int64_t) 64 * new_index_32905;
                int64_t binop_x_32907 = binop_x_32904 - binop_y_32906;
                int64_t new_index_32908 = squot64(binop_x_32907, (int64_t) 32);
                int64_t binop_y_32909 = (int64_t) 32 * new_index_32908;
                int64_t binop_x_32910 = binop_x_32907 - binop_y_32909;
                int64_t new_index_32911 = squot64(binop_x_32910, (int64_t) 16);
                int64_t binop_y_32912 = (int64_t) 16 * new_index_32911;
                int64_t new_index_32913 = binop_x_32910 - binop_y_32912;
                int8_t defunc_0_f_res_32914 = ((int8_t *) mem_26855.mem)[new_index_32902 * (int64_t) 1024 + new_index_32905 * (int64_t) 64 + new_index_32908 * (int64_t) 32 + new_index_32911 * (int64_t) 16 + new_index_32913];
                bool binlam_res_32915 = defunc_0_f_res_32914 == y_32794;
                bool binlam_res_32916 = binlam_res_32915 && redout_32792;
                bool redout_tmp_32923 = binlam_res_32916;
                
                redout_32792 = redout_tmp_32923;
            }
            all_equal_32654 = redout_32792;
            
            int16_t i64_res_32781 = sext_i64_i16(index_primexp_32649);
            
            ((int16_t *) mem_32782)[(int64_t) 0] = i64_res_24661;
            ((int16_t *) mem_32782)[(int64_t) 1] = i64_res_28935;
            ((int16_t *) mem_32782)[(int64_t) 2] = i64_res_30136;
            ((int16_t *) mem_32782)[(int64_t) 3] = i64_res_31125;
            ((int16_t *) mem_32782)[(int64_t) 4] = i64_res_31913;
            ((int16_t *) mem_32782)[(int64_t) 5] = i64_res_32781;
            ((bool *) mem_31918.mem)[gtid_32648] = all_equal_32654;
            if ((int64_t) 12 > 0)
                memmove(mem_31919.mem + gtid_32648 * (int64_t) 6 * (int64_t) 2, mem_32782 + (int64_t) 0, (int64_t) 12);
        }
    }
    
  cleanup:
    {
        free(mem_32782);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33439_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33439_end - futhark_mc_segmap_parloop_33439_start;
        
        ctx->program->futhark_mc_segmap_parloop_33439_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33439_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33439_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_33437(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33436 *futhark_mc_task_33436 = (struct futhark_mc_task_33436 *) args;
    struct futhark_context *ctx = futhark_mc_task_33436->ctx;
    uint64_t futhark_mc_segmap_task_33437_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_33437_start = get_wall_time();
    
    int64_t arg_20181 = futhark_mc_task_33436->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33436->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33436->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33436->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33436->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33436->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33436->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33436->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_task_33436->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_task_33436->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_task_33436->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_task_33436->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_task_33436->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_task_33436->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_task_33436->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_task_33436->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_task_33436->free_index_primexp_31124;
    int16_t i64_res_31125 = futhark_mc_task_33436->free_i64_res_31125;
    bool bounds_check_31128 = futhark_mc_task_33436->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_task_33436->free_binop_x_31129;
    int64_t index_primexp_31912 = futhark_mc_task_33436->free_index_primexp_31912;
    int16_t i64_res_31913 = futhark_mc_task_33436->free_i64_res_31913;
    bool bounds_check_31916 = futhark_mc_task_33436->free_bounds_check_31916;
    int64_t binop_x_31917 = futhark_mc_task_33436->free_binop_x_31917;
    struct memblock mem_31918 = {.desc ="mem_31918", .mem =futhark_mc_task_33436->free_mem_31918, .size =0, .references =NULL};
    struct memblock mem_31919 = {.desc ="mem_31919", .mem =futhark_mc_task_33436->free_mem_31919, .size =0, .references =NULL};
    int32_t nsubtasks_32790;
    
    nsubtasks_32790 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33438 futhark_mc_segmap_parloop_struct_33438_;
    
    futhark_mc_segmap_parloop_struct_33438_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33438_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33438_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33438_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33438_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33438_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33438_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33438_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33438_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33438_.free_index_primexp_28934 = index_primexp_28934;
    futhark_mc_segmap_parloop_struct_33438_.free_i64_res_28935 = i64_res_28935;
    futhark_mc_segmap_parloop_struct_33438_.free_bounds_check_28938 = bounds_check_28938;
    futhark_mc_segmap_parloop_struct_33438_.free_binop_x_28939 = binop_x_28939;
    futhark_mc_segmap_parloop_struct_33438_.free_index_primexp_30135 = index_primexp_30135;
    futhark_mc_segmap_parloop_struct_33438_.free_i64_res_30136 = i64_res_30136;
    futhark_mc_segmap_parloop_struct_33438_.free_bounds_check_30139 = bounds_check_30139;
    futhark_mc_segmap_parloop_struct_33438_.free_binop_x_30140 = binop_x_30140;
    futhark_mc_segmap_parloop_struct_33438_.free_index_primexp_31124 = index_primexp_31124;
    futhark_mc_segmap_parloop_struct_33438_.free_i64_res_31125 = i64_res_31125;
    futhark_mc_segmap_parloop_struct_33438_.free_bounds_check_31128 = bounds_check_31128;
    futhark_mc_segmap_parloop_struct_33438_.free_binop_x_31129 = binop_x_31129;
    futhark_mc_segmap_parloop_struct_33438_.free_index_primexp_31912 = index_primexp_31912;
    futhark_mc_segmap_parloop_struct_33438_.free_i64_res_31913 = i64_res_31913;
    futhark_mc_segmap_parloop_struct_33438_.free_bounds_check_31916 = bounds_check_31916;
    futhark_mc_segmap_parloop_struct_33438_.free_binop_x_31917 = binop_x_31917;
    futhark_mc_segmap_parloop_struct_33438_.free_mem_31918 = mem_31918.mem;
    futhark_mc_segmap_parloop_struct_33438_.free_mem_31919 = mem_31919.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33439_task;
    
    futhark_mc_segmap_parloop_33439_task.name = "futhark_mc_segmap_parloop_33439";
    futhark_mc_segmap_parloop_33439_task.fn = futhark_mc_segmap_parloop_33439;
    futhark_mc_segmap_parloop_33439_task.args = &futhark_mc_segmap_parloop_struct_33438_;
    futhark_mc_segmap_parloop_33439_task.iterations = iterations;
    futhark_mc_segmap_parloop_33439_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33439_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33439_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33439_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33439_task);
    
    if (futhark_mc_segmap_parloop_33439_err != 0) {
        err = futhark_mc_segmap_parloop_33439_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33439_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33439_total_end - futhark_mc_segmap_parloop_33439_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33439_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33439_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33439_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_33437_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_33437_end - futhark_mc_segmap_task_33437_start;
        
        ctx->program->futhark_mc_segmap_task_33437_runs[tid]++;
        ctx->program->futhark_mc_segmap_task_33437_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_task_33437_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_33442 {
    struct futhark_context *ctx;
    int64_t free_arg_20181;
    int64_t free_defunc_0_f_res_24660;
    int16_t free_i64_res_24661;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    int16_t free_i64_res_28935;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    int16_t free_i64_res_30136;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    int64_t free_index_primexp_31124;
    int16_t free_i64_res_31125;
    bool free_bounds_check_31128;
    int64_t free_binop_x_31129;
    int64_t free_index_primexp_31912;
    int16_t free_i64_res_31913;
    bool free_bounds_check_31916;
    int64_t free_binop_x_31917;
    unsigned char *free_mem_31918;
    unsigned char *free_mem_31919;
};
struct futhark_mc_task_33445 {
    struct futhark_context *ctx;
    int64_t free_defunc_0_f_res_24660;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    int64_t free_index_primexp_31124;
    bool free_bounds_check_31128;
    int64_t free_binop_x_31129;
    int64_t free_index_primexp_31912;
    bool free_bounds_check_31916;
    int64_t free_binop_x_31917;
    int64_t free_index_primexp_32510;
    bool free_bounds_check_32513;
    int64_t free_binop_x_32514;
    int64_t free_flat_tid_32925;
    bool *retval_all_equal_32515;
};
struct futhark_mc_segred_stage_1_parloop_struct_33448 {
    struct futhark_context *ctx;
    int64_t free_defunc_0_f_res_24660;
    bool free_bounds_check_24664;
    int64_t free_binop_x_24665;
    unsigned char *free_mem_26375;
    unsigned char *free_mem_26377;
    unsigned char *free_mem_26855;
    int64_t free_index_primexp_28934;
    bool free_bounds_check_28938;
    int64_t free_binop_x_28939;
    int64_t free_index_primexp_30135;
    bool free_bounds_check_30139;
    int64_t free_binop_x_30140;
    int64_t free_index_primexp_31124;
    bool free_bounds_check_31128;
    int64_t free_binop_x_31129;
    int64_t free_index_primexp_31912;
    bool free_bounds_check_31916;
    int64_t free_binop_x_31917;
    int64_t free_index_primexp_32510;
    bool free_bounds_check_32513;
    int64_t free_binop_x_32514;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_33060;
};
static int futhark_mc_segred_stage_1_parloop_33449(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_33448 *futhark_mc_segred_stage_1_parloop_struct_33448 = (struct futhark_mc_segred_stage_1_parloop_struct_33448 *) args;
    struct futhark_context *ctx = futhark_mc_segred_stage_1_parloop_struct_33448->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_33449_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_33449_start = get_wall_time();
    
    int64_t defunc_0_f_res_24660 = futhark_mc_segred_stage_1_parloop_struct_33448->free_defunc_0_f_res_24660;
    bool bounds_check_24664 = futhark_mc_segred_stage_1_parloop_struct_33448->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segred_stage_1_parloop_struct_33448->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segred_stage_1_parloop_struct_33448->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segred_stage_1_parloop_struct_33448->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segred_stage_1_parloop_struct_33448->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_segred_stage_1_parloop_struct_33448->free_index_primexp_28934;
    bool bounds_check_28938 = futhark_mc_segred_stage_1_parloop_struct_33448->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_segred_stage_1_parloop_struct_33448->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_segred_stage_1_parloop_struct_33448->free_index_primexp_30135;
    bool bounds_check_30139 = futhark_mc_segred_stage_1_parloop_struct_33448->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_segred_stage_1_parloop_struct_33448->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_segred_stage_1_parloop_struct_33448->free_index_primexp_31124;
    bool bounds_check_31128 = futhark_mc_segred_stage_1_parloop_struct_33448->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_segred_stage_1_parloop_struct_33448->free_binop_x_31129;
    int64_t index_primexp_31912 = futhark_mc_segred_stage_1_parloop_struct_33448->free_index_primexp_31912;
    bool bounds_check_31916 = futhark_mc_segred_stage_1_parloop_struct_33448->free_bounds_check_31916;
    int64_t binop_x_31917 = futhark_mc_segred_stage_1_parloop_struct_33448->free_binop_x_31917;
    int64_t index_primexp_32510 = futhark_mc_segred_stage_1_parloop_struct_33448->free_index_primexp_32510;
    bool bounds_check_32513 = futhark_mc_segred_stage_1_parloop_struct_33448->free_bounds_check_32513;
    int64_t binop_x_32514 = futhark_mc_segred_stage_1_parloop_struct_33448->free_binop_x_32514;
    struct memblock reduce_stage_1_tid_res_arr_mem_33060 = {.desc ="reduce_stage_1_tid_res_arr_mem_33060", .mem =futhark_mc_segred_stage_1_parloop_struct_33448->free_reduce_stage_1_tid_res_arr_mem_33060, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t flat_tid_32925;
    
    flat_tid_32925 = subtask_id;
    {
        bool x_33062;
        bool y_33063;
        bool local_acc_33065 = 1;
        bool x_32927;
        bool y_32928;
        bool local_acc_33066 = 1;
        int64_t start_33067;
        int64_t end_33068;
        
        start_33067 = start;
        end_33068 = end;
        
        int64_t n_33069 = end_33068 - start_33067;
        
        for (int64_t SegRed_i_33070 = start_33067; SegRed_i_33070 < start_33067 + n_33069; SegRed_i_33070++) {
            int64_t gtid_32926 = SegRed_i_33070;
            int8_t x_32930 = ((int8_t *) mem_26375.mem)[gtid_32926];
            int8_t y_32931 = ((int8_t *) mem_26377.mem)[gtid_32926];
            int64_t u8_res_32932 = zext_i8_i64(x_32930);
            bool x_32933 = sle64((int64_t) 0, u8_res_32932);
            bool y_32934 = slt64(u8_res_32932, (int64_t) 16);
            bool bounds_check_32935 = x_32933 && y_32934;
            bool index_ok_32936 = bounds_check_32513 && bounds_check_32935;
            bool index_certs_32937;
            
            if (!index_ok_32936) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_32510, ", ", (long long) u8_res_32932, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_32938 = binop_x_32514 + u8_res_32932;
            int64_t new_index_32939 = squot64(binop_x_32938, (int64_t) 1024);
            int64_t binop_y_32940 = (int64_t) 1024 * new_index_32939;
            int64_t binop_x_32941 = binop_x_32938 - binop_y_32940;
            int64_t new_index_32942 = squot64(binop_x_32941, (int64_t) 64);
            int64_t binop_y_32943 = (int64_t) 64 * new_index_32942;
            int64_t binop_x_32944 = binop_x_32941 - binop_y_32943;
            int64_t new_index_32945 = squot64(binop_x_32944, (int64_t) 32);
            int64_t binop_y_32946 = (int64_t) 32 * new_index_32945;
            int64_t binop_x_32947 = binop_x_32944 - binop_y_32946;
            int64_t new_index_32948 = squot64(binop_x_32947, (int64_t) 16);
            int64_t binop_y_32949 = (int64_t) 16 * new_index_32948;
            int64_t new_index_32950 = binop_x_32947 - binop_y_32949;
            int8_t defunc_0_f_res_32951 = ((int8_t *) mem_26855.mem)[new_index_32939 * (int64_t) 1024 + new_index_32942 * (int64_t) 64 + new_index_32945 * (int64_t) 32 + new_index_32948 * (int64_t) 16 + new_index_32950];
            int64_t u8_res_32952 = zext_i8_i64(defunc_0_f_res_32951);
            bool x_32953 = sle64((int64_t) 0, u8_res_32952);
            bool y_32954 = slt64(u8_res_32952, (int64_t) 16);
            bool bounds_check_32955 = x_32953 && y_32954;
            bool index_ok_32956 = bounds_check_31916 && bounds_check_32955;
            bool index_certs_32957;
            
            if (!index_ok_32956) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_31912, ", ", (long long) u8_res_32952, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_32958 = binop_x_31917 + u8_res_32952;
            int64_t new_index_32959 = squot64(binop_x_32958, (int64_t) 1024);
            int64_t binop_y_32960 = (int64_t) 1024 * new_index_32959;
            int64_t binop_x_32961 = binop_x_32958 - binop_y_32960;
            int64_t new_index_32962 = squot64(binop_x_32961, (int64_t) 64);
            int64_t binop_y_32963 = (int64_t) 64 * new_index_32962;
            int64_t binop_x_32964 = binop_x_32961 - binop_y_32963;
            int64_t new_index_32965 = squot64(binop_x_32964, (int64_t) 32);
            int64_t binop_y_32966 = (int64_t) 32 * new_index_32965;
            int64_t binop_x_32967 = binop_x_32964 - binop_y_32966;
            int64_t new_index_32968 = squot64(binop_x_32967, (int64_t) 16);
            int64_t binop_y_32969 = (int64_t) 16 * new_index_32968;
            int64_t new_index_32970 = binop_x_32967 - binop_y_32969;
            int8_t defunc_0_f_res_32971 = ((int8_t *) mem_26855.mem)[new_index_32959 * (int64_t) 1024 + new_index_32962 * (int64_t) 64 + new_index_32965 * (int64_t) 32 + new_index_32968 * (int64_t) 16 + new_index_32970];
            int64_t u8_res_32972 = zext_i8_i64(defunc_0_f_res_32971);
            bool x_32973 = sle64((int64_t) 0, u8_res_32972);
            bool y_32974 = slt64(u8_res_32972, (int64_t) 16);
            bool bounds_check_32975 = x_32973 && y_32974;
            bool index_ok_32976 = bounds_check_31128 && bounds_check_32975;
            bool index_certs_32977;
            
            if (!index_ok_32976) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_31124, ", ", (long long) u8_res_32972, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_32978 = binop_x_31129 + u8_res_32972;
            int64_t new_index_32979 = squot64(binop_x_32978, (int64_t) 1024);
            int64_t binop_y_32980 = (int64_t) 1024 * new_index_32979;
            int64_t binop_x_32981 = binop_x_32978 - binop_y_32980;
            int64_t new_index_32982 = squot64(binop_x_32981, (int64_t) 64);
            int64_t binop_y_32983 = (int64_t) 64 * new_index_32982;
            int64_t binop_x_32984 = binop_x_32981 - binop_y_32983;
            int64_t new_index_32985 = squot64(binop_x_32984, (int64_t) 32);
            int64_t binop_y_32986 = (int64_t) 32 * new_index_32985;
            int64_t binop_x_32987 = binop_x_32984 - binop_y_32986;
            int64_t new_index_32988 = squot64(binop_x_32987, (int64_t) 16);
            int64_t binop_y_32989 = (int64_t) 16 * new_index_32988;
            int64_t new_index_32990 = binop_x_32987 - binop_y_32989;
            int8_t defunc_0_f_res_32991 = ((int8_t *) mem_26855.mem)[new_index_32979 * (int64_t) 1024 + new_index_32982 * (int64_t) 64 + new_index_32985 * (int64_t) 32 + new_index_32988 * (int64_t) 16 + new_index_32990];
            int64_t u8_res_32992 = zext_i8_i64(defunc_0_f_res_32991);
            bool x_32993 = sle64((int64_t) 0, u8_res_32992);
            bool y_32994 = slt64(u8_res_32992, (int64_t) 16);
            bool bounds_check_32995 = x_32993 && y_32994;
            bool index_ok_32996 = bounds_check_30139 && bounds_check_32995;
            bool index_certs_32997;
            
            if (!index_ok_32996) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_30135, ", ", (long long) u8_res_32992, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_32998 = binop_x_30140 + u8_res_32992;
            int64_t new_index_32999 = squot64(binop_x_32998, (int64_t) 1024);
            int64_t binop_y_33000 = (int64_t) 1024 * new_index_32999;
            int64_t binop_x_33001 = binop_x_32998 - binop_y_33000;
            int64_t new_index_33002 = squot64(binop_x_33001, (int64_t) 64);
            int64_t binop_y_33003 = (int64_t) 64 * new_index_33002;
            int64_t binop_x_33004 = binop_x_33001 - binop_y_33003;
            int64_t new_index_33005 = squot64(binop_x_33004, (int64_t) 32);
            int64_t binop_y_33006 = (int64_t) 32 * new_index_33005;
            int64_t binop_x_33007 = binop_x_33004 - binop_y_33006;
            int64_t new_index_33008 = squot64(binop_x_33007, (int64_t) 16);
            int64_t binop_y_33009 = (int64_t) 16 * new_index_33008;
            int64_t new_index_33010 = binop_x_33007 - binop_y_33009;
            int8_t defunc_0_f_res_33011 = ((int8_t *) mem_26855.mem)[new_index_32999 * (int64_t) 1024 + new_index_33002 * (int64_t) 64 + new_index_33005 * (int64_t) 32 + new_index_33008 * (int64_t) 16 + new_index_33010];
            int64_t u8_res_33012 = zext_i8_i64(defunc_0_f_res_33011);
            bool x_33013 = sle64((int64_t) 0, u8_res_33012);
            bool y_33014 = slt64(u8_res_33012, (int64_t) 16);
            bool bounds_check_33015 = x_33013 && y_33014;
            bool index_ok_33016 = bounds_check_28938 && bounds_check_33015;
            bool index_certs_33017;
            
            if (!index_ok_33016) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_28934, ", ", (long long) u8_res_33012, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_33018 = binop_x_28939 + u8_res_33012;
            int64_t new_index_33019 = squot64(binop_x_33018, (int64_t) 1024);
            int64_t binop_y_33020 = (int64_t) 1024 * new_index_33019;
            int64_t binop_x_33021 = binop_x_33018 - binop_y_33020;
            int64_t new_index_33022 = squot64(binop_x_33021, (int64_t) 64);
            int64_t binop_y_33023 = (int64_t) 64 * new_index_33022;
            int64_t binop_x_33024 = binop_x_33021 - binop_y_33023;
            int64_t new_index_33025 = squot64(binop_x_33024, (int64_t) 32);
            int64_t binop_y_33026 = (int64_t) 32 * new_index_33025;
            int64_t binop_x_33027 = binop_x_33024 - binop_y_33026;
            int64_t new_index_33028 = squot64(binop_x_33027, (int64_t) 16);
            int64_t binop_y_33029 = (int64_t) 16 * new_index_33028;
            int64_t new_index_33030 = binop_x_33027 - binop_y_33029;
            int8_t defunc_0_f_res_33031 = ((int8_t *) mem_26855.mem)[new_index_33019 * (int64_t) 1024 + new_index_33022 * (int64_t) 64 + new_index_33025 * (int64_t) 32 + new_index_33028 * (int64_t) 16 + new_index_33030];
            int64_t u8_res_33032 = zext_i8_i64(defunc_0_f_res_33031);
            bool x_33033 = sle64((int64_t) 0, u8_res_33032);
            bool y_33034 = slt64(u8_res_33032, (int64_t) 16);
            bool bounds_check_33035 = x_33033 && y_33034;
            bool index_ok_33036 = bounds_check_24664 && bounds_check_33035;
            bool index_certs_33037;
            
            if (!index_ok_33036) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_24660, ", ", (long long) u8_res_33032, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "][", (long long) (int64_t) 16, "].", "-> #0  main.fut:18:9-43\n   #1  main.fut:17:5-19:7\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_33038 = binop_x_24665 + u8_res_33032;
            int64_t new_index_33039 = squot64(binop_x_33038, (int64_t) 1024);
            int64_t binop_y_33040 = (int64_t) 1024 * new_index_33039;
            int64_t binop_x_33041 = binop_x_33038 - binop_y_33040;
            int64_t new_index_33042 = squot64(binop_x_33041, (int64_t) 64);
            int64_t binop_y_33043 = (int64_t) 64 * new_index_33042;
            int64_t binop_x_33044 = binop_x_33041 - binop_y_33043;
            int64_t new_index_33045 = squot64(binop_x_33044, (int64_t) 32);
            int64_t binop_y_33046 = (int64_t) 32 * new_index_33045;
            int64_t binop_x_33047 = binop_x_33044 - binop_y_33046;
            int64_t new_index_33048 = squot64(binop_x_33047, (int64_t) 16);
            int64_t binop_y_33049 = (int64_t) 16 * new_index_33048;
            int64_t new_index_33050 = binop_x_33047 - binop_y_33049;
            int8_t defunc_0_f_res_33051 = ((int8_t *) mem_26855.mem)[new_index_33039 * (int64_t) 1024 + new_index_33042 * (int64_t) 64 + new_index_33045 * (int64_t) 32 + new_index_33048 * (int64_t) 16 + new_index_33050];
            bool binlam_res_33052 = defunc_0_f_res_33051 == y_32931;
            
            // save map-out results
            { }
            // Load accum params
            {
                x_32927 = local_acc_33066;
            }
            // Load next params
            {
                y_32928 = binlam_res_33052;
            }
            // SegRed body
            {
                bool binlam_res_32929 = x_32927 && y_32928;
                
                local_acc_33066 = binlam_res_32929;
            }
        }
        
        int64_t uni_i_33071 = 0;
        
        {
            int64_t gtid_32926 = uni_i_33071;
            
            // Load accum params
            {
                x_33062 = local_acc_33065;
            }
            // Load next params
            {
                y_33063 = local_acc_33066;
            }
            // SegRed body
            {
                bool binlam_res_33064 = x_33062 && y_33063;
                
                local_acc_33065 = binlam_res_33064;
            }
        }
        ((bool *) reduce_stage_1_tid_res_arr_mem_33060.mem)[flat_tid_32925] = local_acc_33065;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_33449_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_33449_end - futhark_mc_segred_stage_1_parloop_33449_start;
        
        ctx->program->futhark_mc_segred_stage_1_parloop_33449_runs[tid]++;
        ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segred_stage_1_parloop_33449_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_33446(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33445 *futhark_mc_task_33445 = (struct futhark_mc_task_33445 *) args;
    struct futhark_context *ctx = futhark_mc_task_33445->ctx;
    uint64_t futhark_mc_segred_task_33446_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_33446_start = get_wall_time();
    
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33445->free_defunc_0_f_res_24660;
    bool bounds_check_24664 = futhark_mc_task_33445->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33445->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33445->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33445->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33445->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_task_33445->free_index_primexp_28934;
    bool bounds_check_28938 = futhark_mc_task_33445->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_task_33445->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_task_33445->free_index_primexp_30135;
    bool bounds_check_30139 = futhark_mc_task_33445->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_task_33445->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_task_33445->free_index_primexp_31124;
    bool bounds_check_31128 = futhark_mc_task_33445->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_task_33445->free_binop_x_31129;
    int64_t index_primexp_31912 = futhark_mc_task_33445->free_index_primexp_31912;
    bool bounds_check_31916 = futhark_mc_task_33445->free_bounds_check_31916;
    int64_t binop_x_31917 = futhark_mc_task_33445->free_binop_x_31917;
    int64_t index_primexp_32510 = futhark_mc_task_33445->free_index_primexp_32510;
    bool bounds_check_32513 = futhark_mc_task_33445->free_bounds_check_32513;
    int64_t binop_x_32514 = futhark_mc_task_33445->free_binop_x_32514;
    int64_t flat_tid_32925 = futhark_mc_task_33445->free_flat_tid_32925;
    bool all_equal_32515 = *futhark_mc_task_33445->retval_all_equal_32515;
    int64_t reduce_stage_1_tid_res_arr_mem_33060_cached_sizze_33447 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_33060 = NULL;
    int32_t nsubtasks_33059;
    
    nsubtasks_33059 = info.nsubtasks;
    if (reduce_stage_1_tid_res_arr_mem_33060_cached_sizze_33447 < nsubtasks_33059) {
        err = lexical_realloc(ctx, &reduce_stage_1_tid_res_arr_mem_33060, &reduce_stage_1_tid_res_arr_mem_33060_cached_sizze_33447, nsubtasks_33059);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    struct futhark_mc_segred_stage_1_parloop_struct_33448 futhark_mc_segred_stage_1_parloop_struct_33448_;
    
    futhark_mc_segred_stage_1_parloop_struct_33448_.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_index_primexp_28934 = index_primexp_28934;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_bounds_check_28938 = bounds_check_28938;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_binop_x_28939 = binop_x_28939;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_index_primexp_30135 = index_primexp_30135;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_bounds_check_30139 = bounds_check_30139;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_binop_x_30140 = binop_x_30140;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_index_primexp_31124 = index_primexp_31124;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_bounds_check_31128 = bounds_check_31128;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_binop_x_31129 = binop_x_31129;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_index_primexp_31912 = index_primexp_31912;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_bounds_check_31916 = bounds_check_31916;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_binop_x_31917 = binop_x_31917;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_index_primexp_32510 = index_primexp_32510;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_bounds_check_32513 = bounds_check_32513;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_binop_x_32514 = binop_x_32514;
    futhark_mc_segred_stage_1_parloop_struct_33448_.free_reduce_stage_1_tid_res_arr_mem_33060 = reduce_stage_1_tid_res_arr_mem_33060;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_33449_task;
    
    futhark_mc_segred_stage_1_parloop_33449_task.name = "futhark_mc_segred_stage_1_parloop_33449";
    futhark_mc_segred_stage_1_parloop_33449_task.fn = futhark_mc_segred_stage_1_parloop_33449;
    futhark_mc_segred_stage_1_parloop_33449_task.args = &futhark_mc_segred_stage_1_parloop_struct_33448_;
    futhark_mc_segred_stage_1_parloop_33449_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_33449_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_33449_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_33449_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_33449_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segred_stage_1_parloop_33449_task);
    
    if (futhark_mc_segred_stage_1_parloop_33449_err != 0) {
        err = futhark_mc_segred_stage_1_parloop_33449_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_33449_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_33449_total_end - futhark_mc_segred_stage_1_parloop_33449_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segred_stage_1_parloop_33449_total_iter, iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        all_equal_32515 = 1;
    }
    
    bool x_33072;
    bool y_33073;
    
    for (int32_t i_33075 = 0; i_33075 < nsubtasks_33059; i_33075++) {
        flat_tid_32925 = i_33075;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_33072 = all_equal_32515;
            }
            // load next params
            {
                y_33073 = ((bool *) reduce_stage_1_tid_res_arr_mem_33060)[flat_tid_32925];
            }
            // red body
            {
                bool binlam_res_33074 = x_33072 && y_33073;
                
                all_equal_32515 = binlam_res_33074;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_33060);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_33446_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_33446_end - futhark_mc_segred_task_33446_start;
        
        ctx->program->futhark_mc_segred_task_33446_runs[tid]++;
        ctx->program->futhark_mc_segred_task_33446_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segred_task_33446_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_33445->retval_all_equal_32515 = all_equal_32515;
    }
    return err;
}
struct futhark_mc_task_33450 {
    struct futhark_context *ctx;
    unsigned char *free_mem_31919;
    int64_t free_gtid_32509;
    unsigned char *free_mem_32645;
};
struct futhark_mc_copy_parloop_struct_33452 {
    struct futhark_context *ctx;
    unsigned char *free_mem_31919;
    int64_t free_gtid_32509;
    unsigned char *free_mem_32645;
};
static int futhark_mc_copy_parloop_33453(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33452 *futhark_mc_copy_parloop_struct_33452 = (struct futhark_mc_copy_parloop_struct_33452 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33452->ctx;
    uint64_t futhark_mc_copy_parloop_33453_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33453_start = get_wall_time();
    
    struct memblock mem_31919 = {.desc ="mem_31919", .mem =futhark_mc_copy_parloop_struct_33452->free_mem_31919, .size =0, .references =NULL};
    int64_t gtid_32509 = futhark_mc_copy_parloop_struct_33452->free_gtid_32509;
    struct memblock mem_32645 = {.desc ="mem_32645", .mem =futhark_mc_copy_parloop_struct_33452->free_mem_32645, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33076;
        int64_t end_33077;
        
        start_33076 = start;
        end_33077 = end;
        
        int64_t n_33078 = end_33077 - start_33076;
        
        for (int64_t copy_i_33079 = start_33076; copy_i_33079 < start_33076 + n_33078; copy_i_33079++) {
            int64_t slice_33081 = (int64_t) 6;
            int64_t i_33080 = copy_i_33079;
            int64_t remnant_33082 = copy_i_33079 - i_33080;
            int16_t tmp_33083 = ((int16_t *) mem_32645.mem)[i_33080];
            
            ((int16_t *) mem_31919.mem)[gtid_32509 * (int64_t) 6 + i_33080] = tmp_33083;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33453_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33453_end - futhark_mc_copy_parloop_33453_start;
        
        ctx->program->futhark_mc_copy_parloop_33453_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33453_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33453_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33084_task_33451(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33450 *futhark_mc_task_33450 = (struct futhark_mc_task_33450 *) args;
    struct futhark_context *ctx = futhark_mc_task_33450->ctx;
    uint64_t futhark_mc_copy_33084_task_33451_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33084_task_33451_start = get_wall_time();
    
    struct memblock mem_31919 = {.desc ="mem_31919", .mem =futhark_mc_task_33450->free_mem_31919, .size =0, .references =NULL};
    int64_t gtid_32509 = futhark_mc_task_33450->free_gtid_32509;
    struct memblock mem_32645 = {.desc ="mem_32645", .mem =futhark_mc_task_33450->free_mem_32645, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33452 futhark_mc_copy_parloop_struct_33452_;
    
    futhark_mc_copy_parloop_struct_33452_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33452_.free_mem_31919 = mem_31919.mem;
    futhark_mc_copy_parloop_struct_33452_.free_gtid_32509 = gtid_32509;
    futhark_mc_copy_parloop_struct_33452_.free_mem_32645 = mem_32645.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33453_task;
    
    futhark_mc_copy_parloop_33453_task.name = "futhark_mc_copy_parloop_33453";
    futhark_mc_copy_parloop_33453_task.fn = futhark_mc_copy_parloop_33453;
    futhark_mc_copy_parloop_33453_task.args = &futhark_mc_copy_parloop_struct_33452_;
    futhark_mc_copy_parloop_33453_task.iterations = iterations;
    futhark_mc_copy_parloop_33453_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33453_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33453_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33453_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33453_task);
    
    if (futhark_mc_copy_parloop_33453_err != 0) {
        err = futhark_mc_copy_parloop_33453_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33453_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33453_total_end - futhark_mc_copy_parloop_33453_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33453_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33453_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33453_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33084_task_33451_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33084_task_33451_end - futhark_mc_copy_33084_task_33451_start;
        
        ctx->program->futhark_mc_copy_33084_task_33451_runs[tid]++;
        ctx->program->futhark_mc_copy_33084_task_33451_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33084_task_33451_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33443(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33442 *futhark_mc_segmap_parloop_struct_33442 = (struct futhark_mc_segmap_parloop_struct_33442 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33442->ctx;
    uint64_t futhark_mc_segmap_parloop_33443_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33443_start = get_wall_time();
    
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33442->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33442->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33442->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33442->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33442->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33442->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33442->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33442->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_segmap_parloop_struct_33442->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_segmap_parloop_struct_33442->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_segmap_parloop_struct_33442->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_segmap_parloop_struct_33442->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_segmap_parloop_struct_33442->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_segmap_parloop_struct_33442->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_segmap_parloop_struct_33442->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_segmap_parloop_struct_33442->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_segmap_parloop_struct_33442->free_index_primexp_31124;
    int16_t i64_res_31125 = futhark_mc_segmap_parloop_struct_33442->free_i64_res_31125;
    bool bounds_check_31128 = futhark_mc_segmap_parloop_struct_33442->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_segmap_parloop_struct_33442->free_binop_x_31129;
    int64_t index_primexp_31912 = futhark_mc_segmap_parloop_struct_33442->free_index_primexp_31912;
    int16_t i64_res_31913 = futhark_mc_segmap_parloop_struct_33442->free_i64_res_31913;
    bool bounds_check_31916 = futhark_mc_segmap_parloop_struct_33442->free_bounds_check_31916;
    int64_t binop_x_31917 = futhark_mc_segmap_parloop_struct_33442->free_binop_x_31917;
    struct memblock mem_31918 = {.desc ="mem_31918", .mem =futhark_mc_segmap_parloop_struct_33442->free_mem_31918, .size =0, .references =NULL};
    struct memblock mem_31919 = {.desc ="mem_31919", .mem =futhark_mc_segmap_parloop_struct_33442->free_mem_31919, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_32645_cached_sizze_33444 = 0;
    unsigned char *mem_32645 = NULL;
    int64_t flat_tid_32508;
    
    flat_tid_32508 = subtask_id;
    {
        int64_t start_33053;
        int64_t end_33054;
        
        start_33053 = start;
        end_33054 = end;
        
        int64_t n_33055 = end_33054 - start_33053;
        
        if (mem_32645_cached_sizze_33444 < (int64_t) 12) {
            err = lexical_realloc(ctx, &mem_32645, &mem_32645_cached_sizze_33444, (int64_t) 12);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_33056 = start_33053; SegMap_i_33056 < start_33053 + n_33055; SegMap_i_33056++) {
            int64_t slice_33057 = (int64_t) 64;
            int64_t gtid_32509 = SegMap_i_33056;
            int64_t remnant_33058 = SegMap_i_33056 - gtid_32509;
            int64_t index_primexp_32510 = add64(arg_20181, gtid_32509);
            bool x_32511 = sle64((int64_t) 0, index_primexp_32510);
            bool y_32512 = slt64(index_primexp_32510, (int64_t) 1024);
            bool bounds_check_32513 = x_32511 && y_32512;
            int64_t binop_x_32514 = (int64_t) 16 * index_primexp_32510;
            bool all_equal_32515;
            int64_t flat_tid_32925 = (int64_t) 0;
            
            all_equal_32515 = 0;
            
            struct futhark_mc_task_33445 futhark_mc_task_33445_;
            
            futhark_mc_task_33445_.ctx = ctx;
            futhark_mc_task_33445_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
            futhark_mc_task_33445_.free_bounds_check_24664 = bounds_check_24664;
            futhark_mc_task_33445_.free_binop_x_24665 = binop_x_24665;
            futhark_mc_task_33445_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33445_.free_mem_26377 = mem_26377.mem;
            futhark_mc_task_33445_.free_mem_26855 = mem_26855.mem;
            futhark_mc_task_33445_.free_index_primexp_28934 = index_primexp_28934;
            futhark_mc_task_33445_.free_bounds_check_28938 = bounds_check_28938;
            futhark_mc_task_33445_.free_binop_x_28939 = binop_x_28939;
            futhark_mc_task_33445_.free_index_primexp_30135 = index_primexp_30135;
            futhark_mc_task_33445_.free_bounds_check_30139 = bounds_check_30139;
            futhark_mc_task_33445_.free_binop_x_30140 = binop_x_30140;
            futhark_mc_task_33445_.free_index_primexp_31124 = index_primexp_31124;
            futhark_mc_task_33445_.free_bounds_check_31128 = bounds_check_31128;
            futhark_mc_task_33445_.free_binop_x_31129 = binop_x_31129;
            futhark_mc_task_33445_.free_index_primexp_31912 = index_primexp_31912;
            futhark_mc_task_33445_.free_bounds_check_31916 = bounds_check_31916;
            futhark_mc_task_33445_.free_binop_x_31917 = binop_x_31917;
            futhark_mc_task_33445_.free_index_primexp_32510 = index_primexp_32510;
            futhark_mc_task_33445_.free_bounds_check_32513 = bounds_check_32513;
            futhark_mc_task_33445_.free_binop_x_32514 = binop_x_32514;
            futhark_mc_task_33445_.free_flat_tid_32925 = flat_tid_32925;
            futhark_mc_task_33445_.retval_all_equal_32515 = (bool *) &all_equal_32515;
            #if ISPC
            futhark_mc_task_33445_.retval_all_equal_32515 += programIndex;
            #endif
            
            struct scheduler_segop futhark_mc_task_33445_task;
            
            futhark_mc_task_33445_task.args = &futhark_mc_task_33445_;
            futhark_mc_task_33445_task.top_level_fn = futhark_mc_segred_task_33446;
            futhark_mc_task_33445_task.name = "futhark_mc_segred_task_33446";
            futhark_mc_task_33445_task.iterations = (int64_t) 16;
            futhark_mc_task_33445_task.task_time = &ctx->program->futhark_mc_segred_task_33446_total_time;
            futhark_mc_task_33445_task.task_iter = &ctx->program->futhark_mc_segred_task_33446_total_iter;
            futhark_mc_task_33445_task.sched = STATIC;
            futhark_mc_task_33445_task.nested_fn = NULL;
            
            int futhark_mc_segred_task_33446_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33445_task);
            
            if (futhark_mc_segred_task_33446_err != 0) {
                ;
                err = futhark_mc_segred_task_33446_err;
                goto cleanup;
            }
            
            int16_t i64_res_32644 = sext_i64_i16(index_primexp_32510);
            
            ((int16_t *) mem_32645)[(int64_t) 0] = i64_res_24661;
            ((int16_t *) mem_32645)[(int64_t) 1] = i64_res_28935;
            ((int16_t *) mem_32645)[(int64_t) 2] = i64_res_30136;
            ((int16_t *) mem_32645)[(int64_t) 3] = i64_res_31125;
            ((int16_t *) mem_32645)[(int64_t) 4] = i64_res_31913;
            ((int16_t *) mem_32645)[(int64_t) 5] = i64_res_32644;
            ((bool *) mem_31918.mem)[gtid_32509] = all_equal_32515;
            
            int64_t iterations_33085 = (int64_t) 6;
            struct futhark_mc_task_33450 futhark_mc_task_33450_;
            
            futhark_mc_task_33450_.ctx = ctx;
            futhark_mc_task_33450_.free_mem_31919 = mem_31919.mem;
            futhark_mc_task_33450_.free_gtid_32509 = gtid_32509;
            futhark_mc_task_33450_.free_mem_32645 = mem_32645;
            
            struct scheduler_segop futhark_mc_task_33450_task;
            
            futhark_mc_task_33450_task.args = &futhark_mc_task_33450_;
            futhark_mc_task_33450_task.top_level_fn = futhark_mc_copy_33084_task_33451;
            futhark_mc_task_33450_task.name = "futhark_mc_copy_33084_task_33451";
            futhark_mc_task_33450_task.iterations = iterations_33085;
            futhark_mc_task_33450_task.task_time = &ctx->program->futhark_mc_copy_33084_task_33451_total_time;
            futhark_mc_task_33450_task.task_iter = &ctx->program->futhark_mc_copy_33084_task_33451_total_iter;
            futhark_mc_task_33450_task.sched = STATIC;
            futhark_mc_task_33450_task.nested_fn = NULL;
            
            int futhark_mc_copy_33084_task_33451_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33450_task);
            
            if (futhark_mc_copy_33084_task_33451_err != 0) {
                ;
                err = futhark_mc_copy_33084_task_33451_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_32645);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33443_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33443_end - futhark_mc_segmap_parloop_33443_start;
        
        ctx->program->futhark_mc_segmap_parloop_33443_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33443_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33443_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33441(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33436 *futhark_mc_task_33436 = (struct futhark_mc_task_33436 *) args;
    struct futhark_context *ctx = futhark_mc_task_33436->ctx;
    uint64_t futhark_mc_segmap_nested_task_33441_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33441_start = get_wall_time();
    
    int64_t arg_20181 = futhark_mc_task_33436->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33436->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33436->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33436->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33436->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33436->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33436->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33436->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_task_33436->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_task_33436->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_task_33436->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_task_33436->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_task_33436->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_task_33436->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_task_33436->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_task_33436->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_task_33436->free_index_primexp_31124;
    int16_t i64_res_31125 = futhark_mc_task_33436->free_i64_res_31125;
    bool bounds_check_31128 = futhark_mc_task_33436->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_task_33436->free_binop_x_31129;
    int64_t index_primexp_31912 = futhark_mc_task_33436->free_index_primexp_31912;
    int16_t i64_res_31913 = futhark_mc_task_33436->free_i64_res_31913;
    bool bounds_check_31916 = futhark_mc_task_33436->free_bounds_check_31916;
    int64_t binop_x_31917 = futhark_mc_task_33436->free_binop_x_31917;
    struct memblock mem_31918 = {.desc ="mem_31918", .mem =futhark_mc_task_33436->free_mem_31918, .size =0, .references =NULL};
    struct memblock mem_31919 = {.desc ="mem_31919", .mem =futhark_mc_task_33436->free_mem_31919, .size =0, .references =NULL};
    int32_t nsubtasks_32924;
    
    nsubtasks_32924 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33442 futhark_mc_segmap_parloop_struct_33442_;
    
    futhark_mc_segmap_parloop_struct_33442_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33442_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33442_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33442_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33442_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33442_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33442_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33442_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33442_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33442_.free_index_primexp_28934 = index_primexp_28934;
    futhark_mc_segmap_parloop_struct_33442_.free_i64_res_28935 = i64_res_28935;
    futhark_mc_segmap_parloop_struct_33442_.free_bounds_check_28938 = bounds_check_28938;
    futhark_mc_segmap_parloop_struct_33442_.free_binop_x_28939 = binop_x_28939;
    futhark_mc_segmap_parloop_struct_33442_.free_index_primexp_30135 = index_primexp_30135;
    futhark_mc_segmap_parloop_struct_33442_.free_i64_res_30136 = i64_res_30136;
    futhark_mc_segmap_parloop_struct_33442_.free_bounds_check_30139 = bounds_check_30139;
    futhark_mc_segmap_parloop_struct_33442_.free_binop_x_30140 = binop_x_30140;
    futhark_mc_segmap_parloop_struct_33442_.free_index_primexp_31124 = index_primexp_31124;
    futhark_mc_segmap_parloop_struct_33442_.free_i64_res_31125 = i64_res_31125;
    futhark_mc_segmap_parloop_struct_33442_.free_bounds_check_31128 = bounds_check_31128;
    futhark_mc_segmap_parloop_struct_33442_.free_binop_x_31129 = binop_x_31129;
    futhark_mc_segmap_parloop_struct_33442_.free_index_primexp_31912 = index_primexp_31912;
    futhark_mc_segmap_parloop_struct_33442_.free_i64_res_31913 = i64_res_31913;
    futhark_mc_segmap_parloop_struct_33442_.free_bounds_check_31916 = bounds_check_31916;
    futhark_mc_segmap_parloop_struct_33442_.free_binop_x_31917 = binop_x_31917;
    futhark_mc_segmap_parloop_struct_33442_.free_mem_31918 = mem_31918.mem;
    futhark_mc_segmap_parloop_struct_33442_.free_mem_31919 = mem_31919.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33443_task;
    
    futhark_mc_segmap_parloop_33443_task.name = "futhark_mc_segmap_parloop_33443";
    futhark_mc_segmap_parloop_33443_task.fn = futhark_mc_segmap_parloop_33443;
    futhark_mc_segmap_parloop_33443_task.args = &futhark_mc_segmap_parloop_struct_33442_;
    futhark_mc_segmap_parloop_33443_task.iterations = iterations;
    futhark_mc_segmap_parloop_33443_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33443_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33443_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33443_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33443_task);
    
    if (futhark_mc_segmap_parloop_33443_err != 0) {
        err = futhark_mc_segmap_parloop_33443_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33443_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33443_total_end - futhark_mc_segmap_parloop_33443_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33443_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33443_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33443_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33441_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33441_end - futhark_mc_segmap_nested_task_33441_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33441_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33441_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33441_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33454 {
    struct futhark_context *ctx;
    unsigned char *free_mem_31130;
    int64_t free_gtid_31911;
    unsigned char *free_mem_31918;
};
struct futhark_mc_copy_parloop_struct_33456 {
    struct futhark_context *ctx;
    unsigned char *free_mem_31130;
    int64_t free_gtid_31911;
    unsigned char *free_mem_31918;
};
static int futhark_mc_copy_parloop_33457(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33456 *futhark_mc_copy_parloop_struct_33456 = (struct futhark_mc_copy_parloop_struct_33456 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33456->ctx;
    uint64_t futhark_mc_copy_parloop_33457_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33457_start = get_wall_time();
    
    struct memblock mem_31130 = {.desc ="mem_31130", .mem =futhark_mc_copy_parloop_struct_33456->free_mem_31130, .size =0, .references =NULL};
    int64_t gtid_31911 = futhark_mc_copy_parloop_struct_33456->free_gtid_31911;
    struct memblock mem_31918 = {.desc ="mem_31918", .mem =futhark_mc_copy_parloop_struct_33456->free_mem_31918, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33086;
        int64_t end_33087;
        
        start_33086 = start;
        end_33087 = end;
        
        int64_t n_33088 = end_33087 - start_33086;
        
        for (int64_t copy_i_33089 = start_33086; copy_i_33089 < start_33086 + n_33088; copy_i_33089++) {
            int64_t slice_33091 = (int64_t) 64;
            int64_t i_33090 = copy_i_33089;
            int64_t remnant_33092 = copy_i_33089 - i_33090;
            bool tmp_33093 = ((bool *) mem_31918.mem)[i_33090];
            
            ((bool *) mem_31130.mem)[gtid_31911 * (int64_t) 64 + i_33090] = tmp_33093;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33457_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33457_end - futhark_mc_copy_parloop_33457_start;
        
        ctx->program->futhark_mc_copy_parloop_33457_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33457_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33457_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33094_task_33455(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33454 *futhark_mc_task_33454 = (struct futhark_mc_task_33454 *) args;
    struct futhark_context *ctx = futhark_mc_task_33454->ctx;
    uint64_t futhark_mc_copy_33094_task_33455_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33094_task_33455_start = get_wall_time();
    
    struct memblock mem_31130 = {.desc ="mem_31130", .mem =futhark_mc_task_33454->free_mem_31130, .size =0, .references =NULL};
    int64_t gtid_31911 = futhark_mc_task_33454->free_gtid_31911;
    struct memblock mem_31918 = {.desc ="mem_31918", .mem =futhark_mc_task_33454->free_mem_31918, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33456 futhark_mc_copy_parloop_struct_33456_;
    
    futhark_mc_copy_parloop_struct_33456_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33456_.free_mem_31130 = mem_31130.mem;
    futhark_mc_copy_parloop_struct_33456_.free_gtid_31911 = gtid_31911;
    futhark_mc_copy_parloop_struct_33456_.free_mem_31918 = mem_31918.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33457_task;
    
    futhark_mc_copy_parloop_33457_task.name = "futhark_mc_copy_parloop_33457";
    futhark_mc_copy_parloop_33457_task.fn = futhark_mc_copy_parloop_33457;
    futhark_mc_copy_parloop_33457_task.args = &futhark_mc_copy_parloop_struct_33456_;
    futhark_mc_copy_parloop_33457_task.iterations = iterations;
    futhark_mc_copy_parloop_33457_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33457_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33457_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33457_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33457_task);
    
    if (futhark_mc_copy_parloop_33457_err != 0) {
        err = futhark_mc_copy_parloop_33457_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33457_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33457_total_end - futhark_mc_copy_parloop_33457_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33457_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33457_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33457_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33094_task_33455_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33094_task_33455_end - futhark_mc_copy_33094_task_33455_start;
        
        ctx->program->futhark_mc_copy_33094_task_33455_runs[tid]++;
        ctx->program->futhark_mc_copy_33094_task_33455_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33094_task_33455_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33458 {
    struct futhark_context *ctx;
    unsigned char *free_mem_31131;
    int64_t free_gtid_31911;
    unsigned char *free_mem_31919;
};
struct futhark_mc_copy_parloop_struct_33460 {
    struct futhark_context *ctx;
    unsigned char *free_mem_31131;
    int64_t free_gtid_31911;
    unsigned char *free_mem_31919;
};
static int futhark_mc_copy_parloop_33461(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33460 *futhark_mc_copy_parloop_struct_33460 = (struct futhark_mc_copy_parloop_struct_33460 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33460->ctx;
    uint64_t futhark_mc_copy_parloop_33461_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33461_start = get_wall_time();
    
    struct memblock mem_31131 = {.desc ="mem_31131", .mem =futhark_mc_copy_parloop_struct_33460->free_mem_31131, .size =0, .references =NULL};
    int64_t gtid_31911 = futhark_mc_copy_parloop_struct_33460->free_gtid_31911;
    struct memblock mem_31919 = {.desc ="mem_31919", .mem =futhark_mc_copy_parloop_struct_33460->free_mem_31919, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33096;
        int64_t end_33097;
        
        start_33096 = start;
        end_33097 = end;
        
        int64_t n_33098 = end_33097 - start_33096;
        
        for (int64_t copy_i_33099 = start_33096; copy_i_33099 < start_33096 + n_33098; copy_i_33099++) {
            int64_t slice_33102 = (int64_t) 6;
            int64_t slice_33103 = (int64_t) 64 * slice_33102;
            int64_t i_33100 = squot64(copy_i_33099, slice_33102);
            int64_t remnant_33104 = copy_i_33099 - i_33100 * slice_33102;
            int64_t i_33101 = remnant_33104;
            int64_t remnant_33105 = remnant_33104 - i_33101;
            int16_t tmp_33106 = ((int16_t *) mem_31919.mem)[i_33100 * (int64_t) 6 + i_33101];
            
            ((int16_t *) mem_31131.mem)[gtid_31911 * (int64_t) 384 + (i_33100 * (int64_t) 6 + i_33101)] = tmp_33106;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33461_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33461_end - futhark_mc_copy_parloop_33461_start;
        
        ctx->program->futhark_mc_copy_parloop_33461_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33461_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33461_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33107_task_33459(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33458 *futhark_mc_task_33458 = (struct futhark_mc_task_33458 *) args;
    struct futhark_context *ctx = futhark_mc_task_33458->ctx;
    uint64_t futhark_mc_copy_33107_task_33459_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33107_task_33459_start = get_wall_time();
    
    struct memblock mem_31131 = {.desc ="mem_31131", .mem =futhark_mc_task_33458->free_mem_31131, .size =0, .references =NULL};
    int64_t gtid_31911 = futhark_mc_task_33458->free_gtid_31911;
    struct memblock mem_31919 = {.desc ="mem_31919", .mem =futhark_mc_task_33458->free_mem_31919, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33460 futhark_mc_copy_parloop_struct_33460_;
    
    futhark_mc_copy_parloop_struct_33460_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33460_.free_mem_31131 = mem_31131.mem;
    futhark_mc_copy_parloop_struct_33460_.free_gtid_31911 = gtid_31911;
    futhark_mc_copy_parloop_struct_33460_.free_mem_31919 = mem_31919.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33461_task;
    
    futhark_mc_copy_parloop_33461_task.name = "futhark_mc_copy_parloop_33461";
    futhark_mc_copy_parloop_33461_task.fn = futhark_mc_copy_parloop_33461;
    futhark_mc_copy_parloop_33461_task.args = &futhark_mc_copy_parloop_struct_33460_;
    futhark_mc_copy_parloop_33461_task.iterations = iterations;
    futhark_mc_copy_parloop_33461_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33461_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33461_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33461_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33461_task);
    
    if (futhark_mc_copy_parloop_33461_err != 0) {
        err = futhark_mc_copy_parloop_33461_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33461_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33461_total_end - futhark_mc_copy_parloop_33461_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33461_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33461_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33461_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33107_task_33459_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33107_task_33459_end - futhark_mc_copy_33107_task_33459_start;
        
        ctx->program->futhark_mc_copy_33107_task_33459_runs[tid]++;
        ctx->program->futhark_mc_copy_33107_task_33459_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33107_task_33459_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33433(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33432 *futhark_mc_segmap_parloop_struct_33432 = (struct futhark_mc_segmap_parloop_struct_33432 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33432->ctx;
    uint64_t futhark_mc_segmap_parloop_33433_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33433_start = get_wall_time();
    
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33432->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33432->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33432->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33432->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33432->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33432->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33432->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33432->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33432->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_segmap_parloop_struct_33432->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_segmap_parloop_struct_33432->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_segmap_parloop_struct_33432->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_segmap_parloop_struct_33432->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_segmap_parloop_struct_33432->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_segmap_parloop_struct_33432->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_segmap_parloop_struct_33432->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_segmap_parloop_struct_33432->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_segmap_parloop_struct_33432->free_index_primexp_31124;
    int16_t i64_res_31125 = futhark_mc_segmap_parloop_struct_33432->free_i64_res_31125;
    bool bounds_check_31128 = futhark_mc_segmap_parloop_struct_33432->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_segmap_parloop_struct_33432->free_binop_x_31129;
    struct memblock mem_31130 = {.desc ="mem_31130", .mem =futhark_mc_segmap_parloop_struct_33432->free_mem_31130, .size =0, .references =NULL};
    struct memblock mem_31131 = {.desc ="mem_31131", .mem =futhark_mc_segmap_parloop_struct_33432->free_mem_31131, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_31918_cached_sizze_33434 = 0;
    unsigned char *mem_31918 = NULL;
    int64_t mem_31919_cached_sizze_33435 = 0;
    unsigned char *mem_31919 = NULL;
    int64_t flat_tid_31910;
    
    flat_tid_31910 = subtask_id;
    {
        int64_t start_32784;
        int64_t end_32785;
        
        start_32784 = start;
        end_32785 = end;
        
        int64_t n_32786 = end_32785 - start_32784;
        
        if (mem_31918_cached_sizze_33434 < (int64_t) 64) {
            err = lexical_realloc(ctx, &mem_31918, &mem_31918_cached_sizze_33434, (int64_t) 64);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_31919_cached_sizze_33435 < (int64_t) 768) {
            err = lexical_realloc(ctx, &mem_31919, &mem_31919_cached_sizze_33435, (int64_t) 768);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_32787 = start_32784; SegMap_i_32787 < start_32784 + n_32786; SegMap_i_32787++) {
            int64_t slice_32788 = (int64_t) 64;
            int64_t gtid_31911 = SegMap_i_32787;
            int64_t remnant_32789 = SegMap_i_32787 - gtid_31911;
            int64_t index_primexp_31912 = add64(arg_20177, gtid_31911);
            int16_t i64_res_31913 = sext_i64_i16(index_primexp_31912);
            bool x_31914 = sle64((int64_t) 0, index_primexp_31912);
            bool y_31915 = slt64(index_primexp_31912, (int64_t) 1024);
            bool bounds_check_31916 = x_31914 && y_31915;
            int64_t binop_x_31917 = (int64_t) 16 * index_primexp_31912;
            int64_t flat_tid_32647 = (int64_t) 0;
            int64_t flat_tid_32508 = (int64_t) 0;
            struct futhark_mc_task_33436 futhark_mc_task_33436_;
            
            futhark_mc_task_33436_.ctx = ctx;
            futhark_mc_task_33436_.free_arg_20181 = arg_20181;
            futhark_mc_task_33436_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
            futhark_mc_task_33436_.free_i64_res_24661 = i64_res_24661;
            futhark_mc_task_33436_.free_bounds_check_24664 = bounds_check_24664;
            futhark_mc_task_33436_.free_binop_x_24665 = binop_x_24665;
            futhark_mc_task_33436_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33436_.free_mem_26377 = mem_26377.mem;
            futhark_mc_task_33436_.free_mem_26855 = mem_26855.mem;
            futhark_mc_task_33436_.free_index_primexp_28934 = index_primexp_28934;
            futhark_mc_task_33436_.free_i64_res_28935 = i64_res_28935;
            futhark_mc_task_33436_.free_bounds_check_28938 = bounds_check_28938;
            futhark_mc_task_33436_.free_binop_x_28939 = binop_x_28939;
            futhark_mc_task_33436_.free_index_primexp_30135 = index_primexp_30135;
            futhark_mc_task_33436_.free_i64_res_30136 = i64_res_30136;
            futhark_mc_task_33436_.free_bounds_check_30139 = bounds_check_30139;
            futhark_mc_task_33436_.free_binop_x_30140 = binop_x_30140;
            futhark_mc_task_33436_.free_index_primexp_31124 = index_primexp_31124;
            futhark_mc_task_33436_.free_i64_res_31125 = i64_res_31125;
            futhark_mc_task_33436_.free_bounds_check_31128 = bounds_check_31128;
            futhark_mc_task_33436_.free_binop_x_31129 = binop_x_31129;
            futhark_mc_task_33436_.free_index_primexp_31912 = index_primexp_31912;
            futhark_mc_task_33436_.free_i64_res_31913 = i64_res_31913;
            futhark_mc_task_33436_.free_bounds_check_31916 = bounds_check_31916;
            futhark_mc_task_33436_.free_binop_x_31917 = binop_x_31917;
            futhark_mc_task_33436_.free_mem_31918 = mem_31918;
            futhark_mc_task_33436_.free_mem_31919 = mem_31919;
            
            struct scheduler_segop futhark_mc_task_33436_task;
            
            futhark_mc_task_33436_task.args = &futhark_mc_task_33436_;
            futhark_mc_task_33436_task.top_level_fn = futhark_mc_segmap_task_33437;
            futhark_mc_task_33436_task.name = "futhark_mc_segmap_task_33437";
            futhark_mc_task_33436_task.iterations = (int64_t) 64;
            futhark_mc_task_33436_task.task_time = &ctx->program->futhark_mc_segmap_task_33437_total_time;
            futhark_mc_task_33436_task.task_iter = &ctx->program->futhark_mc_segmap_task_33437_total_iter;
            futhark_mc_task_33436_task.sched = STATIC;
            futhark_mc_task_33436_task.nested_fn = futhark_mc_segmap_nested_task_33441;
            
            int futhark_mc_segmap_task_33437_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33436_task);
            
            if (futhark_mc_segmap_task_33437_err != 0) {
                ;
                err = futhark_mc_segmap_task_33437_err;
                goto cleanup;
            }
            
            int64_t iterations_33095 = (int64_t) 64;
            struct futhark_mc_task_33454 futhark_mc_task_33454_;
            
            futhark_mc_task_33454_.ctx = ctx;
            futhark_mc_task_33454_.free_mem_31130 = mem_31130.mem;
            futhark_mc_task_33454_.free_gtid_31911 = gtid_31911;
            futhark_mc_task_33454_.free_mem_31918 = mem_31918;
            
            struct scheduler_segop futhark_mc_task_33454_task;
            
            futhark_mc_task_33454_task.args = &futhark_mc_task_33454_;
            futhark_mc_task_33454_task.top_level_fn = futhark_mc_copy_33094_task_33455;
            futhark_mc_task_33454_task.name = "futhark_mc_copy_33094_task_33455";
            futhark_mc_task_33454_task.iterations = iterations_33095;
            futhark_mc_task_33454_task.task_time = &ctx->program->futhark_mc_copy_33094_task_33455_total_time;
            futhark_mc_task_33454_task.task_iter = &ctx->program->futhark_mc_copy_33094_task_33455_total_iter;
            futhark_mc_task_33454_task.sched = STATIC;
            futhark_mc_task_33454_task.nested_fn = NULL;
            
            int futhark_mc_copy_33094_task_33455_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33454_task);
            
            if (futhark_mc_copy_33094_task_33455_err != 0) {
                ;
                err = futhark_mc_copy_33094_task_33455_err;
                goto cleanup;
            }
            
            int64_t iterations_33108 = (int64_t) 384;
            struct futhark_mc_task_33458 futhark_mc_task_33458_;
            
            futhark_mc_task_33458_.ctx = ctx;
            futhark_mc_task_33458_.free_mem_31131 = mem_31131.mem;
            futhark_mc_task_33458_.free_gtid_31911 = gtid_31911;
            futhark_mc_task_33458_.free_mem_31919 = mem_31919;
            
            struct scheduler_segop futhark_mc_task_33458_task;
            
            futhark_mc_task_33458_task.args = &futhark_mc_task_33458_;
            futhark_mc_task_33458_task.top_level_fn = futhark_mc_copy_33107_task_33459;
            futhark_mc_task_33458_task.name = "futhark_mc_copy_33107_task_33459";
            futhark_mc_task_33458_task.iterations = iterations_33108;
            futhark_mc_task_33458_task.task_time = &ctx->program->futhark_mc_copy_33107_task_33459_total_time;
            futhark_mc_task_33458_task.task_iter = &ctx->program->futhark_mc_copy_33107_task_33459_total_iter;
            futhark_mc_task_33458_task.sched = STATIC;
            futhark_mc_task_33458_task.nested_fn = NULL;
            
            int futhark_mc_copy_33107_task_33459_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33458_task);
            
            if (futhark_mc_copy_33107_task_33459_err != 0) {
                ;
                err = futhark_mc_copy_33107_task_33459_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_31918);
        free(mem_31919);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33433_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33433_end - futhark_mc_segmap_parloop_33433_start;
        
        ctx->program->futhark_mc_segmap_parloop_33433_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33433_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33433_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33431(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33424 *futhark_mc_task_33424 = (struct futhark_mc_task_33424 *) args;
    struct futhark_context *ctx = futhark_mc_task_33424->ctx;
    uint64_t futhark_mc_segmap_nested_task_33431_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33431_start = get_wall_time();
    
    int64_t arg_20177 = futhark_mc_task_33424->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33424->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33424->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33424->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33424->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33424->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33424->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33424->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33424->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_task_33424->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_task_33424->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_task_33424->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_task_33424->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_task_33424->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_task_33424->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_task_33424->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_task_33424->free_binop_x_30140;
    int64_t index_primexp_31124 = futhark_mc_task_33424->free_index_primexp_31124;
    int16_t i64_res_31125 = futhark_mc_task_33424->free_i64_res_31125;
    bool bounds_check_31128 = futhark_mc_task_33424->free_bounds_check_31128;
    int64_t binop_x_31129 = futhark_mc_task_33424->free_binop_x_31129;
    struct memblock mem_31130 = {.desc ="mem_31130", .mem =futhark_mc_task_33424->free_mem_31130, .size =0, .references =NULL};
    struct memblock mem_31131 = {.desc ="mem_31131", .mem =futhark_mc_task_33424->free_mem_31131, .size =0, .references =NULL};
    int32_t nsubtasks_32507;
    
    nsubtasks_32507 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33432 futhark_mc_segmap_parloop_struct_33432_;
    
    futhark_mc_segmap_parloop_struct_33432_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33432_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33432_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33432_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33432_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33432_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33432_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33432_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33432_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33432_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33432_.free_index_primexp_28934 = index_primexp_28934;
    futhark_mc_segmap_parloop_struct_33432_.free_i64_res_28935 = i64_res_28935;
    futhark_mc_segmap_parloop_struct_33432_.free_bounds_check_28938 = bounds_check_28938;
    futhark_mc_segmap_parloop_struct_33432_.free_binop_x_28939 = binop_x_28939;
    futhark_mc_segmap_parloop_struct_33432_.free_index_primexp_30135 = index_primexp_30135;
    futhark_mc_segmap_parloop_struct_33432_.free_i64_res_30136 = i64_res_30136;
    futhark_mc_segmap_parloop_struct_33432_.free_bounds_check_30139 = bounds_check_30139;
    futhark_mc_segmap_parloop_struct_33432_.free_binop_x_30140 = binop_x_30140;
    futhark_mc_segmap_parloop_struct_33432_.free_index_primexp_31124 = index_primexp_31124;
    futhark_mc_segmap_parloop_struct_33432_.free_i64_res_31125 = i64_res_31125;
    futhark_mc_segmap_parloop_struct_33432_.free_bounds_check_31128 = bounds_check_31128;
    futhark_mc_segmap_parloop_struct_33432_.free_binop_x_31129 = binop_x_31129;
    futhark_mc_segmap_parloop_struct_33432_.free_mem_31130 = mem_31130.mem;
    futhark_mc_segmap_parloop_struct_33432_.free_mem_31131 = mem_31131.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33433_task;
    
    futhark_mc_segmap_parloop_33433_task.name = "futhark_mc_segmap_parloop_33433";
    futhark_mc_segmap_parloop_33433_task.fn = futhark_mc_segmap_parloop_33433;
    futhark_mc_segmap_parloop_33433_task.args = &futhark_mc_segmap_parloop_struct_33432_;
    futhark_mc_segmap_parloop_33433_task.iterations = iterations;
    futhark_mc_segmap_parloop_33433_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33433_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33433_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33433_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33433_task);
    
    if (futhark_mc_segmap_parloop_33433_err != 0) {
        err = futhark_mc_segmap_parloop_33433_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33433_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33433_total_end - futhark_mc_segmap_parloop_33433_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33433_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33433_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33433_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33431_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33431_end - futhark_mc_segmap_nested_task_33431_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33431_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33431_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33431_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33462 {
    struct futhark_context *ctx;
    unsigned char *free_mem_30141;
    int64_t free_gtid_31123;
    unsigned char *free_mem_31130;
};
struct futhark_mc_copy_parloop_struct_33464 {
    struct futhark_context *ctx;
    unsigned char *free_mem_30141;
    int64_t free_gtid_31123;
    unsigned char *free_mem_31130;
};
static int futhark_mc_copy_parloop_33465(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33464 *futhark_mc_copy_parloop_struct_33464 = (struct futhark_mc_copy_parloop_struct_33464 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33464->ctx;
    uint64_t futhark_mc_copy_parloop_33465_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33465_start = get_wall_time();
    
    struct memblock mem_30141 = {.desc ="mem_30141", .mem =futhark_mc_copy_parloop_struct_33464->free_mem_30141, .size =0, .references =NULL};
    int64_t gtid_31123 = futhark_mc_copy_parloop_struct_33464->free_gtid_31123;
    struct memblock mem_31130 = {.desc ="mem_31130", .mem =futhark_mc_copy_parloop_struct_33464->free_mem_31130, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33109;
        int64_t end_33110;
        
        start_33109 = start;
        end_33110 = end;
        
        int64_t n_33111 = end_33110 - start_33109;
        
        for (int64_t copy_i_33112 = start_33109; copy_i_33112 < start_33109 + n_33111; copy_i_33112++) {
            int64_t slice_33115 = (int64_t) 64;
            int64_t slice_33116 = (int64_t) 64 * slice_33115;
            int64_t i_33113 = squot64(copy_i_33112, slice_33115);
            int64_t remnant_33117 = copy_i_33112 - i_33113 * slice_33115;
            int64_t i_33114 = remnant_33117;
            int64_t remnant_33118 = remnant_33117 - i_33114;
            bool tmp_33119 = ((bool *) mem_31130.mem)[i_33113 * (int64_t) 64 + i_33114];
            
            ((bool *) mem_30141.mem)[gtid_31123 * (int64_t) 4096 + (i_33113 * (int64_t) 64 + i_33114)] = tmp_33119;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33465_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33465_end - futhark_mc_copy_parloop_33465_start;
        
        ctx->program->futhark_mc_copy_parloop_33465_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33465_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33465_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33120_task_33463(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33462 *futhark_mc_task_33462 = (struct futhark_mc_task_33462 *) args;
    struct futhark_context *ctx = futhark_mc_task_33462->ctx;
    uint64_t futhark_mc_copy_33120_task_33463_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33120_task_33463_start = get_wall_time();
    
    struct memblock mem_30141 = {.desc ="mem_30141", .mem =futhark_mc_task_33462->free_mem_30141, .size =0, .references =NULL};
    int64_t gtid_31123 = futhark_mc_task_33462->free_gtid_31123;
    struct memblock mem_31130 = {.desc ="mem_31130", .mem =futhark_mc_task_33462->free_mem_31130, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33464 futhark_mc_copy_parloop_struct_33464_;
    
    futhark_mc_copy_parloop_struct_33464_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33464_.free_mem_30141 = mem_30141.mem;
    futhark_mc_copy_parloop_struct_33464_.free_gtid_31123 = gtid_31123;
    futhark_mc_copy_parloop_struct_33464_.free_mem_31130 = mem_31130.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33465_task;
    
    futhark_mc_copy_parloop_33465_task.name = "futhark_mc_copy_parloop_33465";
    futhark_mc_copy_parloop_33465_task.fn = futhark_mc_copy_parloop_33465;
    futhark_mc_copy_parloop_33465_task.args = &futhark_mc_copy_parloop_struct_33464_;
    futhark_mc_copy_parloop_33465_task.iterations = iterations;
    futhark_mc_copy_parloop_33465_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33465_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33465_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33465_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33465_task);
    
    if (futhark_mc_copy_parloop_33465_err != 0) {
        err = futhark_mc_copy_parloop_33465_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33465_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33465_total_end - futhark_mc_copy_parloop_33465_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33465_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33465_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33465_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33120_task_33463_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33120_task_33463_end - futhark_mc_copy_33120_task_33463_start;
        
        ctx->program->futhark_mc_copy_33120_task_33463_runs[tid]++;
        ctx->program->futhark_mc_copy_33120_task_33463_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33120_task_33463_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33466 {
    struct futhark_context *ctx;
    unsigned char *free_mem_30142;
    int64_t free_gtid_31123;
    unsigned char *free_mem_31131;
};
struct futhark_mc_copy_parloop_struct_33468 {
    struct futhark_context *ctx;
    unsigned char *free_mem_30142;
    int64_t free_gtid_31123;
    unsigned char *free_mem_31131;
};
static int futhark_mc_copy_parloop_33469(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33468 *futhark_mc_copy_parloop_struct_33468 = (struct futhark_mc_copy_parloop_struct_33468 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33468->ctx;
    uint64_t futhark_mc_copy_parloop_33469_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33469_start = get_wall_time();
    
    struct memblock mem_30142 = {.desc ="mem_30142", .mem =futhark_mc_copy_parloop_struct_33468->free_mem_30142, .size =0, .references =NULL};
    int64_t gtid_31123 = futhark_mc_copy_parloop_struct_33468->free_gtid_31123;
    struct memblock mem_31131 = {.desc ="mem_31131", .mem =futhark_mc_copy_parloop_struct_33468->free_mem_31131, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33122;
        int64_t end_33123;
        
        start_33122 = start;
        end_33123 = end;
        
        int64_t n_33124 = end_33123 - start_33122;
        
        for (int64_t copy_i_33125 = start_33122; copy_i_33125 < start_33122 + n_33124; copy_i_33125++) {
            int64_t slice_33129 = (int64_t) 6;
            int64_t slice_33130 = (int64_t) 64 * slice_33129;
            int64_t slice_33131 = (int64_t) 64 * slice_33130;
            int64_t i_33126 = squot64(copy_i_33125, slice_33130);
            int64_t remnant_33132 = copy_i_33125 - i_33126 * slice_33130;
            int64_t i_33127 = squot64(remnant_33132, slice_33129);
            int64_t remnant_33133 = remnant_33132 - i_33127 * slice_33129;
            int64_t i_33128 = remnant_33133;
            int64_t remnant_33134 = remnant_33133 - i_33128;
            int16_t tmp_33135 = ((int16_t *) mem_31131.mem)[i_33126 * (int64_t) 384 + i_33127 * (int64_t) 6 + i_33128];
            
            ((int16_t *) mem_30142.mem)[gtid_31123 * (int64_t) 24576 + (i_33126 * (int64_t) 384 + i_33127 * (int64_t) 6 + i_33128)] = tmp_33135;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33469_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33469_end - futhark_mc_copy_parloop_33469_start;
        
        ctx->program->futhark_mc_copy_parloop_33469_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33469_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33469_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33136_task_33467(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33466 *futhark_mc_task_33466 = (struct futhark_mc_task_33466 *) args;
    struct futhark_context *ctx = futhark_mc_task_33466->ctx;
    uint64_t futhark_mc_copy_33136_task_33467_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33136_task_33467_start = get_wall_time();
    
    struct memblock mem_30142 = {.desc ="mem_30142", .mem =futhark_mc_task_33466->free_mem_30142, .size =0, .references =NULL};
    int64_t gtid_31123 = futhark_mc_task_33466->free_gtid_31123;
    struct memblock mem_31131 = {.desc ="mem_31131", .mem =futhark_mc_task_33466->free_mem_31131, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33468 futhark_mc_copy_parloop_struct_33468_;
    
    futhark_mc_copy_parloop_struct_33468_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33468_.free_mem_30142 = mem_30142.mem;
    futhark_mc_copy_parloop_struct_33468_.free_gtid_31123 = gtid_31123;
    futhark_mc_copy_parloop_struct_33468_.free_mem_31131 = mem_31131.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33469_task;
    
    futhark_mc_copy_parloop_33469_task.name = "futhark_mc_copy_parloop_33469";
    futhark_mc_copy_parloop_33469_task.fn = futhark_mc_copy_parloop_33469;
    futhark_mc_copy_parloop_33469_task.args = &futhark_mc_copy_parloop_struct_33468_;
    futhark_mc_copy_parloop_33469_task.iterations = iterations;
    futhark_mc_copy_parloop_33469_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33469_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33469_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33469_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33469_task);
    
    if (futhark_mc_copy_parloop_33469_err != 0) {
        err = futhark_mc_copy_parloop_33469_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33469_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33469_total_end - futhark_mc_copy_parloop_33469_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33469_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33469_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33469_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33136_task_33467_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33136_task_33467_end - futhark_mc_copy_33136_task_33467_start;
        
        ctx->program->futhark_mc_copy_33136_task_33467_runs[tid]++;
        ctx->program->futhark_mc_copy_33136_task_33467_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33136_task_33467_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33421(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33420 *futhark_mc_segmap_parloop_struct_33420 = (struct futhark_mc_segmap_parloop_struct_33420 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33420->ctx;
    uint64_t futhark_mc_segmap_parloop_33421_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33421_start = get_wall_time();
    
    int64_t arg_20173 = futhark_mc_segmap_parloop_struct_33420->free_arg_20173;
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33420->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33420->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33420->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33420->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33420->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33420->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33420->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33420->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33420->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_segmap_parloop_struct_33420->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_segmap_parloop_struct_33420->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_segmap_parloop_struct_33420->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_segmap_parloop_struct_33420->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_segmap_parloop_struct_33420->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_segmap_parloop_struct_33420->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_segmap_parloop_struct_33420->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_segmap_parloop_struct_33420->free_binop_x_30140;
    struct memblock mem_30141 = {.desc ="mem_30141", .mem =futhark_mc_segmap_parloop_struct_33420->free_mem_30141, .size =0, .references =NULL};
    struct memblock mem_30142 = {.desc ="mem_30142", .mem =futhark_mc_segmap_parloop_struct_33420->free_mem_30142, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_31130_cached_sizze_33422 = 0;
    unsigned char *mem_31130 = NULL;
    int64_t mem_31131_cached_sizze_33423 = 0;
    unsigned char *mem_31131 = NULL;
    int64_t flat_tid_31122;
    
    flat_tid_31122 = subtask_id;
    {
        int64_t start_32352;
        int64_t end_32353;
        
        start_32352 = start;
        end_32353 = end;
        
        int64_t n_32354 = end_32353 - start_32352;
        
        if (mem_31130_cached_sizze_33422 < (int64_t) 4096) {
            err = lexical_realloc(ctx, &mem_31130, &mem_31130_cached_sizze_33422, (int64_t) 4096);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_31131_cached_sizze_33423 < (int64_t) 49152) {
            err = lexical_realloc(ctx, &mem_31131, &mem_31131_cached_sizze_33423, (int64_t) 49152);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_32355 = start_32352; SegMap_i_32355 < start_32352 + n_32354; SegMap_i_32355++) {
            int64_t slice_32356 = (int64_t) 64;
            int64_t gtid_31123 = SegMap_i_32355;
            int64_t remnant_32357 = SegMap_i_32355 - gtid_31123;
            int64_t index_primexp_31124 = add64(arg_20173, gtid_31123);
            int16_t i64_res_31125 = sext_i64_i16(index_primexp_31124);
            bool x_31126 = sle64((int64_t) 0, index_primexp_31124);
            bool y_31127 = slt64(index_primexp_31124, (int64_t) 1024);
            bool bounds_check_31128 = x_31126 && y_31127;
            int64_t binop_x_31129 = (int64_t) 16 * index_primexp_31124;
            int64_t flat_tid_32198 = (int64_t) 0;
            int64_t flat_tid_31910 = (int64_t) 0;
            struct futhark_mc_task_33424 futhark_mc_task_33424_;
            
            futhark_mc_task_33424_.ctx = ctx;
            futhark_mc_task_33424_.free_arg_20177 = arg_20177;
            futhark_mc_task_33424_.free_arg_20181 = arg_20181;
            futhark_mc_task_33424_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
            futhark_mc_task_33424_.free_i64_res_24661 = i64_res_24661;
            futhark_mc_task_33424_.free_bounds_check_24664 = bounds_check_24664;
            futhark_mc_task_33424_.free_binop_x_24665 = binop_x_24665;
            futhark_mc_task_33424_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33424_.free_mem_26377 = mem_26377.mem;
            futhark_mc_task_33424_.free_mem_26855 = mem_26855.mem;
            futhark_mc_task_33424_.free_index_primexp_28934 = index_primexp_28934;
            futhark_mc_task_33424_.free_i64_res_28935 = i64_res_28935;
            futhark_mc_task_33424_.free_bounds_check_28938 = bounds_check_28938;
            futhark_mc_task_33424_.free_binop_x_28939 = binop_x_28939;
            futhark_mc_task_33424_.free_index_primexp_30135 = index_primexp_30135;
            futhark_mc_task_33424_.free_i64_res_30136 = i64_res_30136;
            futhark_mc_task_33424_.free_bounds_check_30139 = bounds_check_30139;
            futhark_mc_task_33424_.free_binop_x_30140 = binop_x_30140;
            futhark_mc_task_33424_.free_index_primexp_31124 = index_primexp_31124;
            futhark_mc_task_33424_.free_i64_res_31125 = i64_res_31125;
            futhark_mc_task_33424_.free_bounds_check_31128 = bounds_check_31128;
            futhark_mc_task_33424_.free_binop_x_31129 = binop_x_31129;
            futhark_mc_task_33424_.free_mem_31130 = mem_31130;
            futhark_mc_task_33424_.free_mem_31131 = mem_31131;
            
            struct scheduler_segop futhark_mc_task_33424_task;
            
            futhark_mc_task_33424_task.args = &futhark_mc_task_33424_;
            futhark_mc_task_33424_task.top_level_fn = futhark_mc_segmap_task_33425;
            futhark_mc_task_33424_task.name = "futhark_mc_segmap_task_33425";
            futhark_mc_task_33424_task.iterations = (int64_t) 64;
            futhark_mc_task_33424_task.task_time = &ctx->program->futhark_mc_segmap_task_33425_total_time;
            futhark_mc_task_33424_task.task_iter = &ctx->program->futhark_mc_segmap_task_33425_total_iter;
            futhark_mc_task_33424_task.sched = STATIC;
            futhark_mc_task_33424_task.nested_fn = futhark_mc_segmap_nested_task_33431;
            
            int futhark_mc_segmap_task_33425_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33424_task);
            
            if (futhark_mc_segmap_task_33425_err != 0) {
                ;
                err = futhark_mc_segmap_task_33425_err;
                goto cleanup;
            }
            
            int64_t iterations_33121 = (int64_t) 4096;
            struct futhark_mc_task_33462 futhark_mc_task_33462_;
            
            futhark_mc_task_33462_.ctx = ctx;
            futhark_mc_task_33462_.free_mem_30141 = mem_30141.mem;
            futhark_mc_task_33462_.free_gtid_31123 = gtid_31123;
            futhark_mc_task_33462_.free_mem_31130 = mem_31130;
            
            struct scheduler_segop futhark_mc_task_33462_task;
            
            futhark_mc_task_33462_task.args = &futhark_mc_task_33462_;
            futhark_mc_task_33462_task.top_level_fn = futhark_mc_copy_33120_task_33463;
            futhark_mc_task_33462_task.name = "futhark_mc_copy_33120_task_33463";
            futhark_mc_task_33462_task.iterations = iterations_33121;
            futhark_mc_task_33462_task.task_time = &ctx->program->futhark_mc_copy_33120_task_33463_total_time;
            futhark_mc_task_33462_task.task_iter = &ctx->program->futhark_mc_copy_33120_task_33463_total_iter;
            futhark_mc_task_33462_task.sched = STATIC;
            futhark_mc_task_33462_task.nested_fn = NULL;
            
            int futhark_mc_copy_33120_task_33463_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33462_task);
            
            if (futhark_mc_copy_33120_task_33463_err != 0) {
                ;
                err = futhark_mc_copy_33120_task_33463_err;
                goto cleanup;
            }
            
            int64_t iterations_33137 = (int64_t) 24576;
            struct futhark_mc_task_33466 futhark_mc_task_33466_;
            
            futhark_mc_task_33466_.ctx = ctx;
            futhark_mc_task_33466_.free_mem_30142 = mem_30142.mem;
            futhark_mc_task_33466_.free_gtid_31123 = gtid_31123;
            futhark_mc_task_33466_.free_mem_31131 = mem_31131;
            
            struct scheduler_segop futhark_mc_task_33466_task;
            
            futhark_mc_task_33466_task.args = &futhark_mc_task_33466_;
            futhark_mc_task_33466_task.top_level_fn = futhark_mc_copy_33136_task_33467;
            futhark_mc_task_33466_task.name = "futhark_mc_copy_33136_task_33467";
            futhark_mc_task_33466_task.iterations = iterations_33137;
            futhark_mc_task_33466_task.task_time = &ctx->program->futhark_mc_copy_33136_task_33467_total_time;
            futhark_mc_task_33466_task.task_iter = &ctx->program->futhark_mc_copy_33136_task_33467_total_iter;
            futhark_mc_task_33466_task.sched = STATIC;
            futhark_mc_task_33466_task.nested_fn = NULL;
            
            int futhark_mc_copy_33136_task_33467_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33466_task);
            
            if (futhark_mc_copy_33136_task_33467_err != 0) {
                ;
                err = futhark_mc_copy_33136_task_33467_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_31130);
        free(mem_31131);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33421_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33421_end - futhark_mc_segmap_parloop_33421_start;
        
        ctx->program->futhark_mc_segmap_parloop_33421_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33421_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33421_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33419(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33412 *futhark_mc_task_33412 = (struct futhark_mc_task_33412 *) args;
    struct futhark_context *ctx = futhark_mc_task_33412->ctx;
    uint64_t futhark_mc_segmap_nested_task_33419_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33419_start = get_wall_time();
    
    int64_t arg_20173 = futhark_mc_task_33412->free_arg_20173;
    int64_t arg_20177 = futhark_mc_task_33412->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33412->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33412->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33412->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33412->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33412->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33412->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33412->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33412->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_task_33412->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_task_33412->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_task_33412->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_task_33412->free_binop_x_28939;
    int64_t index_primexp_30135 = futhark_mc_task_33412->free_index_primexp_30135;
    int16_t i64_res_30136 = futhark_mc_task_33412->free_i64_res_30136;
    bool bounds_check_30139 = futhark_mc_task_33412->free_bounds_check_30139;
    int64_t binop_x_30140 = futhark_mc_task_33412->free_binop_x_30140;
    struct memblock mem_30141 = {.desc ="mem_30141", .mem =futhark_mc_task_33412->free_mem_30141, .size =0, .references =NULL};
    struct memblock mem_30142 = {.desc ="mem_30142", .mem =futhark_mc_task_33412->free_mem_30142, .size =0, .references =NULL};
    int32_t nsubtasks_31909;
    
    nsubtasks_31909 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33420 futhark_mc_segmap_parloop_struct_33420_;
    
    futhark_mc_segmap_parloop_struct_33420_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33420_.free_arg_20173 = arg_20173;
    futhark_mc_segmap_parloop_struct_33420_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33420_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33420_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33420_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33420_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33420_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33420_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33420_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33420_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33420_.free_index_primexp_28934 = index_primexp_28934;
    futhark_mc_segmap_parloop_struct_33420_.free_i64_res_28935 = i64_res_28935;
    futhark_mc_segmap_parloop_struct_33420_.free_bounds_check_28938 = bounds_check_28938;
    futhark_mc_segmap_parloop_struct_33420_.free_binop_x_28939 = binop_x_28939;
    futhark_mc_segmap_parloop_struct_33420_.free_index_primexp_30135 = index_primexp_30135;
    futhark_mc_segmap_parloop_struct_33420_.free_i64_res_30136 = i64_res_30136;
    futhark_mc_segmap_parloop_struct_33420_.free_bounds_check_30139 = bounds_check_30139;
    futhark_mc_segmap_parloop_struct_33420_.free_binop_x_30140 = binop_x_30140;
    futhark_mc_segmap_parloop_struct_33420_.free_mem_30141 = mem_30141.mem;
    futhark_mc_segmap_parloop_struct_33420_.free_mem_30142 = mem_30142.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33421_task;
    
    futhark_mc_segmap_parloop_33421_task.name = "futhark_mc_segmap_parloop_33421";
    futhark_mc_segmap_parloop_33421_task.fn = futhark_mc_segmap_parloop_33421;
    futhark_mc_segmap_parloop_33421_task.args = &futhark_mc_segmap_parloop_struct_33420_;
    futhark_mc_segmap_parloop_33421_task.iterations = iterations;
    futhark_mc_segmap_parloop_33421_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33421_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33421_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33421_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33421_task);
    
    if (futhark_mc_segmap_parloop_33421_err != 0) {
        err = futhark_mc_segmap_parloop_33421_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33421_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33421_total_end - futhark_mc_segmap_parloop_33421_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33421_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33421_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33421_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33419_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33419_end - futhark_mc_segmap_nested_task_33419_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33419_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33419_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33419_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33470 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28940;
    int64_t free_gtid_30134;
    unsigned char *free_mem_30141;
};
struct futhark_mc_copy_parloop_struct_33472 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28940;
    int64_t free_gtid_30134;
    unsigned char *free_mem_30141;
};
static int futhark_mc_copy_parloop_33473(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33472 *futhark_mc_copy_parloop_struct_33472 = (struct futhark_mc_copy_parloop_struct_33472 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33472->ctx;
    uint64_t futhark_mc_copy_parloop_33473_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33473_start = get_wall_time();
    
    struct memblock mem_28940 = {.desc ="mem_28940", .mem =futhark_mc_copy_parloop_struct_33472->free_mem_28940, .size =0, .references =NULL};
    int64_t gtid_30134 = futhark_mc_copy_parloop_struct_33472->free_gtid_30134;
    struct memblock mem_30141 = {.desc ="mem_30141", .mem =futhark_mc_copy_parloop_struct_33472->free_mem_30141, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33138;
        int64_t end_33139;
        
        start_33138 = start;
        end_33139 = end;
        
        int64_t n_33140 = end_33139 - start_33138;
        
        for (int64_t copy_i_33141 = start_33138; copy_i_33141 < start_33138 + n_33140; copy_i_33141++) {
            int64_t slice_33145 = (int64_t) 64;
            int64_t slice_33146 = (int64_t) 64 * slice_33145;
            int64_t slice_33147 = (int64_t) 64 * slice_33146;
            int64_t i_33142 = squot64(copy_i_33141, slice_33146);
            int64_t remnant_33148 = copy_i_33141 - i_33142 * slice_33146;
            int64_t i_33143 = squot64(remnant_33148, slice_33145);
            int64_t remnant_33149 = remnant_33148 - i_33143 * slice_33145;
            int64_t i_33144 = remnant_33149;
            int64_t remnant_33150 = remnant_33149 - i_33144;
            bool tmp_33151 = ((bool *) mem_30141.mem)[i_33142 * (int64_t) 4096 + i_33143 * (int64_t) 64 + i_33144];
            
            ((bool *) mem_28940.mem)[gtid_30134 * (int64_t) 262144 + (i_33142 * (int64_t) 4096 + i_33143 * (int64_t) 64 + i_33144)] = tmp_33151;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33473_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33473_end - futhark_mc_copy_parloop_33473_start;
        
        ctx->program->futhark_mc_copy_parloop_33473_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33473_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33473_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33152_task_33471(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33470 *futhark_mc_task_33470 = (struct futhark_mc_task_33470 *) args;
    struct futhark_context *ctx = futhark_mc_task_33470->ctx;
    uint64_t futhark_mc_copy_33152_task_33471_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33152_task_33471_start = get_wall_time();
    
    struct memblock mem_28940 = {.desc ="mem_28940", .mem =futhark_mc_task_33470->free_mem_28940, .size =0, .references =NULL};
    int64_t gtid_30134 = futhark_mc_task_33470->free_gtid_30134;
    struct memblock mem_30141 = {.desc ="mem_30141", .mem =futhark_mc_task_33470->free_mem_30141, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33472 futhark_mc_copy_parloop_struct_33472_;
    
    futhark_mc_copy_parloop_struct_33472_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33472_.free_mem_28940 = mem_28940.mem;
    futhark_mc_copy_parloop_struct_33472_.free_gtid_30134 = gtid_30134;
    futhark_mc_copy_parloop_struct_33472_.free_mem_30141 = mem_30141.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33473_task;
    
    futhark_mc_copy_parloop_33473_task.name = "futhark_mc_copy_parloop_33473";
    futhark_mc_copy_parloop_33473_task.fn = futhark_mc_copy_parloop_33473;
    futhark_mc_copy_parloop_33473_task.args = &futhark_mc_copy_parloop_struct_33472_;
    futhark_mc_copy_parloop_33473_task.iterations = iterations;
    futhark_mc_copy_parloop_33473_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33473_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33473_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33473_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33473_task);
    
    if (futhark_mc_copy_parloop_33473_err != 0) {
        err = futhark_mc_copy_parloop_33473_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33473_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33473_total_end - futhark_mc_copy_parloop_33473_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33473_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33473_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33473_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33152_task_33471_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33152_task_33471_end - futhark_mc_copy_33152_task_33471_start;
        
        ctx->program->futhark_mc_copy_33152_task_33471_runs[tid]++;
        ctx->program->futhark_mc_copy_33152_task_33471_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33152_task_33471_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33474 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28941;
    int64_t free_gtid_30134;
    unsigned char *free_mem_30142;
};
struct futhark_mc_copy_parloop_struct_33476 {
    struct futhark_context *ctx;
    unsigned char *free_mem_28941;
    int64_t free_gtid_30134;
    unsigned char *free_mem_30142;
};
static int futhark_mc_copy_parloop_33477(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33476 *futhark_mc_copy_parloop_struct_33476 = (struct futhark_mc_copy_parloop_struct_33476 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33476->ctx;
    uint64_t futhark_mc_copy_parloop_33477_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33477_start = get_wall_time();
    
    struct memblock mem_28941 = {.desc ="mem_28941", .mem =futhark_mc_copy_parloop_struct_33476->free_mem_28941, .size =0, .references =NULL};
    int64_t gtid_30134 = futhark_mc_copy_parloop_struct_33476->free_gtid_30134;
    struct memblock mem_30142 = {.desc ="mem_30142", .mem =futhark_mc_copy_parloop_struct_33476->free_mem_30142, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33154;
        int64_t end_33155;
        
        start_33154 = start;
        end_33155 = end;
        
        int64_t n_33156 = end_33155 - start_33154;
        
        for (int64_t copy_i_33157 = start_33154; copy_i_33157 < start_33154 + n_33156; copy_i_33157++) {
            int64_t slice_33162 = (int64_t) 6;
            int64_t slice_33163 = (int64_t) 64 * slice_33162;
            int64_t slice_33164 = (int64_t) 64 * slice_33163;
            int64_t slice_33165 = (int64_t) 64 * slice_33164;
            int64_t i_33158 = squot64(copy_i_33157, slice_33164);
            int64_t remnant_33166 = copy_i_33157 - i_33158 * slice_33164;
            int64_t i_33159 = squot64(remnant_33166, slice_33163);
            int64_t remnant_33167 = remnant_33166 - i_33159 * slice_33163;
            int64_t i_33160 = squot64(remnant_33167, slice_33162);
            int64_t remnant_33168 = remnant_33167 - i_33160 * slice_33162;
            int64_t i_33161 = remnant_33168;
            int64_t remnant_33169 = remnant_33168 - i_33161;
            int16_t tmp_33170 = ((int16_t *) mem_30142.mem)[i_33158 * (int64_t) 24576 + i_33159 * (int64_t) 384 + i_33160 * (int64_t) 6 + i_33161];
            
            ((int16_t *) mem_28941.mem)[gtid_30134 * (int64_t) 1572864 + (i_33158 * (int64_t) 24576 + i_33159 * (int64_t) 384 + i_33160 * (int64_t) 6 + i_33161)] = tmp_33170;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33477_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33477_end - futhark_mc_copy_parloop_33477_start;
        
        ctx->program->futhark_mc_copy_parloop_33477_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33477_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33477_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33171_task_33475(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33474 *futhark_mc_task_33474 = (struct futhark_mc_task_33474 *) args;
    struct futhark_context *ctx = futhark_mc_task_33474->ctx;
    uint64_t futhark_mc_copy_33171_task_33475_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33171_task_33475_start = get_wall_time();
    
    struct memblock mem_28941 = {.desc ="mem_28941", .mem =futhark_mc_task_33474->free_mem_28941, .size =0, .references =NULL};
    int64_t gtid_30134 = futhark_mc_task_33474->free_gtid_30134;
    struct memblock mem_30142 = {.desc ="mem_30142", .mem =futhark_mc_task_33474->free_mem_30142, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33476 futhark_mc_copy_parloop_struct_33476_;
    
    futhark_mc_copy_parloop_struct_33476_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33476_.free_mem_28941 = mem_28941.mem;
    futhark_mc_copy_parloop_struct_33476_.free_gtid_30134 = gtid_30134;
    futhark_mc_copy_parloop_struct_33476_.free_mem_30142 = mem_30142.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33477_task;
    
    futhark_mc_copy_parloop_33477_task.name = "futhark_mc_copy_parloop_33477";
    futhark_mc_copy_parloop_33477_task.fn = futhark_mc_copy_parloop_33477;
    futhark_mc_copy_parloop_33477_task.args = &futhark_mc_copy_parloop_struct_33476_;
    futhark_mc_copy_parloop_33477_task.iterations = iterations;
    futhark_mc_copy_parloop_33477_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33477_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33477_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33477_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33477_task);
    
    if (futhark_mc_copy_parloop_33477_err != 0) {
        err = futhark_mc_copy_parloop_33477_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33477_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33477_total_end - futhark_mc_copy_parloop_33477_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33477_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33477_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33477_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33171_task_33475_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33171_task_33475_end - futhark_mc_copy_33171_task_33475_start;
        
        ctx->program->futhark_mc_copy_33171_task_33475_runs[tid]++;
        ctx->program->futhark_mc_copy_33171_task_33475_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33171_task_33475_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33409(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33408 *futhark_mc_segmap_parloop_struct_33408 = (struct futhark_mc_segmap_parloop_struct_33408 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33408->ctx;
    uint64_t futhark_mc_segmap_parloop_33409_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33409_start = get_wall_time();
    
    int64_t arg_20169 = futhark_mc_segmap_parloop_struct_33408->free_arg_20169;
    int64_t arg_20173 = futhark_mc_segmap_parloop_struct_33408->free_arg_20173;
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33408->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33408->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33408->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33408->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33408->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33408->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33408->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33408->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33408->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_segmap_parloop_struct_33408->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_segmap_parloop_struct_33408->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_segmap_parloop_struct_33408->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_segmap_parloop_struct_33408->free_binop_x_28939;
    struct memblock mem_28940 = {.desc ="mem_28940", .mem =futhark_mc_segmap_parloop_struct_33408->free_mem_28940, .size =0, .references =NULL};
    struct memblock mem_28941 = {.desc ="mem_28941", .mem =futhark_mc_segmap_parloop_struct_33408->free_mem_28941, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_30141_cached_sizze_33410 = 0;
    unsigned char *mem_30141 = NULL;
    int64_t mem_30142_cached_sizze_33411 = 0;
    unsigned char *mem_30142 = NULL;
    int64_t flat_tid_30133;
    
    flat_tid_30133 = subtask_id;
    {
        int64_t start_31741;
        int64_t end_31742;
        
        start_31741 = start;
        end_31742 = end;
        
        int64_t n_31743 = end_31742 - start_31741;
        
        if (mem_30141_cached_sizze_33410 < (int64_t) 262144) {
            err = lexical_realloc(ctx, &mem_30141, &mem_30141_cached_sizze_33410, (int64_t) 262144);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_30142_cached_sizze_33411 < (int64_t) 3145728) {
            err = lexical_realloc(ctx, &mem_30142, &mem_30142_cached_sizze_33411, (int64_t) 3145728);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_31744 = start_31741; SegMap_i_31744 < start_31741 + n_31743; SegMap_i_31744++) {
            int64_t slice_31745 = (int64_t) 64;
            int64_t gtid_30134 = SegMap_i_31744;
            int64_t remnant_31746 = SegMap_i_31744 - gtid_30134;
            int64_t index_primexp_30135 = add64(arg_20169, gtid_30134);
            int16_t i64_res_30136 = sext_i64_i16(index_primexp_30135);
            bool x_30137 = sle64((int64_t) 0, index_primexp_30135);
            bool y_30138 = slt64(index_primexp_30135, (int64_t) 1024);
            bool bounds_check_30139 = x_30137 && y_30138;
            int64_t binop_x_30140 = (int64_t) 16 * index_primexp_30135;
            int64_t flat_tid_31576 = (int64_t) 0;
            int64_t flat_tid_31122 = (int64_t) 0;
            struct futhark_mc_task_33412 futhark_mc_task_33412_;
            
            futhark_mc_task_33412_.ctx = ctx;
            futhark_mc_task_33412_.free_arg_20173 = arg_20173;
            futhark_mc_task_33412_.free_arg_20177 = arg_20177;
            futhark_mc_task_33412_.free_arg_20181 = arg_20181;
            futhark_mc_task_33412_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
            futhark_mc_task_33412_.free_i64_res_24661 = i64_res_24661;
            futhark_mc_task_33412_.free_bounds_check_24664 = bounds_check_24664;
            futhark_mc_task_33412_.free_binop_x_24665 = binop_x_24665;
            futhark_mc_task_33412_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33412_.free_mem_26377 = mem_26377.mem;
            futhark_mc_task_33412_.free_mem_26855 = mem_26855.mem;
            futhark_mc_task_33412_.free_index_primexp_28934 = index_primexp_28934;
            futhark_mc_task_33412_.free_i64_res_28935 = i64_res_28935;
            futhark_mc_task_33412_.free_bounds_check_28938 = bounds_check_28938;
            futhark_mc_task_33412_.free_binop_x_28939 = binop_x_28939;
            futhark_mc_task_33412_.free_index_primexp_30135 = index_primexp_30135;
            futhark_mc_task_33412_.free_i64_res_30136 = i64_res_30136;
            futhark_mc_task_33412_.free_bounds_check_30139 = bounds_check_30139;
            futhark_mc_task_33412_.free_binop_x_30140 = binop_x_30140;
            futhark_mc_task_33412_.free_mem_30141 = mem_30141;
            futhark_mc_task_33412_.free_mem_30142 = mem_30142;
            
            struct scheduler_segop futhark_mc_task_33412_task;
            
            futhark_mc_task_33412_task.args = &futhark_mc_task_33412_;
            futhark_mc_task_33412_task.top_level_fn = futhark_mc_segmap_task_33413;
            futhark_mc_task_33412_task.name = "futhark_mc_segmap_task_33413";
            futhark_mc_task_33412_task.iterations = (int64_t) 64;
            futhark_mc_task_33412_task.task_time = &ctx->program->futhark_mc_segmap_task_33413_total_time;
            futhark_mc_task_33412_task.task_iter = &ctx->program->futhark_mc_segmap_task_33413_total_iter;
            futhark_mc_task_33412_task.sched = STATIC;
            futhark_mc_task_33412_task.nested_fn = futhark_mc_segmap_nested_task_33419;
            
            int futhark_mc_segmap_task_33413_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33412_task);
            
            if (futhark_mc_segmap_task_33413_err != 0) {
                ;
                err = futhark_mc_segmap_task_33413_err;
                goto cleanup;
            }
            
            int64_t iterations_33153 = (int64_t) 262144;
            struct futhark_mc_task_33470 futhark_mc_task_33470_;
            
            futhark_mc_task_33470_.ctx = ctx;
            futhark_mc_task_33470_.free_mem_28940 = mem_28940.mem;
            futhark_mc_task_33470_.free_gtid_30134 = gtid_30134;
            futhark_mc_task_33470_.free_mem_30141 = mem_30141;
            
            struct scheduler_segop futhark_mc_task_33470_task;
            
            futhark_mc_task_33470_task.args = &futhark_mc_task_33470_;
            futhark_mc_task_33470_task.top_level_fn = futhark_mc_copy_33152_task_33471;
            futhark_mc_task_33470_task.name = "futhark_mc_copy_33152_task_33471";
            futhark_mc_task_33470_task.iterations = iterations_33153;
            futhark_mc_task_33470_task.task_time = &ctx->program->futhark_mc_copy_33152_task_33471_total_time;
            futhark_mc_task_33470_task.task_iter = &ctx->program->futhark_mc_copy_33152_task_33471_total_iter;
            futhark_mc_task_33470_task.sched = STATIC;
            futhark_mc_task_33470_task.nested_fn = NULL;
            
            int futhark_mc_copy_33152_task_33471_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33470_task);
            
            if (futhark_mc_copy_33152_task_33471_err != 0) {
                ;
                err = futhark_mc_copy_33152_task_33471_err;
                goto cleanup;
            }
            
            int64_t iterations_33172 = (int64_t) 1572864;
            struct futhark_mc_task_33474 futhark_mc_task_33474_;
            
            futhark_mc_task_33474_.ctx = ctx;
            futhark_mc_task_33474_.free_mem_28941 = mem_28941.mem;
            futhark_mc_task_33474_.free_gtid_30134 = gtid_30134;
            futhark_mc_task_33474_.free_mem_30142 = mem_30142;
            
            struct scheduler_segop futhark_mc_task_33474_task;
            
            futhark_mc_task_33474_task.args = &futhark_mc_task_33474_;
            futhark_mc_task_33474_task.top_level_fn = futhark_mc_copy_33171_task_33475;
            futhark_mc_task_33474_task.name = "futhark_mc_copy_33171_task_33475";
            futhark_mc_task_33474_task.iterations = iterations_33172;
            futhark_mc_task_33474_task.task_time = &ctx->program->futhark_mc_copy_33171_task_33475_total_time;
            futhark_mc_task_33474_task.task_iter = &ctx->program->futhark_mc_copy_33171_task_33475_total_iter;
            futhark_mc_task_33474_task.sched = STATIC;
            futhark_mc_task_33474_task.nested_fn = NULL;
            
            int futhark_mc_copy_33171_task_33475_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33474_task);
            
            if (futhark_mc_copy_33171_task_33475_err != 0) {
                ;
                err = futhark_mc_copy_33171_task_33475_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_30141);
        free(mem_30142);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33409_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33409_end - futhark_mc_segmap_parloop_33409_start;
        
        ctx->program->futhark_mc_segmap_parloop_33409_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33409_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33409_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33407(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33400 *futhark_mc_task_33400 = (struct futhark_mc_task_33400 *) args;
    struct futhark_context *ctx = futhark_mc_task_33400->ctx;
    uint64_t futhark_mc_segmap_nested_task_33407_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33407_start = get_wall_time();
    
    int64_t arg_20169 = futhark_mc_task_33400->free_arg_20169;
    int64_t arg_20173 = futhark_mc_task_33400->free_arg_20173;
    int64_t arg_20177 = futhark_mc_task_33400->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33400->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33400->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33400->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33400->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33400->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33400->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33400->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33400->free_mem_26855, .size =0, .references =NULL};
    int64_t index_primexp_28934 = futhark_mc_task_33400->free_index_primexp_28934;
    int16_t i64_res_28935 = futhark_mc_task_33400->free_i64_res_28935;
    bool bounds_check_28938 = futhark_mc_task_33400->free_bounds_check_28938;
    int64_t binop_x_28939 = futhark_mc_task_33400->free_binop_x_28939;
    struct memblock mem_28940 = {.desc ="mem_28940", .mem =futhark_mc_task_33400->free_mem_28940, .size =0, .references =NULL};
    struct memblock mem_28941 = {.desc ="mem_28941", .mem =futhark_mc_task_33400->free_mem_28941, .size =0, .references =NULL};
    int32_t nsubtasks_31121;
    
    nsubtasks_31121 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33408 futhark_mc_segmap_parloop_struct_33408_;
    
    futhark_mc_segmap_parloop_struct_33408_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33408_.free_arg_20169 = arg_20169;
    futhark_mc_segmap_parloop_struct_33408_.free_arg_20173 = arg_20173;
    futhark_mc_segmap_parloop_struct_33408_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33408_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33408_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33408_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33408_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33408_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33408_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33408_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33408_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33408_.free_index_primexp_28934 = index_primexp_28934;
    futhark_mc_segmap_parloop_struct_33408_.free_i64_res_28935 = i64_res_28935;
    futhark_mc_segmap_parloop_struct_33408_.free_bounds_check_28938 = bounds_check_28938;
    futhark_mc_segmap_parloop_struct_33408_.free_binop_x_28939 = binop_x_28939;
    futhark_mc_segmap_parloop_struct_33408_.free_mem_28940 = mem_28940.mem;
    futhark_mc_segmap_parloop_struct_33408_.free_mem_28941 = mem_28941.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33409_task;
    
    futhark_mc_segmap_parloop_33409_task.name = "futhark_mc_segmap_parloop_33409";
    futhark_mc_segmap_parloop_33409_task.fn = futhark_mc_segmap_parloop_33409;
    futhark_mc_segmap_parloop_33409_task.args = &futhark_mc_segmap_parloop_struct_33408_;
    futhark_mc_segmap_parloop_33409_task.iterations = iterations;
    futhark_mc_segmap_parloop_33409_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33409_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33409_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33409_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33409_task);
    
    if (futhark_mc_segmap_parloop_33409_err != 0) {
        err = futhark_mc_segmap_parloop_33409_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33409_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33409_total_end - futhark_mc_segmap_parloop_33409_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33409_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33409_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33409_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33407_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33407_end - futhark_mc_segmap_nested_task_33407_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33407_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33407_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33407_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33478 {
    struct futhark_context *ctx;
    unsigned char *free_mem_27507;
    int64_t free_gtid_28933;
    unsigned char *free_mem_28940;
};
struct futhark_mc_copy_parloop_struct_33480 {
    struct futhark_context *ctx;
    unsigned char *free_mem_27507;
    int64_t free_gtid_28933;
    unsigned char *free_mem_28940;
};
static int futhark_mc_copy_parloop_33481(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33480 *futhark_mc_copy_parloop_struct_33480 = (struct futhark_mc_copy_parloop_struct_33480 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33480->ctx;
    uint64_t futhark_mc_copy_parloop_33481_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33481_start = get_wall_time();
    
    struct memblock mem_27507 = {.desc ="mem_27507", .mem =futhark_mc_copy_parloop_struct_33480->free_mem_27507, .size =0, .references =NULL};
    int64_t gtid_28933 = futhark_mc_copy_parloop_struct_33480->free_gtid_28933;
    struct memblock mem_28940 = {.desc ="mem_28940", .mem =futhark_mc_copy_parloop_struct_33480->free_mem_28940, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33173;
        int64_t end_33174;
        
        start_33173 = start;
        end_33174 = end;
        
        int64_t n_33175 = end_33174 - start_33173;
        
        for (int64_t copy_i_33176 = start_33173; copy_i_33176 < start_33173 + n_33175; copy_i_33176++) {
            int64_t slice_33181 = (int64_t) 64;
            int64_t slice_33182 = (int64_t) 64 * slice_33181;
            int64_t slice_33183 = (int64_t) 64 * slice_33182;
            int64_t slice_33184 = (int64_t) 64 * slice_33183;
            int64_t i_33177 = squot64(copy_i_33176, slice_33183);
            int64_t remnant_33185 = copy_i_33176 - i_33177 * slice_33183;
            int64_t i_33178 = squot64(remnant_33185, slice_33182);
            int64_t remnant_33186 = remnant_33185 - i_33178 * slice_33182;
            int64_t i_33179 = squot64(remnant_33186, slice_33181);
            int64_t remnant_33187 = remnant_33186 - i_33179 * slice_33181;
            int64_t i_33180 = remnant_33187;
            int64_t remnant_33188 = remnant_33187 - i_33180;
            bool tmp_33189 = ((bool *) mem_28940.mem)[i_33177 * (int64_t) 262144 + i_33178 * (int64_t) 4096 + i_33179 * (int64_t) 64 + i_33180];
            
            ((bool *) mem_27507.mem)[gtid_28933 * (int64_t) 16777216 + (i_33177 * (int64_t) 262144 + i_33178 * (int64_t) 4096 + i_33179 * (int64_t) 64 + i_33180)] = tmp_33189;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33481_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33481_end - futhark_mc_copy_parloop_33481_start;
        
        ctx->program->futhark_mc_copy_parloop_33481_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33481_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33481_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33190_task_33479(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33478 *futhark_mc_task_33478 = (struct futhark_mc_task_33478 *) args;
    struct futhark_context *ctx = futhark_mc_task_33478->ctx;
    uint64_t futhark_mc_copy_33190_task_33479_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33190_task_33479_start = get_wall_time();
    
    struct memblock mem_27507 = {.desc ="mem_27507", .mem =futhark_mc_task_33478->free_mem_27507, .size =0, .references =NULL};
    int64_t gtid_28933 = futhark_mc_task_33478->free_gtid_28933;
    struct memblock mem_28940 = {.desc ="mem_28940", .mem =futhark_mc_task_33478->free_mem_28940, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33480 futhark_mc_copy_parloop_struct_33480_;
    
    futhark_mc_copy_parloop_struct_33480_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33480_.free_mem_27507 = mem_27507.mem;
    futhark_mc_copy_parloop_struct_33480_.free_gtid_28933 = gtid_28933;
    futhark_mc_copy_parloop_struct_33480_.free_mem_28940 = mem_28940.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33481_task;
    
    futhark_mc_copy_parloop_33481_task.name = "futhark_mc_copy_parloop_33481";
    futhark_mc_copy_parloop_33481_task.fn = futhark_mc_copy_parloop_33481;
    futhark_mc_copy_parloop_33481_task.args = &futhark_mc_copy_parloop_struct_33480_;
    futhark_mc_copy_parloop_33481_task.iterations = iterations;
    futhark_mc_copy_parloop_33481_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33481_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33481_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33481_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33481_task);
    
    if (futhark_mc_copy_parloop_33481_err != 0) {
        err = futhark_mc_copy_parloop_33481_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33481_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33481_total_end - futhark_mc_copy_parloop_33481_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33481_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33481_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33481_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33190_task_33479_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33190_task_33479_end - futhark_mc_copy_33190_task_33479_start;
        
        ctx->program->futhark_mc_copy_33190_task_33479_runs[tid]++;
        ctx->program->futhark_mc_copy_33190_task_33479_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33190_task_33479_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33482 {
    struct futhark_context *ctx;
    unsigned char *free_mem_27509;
    int64_t free_gtid_28933;
    unsigned char *free_mem_28941;
};
struct futhark_mc_copy_parloop_struct_33484 {
    struct futhark_context *ctx;
    unsigned char *free_mem_27509;
    int64_t free_gtid_28933;
    unsigned char *free_mem_28941;
};
static int futhark_mc_copy_parloop_33485(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33484 *futhark_mc_copy_parloop_struct_33484 = (struct futhark_mc_copy_parloop_struct_33484 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33484->ctx;
    uint64_t futhark_mc_copy_parloop_33485_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33485_start = get_wall_time();
    
    struct memblock mem_27509 = {.desc ="mem_27509", .mem =futhark_mc_copy_parloop_struct_33484->free_mem_27509, .size =0, .references =NULL};
    int64_t gtid_28933 = futhark_mc_copy_parloop_struct_33484->free_gtid_28933;
    struct memblock mem_28941 = {.desc ="mem_28941", .mem =futhark_mc_copy_parloop_struct_33484->free_mem_28941, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33192;
        int64_t end_33193;
        
        start_33192 = start;
        end_33193 = end;
        
        int64_t n_33194 = end_33193 - start_33192;
        
        for (int64_t copy_i_33195 = start_33192; copy_i_33195 < start_33192 + n_33194; copy_i_33195++) {
            int64_t slice_33201 = (int64_t) 6;
            int64_t slice_33202 = (int64_t) 64 * slice_33201;
            int64_t slice_33203 = (int64_t) 64 * slice_33202;
            int64_t slice_33204 = (int64_t) 64 * slice_33203;
            int64_t slice_33205 = (int64_t) 64 * slice_33204;
            int64_t i_33196 = squot64(copy_i_33195, slice_33204);
            int64_t remnant_33206 = copy_i_33195 - i_33196 * slice_33204;
            int64_t i_33197 = squot64(remnant_33206, slice_33203);
            int64_t remnant_33207 = remnant_33206 - i_33197 * slice_33203;
            int64_t i_33198 = squot64(remnant_33207, slice_33202);
            int64_t remnant_33208 = remnant_33207 - i_33198 * slice_33202;
            int64_t i_33199 = squot64(remnant_33208, slice_33201);
            int64_t remnant_33209 = remnant_33208 - i_33199 * slice_33201;
            int64_t i_33200 = remnant_33209;
            int64_t remnant_33210 = remnant_33209 - i_33200;
            int16_t tmp_33211 = ((int16_t *) mem_28941.mem)[i_33196 * (int64_t) 1572864 + i_33197 * (int64_t) 24576 + i_33198 * (int64_t) 384 + i_33199 * (int64_t) 6 + i_33200];
            
            ((int16_t *) mem_27509.mem)[gtid_28933 * (int64_t) 100663296 + (i_33196 * (int64_t) 1572864 + i_33197 * (int64_t) 24576 + i_33198 * (int64_t) 384 + i_33199 * (int64_t) 6 + i_33200)] = tmp_33211;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33485_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33485_end - futhark_mc_copy_parloop_33485_start;
        
        ctx->program->futhark_mc_copy_parloop_33485_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33485_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33485_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33212_task_33483(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33482 *futhark_mc_task_33482 = (struct futhark_mc_task_33482 *) args;
    struct futhark_context *ctx = futhark_mc_task_33482->ctx;
    uint64_t futhark_mc_copy_33212_task_33483_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33212_task_33483_start = get_wall_time();
    
    struct memblock mem_27509 = {.desc ="mem_27509", .mem =futhark_mc_task_33482->free_mem_27509, .size =0, .references =NULL};
    int64_t gtid_28933 = futhark_mc_task_33482->free_gtid_28933;
    struct memblock mem_28941 = {.desc ="mem_28941", .mem =futhark_mc_task_33482->free_mem_28941, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33484 futhark_mc_copy_parloop_struct_33484_;
    
    futhark_mc_copy_parloop_struct_33484_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33484_.free_mem_27509 = mem_27509.mem;
    futhark_mc_copy_parloop_struct_33484_.free_gtid_28933 = gtid_28933;
    futhark_mc_copy_parloop_struct_33484_.free_mem_28941 = mem_28941.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33485_task;
    
    futhark_mc_copy_parloop_33485_task.name = "futhark_mc_copy_parloop_33485";
    futhark_mc_copy_parloop_33485_task.fn = futhark_mc_copy_parloop_33485;
    futhark_mc_copy_parloop_33485_task.args = &futhark_mc_copy_parloop_struct_33484_;
    futhark_mc_copy_parloop_33485_task.iterations = iterations;
    futhark_mc_copy_parloop_33485_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33485_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33485_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33485_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33485_task);
    
    if (futhark_mc_copy_parloop_33485_err != 0) {
        err = futhark_mc_copy_parloop_33485_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33485_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33485_total_end - futhark_mc_copy_parloop_33485_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33485_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33485_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33485_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33212_task_33483_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33212_task_33483_end - futhark_mc_copy_33212_task_33483_start;
        
        ctx->program->futhark_mc_copy_33212_task_33483_runs[tid]++;
        ctx->program->futhark_mc_copy_33212_task_33483_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33212_task_33483_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33397(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33396 *futhark_mc_segmap_parloop_struct_33396 = (struct futhark_mc_segmap_parloop_struct_33396 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33396->ctx;
    uint64_t futhark_mc_segmap_parloop_33397_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33397_start = get_wall_time();
    
    int64_t arg_20165 = futhark_mc_segmap_parloop_struct_33396->free_arg_20165;
    int64_t arg_20169 = futhark_mc_segmap_parloop_struct_33396->free_arg_20169;
    int64_t arg_20173 = futhark_mc_segmap_parloop_struct_33396->free_arg_20173;
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33396->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33396->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_segmap_parloop_struct_33396->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_segmap_parloop_struct_33396->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_segmap_parloop_struct_33396->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_segmap_parloop_struct_33396->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33396->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33396->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33396->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_27507 = {.desc ="mem_27507", .mem =futhark_mc_segmap_parloop_struct_33396->free_mem_27507, .size =0, .references =NULL};
    struct memblock mem_27509 = {.desc ="mem_27509", .mem =futhark_mc_segmap_parloop_struct_33396->free_mem_27509, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_28940_cached_sizze_33398 = 0;
    unsigned char *mem_28940 = NULL;
    int64_t mem_28941_cached_sizze_33399 = 0;
    unsigned char *mem_28941 = NULL;
    int64_t flat_tid_28932;
    
    flat_tid_28932 = subtask_id;
    {
        int64_t start_30940;
        int64_t end_30941;
        
        start_30940 = start;
        end_30941 = end;
        
        int64_t n_30942 = end_30941 - start_30940;
        
        if (mem_28940_cached_sizze_33398 < (int64_t) 16777216) {
            err = lexical_realloc(ctx, &mem_28940, &mem_28940_cached_sizze_33398, (int64_t) 16777216);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_28941_cached_sizze_33399 < (int64_t) 201326592) {
            err = lexical_realloc(ctx, &mem_28941, &mem_28941_cached_sizze_33399, (int64_t) 201326592);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_30943 = start_30940; SegMap_i_30943 < start_30940 + n_30942; SegMap_i_30943++) {
            int64_t slice_30944 = (int64_t) 64;
            int64_t gtid_28933 = SegMap_i_30943;
            int64_t remnant_30945 = SegMap_i_30943 - gtid_28933;
            int64_t index_primexp_28934 = add64(arg_20165, gtid_28933);
            int16_t i64_res_28935 = sext_i64_i16(index_primexp_28934);
            bool x_28936 = sle64((int64_t) 0, index_primexp_28934);
            bool y_28937 = slt64(index_primexp_28934, (int64_t) 1024);
            bool bounds_check_28938 = x_28936 && y_28937;
            int64_t binop_x_28939 = (int64_t) 16 * index_primexp_28934;
            int64_t flat_tid_30764 = (int64_t) 0;
            int64_t flat_tid_30133 = (int64_t) 0;
            struct futhark_mc_task_33400 futhark_mc_task_33400_;
            
            futhark_mc_task_33400_.ctx = ctx;
            futhark_mc_task_33400_.free_arg_20169 = arg_20169;
            futhark_mc_task_33400_.free_arg_20173 = arg_20173;
            futhark_mc_task_33400_.free_arg_20177 = arg_20177;
            futhark_mc_task_33400_.free_arg_20181 = arg_20181;
            futhark_mc_task_33400_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
            futhark_mc_task_33400_.free_i64_res_24661 = i64_res_24661;
            futhark_mc_task_33400_.free_bounds_check_24664 = bounds_check_24664;
            futhark_mc_task_33400_.free_binop_x_24665 = binop_x_24665;
            futhark_mc_task_33400_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33400_.free_mem_26377 = mem_26377.mem;
            futhark_mc_task_33400_.free_mem_26855 = mem_26855.mem;
            futhark_mc_task_33400_.free_index_primexp_28934 = index_primexp_28934;
            futhark_mc_task_33400_.free_i64_res_28935 = i64_res_28935;
            futhark_mc_task_33400_.free_bounds_check_28938 = bounds_check_28938;
            futhark_mc_task_33400_.free_binop_x_28939 = binop_x_28939;
            futhark_mc_task_33400_.free_mem_28940 = mem_28940;
            futhark_mc_task_33400_.free_mem_28941 = mem_28941;
            
            struct scheduler_segop futhark_mc_task_33400_task;
            
            futhark_mc_task_33400_task.args = &futhark_mc_task_33400_;
            futhark_mc_task_33400_task.top_level_fn = futhark_mc_segmap_task_33401;
            futhark_mc_task_33400_task.name = "futhark_mc_segmap_task_33401";
            futhark_mc_task_33400_task.iterations = (int64_t) 64;
            futhark_mc_task_33400_task.task_time = &ctx->program->futhark_mc_segmap_task_33401_total_time;
            futhark_mc_task_33400_task.task_iter = &ctx->program->futhark_mc_segmap_task_33401_total_iter;
            futhark_mc_task_33400_task.sched = STATIC;
            futhark_mc_task_33400_task.nested_fn = futhark_mc_segmap_nested_task_33407;
            
            int futhark_mc_segmap_task_33401_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33400_task);
            
            if (futhark_mc_segmap_task_33401_err != 0) {
                ;
                err = futhark_mc_segmap_task_33401_err;
                goto cleanup;
            }
            
            int64_t iterations_33191 = (int64_t) 16777216;
            struct futhark_mc_task_33478 futhark_mc_task_33478_;
            
            futhark_mc_task_33478_.ctx = ctx;
            futhark_mc_task_33478_.free_mem_27507 = mem_27507.mem;
            futhark_mc_task_33478_.free_gtid_28933 = gtid_28933;
            futhark_mc_task_33478_.free_mem_28940 = mem_28940;
            
            struct scheduler_segop futhark_mc_task_33478_task;
            
            futhark_mc_task_33478_task.args = &futhark_mc_task_33478_;
            futhark_mc_task_33478_task.top_level_fn = futhark_mc_copy_33190_task_33479;
            futhark_mc_task_33478_task.name = "futhark_mc_copy_33190_task_33479";
            futhark_mc_task_33478_task.iterations = iterations_33191;
            futhark_mc_task_33478_task.task_time = &ctx->program->futhark_mc_copy_33190_task_33479_total_time;
            futhark_mc_task_33478_task.task_iter = &ctx->program->futhark_mc_copy_33190_task_33479_total_iter;
            futhark_mc_task_33478_task.sched = STATIC;
            futhark_mc_task_33478_task.nested_fn = NULL;
            
            int futhark_mc_copy_33190_task_33479_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33478_task);
            
            if (futhark_mc_copy_33190_task_33479_err != 0) {
                ;
                err = futhark_mc_copy_33190_task_33479_err;
                goto cleanup;
            }
            
            int64_t iterations_33213 = (int64_t) 100663296;
            struct futhark_mc_task_33482 futhark_mc_task_33482_;
            
            futhark_mc_task_33482_.ctx = ctx;
            futhark_mc_task_33482_.free_mem_27509 = mem_27509.mem;
            futhark_mc_task_33482_.free_gtid_28933 = gtid_28933;
            futhark_mc_task_33482_.free_mem_28941 = mem_28941;
            
            struct scheduler_segop futhark_mc_task_33482_task;
            
            futhark_mc_task_33482_task.args = &futhark_mc_task_33482_;
            futhark_mc_task_33482_task.top_level_fn = futhark_mc_copy_33212_task_33483;
            futhark_mc_task_33482_task.name = "futhark_mc_copy_33212_task_33483";
            futhark_mc_task_33482_task.iterations = iterations_33213;
            futhark_mc_task_33482_task.task_time = &ctx->program->futhark_mc_copy_33212_task_33483_total_time;
            futhark_mc_task_33482_task.task_iter = &ctx->program->futhark_mc_copy_33212_task_33483_total_iter;
            futhark_mc_task_33482_task.sched = STATIC;
            futhark_mc_task_33482_task.nested_fn = NULL;
            
            int futhark_mc_copy_33212_task_33483_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33482_task);
            
            if (futhark_mc_copy_33212_task_33483_err != 0) {
                ;
                err = futhark_mc_copy_33212_task_33483_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_28940);
        free(mem_28941);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33397_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33397_end - futhark_mc_segmap_parloop_33397_start;
        
        ctx->program->futhark_mc_segmap_parloop_33397_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33397_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33397_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33395(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33388 *futhark_mc_task_33388 = (struct futhark_mc_task_33388 *) args;
    struct futhark_context *ctx = futhark_mc_task_33388->ctx;
    uint64_t futhark_mc_segmap_nested_task_33395_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33395_start = get_wall_time();
    
    int64_t arg_20165 = futhark_mc_task_33388->free_arg_20165;
    int64_t arg_20169 = futhark_mc_task_33388->free_arg_20169;
    int64_t arg_20173 = futhark_mc_task_33388->free_arg_20173;
    int64_t arg_20177 = futhark_mc_task_33388->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33388->free_arg_20181;
    int64_t defunc_0_f_res_24660 = futhark_mc_task_33388->free_defunc_0_f_res_24660;
    int16_t i64_res_24661 = futhark_mc_task_33388->free_i64_res_24661;
    bool bounds_check_24664 = futhark_mc_task_33388->free_bounds_check_24664;
    int64_t binop_x_24665 = futhark_mc_task_33388->free_binop_x_24665;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33388->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33388->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33388->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_27507 = {.desc ="mem_27507", .mem =futhark_mc_task_33388->free_mem_27507, .size =0, .references =NULL};
    struct memblock mem_27509 = {.desc ="mem_27509", .mem =futhark_mc_task_33388->free_mem_27509, .size =0, .references =NULL};
    int32_t nsubtasks_30132;
    
    nsubtasks_30132 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33396 futhark_mc_segmap_parloop_struct_33396_;
    
    futhark_mc_segmap_parloop_struct_33396_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33396_.free_arg_20165 = arg_20165;
    futhark_mc_segmap_parloop_struct_33396_.free_arg_20169 = arg_20169;
    futhark_mc_segmap_parloop_struct_33396_.free_arg_20173 = arg_20173;
    futhark_mc_segmap_parloop_struct_33396_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33396_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33396_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
    futhark_mc_segmap_parloop_struct_33396_.free_i64_res_24661 = i64_res_24661;
    futhark_mc_segmap_parloop_struct_33396_.free_bounds_check_24664 = bounds_check_24664;
    futhark_mc_segmap_parloop_struct_33396_.free_binop_x_24665 = binop_x_24665;
    futhark_mc_segmap_parloop_struct_33396_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33396_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33396_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33396_.free_mem_27507 = mem_27507.mem;
    futhark_mc_segmap_parloop_struct_33396_.free_mem_27509 = mem_27509.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33397_task;
    
    futhark_mc_segmap_parloop_33397_task.name = "futhark_mc_segmap_parloop_33397";
    futhark_mc_segmap_parloop_33397_task.fn = futhark_mc_segmap_parloop_33397;
    futhark_mc_segmap_parloop_33397_task.args = &futhark_mc_segmap_parloop_struct_33396_;
    futhark_mc_segmap_parloop_33397_task.iterations = iterations;
    futhark_mc_segmap_parloop_33397_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33397_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33397_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33397_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33397_task);
    
    if (futhark_mc_segmap_parloop_33397_err != 0) {
        err = futhark_mc_segmap_parloop_33397_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33397_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33397_total_end - futhark_mc_segmap_parloop_33397_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33397_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33397_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33397_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33395_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33395_end - futhark_mc_segmap_nested_task_33395_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33395_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33395_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33395_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33486 {
    struct futhark_context *ctx;
    int64_t free_gtid_24658;
    unsigned char *free_mem_27507;
    unsigned char *free_mem_27983;
};
struct futhark_mc_copy_parloop_struct_33488 {
    struct futhark_context *ctx;
    int64_t free_gtid_24658;
    unsigned char *free_mem_27507;
    unsigned char *free_mem_27983;
};
static int futhark_mc_copy_parloop_33489(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33488 *futhark_mc_copy_parloop_struct_33488 = (struct futhark_mc_copy_parloop_struct_33488 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33488->ctx;
    uint64_t futhark_mc_copy_parloop_33489_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33489_start = get_wall_time();
    
    int64_t gtid_24658 = futhark_mc_copy_parloop_struct_33488->free_gtid_24658;
    struct memblock mem_27507 = {.desc ="mem_27507", .mem =futhark_mc_copy_parloop_struct_33488->free_mem_27507, .size =0, .references =NULL};
    struct memblock mem_27983 = {.desc ="mem_27983", .mem =futhark_mc_copy_parloop_struct_33488->free_mem_27983, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33214;
        int64_t end_33215;
        
        start_33214 = start;
        end_33215 = end;
        
        int64_t n_33216 = end_33215 - start_33214;
        
        for (int64_t copy_i_33217 = start_33214; copy_i_33217 < start_33214 + n_33216; copy_i_33217++) {
            int64_t slice_33223 = (int64_t) 64;
            int64_t slice_33224 = (int64_t) 64 * slice_33223;
            int64_t slice_33225 = (int64_t) 64 * slice_33224;
            int64_t slice_33226 = (int64_t) 64 * slice_33225;
            int64_t slice_33227 = (int64_t) 64 * slice_33226;
            int64_t i_33218 = squot64(copy_i_33217, slice_33226);
            int64_t remnant_33228 = copy_i_33217 - i_33218 * slice_33226;
            int64_t i_33219 = squot64(remnant_33228, slice_33225);
            int64_t remnant_33229 = remnant_33228 - i_33219 * slice_33225;
            int64_t i_33220 = squot64(remnant_33229, slice_33224);
            int64_t remnant_33230 = remnant_33229 - i_33220 * slice_33224;
            int64_t i_33221 = squot64(remnant_33230, slice_33223);
            int64_t remnant_33231 = remnant_33230 - i_33221 * slice_33223;
            int64_t i_33222 = remnant_33231;
            int64_t remnant_33232 = remnant_33231 - i_33222;
            bool tmp_33233 = ((bool *) mem_27507.mem)[i_33218 * (int64_t) 16777216 + i_33219 * (int64_t) 262144 + i_33220 * (int64_t) 4096 + i_33221 * (int64_t) 64 + i_33222];
            
            ((bool *) mem_27983.mem)[gtid_24658 * (int64_t) 1073741824 + (i_33218 * (int64_t) 16777216 + i_33219 * (int64_t) 262144 + i_33220 * (int64_t) 4096 + i_33221 * (int64_t) 64 + i_33222)] = tmp_33233;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33489_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33489_end - futhark_mc_copy_parloop_33489_start;
        
        ctx->program->futhark_mc_copy_parloop_33489_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33489_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33489_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33234_task_33487(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33486 *futhark_mc_task_33486 = (struct futhark_mc_task_33486 *) args;
    struct futhark_context *ctx = futhark_mc_task_33486->ctx;
    uint64_t futhark_mc_copy_33234_task_33487_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33234_task_33487_start = get_wall_time();
    
    int64_t gtid_24658 = futhark_mc_task_33486->free_gtid_24658;
    struct memblock mem_27507 = {.desc ="mem_27507", .mem =futhark_mc_task_33486->free_mem_27507, .size =0, .references =NULL};
    struct memblock mem_27983 = {.desc ="mem_27983", .mem =futhark_mc_task_33486->free_mem_27983, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33488 futhark_mc_copy_parloop_struct_33488_;
    
    futhark_mc_copy_parloop_struct_33488_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33488_.free_gtid_24658 = gtid_24658;
    futhark_mc_copy_parloop_struct_33488_.free_mem_27507 = mem_27507.mem;
    futhark_mc_copy_parloop_struct_33488_.free_mem_27983 = mem_27983.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33489_task;
    
    futhark_mc_copy_parloop_33489_task.name = "futhark_mc_copy_parloop_33489";
    futhark_mc_copy_parloop_33489_task.fn = futhark_mc_copy_parloop_33489;
    futhark_mc_copy_parloop_33489_task.args = &futhark_mc_copy_parloop_struct_33488_;
    futhark_mc_copy_parloop_33489_task.iterations = iterations;
    futhark_mc_copy_parloop_33489_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33489_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33489_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33489_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33489_task);
    
    if (futhark_mc_copy_parloop_33489_err != 0) {
        err = futhark_mc_copy_parloop_33489_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33489_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33489_total_end - futhark_mc_copy_parloop_33489_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33489_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33489_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33489_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33234_task_33487_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33234_task_33487_end - futhark_mc_copy_33234_task_33487_start;
        
        ctx->program->futhark_mc_copy_33234_task_33487_runs[tid]++;
        ctx->program->futhark_mc_copy_33234_task_33487_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33234_task_33487_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33490 {
    struct futhark_context *ctx;
    int64_t free_gtid_24658;
    unsigned char *free_mem_27509;
    unsigned char *free_mem_27985;
};
struct futhark_mc_copy_parloop_struct_33492 {
    struct futhark_context *ctx;
    int64_t free_gtid_24658;
    unsigned char *free_mem_27509;
    unsigned char *free_mem_27985;
};
static int futhark_mc_copy_parloop_33493(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33492 *futhark_mc_copy_parloop_struct_33492 = (struct futhark_mc_copy_parloop_struct_33492 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33492->ctx;
    uint64_t futhark_mc_copy_parloop_33493_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33493_start = get_wall_time();
    
    int64_t gtid_24658 = futhark_mc_copy_parloop_struct_33492->free_gtid_24658;
    struct memblock mem_27509 = {.desc ="mem_27509", .mem =futhark_mc_copy_parloop_struct_33492->free_mem_27509, .size =0, .references =NULL};
    struct memblock mem_27985 = {.desc ="mem_27985", .mem =futhark_mc_copy_parloop_struct_33492->free_mem_27985, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_33236;
        int64_t end_33237;
        
        start_33236 = start;
        end_33237 = end;
        
        int64_t n_33238 = end_33237 - start_33236;
        
        for (int64_t copy_i_33239 = start_33236; copy_i_33239 < start_33236 + n_33238; copy_i_33239++) {
            int64_t slice_33246 = (int64_t) 6;
            int64_t slice_33247 = (int64_t) 64 * slice_33246;
            int64_t slice_33248 = (int64_t) 64 * slice_33247;
            int64_t slice_33249 = (int64_t) 64 * slice_33248;
            int64_t slice_33250 = (int64_t) 64 * slice_33249;
            int64_t slice_33251 = (int64_t) 64 * slice_33250;
            int64_t i_33240 = squot64(copy_i_33239, slice_33250);
            int64_t remnant_33252 = copy_i_33239 - i_33240 * slice_33250;
            int64_t i_33241 = squot64(remnant_33252, slice_33249);
            int64_t remnant_33253 = remnant_33252 - i_33241 * slice_33249;
            int64_t i_33242 = squot64(remnant_33253, slice_33248);
            int64_t remnant_33254 = remnant_33253 - i_33242 * slice_33248;
            int64_t i_33243 = squot64(remnant_33254, slice_33247);
            int64_t remnant_33255 = remnant_33254 - i_33243 * slice_33247;
            int64_t i_33244 = squot64(remnant_33255, slice_33246);
            int64_t remnant_33256 = remnant_33255 - i_33244 * slice_33246;
            int64_t i_33245 = remnant_33256;
            int64_t remnant_33257 = remnant_33256 - i_33245;
            int16_t tmp_33258 = ((int16_t *) mem_27509.mem)[i_33240 * (int64_t) 100663296 + i_33241 * (int64_t) 1572864 + i_33242 * (int64_t) 24576 + i_33243 * (int64_t) 384 + i_33244 * (int64_t) 6 + i_33245];
            
            ((int16_t *) mem_27985.mem)[gtid_24658 * (int64_t) 6442450944 + (i_33240 * (int64_t) 100663296 + i_33241 * (int64_t) 1572864 + i_33242 * (int64_t) 24576 + i_33243 * (int64_t) 384 + i_33244 * (int64_t) 6 + i_33245)] = tmp_33258;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33493_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33493_end - futhark_mc_copy_parloop_33493_start;
        
        ctx->program->futhark_mc_copy_parloop_33493_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33493_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33493_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_33259_task_33491(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33490 *futhark_mc_task_33490 = (struct futhark_mc_task_33490 *) args;
    struct futhark_context *ctx = futhark_mc_task_33490->ctx;
    uint64_t futhark_mc_copy_33259_task_33491_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_33259_task_33491_start = get_wall_time();
    
    int64_t gtid_24658 = futhark_mc_task_33490->free_gtid_24658;
    struct memblock mem_27509 = {.desc ="mem_27509", .mem =futhark_mc_task_33490->free_mem_27509, .size =0, .references =NULL};
    struct memblock mem_27985 = {.desc ="mem_27985", .mem =futhark_mc_task_33490->free_mem_27985, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33492 futhark_mc_copy_parloop_struct_33492_;
    
    futhark_mc_copy_parloop_struct_33492_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33492_.free_gtid_24658 = gtid_24658;
    futhark_mc_copy_parloop_struct_33492_.free_mem_27509 = mem_27509.mem;
    futhark_mc_copy_parloop_struct_33492_.free_mem_27985 = mem_27985.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33493_task;
    
    futhark_mc_copy_parloop_33493_task.name = "futhark_mc_copy_parloop_33493";
    futhark_mc_copy_parloop_33493_task.fn = futhark_mc_copy_parloop_33493;
    futhark_mc_copy_parloop_33493_task.args = &futhark_mc_copy_parloop_struct_33492_;
    futhark_mc_copy_parloop_33493_task.iterations = iterations;
    futhark_mc_copy_parloop_33493_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33493_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33493_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33493_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33493_task);
    
    if (futhark_mc_copy_parloop_33493_err != 0) {
        err = futhark_mc_copy_parloop_33493_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33493_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33493_total_end - futhark_mc_copy_parloop_33493_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33493_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33493_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33493_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_33259_task_33491_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_33259_task_33491_end - futhark_mc_copy_33259_task_33491_start;
        
        ctx->program->futhark_mc_copy_33259_task_33491_runs[tid]++;
        ctx->program->futhark_mc_copy_33259_task_33491_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_33259_task_33491_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
static int futhark_mc_segmap_parloop_33385(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_33384 *futhark_mc_segmap_parloop_struct_33384 = (struct futhark_mc_segmap_parloop_struct_33384 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_33384->ctx;
    uint64_t futhark_mc_segmap_parloop_33385_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33385_start = get_wall_time();
    
    int64_t arg_19218 = futhark_mc_segmap_parloop_struct_33384->free_arg_19218;
    int64_t arg_20165 = futhark_mc_segmap_parloop_struct_33384->free_arg_20165;
    int64_t arg_20169 = futhark_mc_segmap_parloop_struct_33384->free_arg_20169;
    int64_t arg_20173 = futhark_mc_segmap_parloop_struct_33384->free_arg_20173;
    int64_t arg_20177 = futhark_mc_segmap_parloop_struct_33384->free_arg_20177;
    int64_t arg_20181 = futhark_mc_segmap_parloop_struct_33384->free_arg_20181;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_segmap_parloop_struct_33384->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_segmap_parloop_struct_33384->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_segmap_parloop_struct_33384->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_27983 = {.desc ="mem_27983", .mem =futhark_mc_segmap_parloop_struct_33384->free_mem_27983, .size =0, .references =NULL};
    struct memblock mem_27985 = {.desc ="mem_27985", .mem =futhark_mc_segmap_parloop_struct_33384->free_mem_27985, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t mem_27507_cached_sizze_33386 = 0;
    unsigned char *mem_27507 = NULL;
    int64_t mem_27509_cached_sizze_33387 = 0;
    unsigned char *mem_27509 = NULL;
    int64_t flat_tid_24657;
    
    flat_tid_24657 = subtask_id;
    {
        int64_t start_29938;
        int64_t end_29939;
        
        start_29938 = start;
        end_29939 = end;
        
        int64_t n_29940 = end_29939 - start_29938;
        
        if (mem_27507_cached_sizze_33386 < (int64_t) 1073741824) {
            err = lexical_realloc(ctx, &mem_27507, &mem_27507_cached_sizze_33386, (int64_t) 1073741824);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_27509_cached_sizze_33387 < (int64_t) 12884901888) {
            err = lexical_realloc(ctx, &mem_27509, &mem_27509_cached_sizze_33387, (int64_t) 12884901888);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t SegMap_i_29941 = start_29938; SegMap_i_29941 < start_29938 + n_29940; SegMap_i_29941++) {
            int64_t slice_29942 = (int64_t) 64;
            int64_t gtid_24658 = SegMap_i_29941;
            int64_t remnant_29943 = SegMap_i_29941 - gtid_24658;
            int64_t defunc_0_f_res_24660 = add64(arg_19218, gtid_24658);
            int16_t i64_res_24661 = sext_i64_i16(defunc_0_f_res_24660);
            bool x_24662 = sle64((int64_t) 0, defunc_0_f_res_24660);
            bool y_24663 = slt64(defunc_0_f_res_24660, (int64_t) 1024);
            bool bounds_check_24664 = x_24662 && y_24663;
            int64_t binop_x_24665 = (int64_t) 16 * defunc_0_f_res_24660;
            int64_t flat_tid_29751 = (int64_t) 0;
            int64_t flat_tid_28932 = (int64_t) 0;
            struct futhark_mc_task_33388 futhark_mc_task_33388_;
            
            futhark_mc_task_33388_.ctx = ctx;
            futhark_mc_task_33388_.free_arg_20165 = arg_20165;
            futhark_mc_task_33388_.free_arg_20169 = arg_20169;
            futhark_mc_task_33388_.free_arg_20173 = arg_20173;
            futhark_mc_task_33388_.free_arg_20177 = arg_20177;
            futhark_mc_task_33388_.free_arg_20181 = arg_20181;
            futhark_mc_task_33388_.free_defunc_0_f_res_24660 = defunc_0_f_res_24660;
            futhark_mc_task_33388_.free_i64_res_24661 = i64_res_24661;
            futhark_mc_task_33388_.free_bounds_check_24664 = bounds_check_24664;
            futhark_mc_task_33388_.free_binop_x_24665 = binop_x_24665;
            futhark_mc_task_33388_.free_mem_26375 = mem_26375.mem;
            futhark_mc_task_33388_.free_mem_26377 = mem_26377.mem;
            futhark_mc_task_33388_.free_mem_26855 = mem_26855.mem;
            futhark_mc_task_33388_.free_mem_27507 = mem_27507;
            futhark_mc_task_33388_.free_mem_27509 = mem_27509;
            
            struct scheduler_segop futhark_mc_task_33388_task;
            
            futhark_mc_task_33388_task.args = &futhark_mc_task_33388_;
            futhark_mc_task_33388_task.top_level_fn = futhark_mc_segmap_task_33389;
            futhark_mc_task_33388_task.name = "futhark_mc_segmap_task_33389";
            futhark_mc_task_33388_task.iterations = (int64_t) 64;
            futhark_mc_task_33388_task.task_time = &ctx->program->futhark_mc_segmap_task_33389_total_time;
            futhark_mc_task_33388_task.task_iter = &ctx->program->futhark_mc_segmap_task_33389_total_iter;
            futhark_mc_task_33388_task.sched = STATIC;
            futhark_mc_task_33388_task.nested_fn = futhark_mc_segmap_nested_task_33395;
            
            int futhark_mc_segmap_task_33389_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33388_task);
            
            if (futhark_mc_segmap_task_33389_err != 0) {
                ;
                err = futhark_mc_segmap_task_33389_err;
                goto cleanup;
            }
            
            int64_t iterations_33235 = (int64_t) 1073741824;
            struct futhark_mc_task_33486 futhark_mc_task_33486_;
            
            futhark_mc_task_33486_.ctx = ctx;
            futhark_mc_task_33486_.free_gtid_24658 = gtid_24658;
            futhark_mc_task_33486_.free_mem_27507 = mem_27507;
            futhark_mc_task_33486_.free_mem_27983 = mem_27983.mem;
            
            struct scheduler_segop futhark_mc_task_33486_task;
            
            futhark_mc_task_33486_task.args = &futhark_mc_task_33486_;
            futhark_mc_task_33486_task.top_level_fn = futhark_mc_copy_33234_task_33487;
            futhark_mc_task_33486_task.name = "futhark_mc_copy_33234_task_33487";
            futhark_mc_task_33486_task.iterations = iterations_33235;
            futhark_mc_task_33486_task.task_time = &ctx->program->futhark_mc_copy_33234_task_33487_total_time;
            futhark_mc_task_33486_task.task_iter = &ctx->program->futhark_mc_copy_33234_task_33487_total_iter;
            futhark_mc_task_33486_task.sched = STATIC;
            futhark_mc_task_33486_task.nested_fn = NULL;
            
            int futhark_mc_copy_33234_task_33487_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33486_task);
            
            if (futhark_mc_copy_33234_task_33487_err != 0) {
                ;
                err = futhark_mc_copy_33234_task_33487_err;
                goto cleanup;
            }
            
            int64_t iterations_33260 = (int64_t) 6442450944;
            struct futhark_mc_task_33490 futhark_mc_task_33490_;
            
            futhark_mc_task_33490_.ctx = ctx;
            futhark_mc_task_33490_.free_gtid_24658 = gtid_24658;
            futhark_mc_task_33490_.free_mem_27509 = mem_27509;
            futhark_mc_task_33490_.free_mem_27985 = mem_27985.mem;
            
            struct scheduler_segop futhark_mc_task_33490_task;
            
            futhark_mc_task_33490_task.args = &futhark_mc_task_33490_;
            futhark_mc_task_33490_task.top_level_fn = futhark_mc_copy_33259_task_33491;
            futhark_mc_task_33490_task.name = "futhark_mc_copy_33259_task_33491";
            futhark_mc_task_33490_task.iterations = iterations_33260;
            futhark_mc_task_33490_task.task_time = &ctx->program->futhark_mc_copy_33259_task_33491_total_time;
            futhark_mc_task_33490_task.task_iter = &ctx->program->futhark_mc_copy_33259_task_33491_total_iter;
            futhark_mc_task_33490_task.sched = STATIC;
            futhark_mc_task_33490_task.nested_fn = NULL;
            
            int futhark_mc_copy_33259_task_33491_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33490_task);
            
            if (futhark_mc_copy_33259_task_33491_err != 0) {
                ;
                err = futhark_mc_copy_33259_task_33491_err;
                goto cleanup;
            }
        }
    }
    
  cleanup:
    {
        free(mem_27507);
        free(mem_27509);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33385_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33385_end - futhark_mc_segmap_parloop_33385_start;
        
        ctx->program->futhark_mc_segmap_parloop_33385_runs[tid]++;
        ctx->program->futhark_mc_segmap_parloop_33385_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_parloop_33385_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_33383(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33376 *futhark_mc_task_33376 = (struct futhark_mc_task_33376 *) args;
    struct futhark_context *ctx = futhark_mc_task_33376->ctx;
    uint64_t futhark_mc_segmap_nested_task_33383_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_33383_start = get_wall_time();
    
    int64_t arg_19218 = futhark_mc_task_33376->free_arg_19218;
    int64_t arg_20165 = futhark_mc_task_33376->free_arg_20165;
    int64_t arg_20169 = futhark_mc_task_33376->free_arg_20169;
    int64_t arg_20173 = futhark_mc_task_33376->free_arg_20173;
    int64_t arg_20177 = futhark_mc_task_33376->free_arg_20177;
    int64_t arg_20181 = futhark_mc_task_33376->free_arg_20181;
    struct memblock mem_26375 = {.desc ="mem_26375", .mem =futhark_mc_task_33376->free_mem_26375, .size =0, .references =NULL};
    struct memblock mem_26377 = {.desc ="mem_26377", .mem =futhark_mc_task_33376->free_mem_26377, .size =0, .references =NULL};
    struct memblock mem_26855 = {.desc ="mem_26855", .mem =futhark_mc_task_33376->free_mem_26855, .size =0, .references =NULL};
    struct memblock mem_27983 = {.desc ="mem_27983", .mem =futhark_mc_task_33376->free_mem_27983, .size =0, .references =NULL};
    struct memblock mem_27985 = {.desc ="mem_27985", .mem =futhark_mc_task_33376->free_mem_27985, .size =0, .references =NULL};
    int32_t nsubtasks_28931;
    
    nsubtasks_28931 = info.nsubtasks;
    
    struct futhark_mc_segmap_parloop_struct_33384 futhark_mc_segmap_parloop_struct_33384_;
    
    futhark_mc_segmap_parloop_struct_33384_.ctx = ctx;
    futhark_mc_segmap_parloop_struct_33384_.free_arg_19218 = arg_19218;
    futhark_mc_segmap_parloop_struct_33384_.free_arg_20165 = arg_20165;
    futhark_mc_segmap_parloop_struct_33384_.free_arg_20169 = arg_20169;
    futhark_mc_segmap_parloop_struct_33384_.free_arg_20173 = arg_20173;
    futhark_mc_segmap_parloop_struct_33384_.free_arg_20177 = arg_20177;
    futhark_mc_segmap_parloop_struct_33384_.free_arg_20181 = arg_20181;
    futhark_mc_segmap_parloop_struct_33384_.free_mem_26375 = mem_26375.mem;
    futhark_mc_segmap_parloop_struct_33384_.free_mem_26377 = mem_26377.mem;
    futhark_mc_segmap_parloop_struct_33384_.free_mem_26855 = mem_26855.mem;
    futhark_mc_segmap_parloop_struct_33384_.free_mem_27983 = mem_27983.mem;
    futhark_mc_segmap_parloop_struct_33384_.free_mem_27985 = mem_27985.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_33385_task;
    
    futhark_mc_segmap_parloop_33385_task.name = "futhark_mc_segmap_parloop_33385";
    futhark_mc_segmap_parloop_33385_task.fn = futhark_mc_segmap_parloop_33385;
    futhark_mc_segmap_parloop_33385_task.args = &futhark_mc_segmap_parloop_struct_33384_;
    futhark_mc_segmap_parloop_33385_task.iterations = iterations;
    futhark_mc_segmap_parloop_33385_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_33385_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_33385_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_33385_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segmap_parloop_33385_task);
    
    if (futhark_mc_segmap_parloop_33385_err != 0) {
        err = futhark_mc_segmap_parloop_33385_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_33385_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_33385_total_end - futhark_mc_segmap_parloop_33385_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33385_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33385_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segmap_parloop_33385_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_33383_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_33383_end - futhark_mc_segmap_nested_task_33383_start;
        
        ctx->program->futhark_mc_segmap_nested_task_33383_runs[tid]++;
        ctx->program->futhark_mc_segmap_nested_task_33383_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segmap_nested_task_33383_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33494 {
    struct futhark_context *ctx;
    int64_t free_flat_tid_25606;
    unsigned char *free_mem_27983;
    int64_t *retval_defunc_2_reduce_res_22151;
};
struct futhark_mc_segred_stage_1_parloop_struct_33497 {
    struct futhark_context *ctx;
    unsigned char *free_mem_27983;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_33262;
};
static int futhark_mc_segred_stage_1_parloop_33498(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_33497 *futhark_mc_segred_stage_1_parloop_struct_33497 = (struct futhark_mc_segred_stage_1_parloop_struct_33497 *) args;
    struct futhark_context *ctx = futhark_mc_segred_stage_1_parloop_struct_33497->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_33498_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_33498_start = get_wall_time();
    
    struct memblock mem_27983 = {.desc ="mem_27983", .mem =futhark_mc_segred_stage_1_parloop_struct_33497->free_mem_27983, .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_33262 = {.desc ="reduce_stage_1_tid_res_arr_mem_33262", .mem =futhark_mc_segred_stage_1_parloop_struct_33497->free_reduce_stage_1_tid_res_arr_mem_33262, .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t flat_tid_25606;
    
    flat_tid_25606 = subtask_id;
    {
        int64_t x_33264;
        int64_t x_33265;
        int64_t local_acc_33267 = (int64_t) 68719476736;
        int64_t x_19349;
        int64_t x_19350;
        int64_t local_acc_33268 = (int64_t) 68719476736;
        int64_t start_33269;
        int64_t end_33270;
        
        start_33269 = start;
        end_33270 = end;
        
        int64_t n_33271 = end_33270 - start_33269;
        
        for (int64_t SegRed_i_33272 = start_33269; SegRed_i_33272 < start_33269 + n_33271; SegRed_i_33272++) {
            int64_t gtid_25607 = SegRed_i_33272;
            int64_t new_index_25608 = squot64(gtid_25607, (int64_t) 1073741824);
            int64_t binop_y_25610 = (int64_t) 1073741824 * new_index_25608;
            int64_t binop_x_25611 = gtid_25607 - binop_y_25610;
            int64_t new_index_25612 = squot64(binop_x_25611, (int64_t) 16777216);
            int64_t binop_y_25620 = (int64_t) 16777216 * new_index_25612;
            int64_t binop_x_25621 = binop_x_25611 - binop_y_25620;
            int64_t new_index_25622 = squot64(binop_x_25621, (int64_t) 262144);
            int64_t binop_y_25642 = (int64_t) 262144 * new_index_25622;
            int64_t binop_x_25643 = binop_x_25621 - binop_y_25642;
            int64_t new_index_25644 = squot64(binop_x_25643, (int64_t) 4096);
            int64_t binop_y_25688 = (int64_t) 4096 * new_index_25644;
            int64_t binop_x_25689 = binop_x_25643 - binop_y_25688;
            int64_t new_index_25690 = squot64(binop_x_25689, (int64_t) 64);
            int64_t binop_y_25782 = (int64_t) 64 * new_index_25690;
            int64_t new_index_25783 = binop_x_25689 - binop_y_25782;
            bool x_21238 = ((bool *) mem_27983.mem)[new_index_25608 * (int64_t) 1073741824 + new_index_25612 * (int64_t) 16777216 + new_index_25622 * (int64_t) 262144 + new_index_25644 * (int64_t) 4096 + new_index_25690 * (int64_t) 64 + new_index_25783];
            bool cond_21240 = x_21238 == 1;
            int64_t defunc_1_f_res_21241;
            
            if (cond_21240 == 1) {
                defunc_1_f_res_21241 = gtid_25607;
            } else {
                defunc_1_f_res_21241 = (int64_t) 68719476736;
            }
            // save map-out results
            { }
            // Load accum params
            {
                x_19349 = local_acc_33268;
            }
            // Load next params
            {
                x_19350 = defunc_1_f_res_21241;
            }
            // SegRed body
            {
                int64_t defunc_1_op_res_19351 = smin64(x_19349, x_19350);
                
                local_acc_33268 = defunc_1_op_res_19351;
            }
        }
        
        int64_t uni_i_33273 = 0;
        
        {
            int64_t gtid_25607 = uni_i_33273;
            
            // Load accum params
            {
                x_33264 = local_acc_33267;
            }
            // Load next params
            {
                x_33265 = local_acc_33268;
            }
            // SegRed body
            {
                int64_t defunc_1_op_res_33266 = smin64(x_33264, x_33265);
                
                local_acc_33267 = defunc_1_op_res_33266;
            }
        }
        ((int64_t *) reduce_stage_1_tid_res_arr_mem_33262.mem)[flat_tid_25606] = local_acc_33267;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_33498_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_33498_end - futhark_mc_segred_stage_1_parloop_33498_start;
        
        ctx->program->futhark_mc_segred_stage_1_parloop_33498_runs[tid]++;
        ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segred_stage_1_parloop_33498_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_33495(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33494 *futhark_mc_task_33494 = (struct futhark_mc_task_33494 *) args;
    struct futhark_context *ctx = futhark_mc_task_33494->ctx;
    uint64_t futhark_mc_segred_task_33495_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_33495_start = get_wall_time();
    
    int64_t flat_tid_25606 = futhark_mc_task_33494->free_flat_tid_25606;
    struct memblock mem_27983 = {.desc ="mem_27983", .mem =futhark_mc_task_33494->free_mem_27983, .size =0, .references =NULL};
    int64_t defunc_2_reduce_res_22151 = *futhark_mc_task_33494->retval_defunc_2_reduce_res_22151;
    int64_t reduce_stage_1_tid_res_arr_mem_33262_cached_sizze_33496 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_33262 = NULL;
    int32_t nsubtasks_33261;
    
    nsubtasks_33261 = info.nsubtasks;
    if (reduce_stage_1_tid_res_arr_mem_33262_cached_sizze_33496 < (int64_t) 8 * nsubtasks_33261) {
        err = lexical_realloc(ctx, &reduce_stage_1_tid_res_arr_mem_33262, &reduce_stage_1_tid_res_arr_mem_33262_cached_sizze_33496, (int64_t) 8 * nsubtasks_33261);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    struct futhark_mc_segred_stage_1_parloop_struct_33497 futhark_mc_segred_stage_1_parloop_struct_33497_;
    
    futhark_mc_segred_stage_1_parloop_struct_33497_.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_33497_.free_mem_27983 = mem_27983.mem;
    futhark_mc_segred_stage_1_parloop_struct_33497_.free_reduce_stage_1_tid_res_arr_mem_33262 = reduce_stage_1_tid_res_arr_mem_33262;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_33498_task;
    
    futhark_mc_segred_stage_1_parloop_33498_task.name = "futhark_mc_segred_stage_1_parloop_33498";
    futhark_mc_segred_stage_1_parloop_33498_task.fn = futhark_mc_segred_stage_1_parloop_33498;
    futhark_mc_segred_stage_1_parloop_33498_task.args = &futhark_mc_segred_stage_1_parloop_struct_33497_;
    futhark_mc_segred_stage_1_parloop_33498_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_33498_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_33498_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_33498_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_33498_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_segred_stage_1_parloop_33498_task);
    
    if (futhark_mc_segred_stage_1_parloop_33498_err != 0) {
        err = futhark_mc_segred_stage_1_parloop_33498_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_33498_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_33498_total_end - futhark_mc_segred_stage_1_parloop_33498_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_segred_stage_1_parloop_33498_total_iter, iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_22151 = (int64_t) 68719476736;
    }
    
    int64_t x_33274;
    int64_t x_33275;
    
    for (int32_t i_33277 = 0; i_33277 < nsubtasks_33261; i_33277++) {
        flat_tid_25606 = i_33277;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_33274 = defunc_2_reduce_res_22151;
            }
            // load next params
            {
                x_33275 = ((int64_t *) reduce_stage_1_tid_res_arr_mem_33262)[flat_tid_25606];
            }
            // red body
            {
                int64_t defunc_1_op_res_33276 = smin64(x_33274, x_33275);
                
                defunc_2_reduce_res_22151 = defunc_1_op_res_33276;
            }
        }
    }
    
  cleanup:
    {
        free(reduce_stage_1_tid_res_arr_mem_33262);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_33495_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_33495_end - futhark_mc_segred_task_33495_start;
        
        ctx->program->futhark_mc_segred_task_33495_runs[tid]++;
        ctx->program->futhark_mc_segred_task_33495_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_segred_task_33495_iter[tid] += iterations;
    }
    if (err == 0) {
        *futhark_mc_task_33494->retval_defunc_2_reduce_res_22151 = defunc_2_reduce_res_22151;
    }
    return err;
}
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    #define main_res_10740 (ctx->constants->main_res_10740)
    #define mem_26857 (ctx->constants->mem_26857)
    #define triplayer2_11201 (ctx->constants->triplayer2_11201)
    #define triplayer3_11207 (ctx->constants->triplayer3_11207)
    #define triplayer4_11213 (ctx->constants->triplayer4_11213)
    #define triplayer5_11219 (ctx->constants->triplayer5_11219)
    #define triplayer6_11225 (ctx->constants->triplayer6_11225)
    #define triplayer7_11231 (ctx->constants->triplayer7_11231)
    
    struct memblock mem_27985;
    
    mem_27985.references = NULL;
    
    struct memblock mem_27983;
    
    mem_27983.references = NULL;
    
    struct memblock mem_26855;
    
    mem_26855.references = NULL;
    
    struct memblock mem_26377;
    
    mem_26377.references = NULL;
    
    struct memblock mem_26375;
    
    mem_26375.references = NULL;
    
    struct memblock mem_26373;
    
    mem_26373.references = NULL;
    mem_26857.references = NULL;
    if (memblock_alloc(ctx, &mem_26373, (int64_t) 2, "mem_26373")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock static_array_28071 = (struct memblock) {NULL, (unsigned char *) static_array_realtype_33278, 0, "static_array_28071"};
    int64_t iterations_28081 = (int64_t) 2;
    struct futhark_mc_task_33279 futhark_mc_task_33279_;
    
    futhark_mc_task_33279_.ctx = ctx;
    futhark_mc_task_33279_.free_mem_26373 = mem_26373.mem;
    futhark_mc_task_33279_.free_static_array_28071 = static_array_28071.mem;
    
    struct scheduler_segop futhark_mc_task_33279_task;
    
    futhark_mc_task_33279_task.args = &futhark_mc_task_33279_;
    futhark_mc_task_33279_task.top_level_fn = futhark_mc_copy_28080_task_33280;
    futhark_mc_task_33279_task.name = "futhark_mc_copy_28080_task_33280";
    futhark_mc_task_33279_task.iterations = iterations_28081;
    futhark_mc_task_33279_task.task_time = &ctx->program->futhark_mc_copy_28080_task_33280_total_time;
    futhark_mc_task_33279_task.task_iter = &ctx->program->futhark_mc_copy_28080_task_33280_total_iter;
    futhark_mc_task_33279_task.sched = STATIC;
    futhark_mc_task_33279_task.nested_fn = NULL;
    
    int futhark_mc_copy_28080_task_33280_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33279_task);
    
    if (futhark_mc_copy_28080_task_33280_err != 0) {
        if (memblock_unref(ctx, &mem_26373, "mem_26373") != 0)
            return 1;
        ;
        err = futhark_mc_copy_28080_task_33280_err;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_26375, (int64_t) 16, "mem_26375")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock static_array_28082 = (struct memblock) {NULL, (unsigned char *) static_array_realtype_33283, 0, "static_array_28082"};
    int64_t iterations_28092 = (int64_t) 16;
    struct futhark_mc_task_33284 futhark_mc_task_33284_;
    
    futhark_mc_task_33284_.ctx = ctx;
    futhark_mc_task_33284_.free_mem_26375 = mem_26375.mem;
    futhark_mc_task_33284_.free_static_array_28082 = static_array_28082.mem;
    
    struct scheduler_segop futhark_mc_task_33284_task;
    
    futhark_mc_task_33284_task.args = &futhark_mc_task_33284_;
    futhark_mc_task_33284_task.top_level_fn = futhark_mc_copy_28091_task_33285;
    futhark_mc_task_33284_task.name = "futhark_mc_copy_28091_task_33285";
    futhark_mc_task_33284_task.iterations = iterations_28092;
    futhark_mc_task_33284_task.task_time = &ctx->program->futhark_mc_copy_28091_task_33285_total_time;
    futhark_mc_task_33284_task.task_iter = &ctx->program->futhark_mc_copy_28091_task_33285_total_iter;
    futhark_mc_task_33284_task.sched = STATIC;
    futhark_mc_task_33284_task.nested_fn = NULL;
    
    int futhark_mc_copy_28091_task_33285_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33284_task);
    
    if (futhark_mc_copy_28091_task_33285_err != 0) {
        if (memblock_unref(ctx, &mem_26375, "mem_26375") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_26373, "mem_26373") != 0)
            return 1;
        ;
        err = futhark_mc_copy_28091_task_33285_err;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_26377, (int64_t) 16, "mem_26377")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock static_array_28093 = (struct memblock) {NULL, (unsigned char *) static_array_realtype_33288, 0, "static_array_28093"};
    int64_t iterations_28103 = (int64_t) 16;
    struct futhark_mc_task_33289 futhark_mc_task_33289_;
    
    futhark_mc_task_33289_.ctx = ctx;
    futhark_mc_task_33289_.free_mem_26377 = mem_26377.mem;
    futhark_mc_task_33289_.free_static_array_28093 = static_array_28093.mem;
    
    struct scheduler_segop futhark_mc_task_33289_task;
    
    futhark_mc_task_33289_task.args = &futhark_mc_task_33289_;
    futhark_mc_task_33289_task.top_level_fn = futhark_mc_copy_28102_task_33290;
    futhark_mc_task_33289_task.name = "futhark_mc_copy_28102_task_33290";
    futhark_mc_task_33289_task.iterations = iterations_28103;
    futhark_mc_task_33289_task.task_time = &ctx->program->futhark_mc_copy_28102_task_33290_total_time;
    futhark_mc_task_33289_task.task_iter = &ctx->program->futhark_mc_copy_28102_task_33290_total_iter;
    futhark_mc_task_33289_task.sched = STATIC;
    futhark_mc_task_33289_task.nested_fn = NULL;
    
    int futhark_mc_copy_28102_task_33290_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33289_task);
    
    if (futhark_mc_copy_28102_task_33290_err != 0) {
        if (memblock_unref(ctx, &mem_26377, "mem_26377") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_26375, "mem_26375") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_26373, "mem_26373") != 0)
            return 1;
        ;
        err = futhark_mc_copy_28102_task_33290_err;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_26855, (int64_t) 16384, "mem_26855")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_26857, (int64_t) 4096, "mem_26857")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t flat_tid_22155 = (int64_t) 0;
    int64_t flat_tid_22302 = (int64_t) 0;
    struct futhark_mc_task_33293 futhark_mc_task_33293_;
    
    futhark_mc_task_33293_.ctx = ctx;
    futhark_mc_task_33293_.free_mem_26373 = mem_26373.mem;
    futhark_mc_task_33293_.free_mem_26375 = mem_26375.mem;
    futhark_mc_task_33293_.free_mem_26855 = mem_26855.mem;
    futhark_mc_task_33293_.free_mem_26857 = mem_26857.mem;
    
    struct scheduler_segop futhark_mc_task_33293_task;
    
    futhark_mc_task_33293_task.args = &futhark_mc_task_33293_;
    futhark_mc_task_33293_task.top_level_fn = futhark_mc_segmap_task_33294;
    futhark_mc_task_33293_task.name = "futhark_mc_segmap_task_33294";
    futhark_mc_task_33293_task.iterations = (int64_t) 16;
    futhark_mc_task_33293_task.task_time = &ctx->program->futhark_mc_segmap_task_33294_total_time;
    futhark_mc_task_33293_task.task_iter = &ctx->program->futhark_mc_segmap_task_33294_total_iter;
    futhark_mc_task_33293_task.sched = STATIC;
    futhark_mc_task_33293_task.nested_fn = futhark_mc_segmap_nested_task_33300;
    
    int futhark_mc_segmap_task_33294_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33293_task);
    
    if (futhark_mc_segmap_task_33294_err != 0) {
        if (memblock_unref(ctx, &mem_26855, "mem_26855") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_26377, "mem_26377") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_26375, "mem_26375") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_26373, "mem_26373") != 0)
            return 1;
        ;
        err = futhark_mc_segmap_task_33294_err;
        goto cleanup;
    }
    if (memblock_unref(ctx, &mem_26373, "mem_26373") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_27983, (int64_t) 68719476736, "mem_27983")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_27985, (int64_t) 824633720832, "mem_27985")) {
        err = 1;
        goto cleanup;
    }
    
    bool main_res_10733;
    int64_t main_res_10734;
    int16_t main_res_10741;
    int16_t main_res_10742;
    int16_t main_res_10743;
    int16_t main_res_10744;
    int16_t main_res_10745;
    int16_t main_res_10746;
    bool loop_while_10747;
    int64_t i1_10748;
    bool res1_10754;
    int16_t res2_10755;
    int16_t res3_10756;
    int16_t res4_10757;
    int16_t res5_10758;
    int16_t res6_10759;
    int16_t res7_10760;
    
    loop_while_10747 = 1;
    i1_10748 = (int64_t) 0;
    res1_10754 = 0;
    res2_10755 = (int16_t) 0;
    res3_10756 = (int16_t) 0;
    res4_10757 = (int16_t) 0;
    res5_10758 = (int16_t) 0;
    res6_10759 = (int16_t) 0;
    res7_10760 = (int16_t) 0;
    while (loop_while_10747) {
        int64_t arg_19218 = mul64((int64_t) 64, i1_10748);
        bool loopres_10775;
        int64_t loopres_10776;
        bool loopres_10781;
        int16_t loopres_10782;
        int16_t loopres_10783;
        int16_t loopres_10784;
        int16_t loopres_10785;
        int16_t loopres_10786;
        int16_t loopres_10787;
        bool loop_while_10788;
        int64_t i2_10789;
        bool res1_10794;
        int16_t res2_10795;
        int16_t res3_10796;
        int16_t res4_10797;
        int16_t res5_10798;
        int16_t res6_10799;
        int16_t res7_10800;
        
        loop_while_10788 = 1;
        i2_10789 = (int64_t) 0;
        res1_10794 = 0;
        res2_10795 = (int16_t) 0;
        res3_10796 = (int16_t) 0;
        res4_10797 = (int16_t) 0;
        res5_10798 = (int16_t) 0;
        res6_10799 = (int16_t) 0;
        res7_10800 = (int16_t) 0;
        while (loop_while_10788) {
            int64_t arg_20165 = mul64((int64_t) 64, i2_10789);
            bool loopres_10814;
            int64_t loopres_10815;
            bool loopres_10819;
            int16_t loopres_10820;
            int16_t loopres_10821;
            int16_t loopres_10822;
            int16_t loopres_10823;
            int16_t loopres_10824;
            int16_t loopres_10825;
            bool loop_while_10826;
            int64_t i3_10827;
            bool res1_10831;
            int16_t res2_10832;
            int16_t res3_10833;
            int16_t res4_10834;
            int16_t res5_10835;
            int16_t res6_10836;
            int16_t res7_10837;
            
            loop_while_10826 = 1;
            i3_10827 = (int64_t) 0;
            res1_10831 = 0;
            res2_10832 = (int16_t) 0;
            res3_10833 = (int16_t) 0;
            res4_10834 = (int16_t) 0;
            res5_10835 = (int16_t) 0;
            res6_10836 = (int16_t) 0;
            res7_10837 = (int16_t) 0;
            while (loop_while_10826) {
                int64_t arg_20169 = mul64((int64_t) 64, i3_10827);
                bool loopres_10850;
                int64_t loopres_10851;
                bool loopres_10854;
                int16_t loopres_10855;
                int16_t loopres_10856;
                int16_t loopres_10857;
                int16_t loopres_10858;
                int16_t loopres_10859;
                int16_t loopres_10860;
                bool loop_while_10861;
                int64_t i4_10862;
                bool res1_10865;
                int16_t res2_10866;
                int16_t res3_10867;
                int16_t res4_10868;
                int16_t res5_10869;
                int16_t res6_10870;
                int16_t res7_10871;
                
                loop_while_10861 = 1;
                i4_10862 = (int64_t) 0;
                res1_10865 = 0;
                res2_10866 = (int16_t) 0;
                res3_10867 = (int16_t) 0;
                res4_10868 = (int16_t) 0;
                res5_10869 = (int16_t) 0;
                res6_10870 = (int16_t) 0;
                res7_10871 = (int16_t) 0;
                while (loop_while_10861) {
                    int64_t arg_20173 = mul64((int64_t) 64, i4_10862);
                    bool loopres_10883;
                    int64_t loopres_10884;
                    bool loopres_10886;
                    int16_t loopres_10887;
                    int16_t loopres_10888;
                    int16_t loopres_10889;
                    int16_t loopres_10890;
                    int16_t loopres_10891;
                    int16_t loopres_10892;
                    bool loop_while_10893;
                    int64_t i5_10894;
                    bool res1_10896;
                    int16_t res2_10897;
                    int16_t res3_10898;
                    int16_t res4_10899;
                    int16_t res5_10900;
                    int16_t res6_10901;
                    int16_t res7_10902;
                    
                    loop_while_10893 = 1;
                    i5_10894 = (int64_t) 0;
                    res1_10896 = 0;
                    res2_10897 = (int16_t) 0;
                    res3_10898 = (int16_t) 0;
                    res4_10899 = (int16_t) 0;
                    res5_10900 = (int16_t) 0;
                    res6_10901 = (int16_t) 0;
                    res7_10902 = (int16_t) 0;
                    while (loop_while_10893) {
                        int64_t arg_20177 = mul64((int64_t) 64, i5_10894);
                        bool loopres_10913;
                        int64_t loopres_10914;
                        bool loopres_10915;
                        int16_t loopres_10916;
                        int16_t loopres_10917;
                        int16_t loopres_10918;
                        int16_t loopres_10919;
                        int16_t loopres_10920;
                        int16_t loopres_10921;
                        bool loop_while_10922;
                        int64_t i6_10923;
                        bool res1_10924;
                        int16_t res2_10925;
                        int16_t res3_10926;
                        int16_t res4_10927;
                        int16_t res5_10928;
                        int16_t res6_10929;
                        int16_t res7_10930;
                        
                        loop_while_10922 = 1;
                        i6_10923 = (int64_t) 0;
                        res1_10924 = 0;
                        res2_10925 = (int16_t) 0;
                        res3_10926 = (int16_t) 0;
                        res4_10927 = (int16_t) 0;
                        res5_10928 = (int16_t) 0;
                        res6_10929 = (int16_t) 0;
                        res7_10930 = (int16_t) 0;
                        while (loop_while_10922) {
                            int64_t arg_20181 = mul64((int64_t) 64, i6_10923);
                            int64_t flat_tid_22401 = (int64_t) 0;
                            int64_t flat_tid_24657 = (int64_t) 0;
                            struct futhark_mc_task_33376 futhark_mc_task_33376_;
                            
                            futhark_mc_task_33376_.ctx = ctx;
                            futhark_mc_task_33376_.free_arg_19218 = arg_19218;
                            futhark_mc_task_33376_.free_arg_20165 = arg_20165;
                            futhark_mc_task_33376_.free_arg_20169 = arg_20169;
                            futhark_mc_task_33376_.free_arg_20173 = arg_20173;
                            futhark_mc_task_33376_.free_arg_20177 = arg_20177;
                            futhark_mc_task_33376_.free_arg_20181 = arg_20181;
                            futhark_mc_task_33376_.free_mem_26375 = mem_26375.mem;
                            futhark_mc_task_33376_.free_mem_26377 = mem_26377.mem;
                            futhark_mc_task_33376_.free_mem_26855 = mem_26855.mem;
                            futhark_mc_task_33376_.free_mem_27983 = mem_27983.mem;
                            futhark_mc_task_33376_.free_mem_27985 = mem_27985.mem;
                            
                            struct scheduler_segop futhark_mc_task_33376_task;
                            
                            futhark_mc_task_33376_task.args = &futhark_mc_task_33376_;
                            futhark_mc_task_33376_task.top_level_fn = futhark_mc_segmap_task_33377;
                            futhark_mc_task_33376_task.name = "futhark_mc_segmap_task_33377";
                            futhark_mc_task_33376_task.iterations = (int64_t) 64;
                            futhark_mc_task_33376_task.task_time = &ctx->program->futhark_mc_segmap_task_33377_total_time;
                            futhark_mc_task_33376_task.task_iter = &ctx->program->futhark_mc_segmap_task_33377_total_iter;
                            futhark_mc_task_33376_task.sched = STATIC;
                            futhark_mc_task_33376_task.nested_fn = futhark_mc_segmap_nested_task_33383;
                            
                            int futhark_mc_segmap_task_33377_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33376_task);
                            
                            if (futhark_mc_segmap_task_33377_err != 0) {
                                if (memblock_unref(ctx, &mem_27985, "mem_27985") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_27983, "mem_27983") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_26855, "mem_26855") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_26377, "mem_26377") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_26375, "mem_26375") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_26373, "mem_26373") != 0)
                                    return 1;
                                ;
                                err = futhark_mc_segmap_task_33377_err;
                                goto cleanup;
                            }
                            
                            int64_t defunc_2_reduce_res_22151;
                            int64_t flat_tid_25606 = (int64_t) 0;
                            
                            defunc_2_reduce_res_22151 = (int64_t) 0;
                            
                            struct futhark_mc_task_33494 futhark_mc_task_33494_;
                            
                            futhark_mc_task_33494_.ctx = ctx;
                            futhark_mc_task_33494_.free_flat_tid_25606 = flat_tid_25606;
                            futhark_mc_task_33494_.free_mem_27983 = mem_27983.mem;
                            futhark_mc_task_33494_.retval_defunc_2_reduce_res_22151 = (int64_t *) &defunc_2_reduce_res_22151;
                            #if ISPC
                            futhark_mc_task_33494_.retval_defunc_2_reduce_res_22151 += programIndex;
                            #endif
                            
                            struct scheduler_segop futhark_mc_task_33494_task;
                            
                            futhark_mc_task_33494_task.args = &futhark_mc_task_33494_;
                            futhark_mc_task_33494_task.top_level_fn = futhark_mc_segred_task_33495;
                            futhark_mc_task_33494_task.name = "futhark_mc_segred_task_33495";
                            futhark_mc_task_33494_task.iterations = (int64_t) 68719476736;
                            futhark_mc_task_33494_task.task_time = &ctx->program->futhark_mc_segred_task_33495_total_time;
                            futhark_mc_task_33494_task.task_iter = &ctx->program->futhark_mc_segred_task_33495_total_iter;
                            futhark_mc_task_33494_task.sched = STATIC;
                            futhark_mc_task_33494_task.nested_fn = NULL;
                            
                            int futhark_mc_segred_task_33495_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33494_task);
                            
                            if (futhark_mc_segred_task_33495_err != 0) {
                                if (memblock_unref(ctx, &mem_27985, "mem_27985") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_27983, "mem_27983") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_26855, "mem_26855") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_26377, "mem_26377") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_26375, "mem_26375") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_26373, "mem_26373") != 0)
                                    return 1;
                                ;
                                err = futhark_mc_segred_task_33495_err;
                                goto cleanup;
                            }
                            
                            bool cond_19353 = defunc_2_reduce_res_22151 == (int64_t) 68719476736;
                            int64_t findidx_res_19354;
                            
                            if (cond_19353 == 1) {
                                findidx_res_19354 = (int64_t) -1;
                            } else {
                                findidx_res_19354 = defunc_2_reduce_res_22151;
                            }
                            
                            int64_t loopres_10992 = add64((int64_t) 1, i6_10923);
                            bool x_10993 = sle64((int64_t) 0, findidx_res_19354);
                            bool y_10994 = slt64(findidx_res_19354, (int64_t) 68719476736);
                            bool bounds_check_10995 = x_10993 && y_10994;
                            bool index_certs_10996;
                            
                            if (!bounds_check_10995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) findidx_res_19354, "] out of bounds for array of shape [", (long long) (int64_t) 68719476736, "].", "-> #0  main.fut:92:20-37\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t new_index_15409 = squot64(findidx_res_19354, (int64_t) 1073741824);
                            int64_t binop_y_15411 = (int64_t) 1073741824 * new_index_15409;
                            int64_t binop_x_15412 = findidx_res_19354 - binop_y_15411;
                            int64_t new_index_15413 = squot64(binop_x_15412, (int64_t) 16777216);
                            int64_t binop_y_15421 = (int64_t) 16777216 * new_index_15413;
                            int64_t binop_x_15422 = binop_x_15412 - binop_y_15421;
                            int64_t new_index_15423 = squot64(binop_x_15422, (int64_t) 262144);
                            int64_t binop_y_15443 = (int64_t) 262144 * new_index_15423;
                            int64_t binop_x_15444 = binop_x_15422 - binop_y_15443;
                            int64_t new_index_15445 = squot64(binop_x_15444, (int64_t) 4096);
                            int64_t binop_y_15489 = (int64_t) 4096 * new_index_15445;
                            int64_t binop_x_15490 = binop_x_15444 - binop_y_15489;
                            int64_t new_index_15491 = squot64(binop_x_15490, (int64_t) 64);
                            int64_t binop_y_15583 = (int64_t) 64 * new_index_15491;
                            int64_t new_index_15584 = binop_x_15490 - binop_y_15583;
                            bool loopres_10997 = ((bool *) mem_27983.mem)[new_index_15409 * (int64_t) 1073741824 + new_index_15413 * (int64_t) 16777216 + new_index_15423 * (int64_t) 262144 + new_index_15445 * (int64_t) 4096 + new_index_15491 * (int64_t) 64 + new_index_15584];
                            bool index_certs_11006;
                            
                            if (!bounds_check_10995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) findidx_res_19354, ", ", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) (int64_t) 68719476736, "][", (long long) (int64_t) 6, "].", "-> #0  main.fut:92:40-60\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_15585 = (int64_t) 6 * findidx_res_19354;
                            int64_t new_index_15586 = squot64(binop_x_15585, (int64_t) 6442450944);
                            int64_t binop_y_15590 = (int64_t) 6442450944 * new_index_15586;
                            int64_t binop_x_15591 = binop_x_15585 - binop_y_15590;
                            int64_t new_index_15592 = squot64(binop_x_15591, (int64_t) 100663296);
                            int64_t binop_y_15604 = (int64_t) 100663296 * new_index_15592;
                            int64_t binop_x_15605 = binop_x_15591 - binop_y_15604;
                            int64_t new_index_15606 = squot64(binop_x_15605, (int64_t) 1572864);
                            int64_t binop_y_15634 = (int64_t) 1572864 * new_index_15606;
                            int64_t binop_x_15635 = binop_x_15605 - binop_y_15634;
                            int64_t new_index_15636 = squot64(binop_x_15635, (int64_t) 24576);
                            int64_t binop_y_15696 = (int64_t) 24576 * new_index_15636;
                            int64_t binop_x_15697 = binop_x_15635 - binop_y_15696;
                            int64_t new_index_15698 = squot64(binop_x_15697, (int64_t) 384);
                            int64_t binop_y_15822 = (int64_t) 384 * new_index_15698;
                            int64_t binop_x_15823 = binop_x_15697 - binop_y_15822;
                            int64_t new_index_15824 = squot64(binop_x_15823, (int64_t) 6);
                            int64_t binop_y_16076 = (int64_t) 6 * new_index_15824;
                            int64_t new_index_16077 = binop_x_15823 - binop_y_16076;
                            int16_t loopres_11007 = ((int16_t *) mem_27985.mem)[new_index_15586 * (int64_t) 6442450944 + new_index_15592 * (int64_t) 100663296 + new_index_15606 * (int64_t) 1572864 + new_index_15636 * (int64_t) 24576 + new_index_15698 * (int64_t) 384 + new_index_15824 * (int64_t) 6 + new_index_16077];
                            bool index_certs_11016;
                            
                            if (!bounds_check_10995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) findidx_res_19354, ", ", (long long) (int64_t) 1, "] out of bounds for array of shape [", (long long) (int64_t) 68719476736, "][", (long long) (int64_t) 6, "].", "-> #0  main.fut:92:63-83\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_16079 = (int64_t) 1 + binop_x_15585;
                            int64_t new_index_16080 = squot64(binop_x_16079, (int64_t) 6442450944);
                            int64_t binop_y_16086 = (int64_t) 6442450944 * new_index_16080;
                            int64_t binop_x_16087 = binop_x_16079 - binop_y_16086;
                            int64_t new_index_16088 = squot64(binop_x_16087, (int64_t) 100663296);
                            int64_t binop_y_16104 = (int64_t) 100663296 * new_index_16088;
                            int64_t binop_x_16105 = binop_x_16087 - binop_y_16104;
                            int64_t new_index_16106 = squot64(binop_x_16105, (int64_t) 1572864);
                            int64_t binop_y_16142 = (int64_t) 1572864 * new_index_16106;
                            int64_t binop_x_16143 = binop_x_16105 - binop_y_16142;
                            int64_t new_index_16144 = squot64(binop_x_16143, (int64_t) 24576);
                            int64_t binop_y_16220 = (int64_t) 24576 * new_index_16144;
                            int64_t binop_x_16221 = binop_x_16143 - binop_y_16220;
                            int64_t new_index_16222 = squot64(binop_x_16221, (int64_t) 384);
                            int64_t binop_y_16378 = (int64_t) 384 * new_index_16222;
                            int64_t binop_x_16379 = binop_x_16221 - binop_y_16378;
                            int64_t new_index_16380 = squot64(binop_x_16379, (int64_t) 6);
                            int64_t binop_y_16696 = (int64_t) 6 * new_index_16380;
                            int64_t new_index_16697 = binop_x_16379 - binop_y_16696;
                            int16_t loopres_11017 = ((int16_t *) mem_27985.mem)[new_index_16080 * (int64_t) 6442450944 + new_index_16088 * (int64_t) 100663296 + new_index_16106 * (int64_t) 1572864 + new_index_16144 * (int64_t) 24576 + new_index_16222 * (int64_t) 384 + new_index_16380 * (int64_t) 6 + new_index_16697];
                            bool index_certs_11026;
                            
                            if (!bounds_check_10995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) findidx_res_19354, ", ", (long long) (int64_t) 2, "] out of bounds for array of shape [", (long long) (int64_t) 68719476736, "][", (long long) (int64_t) 6, "].", "-> #0  main.fut:92:86-106\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_16699 = (int64_t) 2 + binop_x_15585;
                            int64_t new_index_16700 = squot64(binop_x_16699, (int64_t) 6442450944);
                            int64_t binop_y_16706 = (int64_t) 6442450944 * new_index_16700;
                            int64_t binop_x_16707 = binop_x_16699 - binop_y_16706;
                            int64_t new_index_16708 = squot64(binop_x_16707, (int64_t) 100663296);
                            int64_t binop_y_16724 = (int64_t) 100663296 * new_index_16708;
                            int64_t binop_x_16725 = binop_x_16707 - binop_y_16724;
                            int64_t new_index_16726 = squot64(binop_x_16725, (int64_t) 1572864);
                            int64_t binop_y_16762 = (int64_t) 1572864 * new_index_16726;
                            int64_t binop_x_16763 = binop_x_16725 - binop_y_16762;
                            int64_t new_index_16764 = squot64(binop_x_16763, (int64_t) 24576);
                            int64_t binop_y_16840 = (int64_t) 24576 * new_index_16764;
                            int64_t binop_x_16841 = binop_x_16763 - binop_y_16840;
                            int64_t new_index_16842 = squot64(binop_x_16841, (int64_t) 384);
                            int64_t binop_y_16998 = (int64_t) 384 * new_index_16842;
                            int64_t binop_x_16999 = binop_x_16841 - binop_y_16998;
                            int64_t new_index_17000 = squot64(binop_x_16999, (int64_t) 6);
                            int64_t binop_y_17316 = (int64_t) 6 * new_index_17000;
                            int64_t new_index_17317 = binop_x_16999 - binop_y_17316;
                            int16_t loopres_11027 = ((int16_t *) mem_27985.mem)[new_index_16700 * (int64_t) 6442450944 + new_index_16708 * (int64_t) 100663296 + new_index_16726 * (int64_t) 1572864 + new_index_16764 * (int64_t) 24576 + new_index_16842 * (int64_t) 384 + new_index_17000 * (int64_t) 6 + new_index_17317];
                            bool index_certs_11036;
                            
                            if (!bounds_check_10995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) findidx_res_19354, ", ", (long long) (int64_t) 3, "] out of bounds for array of shape [", (long long) (int64_t) 68719476736, "][", (long long) (int64_t) 6, "].", "-> #0  main.fut:92:109-129\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_17319 = (int64_t) 3 + binop_x_15585;
                            int64_t new_index_17320 = squot64(binop_x_17319, (int64_t) 6442450944);
                            int64_t binop_y_17326 = (int64_t) 6442450944 * new_index_17320;
                            int64_t binop_x_17327 = binop_x_17319 - binop_y_17326;
                            int64_t new_index_17328 = squot64(binop_x_17327, (int64_t) 100663296);
                            int64_t binop_y_17344 = (int64_t) 100663296 * new_index_17328;
                            int64_t binop_x_17345 = binop_x_17327 - binop_y_17344;
                            int64_t new_index_17346 = squot64(binop_x_17345, (int64_t) 1572864);
                            int64_t binop_y_17382 = (int64_t) 1572864 * new_index_17346;
                            int64_t binop_x_17383 = binop_x_17345 - binop_y_17382;
                            int64_t new_index_17384 = squot64(binop_x_17383, (int64_t) 24576);
                            int64_t binop_y_17460 = (int64_t) 24576 * new_index_17384;
                            int64_t binop_x_17461 = binop_x_17383 - binop_y_17460;
                            int64_t new_index_17462 = squot64(binop_x_17461, (int64_t) 384);
                            int64_t binop_y_17618 = (int64_t) 384 * new_index_17462;
                            int64_t binop_x_17619 = binop_x_17461 - binop_y_17618;
                            int64_t new_index_17620 = squot64(binop_x_17619, (int64_t) 6);
                            int64_t binop_y_17936 = (int64_t) 6 * new_index_17620;
                            int64_t new_index_17937 = binop_x_17619 - binop_y_17936;
                            int16_t loopres_11037 = ((int16_t *) mem_27985.mem)[new_index_17320 * (int64_t) 6442450944 + new_index_17328 * (int64_t) 100663296 + new_index_17346 * (int64_t) 1572864 + new_index_17384 * (int64_t) 24576 + new_index_17462 * (int64_t) 384 + new_index_17620 * (int64_t) 6 + new_index_17937];
                            bool index_certs_11046;
                            
                            if (!bounds_check_10995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) findidx_res_19354, ", ", (long long) (int64_t) 4, "] out of bounds for array of shape [", (long long) (int64_t) 68719476736, "][", (long long) (int64_t) 6, "].", "-> #0  main.fut:92:132-152\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_17939 = (int64_t) 4 + binop_x_15585;
                            int64_t new_index_17940 = squot64(binop_x_17939, (int64_t) 6442450944);
                            int64_t binop_y_17946 = (int64_t) 6442450944 * new_index_17940;
                            int64_t binop_x_17947 = binop_x_17939 - binop_y_17946;
                            int64_t new_index_17948 = squot64(binop_x_17947, (int64_t) 100663296);
                            int64_t binop_y_17964 = (int64_t) 100663296 * new_index_17948;
                            int64_t binop_x_17965 = binop_x_17947 - binop_y_17964;
                            int64_t new_index_17966 = squot64(binop_x_17965, (int64_t) 1572864);
                            int64_t binop_y_18002 = (int64_t) 1572864 * new_index_17966;
                            int64_t binop_x_18003 = binop_x_17965 - binop_y_18002;
                            int64_t new_index_18004 = squot64(binop_x_18003, (int64_t) 24576);
                            int64_t binop_y_18080 = (int64_t) 24576 * new_index_18004;
                            int64_t binop_x_18081 = binop_x_18003 - binop_y_18080;
                            int64_t new_index_18082 = squot64(binop_x_18081, (int64_t) 384);
                            int64_t binop_y_18238 = (int64_t) 384 * new_index_18082;
                            int64_t binop_x_18239 = binop_x_18081 - binop_y_18238;
                            int64_t new_index_18240 = squot64(binop_x_18239, (int64_t) 6);
                            int64_t binop_y_18556 = (int64_t) 6 * new_index_18240;
                            int64_t new_index_18557 = binop_x_18239 - binop_y_18556;
                            int16_t loopres_11047 = ((int16_t *) mem_27985.mem)[new_index_17940 * (int64_t) 6442450944 + new_index_17948 * (int64_t) 100663296 + new_index_17966 * (int64_t) 1572864 + new_index_18004 * (int64_t) 24576 + new_index_18082 * (int64_t) 384 + new_index_18240 * (int64_t) 6 + new_index_18557];
                            bool index_certs_11056;
                            
                            if (!bounds_check_10995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) findidx_res_19354, ", ", (long long) (int64_t) 5, "] out of bounds for array of shape [", (long long) (int64_t) 68719476736, "][", (long long) (int64_t) 6, "].", "-> #0  main.fut:92:155-175\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t binop_x_18559 = (int64_t) 5 + binop_x_15585;
                            int64_t new_index_18560 = squot64(binop_x_18559, (int64_t) 6442450944);
                            int64_t binop_y_18566 = (int64_t) 6442450944 * new_index_18560;
                            int64_t binop_x_18567 = binop_x_18559 - binop_y_18566;
                            int64_t new_index_18568 = squot64(binop_x_18567, (int64_t) 100663296);
                            int64_t binop_y_18584 = (int64_t) 100663296 * new_index_18568;
                            int64_t binop_x_18585 = binop_x_18567 - binop_y_18584;
                            int64_t new_index_18586 = squot64(binop_x_18585, (int64_t) 1572864);
                            int64_t binop_y_18622 = (int64_t) 1572864 * new_index_18586;
                            int64_t binop_x_18623 = binop_x_18585 - binop_y_18622;
                            int64_t new_index_18624 = squot64(binop_x_18623, (int64_t) 24576);
                            int64_t binop_y_18700 = (int64_t) 24576 * new_index_18624;
                            int64_t binop_x_18701 = binop_x_18623 - binop_y_18700;
                            int64_t new_index_18702 = squot64(binop_x_18701, (int64_t) 384);
                            int64_t binop_y_18858 = (int64_t) 384 * new_index_18702;
                            int64_t binop_x_18859 = binop_x_18701 - binop_y_18858;
                            int64_t new_index_18860 = squot64(binop_x_18859, (int64_t) 6);
                            int64_t binop_y_19176 = (int64_t) 6 * new_index_18860;
                            int64_t new_index_19177 = binop_x_18859 - binop_y_19176;
                            int16_t loopres_11057 = ((int16_t *) mem_27985.mem)[new_index_18560 * (int64_t) 6442450944 + new_index_18568 * (int64_t) 100663296 + new_index_18586 * (int64_t) 1572864 + new_index_18624 * (int64_t) 24576 + new_index_18702 * (int64_t) 384 + new_index_18860 * (int64_t) 6 + new_index_19177];
                            bool cond_11066 = slt64(loopres_10992, (int64_t) 64);
                            bool loop_cond_11067 = loopres_10997 || cond_11066;
                            bool loop_while_tmp_28721 = loop_cond_11067;
                            int64_t i6_tmp_28722 = loopres_10992;
                            bool res1_tmp_28723 = loopres_10997;
                            int16_t res2_tmp_28724 = loopres_11007;
                            int16_t res3_tmp_28725 = loopres_11017;
                            int16_t res4_tmp_28726 = loopres_11027;
                            int16_t res5_tmp_28727 = loopres_11037;
                            int16_t res6_tmp_28728 = loopres_11047;
                            int16_t res7_tmp_28729 = loopres_11057;
                            
                            loop_while_10922 = loop_while_tmp_28721;
                            i6_10923 = i6_tmp_28722;
                            res1_10924 = res1_tmp_28723;
                            res2_10925 = res2_tmp_28724;
                            res3_10926 = res3_tmp_28725;
                            res4_10927 = res4_tmp_28726;
                            res5_10928 = res5_tmp_28727;
                            res6_10929 = res6_tmp_28728;
                            res7_10930 = res7_tmp_28729;
                        }
                        loopres_10913 = loop_while_10922;
                        loopres_10914 = i6_10923;
                        loopres_10915 = res1_10924;
                        loopres_10916 = res2_10925;
                        loopres_10917 = res3_10926;
                        loopres_10918 = res4_10927;
                        loopres_10919 = res5_10928;
                        loopres_10920 = res6_10929;
                        loopres_10921 = res7_10930;
                        
                        int64_t loopres_11076 = add64((int64_t) 1, i5_10894);
                        bool cond_11086 = slt64(loopres_11076, (int64_t) 64);
                        bool loop_cond_11087 = loopres_10915 || cond_11086;
                        bool loop_while_tmp_28712 = loop_cond_11087;
                        int64_t i5_tmp_28713 = loopres_11076;
                        bool res1_tmp_28714 = loopres_10915;
                        int16_t res2_tmp_28715 = loopres_10916;
                        int16_t res3_tmp_28716 = loopres_10917;
                        int16_t res4_tmp_28717 = loopres_10918;
                        int16_t res5_tmp_28718 = loopres_10919;
                        int16_t res6_tmp_28719 = loopres_10920;
                        int16_t res7_tmp_28720 = loopres_10921;
                        
                        loop_while_10893 = loop_while_tmp_28712;
                        i5_10894 = i5_tmp_28713;
                        res1_10896 = res1_tmp_28714;
                        res2_10897 = res2_tmp_28715;
                        res3_10898 = res3_tmp_28716;
                        res4_10899 = res4_tmp_28717;
                        res5_10900 = res5_tmp_28718;
                        res6_10901 = res6_tmp_28719;
                        res7_10902 = res7_tmp_28720;
                    }
                    loopres_10883 = loop_while_10893;
                    loopres_10884 = i5_10894;
                    loopres_10886 = res1_10896;
                    loopres_10887 = res2_10897;
                    loopres_10888 = res3_10898;
                    loopres_10889 = res4_10899;
                    loopres_10890 = res5_10900;
                    loopres_10891 = res6_10901;
                    loopres_10892 = res7_10902;
                    
                    int64_t loopres_11097 = add64((int64_t) 1, i4_10862);
                    bool cond_11108 = slt64(loopres_11097, (int64_t) 64);
                    bool loop_cond_11109 = loopres_10886 || cond_11108;
                    bool loop_while_tmp_28703 = loop_cond_11109;
                    int64_t i4_tmp_28704 = loopres_11097;
                    bool res1_tmp_28705 = loopres_10886;
                    int16_t res2_tmp_28706 = loopres_10887;
                    int16_t res3_tmp_28707 = loopres_10888;
                    int16_t res4_tmp_28708 = loopres_10889;
                    int16_t res5_tmp_28709 = loopres_10890;
                    int16_t res6_tmp_28710 = loopres_10891;
                    int16_t res7_tmp_28711 = loopres_10892;
                    
                    loop_while_10861 = loop_while_tmp_28703;
                    i4_10862 = i4_tmp_28704;
                    res1_10865 = res1_tmp_28705;
                    res2_10866 = res2_tmp_28706;
                    res3_10867 = res3_tmp_28707;
                    res4_10868 = res4_tmp_28708;
                    res5_10869 = res5_tmp_28709;
                    res6_10870 = res6_tmp_28710;
                    res7_10871 = res7_tmp_28711;
                }
                loopres_10850 = loop_while_10861;
                loopres_10851 = i4_10862;
                loopres_10854 = res1_10865;
                loopres_10855 = res2_10866;
                loopres_10856 = res3_10867;
                loopres_10857 = res4_10868;
                loopres_10858 = res5_10869;
                loopres_10859 = res6_10870;
                loopres_10860 = res7_10871;
                
                int64_t loopres_11120 = add64((int64_t) 1, i3_10827);
                bool cond_11132 = slt64(loopres_11120, (int64_t) 64);
                bool loop_cond_11133 = loopres_10854 || cond_11132;
                bool loop_while_tmp_28694 = loop_cond_11133;
                int64_t i3_tmp_28695 = loopres_11120;
                bool res1_tmp_28696 = loopres_10854;
                int16_t res2_tmp_28697 = loopres_10855;
                int16_t res3_tmp_28698 = loopres_10856;
                int16_t res4_tmp_28699 = loopres_10857;
                int16_t res5_tmp_28700 = loopres_10858;
                int16_t res6_tmp_28701 = loopres_10859;
                int16_t res7_tmp_28702 = loopres_10860;
                
                loop_while_10826 = loop_while_tmp_28694;
                i3_10827 = i3_tmp_28695;
                res1_10831 = res1_tmp_28696;
                res2_10832 = res2_tmp_28697;
                res3_10833 = res3_tmp_28698;
                res4_10834 = res4_tmp_28699;
                res5_10835 = res5_tmp_28700;
                res6_10836 = res6_tmp_28701;
                res7_10837 = res7_tmp_28702;
            }
            loopres_10814 = loop_while_10826;
            loopres_10815 = i3_10827;
            loopres_10819 = res1_10831;
            loopres_10820 = res2_10832;
            loopres_10821 = res3_10833;
            loopres_10822 = res4_10834;
            loopres_10823 = res5_10835;
            loopres_10824 = res6_10836;
            loopres_10825 = res7_10837;
            
            int64_t loopres_11145 = add64((int64_t) 1, i2_10789);
            bool cond_11158 = slt64(loopres_11145, (int64_t) 64);
            bool loop_cond_11159 = loopres_10819 || cond_11158;
            bool loop_while_tmp_28685 = loop_cond_11159;
            int64_t i2_tmp_28686 = loopres_11145;
            bool res1_tmp_28687 = loopres_10819;
            int16_t res2_tmp_28688 = loopres_10820;
            int16_t res3_tmp_28689 = loopres_10821;
            int16_t res4_tmp_28690 = loopres_10822;
            int16_t res5_tmp_28691 = loopres_10823;
            int16_t res6_tmp_28692 = loopres_10824;
            int16_t res7_tmp_28693 = loopres_10825;
            
            loop_while_10788 = loop_while_tmp_28685;
            i2_10789 = i2_tmp_28686;
            res1_10794 = res1_tmp_28687;
            res2_10795 = res2_tmp_28688;
            res3_10796 = res3_tmp_28689;
            res4_10797 = res4_tmp_28690;
            res5_10798 = res5_tmp_28691;
            res6_10799 = res6_tmp_28692;
            res7_10800 = res7_tmp_28693;
        }
        loopres_10775 = loop_while_10788;
        loopres_10776 = i2_10789;
        loopres_10781 = res1_10794;
        loopres_10782 = res2_10795;
        loopres_10783 = res3_10796;
        loopres_10784 = res4_10797;
        loopres_10785 = res5_10798;
        loopres_10786 = res6_10799;
        loopres_10787 = res7_10800;
        
        int64_t loopres_11172 = add64((int64_t) 1, i1_10748);
        bool cond_11186 = slt64(loopres_11172, (int64_t) 64);
        bool loop_cond_11187 = loopres_10781 || cond_11186;
        bool loop_while_tmp_28676 = loop_cond_11187;
        int64_t i1_tmp_28677 = loopres_11172;
        bool res1_tmp_28678 = loopres_10781;
        int16_t res2_tmp_28679 = loopres_10782;
        int16_t res3_tmp_28680 = loopres_10783;
        int16_t res4_tmp_28681 = loopres_10784;
        int16_t res5_tmp_28682 = loopres_10785;
        int16_t res6_tmp_28683 = loopres_10786;
        int16_t res7_tmp_28684 = loopres_10787;
        
        loop_while_10747 = loop_while_tmp_28676;
        i1_10748 = i1_tmp_28677;
        res1_10754 = res1_tmp_28678;
        res2_10755 = res2_tmp_28679;
        res3_10756 = res3_tmp_28680;
        res4_10757 = res4_tmp_28681;
        res5_10758 = res5_tmp_28682;
        res6_10759 = res6_tmp_28683;
        res7_10760 = res7_tmp_28684;
    }
    main_res_10733 = loop_while_10747;
    main_res_10734 = i1_10748;
    main_res_10740 = res1_10754;
    main_res_10741 = res2_10755;
    main_res_10742 = res3_10756;
    main_res_10743 = res4_10757;
    main_res_10744 = res5_10758;
    main_res_10745 = res6_10759;
    main_res_10746 = res7_10760;
    if (memblock_unref(ctx, &mem_26375, "mem_26375") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_26377, "mem_26377") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_26855, "mem_26855") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_27983, "mem_27983") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_27985, "mem_27985") != 0)
        return 1;
    triplayer2_11201 = sext_i16_i64(main_res_10741);
    
    bool x_11202 = sle64((int64_t) 0, triplayer2_11201);
    bool y_11203 = slt64(triplayer2_11201, (int64_t) 1024);
    bool bounds_check_11204 = x_11202 && y_11203;
    bool index_certs_11205;
    
    if (!bounds_check_11204) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) triplayer2_11201, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "].", "-> #0  main.fut:101:18-35\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    triplayer3_11207 = sext_i16_i64(main_res_10742);
    
    bool x_11208 = sle64((int64_t) 0, triplayer3_11207);
    bool y_11209 = slt64(triplayer3_11207, (int64_t) 1024);
    bool bounds_check_11210 = x_11208 && y_11209;
    bool index_certs_11211;
    
    if (!bounds_check_11210) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) triplayer3_11207, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "].", "-> #0  main.fut:101:38-55\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    triplayer4_11213 = sext_i16_i64(main_res_10743);
    
    bool x_11214 = sle64((int64_t) 0, triplayer4_11213);
    bool y_11215 = slt64(triplayer4_11213, (int64_t) 1024);
    bool bounds_check_11216 = x_11214 && y_11215;
    bool index_certs_11217;
    
    if (!bounds_check_11216) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) triplayer4_11213, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "].", "-> #0  main.fut:101:58-75\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    triplayer5_11219 = sext_i16_i64(main_res_10744);
    
    bool x_11220 = sle64((int64_t) 0, triplayer5_11219);
    bool y_11221 = slt64(triplayer5_11219, (int64_t) 1024);
    bool bounds_check_11222 = x_11220 && y_11221;
    bool index_certs_11223;
    
    if (!bounds_check_11222) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) triplayer5_11219, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "].", "-> #0  main.fut:101:78-95\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    triplayer6_11225 = sext_i16_i64(main_res_10745);
    
    bool x_11226 = sle64((int64_t) 0, triplayer6_11225);
    bool y_11227 = slt64(triplayer6_11225, (int64_t) 1024);
    bool bounds_check_11228 = x_11226 && y_11227;
    bool index_certs_11229;
    
    if (!bounds_check_11228) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) triplayer6_11225, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "].", "-> #0  main.fut:101:98-115\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    triplayer7_11231 = sext_i16_i64(main_res_10746);
    
    bool x_11232 = sle64((int64_t) 0, triplayer7_11231);
    bool y_11233 = slt64(triplayer7_11231, (int64_t) 1024);
    bool bounds_check_11234 = x_11232 && y_11233;
    bool index_certs_11235;
    
    if (!bounds_check_11234) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) triplayer7_11231, "] out of bounds for array of shape [", (long long) (int64_t) 1024, "].", "-> #0  main.fut:101:118-135\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_unref(ctx, &mem_27985, "mem_27985") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_27983, "mem_27983") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_26855, "mem_26855") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_26377, "mem_26377") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_26375, "mem_26375") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_26373, "mem_26373") != 0)
        return 1;
    #undef main_res_10740
    #undef mem_26857
    #undef triplayer2_11201
    #undef triplayer3_11207
    #undef triplayer4_11213
    #undef triplayer5_11219
    #undef triplayer6_11225
    #undef triplayer7_11231
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    if (memblock_unref(ctx, &ctx->constants->mem_26857, "ctx->constants->mem_26857") != 0)
        return 1;
    return 0;
}
struct futhark_mc_task_33506 {
    struct futhark_context *ctx;
    int64_t free_triplayer2_11201;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27987;
};
struct futhark_mc_copy_parloop_struct_33508 {
    struct futhark_context *ctx;
    int64_t free_triplayer2_11201;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27987;
};
static int futhark_mc_copy_parloop_33509(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33508 *futhark_mc_copy_parloop_struct_33508 = (struct futhark_mc_copy_parloop_struct_33508 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33508->ctx;
    uint64_t futhark_mc_copy_parloop_33509_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33509_start = get_wall_time();
    
    int64_t triplayer2_11201 = futhark_mc_copy_parloop_struct_33508->free_triplayer2_11201;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_copy_parloop_struct_33508->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27987 = {.desc ="mem_27987", .mem =futhark_mc_copy_parloop_struct_33508->free_mem_27987, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28011;
        int64_t end_28012;
        
        start_28011 = start;
        end_28012 = end;
        
        int64_t n_28013 = end_28012 - start_28011;
        
        for (int64_t copy_i_28014 = start_28011; copy_i_28014 < start_28011 + n_28013; copy_i_28014++) {
            int64_t slice_28016 = (int64_t) 4;
            int64_t i_28015 = copy_i_28014;
            int64_t remnant_28017 = copy_i_28014 - i_28015;
            int8_t tmp_28018 = ((int8_t *) mem_26857.mem)[triplayer2_11201 * (int64_t) 4 + i_28015];
            
            ((int8_t *) mem_27987.mem)[i_28015] = tmp_28018;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33509_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33509_end - futhark_mc_copy_parloop_33509_start;
        
        ctx->program->futhark_mc_copy_parloop_33509_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33509_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33509_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28019_task_33507(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33506 *futhark_mc_task_33506 = (struct futhark_mc_task_33506 *) args;
    struct futhark_context *ctx = futhark_mc_task_33506->ctx;
    uint64_t futhark_mc_copy_28019_task_33507_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28019_task_33507_start = get_wall_time();
    
    int64_t triplayer2_11201 = futhark_mc_task_33506->free_triplayer2_11201;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_task_33506->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27987 = {.desc ="mem_27987", .mem =futhark_mc_task_33506->free_mem_27987, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33508 futhark_mc_copy_parloop_struct_33508_;
    
    futhark_mc_copy_parloop_struct_33508_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33508_.free_triplayer2_11201 = triplayer2_11201;
    futhark_mc_copy_parloop_struct_33508_.free_mem_26857 = mem_26857.mem;
    futhark_mc_copy_parloop_struct_33508_.free_mem_27987 = mem_27987.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33509_task;
    
    futhark_mc_copy_parloop_33509_task.name = "futhark_mc_copy_parloop_33509";
    futhark_mc_copy_parloop_33509_task.fn = futhark_mc_copy_parloop_33509;
    futhark_mc_copy_parloop_33509_task.args = &futhark_mc_copy_parloop_struct_33508_;
    futhark_mc_copy_parloop_33509_task.iterations = iterations;
    futhark_mc_copy_parloop_33509_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33509_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33509_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33509_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33509_task);
    
    if (futhark_mc_copy_parloop_33509_err != 0) {
        err = futhark_mc_copy_parloop_33509_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33509_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33509_total_end - futhark_mc_copy_parloop_33509_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33509_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33509_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33509_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28019_task_33507_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28019_task_33507_end - futhark_mc_copy_28019_task_33507_start;
        
        ctx->program->futhark_mc_copy_28019_task_33507_runs[tid]++;
        ctx->program->futhark_mc_copy_28019_task_33507_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28019_task_33507_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33510 {
    struct futhark_context *ctx;
    int64_t free_triplayer3_11207;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27990;
};
struct futhark_mc_copy_parloop_struct_33512 {
    struct futhark_context *ctx;
    int64_t free_triplayer3_11207;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27990;
};
static int futhark_mc_copy_parloop_33513(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33512 *futhark_mc_copy_parloop_struct_33512 = (struct futhark_mc_copy_parloop_struct_33512 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33512->ctx;
    uint64_t futhark_mc_copy_parloop_33513_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33513_start = get_wall_time();
    
    int64_t triplayer3_11207 = futhark_mc_copy_parloop_struct_33512->free_triplayer3_11207;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_copy_parloop_struct_33512->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27990 = {.desc ="mem_27990", .mem =futhark_mc_copy_parloop_struct_33512->free_mem_27990, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28021;
        int64_t end_28022;
        
        start_28021 = start;
        end_28022 = end;
        
        int64_t n_28023 = end_28022 - start_28021;
        
        for (int64_t copy_i_28024 = start_28021; copy_i_28024 < start_28021 + n_28023; copy_i_28024++) {
            int64_t slice_28026 = (int64_t) 4;
            int64_t i_28025 = copy_i_28024;
            int64_t remnant_28027 = copy_i_28024 - i_28025;
            int8_t tmp_28028 = ((int8_t *) mem_26857.mem)[triplayer3_11207 * (int64_t) 4 + i_28025];
            
            ((int8_t *) mem_27990.mem)[i_28025] = tmp_28028;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33513_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33513_end - futhark_mc_copy_parloop_33513_start;
        
        ctx->program->futhark_mc_copy_parloop_33513_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33513_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33513_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28029_task_33511(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33510 *futhark_mc_task_33510 = (struct futhark_mc_task_33510 *) args;
    struct futhark_context *ctx = futhark_mc_task_33510->ctx;
    uint64_t futhark_mc_copy_28029_task_33511_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28029_task_33511_start = get_wall_time();
    
    int64_t triplayer3_11207 = futhark_mc_task_33510->free_triplayer3_11207;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_task_33510->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27990 = {.desc ="mem_27990", .mem =futhark_mc_task_33510->free_mem_27990, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33512 futhark_mc_copy_parloop_struct_33512_;
    
    futhark_mc_copy_parloop_struct_33512_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33512_.free_triplayer3_11207 = triplayer3_11207;
    futhark_mc_copy_parloop_struct_33512_.free_mem_26857 = mem_26857.mem;
    futhark_mc_copy_parloop_struct_33512_.free_mem_27990 = mem_27990.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33513_task;
    
    futhark_mc_copy_parloop_33513_task.name = "futhark_mc_copy_parloop_33513";
    futhark_mc_copy_parloop_33513_task.fn = futhark_mc_copy_parloop_33513;
    futhark_mc_copy_parloop_33513_task.args = &futhark_mc_copy_parloop_struct_33512_;
    futhark_mc_copy_parloop_33513_task.iterations = iterations;
    futhark_mc_copy_parloop_33513_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33513_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33513_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33513_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33513_task);
    
    if (futhark_mc_copy_parloop_33513_err != 0) {
        err = futhark_mc_copy_parloop_33513_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33513_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33513_total_end - futhark_mc_copy_parloop_33513_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33513_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33513_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33513_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28029_task_33511_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28029_task_33511_end - futhark_mc_copy_28029_task_33511_start;
        
        ctx->program->futhark_mc_copy_28029_task_33511_runs[tid]++;
        ctx->program->futhark_mc_copy_28029_task_33511_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28029_task_33511_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33514 {
    struct futhark_context *ctx;
    int64_t free_triplayer4_11213;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27993;
};
struct futhark_mc_copy_parloop_struct_33516 {
    struct futhark_context *ctx;
    int64_t free_triplayer4_11213;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27993;
};
static int futhark_mc_copy_parloop_33517(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33516 *futhark_mc_copy_parloop_struct_33516 = (struct futhark_mc_copy_parloop_struct_33516 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33516->ctx;
    uint64_t futhark_mc_copy_parloop_33517_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33517_start = get_wall_time();
    
    int64_t triplayer4_11213 = futhark_mc_copy_parloop_struct_33516->free_triplayer4_11213;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_copy_parloop_struct_33516->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27993 = {.desc ="mem_27993", .mem =futhark_mc_copy_parloop_struct_33516->free_mem_27993, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28031;
        int64_t end_28032;
        
        start_28031 = start;
        end_28032 = end;
        
        int64_t n_28033 = end_28032 - start_28031;
        
        for (int64_t copy_i_28034 = start_28031; copy_i_28034 < start_28031 + n_28033; copy_i_28034++) {
            int64_t slice_28036 = (int64_t) 4;
            int64_t i_28035 = copy_i_28034;
            int64_t remnant_28037 = copy_i_28034 - i_28035;
            int8_t tmp_28038 = ((int8_t *) mem_26857.mem)[triplayer4_11213 * (int64_t) 4 + i_28035];
            
            ((int8_t *) mem_27993.mem)[i_28035] = tmp_28038;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33517_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33517_end - futhark_mc_copy_parloop_33517_start;
        
        ctx->program->futhark_mc_copy_parloop_33517_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33517_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33517_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28039_task_33515(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33514 *futhark_mc_task_33514 = (struct futhark_mc_task_33514 *) args;
    struct futhark_context *ctx = futhark_mc_task_33514->ctx;
    uint64_t futhark_mc_copy_28039_task_33515_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28039_task_33515_start = get_wall_time();
    
    int64_t triplayer4_11213 = futhark_mc_task_33514->free_triplayer4_11213;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_task_33514->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27993 = {.desc ="mem_27993", .mem =futhark_mc_task_33514->free_mem_27993, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33516 futhark_mc_copy_parloop_struct_33516_;
    
    futhark_mc_copy_parloop_struct_33516_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33516_.free_triplayer4_11213 = triplayer4_11213;
    futhark_mc_copy_parloop_struct_33516_.free_mem_26857 = mem_26857.mem;
    futhark_mc_copy_parloop_struct_33516_.free_mem_27993 = mem_27993.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33517_task;
    
    futhark_mc_copy_parloop_33517_task.name = "futhark_mc_copy_parloop_33517";
    futhark_mc_copy_parloop_33517_task.fn = futhark_mc_copy_parloop_33517;
    futhark_mc_copy_parloop_33517_task.args = &futhark_mc_copy_parloop_struct_33516_;
    futhark_mc_copy_parloop_33517_task.iterations = iterations;
    futhark_mc_copy_parloop_33517_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33517_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33517_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33517_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33517_task);
    
    if (futhark_mc_copy_parloop_33517_err != 0) {
        err = futhark_mc_copy_parloop_33517_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33517_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33517_total_end - futhark_mc_copy_parloop_33517_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33517_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33517_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33517_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28039_task_33515_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28039_task_33515_end - futhark_mc_copy_28039_task_33515_start;
        
        ctx->program->futhark_mc_copy_28039_task_33515_runs[tid]++;
        ctx->program->futhark_mc_copy_28039_task_33515_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28039_task_33515_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33518 {
    struct futhark_context *ctx;
    int64_t free_triplayer5_11219;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27996;
};
struct futhark_mc_copy_parloop_struct_33520 {
    struct futhark_context *ctx;
    int64_t free_triplayer5_11219;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27996;
};
static int futhark_mc_copy_parloop_33521(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33520 *futhark_mc_copy_parloop_struct_33520 = (struct futhark_mc_copy_parloop_struct_33520 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33520->ctx;
    uint64_t futhark_mc_copy_parloop_33521_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33521_start = get_wall_time();
    
    int64_t triplayer5_11219 = futhark_mc_copy_parloop_struct_33520->free_triplayer5_11219;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_copy_parloop_struct_33520->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27996 = {.desc ="mem_27996", .mem =futhark_mc_copy_parloop_struct_33520->free_mem_27996, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28041;
        int64_t end_28042;
        
        start_28041 = start;
        end_28042 = end;
        
        int64_t n_28043 = end_28042 - start_28041;
        
        for (int64_t copy_i_28044 = start_28041; copy_i_28044 < start_28041 + n_28043; copy_i_28044++) {
            int64_t slice_28046 = (int64_t) 4;
            int64_t i_28045 = copy_i_28044;
            int64_t remnant_28047 = copy_i_28044 - i_28045;
            int8_t tmp_28048 = ((int8_t *) mem_26857.mem)[triplayer5_11219 * (int64_t) 4 + i_28045];
            
            ((int8_t *) mem_27996.mem)[i_28045] = tmp_28048;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33521_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33521_end - futhark_mc_copy_parloop_33521_start;
        
        ctx->program->futhark_mc_copy_parloop_33521_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33521_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33521_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28049_task_33519(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33518 *futhark_mc_task_33518 = (struct futhark_mc_task_33518 *) args;
    struct futhark_context *ctx = futhark_mc_task_33518->ctx;
    uint64_t futhark_mc_copy_28049_task_33519_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28049_task_33519_start = get_wall_time();
    
    int64_t triplayer5_11219 = futhark_mc_task_33518->free_triplayer5_11219;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_task_33518->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27996 = {.desc ="mem_27996", .mem =futhark_mc_task_33518->free_mem_27996, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33520 futhark_mc_copy_parloop_struct_33520_;
    
    futhark_mc_copy_parloop_struct_33520_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33520_.free_triplayer5_11219 = triplayer5_11219;
    futhark_mc_copy_parloop_struct_33520_.free_mem_26857 = mem_26857.mem;
    futhark_mc_copy_parloop_struct_33520_.free_mem_27996 = mem_27996.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33521_task;
    
    futhark_mc_copy_parloop_33521_task.name = "futhark_mc_copy_parloop_33521";
    futhark_mc_copy_parloop_33521_task.fn = futhark_mc_copy_parloop_33521;
    futhark_mc_copy_parloop_33521_task.args = &futhark_mc_copy_parloop_struct_33520_;
    futhark_mc_copy_parloop_33521_task.iterations = iterations;
    futhark_mc_copy_parloop_33521_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33521_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33521_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33521_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33521_task);
    
    if (futhark_mc_copy_parloop_33521_err != 0) {
        err = futhark_mc_copy_parloop_33521_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33521_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33521_total_end - futhark_mc_copy_parloop_33521_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33521_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33521_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33521_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28049_task_33519_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28049_task_33519_end - futhark_mc_copy_28049_task_33519_start;
        
        ctx->program->futhark_mc_copy_28049_task_33519_runs[tid]++;
        ctx->program->futhark_mc_copy_28049_task_33519_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28049_task_33519_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33522 {
    struct futhark_context *ctx;
    int64_t free_triplayer6_11225;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27999;
};
struct futhark_mc_copy_parloop_struct_33524 {
    struct futhark_context *ctx;
    int64_t free_triplayer6_11225;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_27999;
};
static int futhark_mc_copy_parloop_33525(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33524 *futhark_mc_copy_parloop_struct_33524 = (struct futhark_mc_copy_parloop_struct_33524 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33524->ctx;
    uint64_t futhark_mc_copy_parloop_33525_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33525_start = get_wall_time();
    
    int64_t triplayer6_11225 = futhark_mc_copy_parloop_struct_33524->free_triplayer6_11225;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_copy_parloop_struct_33524->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27999 = {.desc ="mem_27999", .mem =futhark_mc_copy_parloop_struct_33524->free_mem_27999, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28051;
        int64_t end_28052;
        
        start_28051 = start;
        end_28052 = end;
        
        int64_t n_28053 = end_28052 - start_28051;
        
        for (int64_t copy_i_28054 = start_28051; copy_i_28054 < start_28051 + n_28053; copy_i_28054++) {
            int64_t slice_28056 = (int64_t) 4;
            int64_t i_28055 = copy_i_28054;
            int64_t remnant_28057 = copy_i_28054 - i_28055;
            int8_t tmp_28058 = ((int8_t *) mem_26857.mem)[triplayer6_11225 * (int64_t) 4 + i_28055];
            
            ((int8_t *) mem_27999.mem)[i_28055] = tmp_28058;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33525_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33525_end - futhark_mc_copy_parloop_33525_start;
        
        ctx->program->futhark_mc_copy_parloop_33525_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33525_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33525_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28059_task_33523(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33522 *futhark_mc_task_33522 = (struct futhark_mc_task_33522 *) args;
    struct futhark_context *ctx = futhark_mc_task_33522->ctx;
    uint64_t futhark_mc_copy_28059_task_33523_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28059_task_33523_start = get_wall_time();
    
    int64_t triplayer6_11225 = futhark_mc_task_33522->free_triplayer6_11225;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_task_33522->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_27999 = {.desc ="mem_27999", .mem =futhark_mc_task_33522->free_mem_27999, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33524 futhark_mc_copy_parloop_struct_33524_;
    
    futhark_mc_copy_parloop_struct_33524_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33524_.free_triplayer6_11225 = triplayer6_11225;
    futhark_mc_copy_parloop_struct_33524_.free_mem_26857 = mem_26857.mem;
    futhark_mc_copy_parloop_struct_33524_.free_mem_27999 = mem_27999.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33525_task;
    
    futhark_mc_copy_parloop_33525_task.name = "futhark_mc_copy_parloop_33525";
    futhark_mc_copy_parloop_33525_task.fn = futhark_mc_copy_parloop_33525;
    futhark_mc_copy_parloop_33525_task.args = &futhark_mc_copy_parloop_struct_33524_;
    futhark_mc_copy_parloop_33525_task.iterations = iterations;
    futhark_mc_copy_parloop_33525_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33525_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33525_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33525_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33525_task);
    
    if (futhark_mc_copy_parloop_33525_err != 0) {
        err = futhark_mc_copy_parloop_33525_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33525_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33525_total_end - futhark_mc_copy_parloop_33525_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33525_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33525_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33525_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28059_task_33523_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28059_task_33523_end - futhark_mc_copy_28059_task_33523_start;
        
        ctx->program->futhark_mc_copy_28059_task_33523_runs[tid]++;
        ctx->program->futhark_mc_copy_28059_task_33523_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28059_task_33523_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_mc_task_33526 {
    struct futhark_context *ctx;
    int64_t free_triplayer7_11231;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_28002;
};
struct futhark_mc_copy_parloop_struct_33528 {
    struct futhark_context *ctx;
    int64_t free_triplayer7_11231;
    unsigned char *free_mem_26857;
    unsigned char *free_mem_28002;
};
static int futhark_mc_copy_parloop_33529(void *args, int64_t start, int64_t end, int subtask_id, int tid)
{
    int err = 0;
    struct futhark_mc_copy_parloop_struct_33528 *futhark_mc_copy_parloop_struct_33528 = (struct futhark_mc_copy_parloop_struct_33528 *) args;
    struct futhark_context *ctx = futhark_mc_copy_parloop_struct_33528->ctx;
    uint64_t futhark_mc_copy_parloop_33529_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33529_start = get_wall_time();
    
    int64_t triplayer7_11231 = futhark_mc_copy_parloop_struct_33528->free_triplayer7_11231;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_copy_parloop_struct_33528->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_28002 = {.desc ="mem_28002", .mem =futhark_mc_copy_parloop_struct_33528->free_mem_28002, .size =0, .references =NULL};
    int64_t iterations = end - start;
    
    {
        int64_t start_28061;
        int64_t end_28062;
        
        start_28061 = start;
        end_28062 = end;
        
        int64_t n_28063 = end_28062 - start_28061;
        
        for (int64_t copy_i_28064 = start_28061; copy_i_28064 < start_28061 + n_28063; copy_i_28064++) {
            int64_t slice_28066 = (int64_t) 4;
            int64_t i_28065 = copy_i_28064;
            int64_t remnant_28067 = copy_i_28064 - i_28065;
            int8_t tmp_28068 = ((int8_t *) mem_26857.mem)[triplayer7_11231 * (int64_t) 4 + i_28065];
            
            ((int8_t *) mem_28002.mem)[i_28065] = tmp_28068;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33529_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33529_end - futhark_mc_copy_parloop_33529_start;
        
        ctx->program->futhark_mc_copy_parloop_33529_runs[tid]++;
        ctx->program->futhark_mc_copy_parloop_33529_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_parloop_33529_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_copy_28069_task_33527(void *args, int64_t iterations, int tid, struct scheduler_info info)
{
    int err = 0;
    int subtask_id = tid;
    struct futhark_mc_task_33526 *futhark_mc_task_33526 = (struct futhark_mc_task_33526 *) args;
    struct futhark_context *ctx = futhark_mc_task_33526->ctx;
    uint64_t futhark_mc_copy_28069_task_33527_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_28069_task_33527_start = get_wall_time();
    
    int64_t triplayer7_11231 = futhark_mc_task_33526->free_triplayer7_11231;
    struct memblock mem_26857 = {.desc ="mem_26857", .mem =futhark_mc_task_33526->free_mem_26857, .size =0, .references =NULL};
    struct memblock mem_28002 = {.desc ="mem_28002", .mem =futhark_mc_task_33526->free_mem_28002, .size =0, .references =NULL};
    struct futhark_mc_copy_parloop_struct_33528 futhark_mc_copy_parloop_struct_33528_;
    
    futhark_mc_copy_parloop_struct_33528_.ctx = ctx;
    futhark_mc_copy_parloop_struct_33528_.free_triplayer7_11231 = triplayer7_11231;
    futhark_mc_copy_parloop_struct_33528_.free_mem_26857 = mem_26857.mem;
    futhark_mc_copy_parloop_struct_33528_.free_mem_28002 = mem_28002.mem;
    
    struct scheduler_parloop futhark_mc_copy_parloop_33529_task;
    
    futhark_mc_copy_parloop_33529_task.name = "futhark_mc_copy_parloop_33529";
    futhark_mc_copy_parloop_33529_task.fn = futhark_mc_copy_parloop_33529;
    futhark_mc_copy_parloop_33529_task.args = &futhark_mc_copy_parloop_struct_33528_;
    futhark_mc_copy_parloop_33529_task.iterations = iterations;
    futhark_mc_copy_parloop_33529_task.info = info;
    
    uint64_t futhark_mc_copy_parloop_33529_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_copy_parloop_33529_total_start = get_wall_time();
    
    int futhark_mc_copy_parloop_33529_err = scheduler_execute_task(&ctx->scheduler, &futhark_mc_copy_parloop_33529_task);
    
    if (futhark_mc_copy_parloop_33529_err != 0) {
        err = futhark_mc_copy_parloop_33529_err;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_parloop_33529_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_parloop_33529_total_end - futhark_mc_copy_parloop_33529_total_start;
        
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33529_total_runs, 1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33529_total_total_runtime, elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->program->futhark_mc_copy_parloop_33529_total_iter, iterations, __ATOMIC_RELAXED);
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_copy_28069_task_33527_end = get_wall_time();
        uint64_t elapsed = futhark_mc_copy_28069_task_33527_end - futhark_mc_copy_28069_task_33527_start;
        
        ctx->program->futhark_mc_copy_28069_task_33527_runs[tid]++;
        ctx->program->futhark_mc_copy_28069_task_33527_total_runtime[tid] += elapsed;
        ctx->program->futhark_mc_copy_28069_task_33527_iter[tid] += iterations;
    }
    if (err == 0) { }
    return err;
}
struct futhark_u8_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_u8_1d *futhark_new_u8_1d(struct futhark_context *ctx, const uint8_t *data, int64_t dim0)
{
    struct futhark_u8_1d *bad = NULL;
    struct futhark_u8_1d *arr = (struct futhark_u8_1d *) malloc(sizeof(struct futhark_u8_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 1, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 1 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) dim0 * 1);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_u8_1d *futhark_new_raw_u8_1d(struct futhark_context *ctx, const unsigned char *data, int64_t offset, int64_t dim0)
{
    struct futhark_u8_1d *bad = NULL;
    struct futhark_u8_1d *arr = (struct futhark_u8_1d *) malloc(sizeof(struct futhark_u8_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 1, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 1 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) dim0 * 1);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_u8_1d(struct futhark_context *ctx, struct futhark_u8_1d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_u8_1d(struct futhark_context *ctx, struct futhark_u8_1d *arr, uint8_t *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if ((size_t) arr->shape[0] * 1 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 1);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_u8_1d(struct futhark_context *ctx, struct futhark_u8_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_u8_1d(struct futhark_context *ctx, struct futhark_u8_1d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_main(struct futhark_context *ctx, struct memblock *mem_out_p_33499, struct memblock *mem_out_p_33500, struct memblock *mem_out_p_33501, struct memblock *mem_out_p_33502, struct memblock *mem_out_p_33503, struct memblock *mem_out_p_33504, bool *out_prim_out_33505)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_28002;
    
    mem_28002.references = NULL;
    
    struct memblock mem_27999;
    
    mem_27999.references = NULL;
    
    struct memblock mem_27996;
    
    mem_27996.references = NULL;
    
    struct memblock mem_27993;
    
    mem_27993.references = NULL;
    
    struct memblock mem_27990;
    
    mem_27990.references = NULL;
    
    struct memblock mem_27987;
    
    mem_27987.references = NULL;
    
    struct memblock mem_out_28009;
    
    mem_out_28009.references = NULL;
    
    struct memblock mem_out_28008;
    
    mem_out_28008.references = NULL;
    
    struct memblock mem_out_28007;
    
    mem_out_28007.references = NULL;
    
    struct memblock mem_out_28006;
    
    mem_out_28006.references = NULL;
    
    struct memblock mem_out_28005;
    
    mem_out_28005.references = NULL;
    
    struct memblock mem_out_28004;
    
    mem_out_28004.references = NULL;
    
    bool main_res_10740 = ctx->constants->main_res_10740;
    struct memblock mem_26857 = ctx->constants->mem_26857;
    int64_t triplayer2_11201 = ctx->constants->triplayer2_11201;
    int64_t triplayer3_11207 = ctx->constants->triplayer3_11207;
    int64_t triplayer4_11213 = ctx->constants->triplayer4_11213;
    int64_t triplayer5_11219 = ctx->constants->triplayer5_11219;
    int64_t triplayer6_11225 = ctx->constants->triplayer6_11225;
    int64_t triplayer7_11231 = ctx->constants->triplayer7_11231;
    bool prim_out_28010;
    
    if (memblock_alloc(ctx, &mem_27987, (int64_t) 4, "mem_27987")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t iterations_28020 = (int64_t) 4;
    struct futhark_mc_task_33506 futhark_mc_task_33506_;
    
    futhark_mc_task_33506_.ctx = ctx;
    futhark_mc_task_33506_.free_triplayer2_11201 = triplayer2_11201;
    futhark_mc_task_33506_.free_mem_26857 = mem_26857.mem;
    futhark_mc_task_33506_.free_mem_27987 = mem_27987.mem;
    
    struct scheduler_segop futhark_mc_task_33506_task;
    
    futhark_mc_task_33506_task.args = &futhark_mc_task_33506_;
    futhark_mc_task_33506_task.top_level_fn = futhark_mc_copy_28019_task_33507;
    futhark_mc_task_33506_task.name = "futhark_mc_copy_28019_task_33507";
    futhark_mc_task_33506_task.iterations = iterations_28020;
    futhark_mc_task_33506_task.task_time = &ctx->program->futhark_mc_copy_28019_task_33507_total_time;
    futhark_mc_task_33506_task.task_iter = &ctx->program->futhark_mc_copy_28019_task_33507_total_iter;
    futhark_mc_task_33506_task.sched = STATIC;
    futhark_mc_task_33506_task.nested_fn = NULL;
    
    int futhark_mc_copy_28019_task_33507_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33506_task);
    
    if (futhark_mc_copy_28019_task_33507_err != 0) {
        if (memblock_unref(ctx, &mem_27987, "mem_27987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28009, "mem_out_28009") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28008, "mem_out_28008") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28007, "mem_out_28007") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28006, "mem_out_28006") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28005, "mem_out_28005") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28004, "mem_out_28004") != 0)
            return 1;
        ;
        err = futhark_mc_copy_28019_task_33507_err;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_27990, (int64_t) 4, "mem_27990")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t iterations_28030 = (int64_t) 4;
    struct futhark_mc_task_33510 futhark_mc_task_33510_;
    
    futhark_mc_task_33510_.ctx = ctx;
    futhark_mc_task_33510_.free_triplayer3_11207 = triplayer3_11207;
    futhark_mc_task_33510_.free_mem_26857 = mem_26857.mem;
    futhark_mc_task_33510_.free_mem_27990 = mem_27990.mem;
    
    struct scheduler_segop futhark_mc_task_33510_task;
    
    futhark_mc_task_33510_task.args = &futhark_mc_task_33510_;
    futhark_mc_task_33510_task.top_level_fn = futhark_mc_copy_28029_task_33511;
    futhark_mc_task_33510_task.name = "futhark_mc_copy_28029_task_33511";
    futhark_mc_task_33510_task.iterations = iterations_28030;
    futhark_mc_task_33510_task.task_time = &ctx->program->futhark_mc_copy_28029_task_33511_total_time;
    futhark_mc_task_33510_task.task_iter = &ctx->program->futhark_mc_copy_28029_task_33511_total_iter;
    futhark_mc_task_33510_task.sched = STATIC;
    futhark_mc_task_33510_task.nested_fn = NULL;
    
    int futhark_mc_copy_28029_task_33511_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33510_task);
    
    if (futhark_mc_copy_28029_task_33511_err != 0) {
        if (memblock_unref(ctx, &mem_27990, "mem_27990") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27987, "mem_27987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28009, "mem_out_28009") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28008, "mem_out_28008") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28007, "mem_out_28007") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28006, "mem_out_28006") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28005, "mem_out_28005") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28004, "mem_out_28004") != 0)
            return 1;
        ;
        err = futhark_mc_copy_28029_task_33511_err;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_27993, (int64_t) 4, "mem_27993")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t iterations_28040 = (int64_t) 4;
    struct futhark_mc_task_33514 futhark_mc_task_33514_;
    
    futhark_mc_task_33514_.ctx = ctx;
    futhark_mc_task_33514_.free_triplayer4_11213 = triplayer4_11213;
    futhark_mc_task_33514_.free_mem_26857 = mem_26857.mem;
    futhark_mc_task_33514_.free_mem_27993 = mem_27993.mem;
    
    struct scheduler_segop futhark_mc_task_33514_task;
    
    futhark_mc_task_33514_task.args = &futhark_mc_task_33514_;
    futhark_mc_task_33514_task.top_level_fn = futhark_mc_copy_28039_task_33515;
    futhark_mc_task_33514_task.name = "futhark_mc_copy_28039_task_33515";
    futhark_mc_task_33514_task.iterations = iterations_28040;
    futhark_mc_task_33514_task.task_time = &ctx->program->futhark_mc_copy_28039_task_33515_total_time;
    futhark_mc_task_33514_task.task_iter = &ctx->program->futhark_mc_copy_28039_task_33515_total_iter;
    futhark_mc_task_33514_task.sched = STATIC;
    futhark_mc_task_33514_task.nested_fn = NULL;
    
    int futhark_mc_copy_28039_task_33515_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33514_task);
    
    if (futhark_mc_copy_28039_task_33515_err != 0) {
        if (memblock_unref(ctx, &mem_27993, "mem_27993") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27990, "mem_27990") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27987, "mem_27987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28009, "mem_out_28009") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28008, "mem_out_28008") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28007, "mem_out_28007") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28006, "mem_out_28006") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28005, "mem_out_28005") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28004, "mem_out_28004") != 0)
            return 1;
        ;
        err = futhark_mc_copy_28039_task_33515_err;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_27996, (int64_t) 4, "mem_27996")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t iterations_28050 = (int64_t) 4;
    struct futhark_mc_task_33518 futhark_mc_task_33518_;
    
    futhark_mc_task_33518_.ctx = ctx;
    futhark_mc_task_33518_.free_triplayer5_11219 = triplayer5_11219;
    futhark_mc_task_33518_.free_mem_26857 = mem_26857.mem;
    futhark_mc_task_33518_.free_mem_27996 = mem_27996.mem;
    
    struct scheduler_segop futhark_mc_task_33518_task;
    
    futhark_mc_task_33518_task.args = &futhark_mc_task_33518_;
    futhark_mc_task_33518_task.top_level_fn = futhark_mc_copy_28049_task_33519;
    futhark_mc_task_33518_task.name = "futhark_mc_copy_28049_task_33519";
    futhark_mc_task_33518_task.iterations = iterations_28050;
    futhark_mc_task_33518_task.task_time = &ctx->program->futhark_mc_copy_28049_task_33519_total_time;
    futhark_mc_task_33518_task.task_iter = &ctx->program->futhark_mc_copy_28049_task_33519_total_iter;
    futhark_mc_task_33518_task.sched = STATIC;
    futhark_mc_task_33518_task.nested_fn = NULL;
    
    int futhark_mc_copy_28049_task_33519_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33518_task);
    
    if (futhark_mc_copy_28049_task_33519_err != 0) {
        if (memblock_unref(ctx, &mem_27996, "mem_27996") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27993, "mem_27993") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27990, "mem_27990") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27987, "mem_27987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28009, "mem_out_28009") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28008, "mem_out_28008") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28007, "mem_out_28007") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28006, "mem_out_28006") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28005, "mem_out_28005") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28004, "mem_out_28004") != 0)
            return 1;
        ;
        err = futhark_mc_copy_28049_task_33519_err;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_27999, (int64_t) 4, "mem_27999")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t iterations_28060 = (int64_t) 4;
    struct futhark_mc_task_33522 futhark_mc_task_33522_;
    
    futhark_mc_task_33522_.ctx = ctx;
    futhark_mc_task_33522_.free_triplayer6_11225 = triplayer6_11225;
    futhark_mc_task_33522_.free_mem_26857 = mem_26857.mem;
    futhark_mc_task_33522_.free_mem_27999 = mem_27999.mem;
    
    struct scheduler_segop futhark_mc_task_33522_task;
    
    futhark_mc_task_33522_task.args = &futhark_mc_task_33522_;
    futhark_mc_task_33522_task.top_level_fn = futhark_mc_copy_28059_task_33523;
    futhark_mc_task_33522_task.name = "futhark_mc_copy_28059_task_33523";
    futhark_mc_task_33522_task.iterations = iterations_28060;
    futhark_mc_task_33522_task.task_time = &ctx->program->futhark_mc_copy_28059_task_33523_total_time;
    futhark_mc_task_33522_task.task_iter = &ctx->program->futhark_mc_copy_28059_task_33523_total_iter;
    futhark_mc_task_33522_task.sched = STATIC;
    futhark_mc_task_33522_task.nested_fn = NULL;
    
    int futhark_mc_copy_28059_task_33523_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33522_task);
    
    if (futhark_mc_copy_28059_task_33523_err != 0) {
        if (memblock_unref(ctx, &mem_27999, "mem_27999") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27996, "mem_27996") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27993, "mem_27993") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27990, "mem_27990") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27987, "mem_27987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28009, "mem_out_28009") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28008, "mem_out_28008") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28007, "mem_out_28007") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28006, "mem_out_28006") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28005, "mem_out_28005") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28004, "mem_out_28004") != 0)
            return 1;
        ;
        err = futhark_mc_copy_28059_task_33523_err;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_28002, (int64_t) 4, "mem_28002")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t iterations_28070 = (int64_t) 4;
    struct futhark_mc_task_33526 futhark_mc_task_33526_;
    
    futhark_mc_task_33526_.ctx = ctx;
    futhark_mc_task_33526_.free_triplayer7_11231 = triplayer7_11231;
    futhark_mc_task_33526_.free_mem_26857 = mem_26857.mem;
    futhark_mc_task_33526_.free_mem_28002 = mem_28002.mem;
    
    struct scheduler_segop futhark_mc_task_33526_task;
    
    futhark_mc_task_33526_task.args = &futhark_mc_task_33526_;
    futhark_mc_task_33526_task.top_level_fn = futhark_mc_copy_28069_task_33527;
    futhark_mc_task_33526_task.name = "futhark_mc_copy_28069_task_33527";
    futhark_mc_task_33526_task.iterations = iterations_28070;
    futhark_mc_task_33526_task.task_time = &ctx->program->futhark_mc_copy_28069_task_33527_total_time;
    futhark_mc_task_33526_task.task_iter = &ctx->program->futhark_mc_copy_28069_task_33527_total_iter;
    futhark_mc_task_33526_task.sched = STATIC;
    futhark_mc_task_33526_task.nested_fn = NULL;
    
    int futhark_mc_copy_28069_task_33527_err = scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_33526_task);
    
    if (futhark_mc_copy_28069_task_33527_err != 0) {
        if (memblock_unref(ctx, &mem_28002, "mem_28002") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27999, "mem_27999") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27996, "mem_27996") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27993, "mem_27993") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27990, "mem_27990") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27987, "mem_27987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28009, "mem_out_28009") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28008, "mem_out_28008") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28007, "mem_out_28007") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28006, "mem_out_28006") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28005, "mem_out_28005") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28004, "mem_out_28004") != 0)
            return 1;
        ;
        err = futhark_mc_copy_28069_task_33527_err;
        goto cleanup;
    }
    if (memblock_set(ctx, &mem_out_28004, &mem_27987, "mem_27987") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_28005, &mem_27990, "mem_27990") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_28006, &mem_27993, "mem_27993") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_28007, &mem_27996, "mem_27996") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_28008, &mem_27999, "mem_27999") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_28009, &mem_28002, "mem_28002") != 0)
        return 1;
    prim_out_28010 = main_res_10740;
    if (memblock_set(ctx, &*mem_out_p_33499, &mem_out_28004, "mem_out_28004") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_33500, &mem_out_28005, "mem_out_28005") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_33501, &mem_out_28006, "mem_out_28006") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_33502, &mem_out_28007, "mem_out_28007") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_33503, &mem_out_28008, "mem_out_28008") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_33504, &mem_out_28009, "mem_out_28009") != 0)
        return 1;
    *out_prim_out_33505 = prim_out_28010;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_28002, "mem_28002") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27999, "mem_27999") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27996, "mem_27996") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27993, "mem_27993") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27990, "mem_27990") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_27987, "mem_27987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28009, "mem_out_28009") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28008, "mem_out_28008") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28007, "mem_out_28007") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28006, "mem_out_28006") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28005, "mem_out_28005") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_28004, "mem_out_28004") != 0)
            return 1;
    }
    return err;
}

int futhark_entry_main(struct futhark_context *ctx, bool *out0, struct futhark_u8_1d **out1, struct futhark_u8_1d **out2, struct futhark_u8_1d **out3, struct futhark_u8_1d **out4, struct futhark_u8_1d **out5, struct futhark_u8_1d **out6)
{
    bool prim_out_28010;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    
    struct memblock mem_out_28009;
    
    mem_out_28009.references = NULL;
    
    struct memblock mem_out_28008;
    
    mem_out_28008.references = NULL;
    
    struct memblock mem_out_28007;
    
    mem_out_28007.references = NULL;
    
    struct memblock mem_out_28006;
    
    mem_out_28006.references = NULL;
    
    struct memblock mem_out_28005;
    
    mem_out_28005.references = NULL;
    
    struct memblock mem_out_28004;
    
    mem_out_28004.references = NULL;
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_28004, &mem_out_28005, &mem_out_28006, &mem_out_28007, &mem_out_28008, &mem_out_28009, &prim_out_28010);
        if (ret == 0) {
            bool main_res_10740 = ctx->constants->main_res_10740;
            struct memblock mem_26857 = ctx->constants->mem_26857;
            int64_t triplayer2_11201 = ctx->constants->triplayer2_11201;
            int64_t triplayer3_11207 = ctx->constants->triplayer3_11207;
            int64_t triplayer4_11213 = ctx->constants->triplayer4_11213;
            int64_t triplayer5_11219 = ctx->constants->triplayer5_11219;
            int64_t triplayer6_11225 = ctx->constants->triplayer6_11225;
            int64_t triplayer7_11231 = ctx->constants->triplayer7_11231;
            
            *out0 = prim_out_28010;
            assert((*out1 = (struct futhark_u8_1d *) malloc(sizeof(struct futhark_u8_1d))) != NULL);
            (*out1)->mem = mem_out_28004;
            (*out1)->shape[0] = (int64_t) 4;
            assert((*out2 = (struct futhark_u8_1d *) malloc(sizeof(struct futhark_u8_1d))) != NULL);
            (*out2)->mem = mem_out_28005;
            (*out2)->shape[0] = (int64_t) 4;
            assert((*out3 = (struct futhark_u8_1d *) malloc(sizeof(struct futhark_u8_1d))) != NULL);
            (*out3)->mem = mem_out_28006;
            (*out3)->shape[0] = (int64_t) 4;
            assert((*out4 = (struct futhark_u8_1d *) malloc(sizeof(struct futhark_u8_1d))) != NULL);
            (*out4)->mem = mem_out_28007;
            (*out4)->shape[0] = (int64_t) 4;
            assert((*out5 = (struct futhark_u8_1d *) malloc(sizeof(struct futhark_u8_1d))) != NULL);
            (*out5)->mem = mem_out_28008;
            (*out5)->shape[0] = (int64_t) 4;
            assert((*out6 = (struct futhark_u8_1d *) malloc(sizeof(struct futhark_u8_1d))) != NULL);
            (*out6)->mem = mem_out_28009;
            (*out6)->shape[0] = (int64_t) 4;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
